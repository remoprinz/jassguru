"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4231],{40565:(e,t,r)=>{r.d(t,{A:()=>I});var n=r(14232),a=r(89099),o=r(27788),i=r(94566),s=r(54587),l=r.n(s),c=r(50679),u=r(97154),f=r(68124),m=r(99468),d=r(65828),p=r(53551),h=r(37876);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=["className","inset","children"],g=["className"],y=["className","sideOffset"],b=["className","inset"],w=["className","children","checked"],j=["className","children"],N=["className","inset"],S=["className"];function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){var n,a,o;n=e,a=t,o=r[t],(a=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var L=u.bL,E=u.l9;u.YJ,u.ZL,u.Pb,u.z6,n.forwardRef(function(e,t){var r=e.className,n=e.inset,a=e.children,o=O(e,x);return(0,h.jsxs)(u.ZP,k(k({ref:t,className:(0,p.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",r)},o),{},{children:[a,(0,h.jsx)(f.A,{className:"ml-auto"})]}))}).displayName=u.ZP.displayName,n.forwardRef(function(e,t){var r=e.className,n=O(e,g);return(0,h.jsx)(u.G5,k({ref:t,className:(0,p.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r)},n))}).displayName=u.G5.displayName;var A=n.forwardRef(function(e,t){var r=e.className,n=e.sideOffset,a=O(e,y);return(0,h.jsx)(u.ZL,{children:(0,h.jsx)(u.UC,k({ref:t,sideOffset:void 0===n?4:n,className:(0,p.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r)},a))})});A.displayName=u.UC.displayName;var P=n.forwardRef(function(e,t){var r=e.className,n=e.inset,a=O(e,b);return(0,h.jsx)(u.q7,k({ref:t,className:(0,p.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",r)},a))});P.displayName=u.q7.displayName,n.forwardRef(function(e,t){var r=e.className,n=e.children,a=e.checked,o=O(e,w);return(0,h.jsxs)(u.H_,k(k({ref:t,className:(0,p.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:a},o),{},{children:[(0,h.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,h.jsx)(u.VF,{children:(0,h.jsx)(m.A,{className:"h-4 w-4"})})}),n]}))}).displayName=u.H_.displayName,n.forwardRef(function(e,t){var r=e.className,n=e.children,a=O(e,j);return(0,h.jsxs)(u.hN,k(k({ref:t,className:(0,p.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},a),{},{children:[(0,h.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,h.jsx)(u.VF,{children:(0,h.jsx)(d.A,{className:"h-2 w-2 fill-current"})})}),n]}))}).displayName=u.hN.displayName;var D=n.forwardRef(function(e,t){var r=e.className,n=e.inset,a=O(e,N);return(0,h.jsx)(u.JU,k({ref:t,className:(0,p.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r)},a))});D.displayName=u.JU.displayName;var _=n.forwardRef(function(e,t){var r=e.className,n=O(e,S);return(0,h.jsx)(u.wv,k({ref:t,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",r)},n))});function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(){z=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,o){var i,s,l,c,u=Object.create((r&&r.prototype instanceof v?r:v).prototype);return a(u,"_invoke",{value:(i=t,s=n,l=new O(o||[]),c=m,function(t,r){if(c===d)throw Error("Generator is already running");if(c===p){if("throw"===t)throw r;return{value:e,done:!0}}for(l.method=t,l.arg=r;;){var n=l.delegate;if(n){var a=function t(r,n){var a=n.method,o=r.iterator[a];if(o===e)return n.delegate=null,"throw"===a&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+a+"' method")),h;var i=f(o,r.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var s=i.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,h)}(n,l);if(a){if(a===h)continue;return a}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===m)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=d;var o=f(i,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var m="suspendedStart",d="executing",p="completed",h={};function v(){}function x(){}function g(){}var y={};c(y,i,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(L([])));w&&w!==r&&n.call(w,i)&&(y=w);var j=g.prototype=v.prototype=Object.create(y);function N(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;a(this,"_invoke",{value:function(a,o){function i(){return new t(function(r,i){!function r(a,o,i,s){var l=f(e[a],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==C(u)&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,i,s)},function(e){r("throw",e,i,s)}):t.resolve(u).then(function(e){c.value=e,i(c)},function(e){return r("throw",e,i,s)})}s(l.arg)}(a,o,r,i)})}return r=r?r.then(i,i):i()}})}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw TypeError(C(t)+" is not iterable")}return x.prototype=g,a(j,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:x,configurable:!0}),x.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},N(S.prototype),c(S.prototype,s,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new S(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},N(j),c(j,l,"Generator"),c(j,i,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function G(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}_.displayName=u.wv.displayName;let I=function(){var e,t,r,n,s,u=(0,o.useAuthStore)(),f=u.user,m=u.isGuest,d=u.logout,p=(0,a.useRouter)(),v=(0,i.useUIStore)(function(e){return e.headerConfig}),x=null==v?void 0:v.title,g=null!=(t=null==v?void 0:v.showBackButton)&&t,y=null!=(r=null==v?void 0:v.backButtonAction)?r:function(){"/auth/login"===p.pathname||"/auth/register"===p.pathname||"/auth/reset-password"===p.pathname?f?p.push("/start"):p.push("/"):p.back()},b=null==(n=null==v?void 0:v.showProfileButton)||n,w=x||g||b;return"/"===p.pathname||"/join"===p.pathname||p.pathname.startsWith("/view/")||p.pathname.startsWith("/profile/")&&"/profile"!==p.pathname&&"/profile/edit"!==p.pathname&&"/profile/groups"!==p.pathname||!w?null:(0,h.jsx)("header",{className:"sticky top-0 z-10 w-full bg-gray-800 shadow-md pt-12 pb-2 max-w-3xl mx-auto",children:(0,h.jsxs)("div",{className:"w-full flex items-center justify-between px-4",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[g&&(0,h.jsx)("button",{onClick:y,className:"mr-2 flex h-10 w-10 items-center justify-center rounded-full text-gray-300 hover:bg-gray-700 transition-colors","aria-label":"Zur\xfcck",children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),x&&(0,h.jsx)("h1",{className:"text-xl font-bold text-white",children:x})]}),b&&!m?(0,h.jsxs)(L,{children:[(0,h.jsx)(E,{asChild:!0,children:(0,h.jsxs)("div",{className:"flex cursor-pointer items-center",children:[(0,h.jsxs)("div",{className:"mr-3 text-right",children:[(0,h.jsx)("span",{className:"block text-sm font-medium text-white",children:(null==f?void 0:f.displayName)||"Profil"}),(0,h.jsx)("span",{className:"block text-xs text-gray-400",children:(null==f?void 0:f.email)||""})]}),(0,h.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full bg-gray-700",children:null!=f&&f.photoURL?(0,h.jsx)(l(),{src:f.photoURL,alt:"Profilbild",width:40,height:40,className:"h-full w-full object-cover"}):(0,h.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-blue-600 text-white",children:null!=f&&f.displayName?(0,h.jsx)("span",{className:"text-base font-semibold",children:null==(s=f.displayName[0])?void 0:s.toUpperCase()}):(0,h.jsx)(c.x$1,{className:"h-5 w-5 text-gray-300"})})})]})}),(0,h.jsxs)(A,{className:"w-56 mr-2 bg-gray-700 border-gray-600 text-white",align:"end",children:[(0,h.jsx)(D,{className:"text-gray-400",children:"Mein Konto"}),(0,h.jsx)(_,{className:"bg-gray-600"}),(0,h.jsx)(P,{onClick:function(){return p.push("/profile")},className:"cursor-pointer hover:bg-gray-600 focus:bg-gray-600",children:"Profil"}),(0,h.jsx)(P,{onClick:function(){return p.push("/profile/groups")},className:"cursor-pointer hover:bg-gray-600 focus:bg-gray-600",children:"Meine Gruppen"}),(0,h.jsx)(_,{className:"bg-gray-600"}),(0,h.jsx)(P,{onClick:(e=z().mark(function e(){return z().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\uD83D\uDEAA [Header] Logout-Prozess gestartet..."),e.next=1,d();case 1:console.log("\uD83D\uDEAA [Header] Logout erfolgreich, navigiere zur WelcomeScreen..."),setTimeout(function(){"/"!==p.pathname&&(console.log("\uD83D\uDEAA [Header] Erzwinge Navigation zur WelcomeScreen..."),p.push("/"))},300),e.next=3;break;case 2:e.prev=2,console.error("\uD83D\uDEAA [Header] Logout-Fehler:",e.catch(0)),p.push("/");case 3:case"end":return e.stop()}},e,null,[[0,2]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){G(o,n,a,i,s,"next",e)}function s(e){G(o,n,a,i,s,"throw",e)}i(void 0)})}),className:"cursor-pointer text-red-400 hover:bg-red-900/50 focus:bg-red-900/50",children:"Abmelden"})]})]}):b&&m?(0,h.jsxs)("div",{className:"flex cursor-pointer items-center",onClick:function(){m&&p.push("/auth/login")},children:[(0,h.jsxs)("div",{className:"mr-3 text-right",children:[(0,h.jsx)("span",{className:"block text-sm font-medium text-white",children:"Gast"}),(0,h.jsx)("span",{className:"block text-xs text-gray-400",children:"Anmelden"})]}),(0,h.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full bg-gray-700",children:(0,h.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-gray-600 text-white",children:(0,h.jsx)(c.x$1,{className:"h-5 w-5 text-gray-300"})})})]}):(0,h.jsx)("div",{style:{width:"40px"}})]})})}},74231:(e,t,r)=>{r.d(t,{A:()=>T});var n=r(14232),a=r(14e3),o=r(27788),i=r(94566),s=r(83872),l=r(37537),c=r(17436),u=r(33615),f=r(37312),m=r(74473),d=r(3292),p=r(48230),h=r.n(p),v=r(89099),x=r(53551),g=r(48101),y=r(42009),b=r(37876);function w(){var e,t=(0,v.useRouter)().pathname,r=(0,o.useAuthStore)(),a=r.isGuest,i=r.user,s=(0,g.yu)(),l=s.userActiveTournamentId,p=s.userTournamentInstances,w=s.loadUserTournamentInstances,j=s.status;(0,n.useEffect)(function(){i&&i.uid&&"idle"===j&&0===p.length&&w(i.uid)},[i,j,w,p.length]);var N=[{name:"Home",href:"/start",icon:c.A,active:"/start"===t,itemTournamentStatus:null},{name:"Profil",href:"/profile",icon:u.A,active:t.startsWith("/profile"),itemTournamentStatus:null},{name:"Jass-Wiki",href:"/wissen",icon:f.A,active:t.startsWith("/wissen"),itemTournamentStatus:null}],S=(0,n.useMemo)(function(){if(p&&p.length>0){var e=new Date;e.setDate(e.getDate()-7);var t=p.filter(function(t){return"active"===t.status||"upcoming"===t.status||"completed"===t.status&&(t.completedAt instanceof y.Timestamp?t.completedAt.toDate():new Date("number"==typeof t.completedAt?t.completedAt:0))>=e}).sort(function(e,t){if("active"===e.status&&"active"!==t.status)return -1;if("active"===t.status&&"active"!==e.status)return 1;if("active"===e.status&&"active"===t.status)return(e.instanceDate instanceof y.Timestamp?e.instanceDate.toMillis():"number"==typeof e.instanceDate?e.instanceDate:1/0)-(t.instanceDate instanceof y.Timestamp?t.instanceDate.toMillis():"number"==typeof t.instanceDate?t.instanceDate:1/0);if("upcoming"===e.status&&"upcoming"!==t.status)return -1;if("upcoming"===t.status&&"upcoming"!==e.status)return 1;if("upcoming"===e.status&&"upcoming"===t.status)return(e.instanceDate instanceof y.Timestamp?e.instanceDate.toMillis():"number"==typeof e.instanceDate?e.instanceDate:1/0)-(t.instanceDate instanceof y.Timestamp?t.instanceDate.toMillis():"number"==typeof t.instanceDate?t.instanceDate:1/0);if("completed"===e.status&&"completed"===t.status){var r=e.completedAt instanceof y.Timestamp?e.completedAt.toMillis():"number"==typeof e.completedAt?e.completedAt:0;return(t.completedAt instanceof y.Timestamp?t.completedAt.toMillis():"number"==typeof t.completedAt?t.completedAt:0)-r}return 0});if(t.length>0)return t[0]}if(l&&(!p||0===p.length)){var r=p.find(function(e){return e.id===l});return r||{id:l,status:"active",name:"Turnier"}}return null},[l,p]);if(S){var T={name:"Turnier",href:"/view/tournament/".concat(S.id),icon:m.A,active:t.startsWith("/view/tournament/".concat(S.id)),itemTournamentStatus:S.status};e=[N[0],T,N[1],N[2]]}else{var k={name:"Info",href:"/features",icon:d.A,active:"/features"===t,itemTournamentStatus:null};e=[N[0],N[1],N[2],k]}return a||t.startsWith("/jass")||"/"===t||"/join"===t||t.startsWith("/auth/")?null:(0,b.jsx)("nav",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 z-50 bg-gray-900 border-t border-gray-800 h-24 max-w-3xl w-full",children:(0,b.jsx)("div",{className:"w-full flex justify-around items-center h-full px-4 pb-safe pb-8",children:e.map(function(e){return e.external?(0,b.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:(0,x.cn)("flex flex-col items-center justify-center w-full h-full space-y-1","text-sm font-medium transition-colors","text-gray-400 hover:text-gray-300"),children:[(0,b.jsx)(e.icon,{size:24,className:(0,x.cn)("active"===e.itemTournamentStatus?"text-green-400":"upcoming"===e.itemTournamentStatus?"text-yellow-500":"completed"===e.itemTournamentStatus?"text-purple-400":"")}),(0,b.jsx)("span",{className:"text-xs",children:e.name})]},e.name):(0,b.jsxs)(h(),{href:e.href,className:(0,x.cn)("flex flex-col items-center justify-center w-full h-full space-y-1","text-sm font-medium transition-colors",e.active&&"active"===e.itemTournamentStatus?"text-green-400":e.active&&"upcoming"===e.itemTournamentStatus?"text-yellow-500":e.active&&"completed"===e.itemTournamentStatus?"text-purple-400":e.active?"text-blue-400":"text-gray-400 hover:text-gray-300"),children:[(0,b.jsx)(e.icon,{size:24,className:(0,x.cn)("Turnier"===e.name&&"active"===e.itemTournamentStatus?"text-green-400":"Turnier"===e.name&&"upcoming"===e.itemTournamentStatus?"text-yellow-500":"Turnier"===e.name&&"completed"===e.itemTournamentStatus?"text-purple-400":e.active&&null===e.itemTournamentStatus?"text-blue-400":"text-gray-400")}),(0,b.jsx)("span",{className:(0,x.cn)("text-xs","Turnier"===e.name&&"active"===e.itemTournamentStatus?"text-green-400":"Turnier"===e.name&&"upcoming"===e.itemTournamentStatus?"text-yellow-500":"Turnier"===e.name&&"completed"===e.itemTournamentStatus?"text-purple-400":e.active&&null===e.itemTournamentStatus||e.active?"text-blue-400":"text-gray-400"),children:e.name})]},e.name)})})})}var j=r(40565),N=r(11996),S=r(59688);let T=function(e){var t=e.children,r=(0,a.usePathname)(),c=(0,o.useAuthStore)(),u=c.isAuthenticated,f=c.isGuest,m=(0,i.useUIStore)(function(e){return e.pageCta}),d=m.isVisible,p=m.text,h=m.onClick,v=m.loading,x=m.disabled,g=m.variant,y=(0,i.useUIStore)(function(e){return e.setHeaderConfig}),T=(0,s.useJassStore)(function(e){return e.jassSessionId}),k=(0,s.useJassStore)(function(e){return e.subscribeToSession}),O=(0,s.useJassStore)(function(e){return e.sessionUnsubscribe}),L=n.useRef(null);(0,n.useEffect)(function(){return T!==L.current&&(L.current=T,T?k(T):O&&(console.log("[MainLayout EFFECT] jassSessionId is null. Unsubscribing from session listener."),O())),function(){O&&O()}},[T,k,O]),(0,n.useEffect)(function(){"/"!==r&&y({showProfileButton:!0,showBackButton:!1,title:""})},[r,y]);var E=u()&&!f,A=d?"pb-44":E?"pb-24":"pb-0";return(0,b.jsxs)("div",{className:"flex flex-col h-full bg-gray-900 max-w-3xl lg:max-w-none mx-auto",children:[(0,b.jsx)(j.A,{}),(0,b.jsx)("main",{className:"flex-1 relative overflow-y-auto ".concat(A),children:(0,b.jsx)("div",{className:"w-full max-w-3xl mx-auto px-4 lg:px-0",children:t})}),d&&(0,b.jsx)("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-40 px-4 pb-4 pt-2 bg-gradient-to-t from-gray-900 via-gray-900/90 to-transparent backdrop-blur-sm max-w-3xl w-full",children:(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)(l.$,{onClick:null!=h?h:void 0,disabled:x||v,className:"w-full h-14 text-lg font-bold rounded-xl shadow-lg transition-colors ".concat("info"===g?"bg-blue-600 hover:bg-blue-700 border-b-4 border-blue-900 text-white":"warning"===g?"bg-yellow-600 hover:bg-yellow-700 border-b-4 border-yellow-900 text-white":"purple"===g?"bg-purple-600 hover:bg-purple-700 border-b-4 border-purple-900 text-white":"bg-green-600 hover:bg-green-700 border-b-4 border-green-900 text-white"),children:v?"L\xe4dt...":p})})}),E&&(0,b.jsx)(w,{}),(0,b.jsx)(N.A,{}),(0,b.jsx)(S.l$,{position:"bottom-center",richColors:!0})]})}}}]);