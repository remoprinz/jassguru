(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2894],{900:(e,t,n)=>{"use strict";n.d(t,{j:()=>c});var r=n(88880),a=n(54573),s=["Eicheln","Rosen","Schellen","Schilten"],i={Misère:"\uD83E\uDD2E",Eicheln:"\uD83C\uDF33",Rosen:"\uD83C\uDF39",Schellen:"\uD83D\uDD14",Schilten:"\uD83D\uDEE1️",Obe:"\uD83D\uDC47",Une:"\uD83D\uDC47","3x3":"3️⃣",Quer:"↕️",Slalom:"⛷️"},o={Misère:"\uD83E\uDD2E",Eicheln:"♠️",Rosen:"♣️",Schellen:"♥️",Schilten:"♦️",Obe:"\uD83D\uDC46",Une:"\uD83D\uDC47","3x3":"3️⃣",Quer:"↕️",Slalom:"⛷️"},l={},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DE",c=(0,a.Sn)(e),u="".concat(c,"-").concat(t,"-").concat(n);if(l[u])return l[u];if("emoji"===t){var d="DE"===n?i:o;return l[u]=d[e],l[u]}var f=r.S[c];if(void 0===f||void 0===f[n])return console.warn("getPictogram: Mapping f\xfcr Farbe '".concat(c,"' (Original: '").concat(e,"') oder Stil '").concat(n,"' nicht gefunden. Gebe leeren Pfad zur\xfcck.")),l[u]="","";var m=f[n].toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,""),h="FR"===n?"standardFR":"standardDE",y="/assets/pictograms/".concat(h,"/").concat(m,".").concat(s.includes(c)?"png":"svg");return l[u]=y,y}},6284:(e,t,n)=>{"use strict";n.d(t,{h:()=>o}),n(14232);var r=n(900),a=n(54573),s=n(88880),i=n(37876),o=function(e){var t,n,o=e.farbe,l=e.mode,c=void 0===l?"svg":l,u=e.cardStyle,d=void 0===u?"DE":u,f=e.className,m=(0,r.j)(o,c,d),h=(0,a.Sn)(o),y=null!=(t=null==(n=s.S[h])?void 0:n[d])?t:h;return m?(0,i.jsx)("div",{className:"flex items-center justify-center w-8 h-8 ".concat(null!=f?f:""),children:"emoji"===c?(0,i.jsx)("span",{className:"text-2xl",children:m}):(0,i.jsx)("img",{src:m,alt:y,className:"w-6 h-6 object-contain"})}):null}},6408:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(14232),a=n(89099),s=n(48101),i=n(27788),o=n(74231),l=n(48166),c=n(15323),u=n(37537),d=n(23803),f=n(41877),m=n(38791),h=n(42471),y=n(42009),p=n(85253),g=n(37876);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e,t){if(!e)return null;var n,r=t||{scoreSettings:m.$d,strokeSettings:h.zh},a={1:"",2:"",3:"",4:""},s={1:null,2:null,3:null,4:null};return e.playerDetails.forEach(function(e){a[e.seat]=e.playerName,s[e.seat]={userId:e.playerId,displayName:e.playerName}}),{games:[{id:e.passeId,gameNumber:e.passeNumber,teams:{top:{striche:e.teamStrichePasse.top,jassPoints:e.teamScoresPasse.top-e.playerDetails.filter(function(e){return"top"===e.team}).reduce(function(e,t){return e+(t.weisInPasse||0)},0),weisPoints:e.playerDetails.filter(function(e){return"top"===e.team}).reduce(function(e,t){return e+(t.weisInPasse||0)},0),total:e.teamScoresPasse.top,playerStats:{1:null,2:null,3:null,4:null},bergActive:!1,bedankenActive:!1,isSigned:!1},bottom:{striche:e.teamStrichePasse.bottom,jassPoints:e.teamScoresPasse.bottom-e.playerDetails.filter(function(e){return"bottom"===e.team}).reduce(function(e,t){return e+(t.weisInPasse||0)},0),weisPoints:e.playerDetails.filter(function(e){return"bottom"===e.team}).reduce(function(e,t){return e+(t.weisInPasse||0)},0),total:e.teamScoresPasse.bottom,playerStats:{1:null,2:null,3:null,4:null},bergActive:!1,bedankenActive:!1,isSigned:!1}},timestamp:e.startedAt instanceof y.Timestamp?e.startedAt.toMillis():Date.now(),sessionId:e.tournamentInstanceId,currentRound:e.roundHistory?e.roundHistory.length+1:1,startingPlayer:e.startingPlayer,initialStartingPlayer:e.startingPlayer,currentPlayer:e.startingPlayer,roundHistory:null!=(n=e.roundHistory)?n:[],currentHistoryIndex:e.roundHistory?e.roundHistory.length-1:-1,historyState:{lastNavigationTimestamp:Date.now()},isGameStarted:!0,isRoundCompleted:!0,isGameCompleted:!0,scoreSettings:r.scoreSettings,strokeSettings:r.strokeSettings}],playerNames:a,currentScores:e.teamScoresPasse,currentStriche:e.teamStrichePasse,weisPoints:{top:e.playerDetails.filter(function(e){return"top"===e.team}).reduce(function(e,t){return e+(t.weisInPasse||0)},0),bottom:e.playerDetails.filter(function(e){return"bottom"===e.team}).reduce(function(e,t){return e+(t.weisInPasse||0)},0)},scoreSettings:r.scoreSettings,strokeSettings:r.strokeSettings}};let b=function(){var e,t,n=(0,a.useRouter)(),m="string"==typeof n.query.instanceId?n.query.instanceId:void 0,h="string"==typeof n.query.passeId?n.query.passeId:void 0;(0,i.useAuthStore)().user;var y=(0,s.yu)(function(e){return e.fetchTournamentInstanceDetails}),b=(0,s.yu)(function(e){return e.fetchTournamentGameById}),x=(0,s.yu)(function(e){return e.currentTournamentInstance}),j=(0,s.yu)(function(e){return e.currentViewingPasse}),w=(0,s.yu)(function(e){return e.detailsStatus}),P=(0,s.yu)(function(e){return e.passeDetailsStatus}),A=(0,s.yu)(function(e){return e.error}),N=function(e){if(Array.isArray(e))return e}(e=(0,r.useState)(null))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{s=(n=n.call(e)).next,!1;for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return v(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),I=N[0],D=N[1];(0,r.useEffect)(function(){n.isReady&&m&&(x||(console.log("[PasseDetailPage] Fetching tournament details for instance: ".concat(m)),y(m)))},[n.isReady,m,x,y]),(0,r.useEffect)(function(){n.isReady&&m&&h&&(j&&j.passeId===h||"loading"===P||(console.log("[PasseDetailPage修正] Fetching passe details for: ".concat(h," in tournament ").concat(m,". CurrentPasseId: ").concat(null==j?void 0:j.passeId)),b(m,h)))},[n.isReady,m,h,null==j?void 0:j.passeId,b,P]),(0,r.useEffect)(function(){n.isReady&&(j&&x&&x.settings?D(S(j,x.settings)):D(null))},[n.isReady,j,x]);var k=function(){m?n.push("/view/tournament/".concat(m)):n.push("/tournaments")};return"loading"===w||"loading"===P?(0,g.jsx)(c.A,{text:"Lade Passen-Details..."}):A&&("error"===w||"error"===P)?(0,g.jsx)(o.A,{children:(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[(0,g.jsx)(d.A,{className:"w-16 h-16 text-red-500 mb-4"}),(0,g.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Fehler beim Laden"}),(0,g.jsx)("p",{className:"text-red-400 text-center mb-6",children:A}),(0,g.jsxs)(u.$,{onClick:k,variant:"outline",children:[(0,g.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Zur\xfcck zur Turnier\xfcbersicht"]})]})}):j&&I?(I.playerNames,(null==x||null==(t=x.settings)||null==(t=t.farbeSettings)?void 0:t.cardStyle)||p.FT.cardStyle,(0,g.jsx)(o.A,{children:(0,g.jsxs)("div",{className:"pb-4 h-screen flex flex-col",children:[(0,g.jsx)("div",{className:"p-3 flex-shrink-0",children:(0,g.jsx)(u.$,{variant:"ghost",size:"icon",onClick:k,className:"bg-gray-800/50 hover:bg-gray-700/80 text-white rounded-full",children:(0,g.jsx)(f.A,{className:"h-5 w-5"})})}),(0,g.jsxs)("div",{className:"flex-shrink-0 px-4 md:px-0",children:[" ",(0,g.jsx)(l.A,{gameData:I,gameTypeLabel:"Passe"})]})]})})):(0,g.jsx)(o.A,{children:(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[(0,g.jsx)(d.A,{className:"w-16 h-16 text-yellow-500 mb-4"}),(0,g.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Passen-Details nicht gefunden"}),(0,g.jsx)("p",{className:"text-yellow-300 text-center mb-6",children:"Die Details f\xfcr diese Passe konnten nicht geladen werden oder die Passe existiert nicht."}),(0,g.jsxs)(u.$,{onClick:k,variant:"outline",children:[(0,g.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Zur\xfcck zur Turnier\xfcbersicht"]})]})})}},23803:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r=(0,n(11037).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},33615:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r=(0,n(11037).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},54573:(e,t,n)=>{"use strict";n.d(t,{SS:()=>l,Sn:()=>a,Yq:()=>i,Yz:()=>c,a3:()=>o,xW:()=>s});var r=n(42009);function a(e){return e?e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function i(e){var t;if(!e)return"-";if(e instanceof Date)t=e;else{if(!e||"number"!=typeof e.seconds)return"-";t=new r.Timestamp(e.seconds,e.nanoseconds).toDate()}return t.toLocaleDateString("de-CH")}function o(e){if(e<60)return"".concat(e,"s");var t=Math.floor(e/60),n=e%60;if(t<60)return n>0?"".concat(t,"m ").concat(n,"s"):"".concat(t,"m");var r=Math.floor(t/60),a=t%60;if(r<24)return a>0?"".concat(r,"h ").concat(a,"m"):"".concat(r,"h");var s=Math.floor(r/24),i=r%24;return i>0?"".concat(s,"d ").concat(i,"h"):"".concat(s,"d")}function l(e){return o(Math.floor(e/1e3))}function c(e){var t=e/60;return t<30?"blitz_schnell":t<75?"schnell":t<150?"normal":t<240?"gem\xfctlich":"marathon"}},68774:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(14232);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,o=[],l=!0,c=!1;try{s=(n=n.call(e)).next,!1;for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(t,2)||function(e,t){if(e){if("string"==typeof e)return a(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=n[0],i=n[1],o=(0,r.useRef)(0),l=function(e){i(!0)},c=function(t){i(!1);var n=Date.now();n-o.current<50||(o.current=n,e())};return{isPressedDown:s,handlers:{onMouseDown:l,onMouseUp:c,onMouseLeave:function(){return i(!1)},onTouchStart:l,onTouchEnd:c},buttonClasses:"\n      transition-all duration-100\n      ".concat(s?"scale-95 opacity-80":"scale-100 opacity-100","\n    ")}}},69928:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tournaments/[instanceId]/passe/[passeId]",function(){return n(6408)}])}},e=>{e.O(0,[7141,2366,8230,4587,9517,4455,3546,9732,6738,4264,4231,3219,8166,636,6593,8792],()=>e(e.s=69928)),_N_E=e.O()}]);