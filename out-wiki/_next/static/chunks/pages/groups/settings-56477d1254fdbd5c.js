(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1072],{56209:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>f,TN:()=>p});var n=r(14232),a=r(47137),s=r(53551),i=r(37876);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["className","variant"],o=["className"],u=["className"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){var n,a,s;n=e,a=t,s=r[t],(a=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(a))in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var m=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),f=n.forwardRef(function(e,t){var r=e.className,n=e.variant,a=g(e,c);return(0,i.jsx)("div",h({ref:t,role:"alert",className:(0,s.cn)(m({variant:n}),r)},a))});f.displayName="Alert",n.forwardRef(function(e,t){var r=e.className,n=g(e,o);return(0,i.jsx)("h5",h({ref:t,className:(0,s.cn)("mb-1 font-medium leading-none tracking-tight",r)},n))}).displayName="AlertTitle";var p=n.forwardRef(function(e,t){var r=e.className,n=g(e,u);return(0,i.jsx)("div",h({ref:t,className:(0,s.cn)("text-sm [&_p]:leading-relaxed",r)},n))});p.displayName="AlertDescription"},56382:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>er});var n=r(14232),a=r(89099),s=r(48230),i=r.n(s),l=r(2855),c=r(41877),o=r(51689),u=r(43050),d=r(95014),h=r(23420),g=r(27284),m=r(23803),f=r(98861),p=r(88975),x=r(52896),b=r(59537),y=r(27788),v=r(31931),j=r(94566),N=r(74231),w=r(37537),k=r(80027),S=r(10331),O=r(56209),E=r(55897),F=r(66343),L=r(37746),A=r(72294),P=r(66534),M=r(15424),z=r(25666),T=r(28443),G=r(6284),C=r(31225),Z=r(85253),J=r(38791),B=r(42471),I=r(88880),_=r(54573),D=r(97765),R=r(8365),W=r(20869),$=r(37876);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach(function(t){X(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function X(e,t,r){var n;return(n=function(e,t){if("object"!=U(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==U(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(){q=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,r){return e[t]=r}}function u(t,r,n,s){var i,l,c,o,u=Object.create((r&&r.prototype instanceof p?r:p).prototype);return a(u,"_invoke",{value:(i=t,l=n,c=new E(s||[]),o=h,function(t,r){if(o===g)throw Error("Generator is already running");if(o===m){if("throw"===t)throw r;return{value:e,done:!0}}for(c.method=t,c.arg=r;;){var n=c.delegate;if(n){var a=function t(r,n){var a=n.method,s=r.iterator[a];if(s===e)return n.delegate=null,"throw"===a&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+a+"' method")),f;var i=d(s,r.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var l=i.arg;return l?l.done?(n[r.resultName]=l.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):l:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,f)}(n,c);if(a){if(a===f)continue;return a}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(o===h)throw o=m,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);o=g;var s=d(i,l,c);if("normal"===s.type){if(o=c.done?m:"suspendedYield",s.arg===f)continue;return{value:s.arg,done:c.done}}"throw"===s.type&&(o=m,c.method="throw",c.arg=s.arg)}})}),u}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",g="executing",m="completed",f={};function p(){}function x(){}function b(){}var y={};o(y,i,function(){return this});var v=Object.getPrototypeOf,j=v&&v(v(F([])));j&&j!==r&&n.call(j,i)&&(y=j);var N=b.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var r;a(this,"_invoke",{value:function(a,s){function i(){return new t(function(r,i){!function r(a,s,i,l){var c=d(e[a],e,s);if("throw"!==c.type){var o=c.arg,u=o.value;return u&&"object"==U(u)&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,i,l)},function(e){r("throw",e,i,l)}):t.resolve(u).then(function(e){o.value=e,i(o)},function(e){return r("throw",e,i,l)})}l(c.arg)}(a,s,r,i)})}return r=r?r.then(i,i):i()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function F(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw TypeError(U(t)+" is not iterable")}return x.prototype=b,a(N,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:x,configurable:!0}),x.displayName=o(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,c,"GeneratorFunction")),e.prototype=Object.create(N),e},t.awrap=function(e){return{__await:e}},w(k.prototype),o(k.prototype,l,function(){return this}),t.AsyncIterator=k,t.async=function(e,r,n,a,s){void 0===s&&(s=Promise);var i=new k(u(e,r,n,a),s);return t.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},w(N),o(N,c,"Generator"),o(N,i,function(){return this}),o(N,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=F,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return l.type="throw",l.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),o=n.call(i,"finallyLoc");if(c&&o){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!o)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:F(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}function H(e,t,r,n,a,s,i){try{var l=e[s](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Q(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function i(e){H(s,n,a,i,l,"next",e)}function l(e){H(s,n,a,i,l,"throw",e)}i(void 0)})}}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,l=[],c=!0,o=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){o=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(o)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var et={sieg:{min:1e3,max:1e4,default:2e3},berg:{min:0,max:5e3,default:1e3},schneider:{min:0,max:1e4,default:1e3}};let er=function(){var e,t,r,s,U,K,H,ee,er,en=(0,y.useAuthStore)(),ea=en.user,es=en.status,ei=en.isAuthenticated,el=(0,v.Q5)(),ec=el.currentGroup,eo=el.updateGroup,eu=el.updateMemberRole,ed=(el.updateCurrentGroupScoreSettings,el.updateCurrentGroupStrokeSettings,el.updateCurrentGroupFarbeSettings,el.updateCurrentGroupJassSettings),eh=el.fetchCurrentGroup,eg=(0,j.useUIStore)(function(e){return e.showNotification}),em=(0,j.useUIStore)(function(e){return e.setPageCta}),ef=(0,j.useUIStore)(function(e){return e.resetPageCta}),ep=(0,a.useRouter)(),ex=ep.query.groupId,eb=Y((0,n.useState)(""),2),ey=eb[0],ev=eb[1],ej=Y((0,n.useState)(""),2),eN=ej[0],ew=ej[1],ek=Y((0,n.useState)(""),2),eS=ek[0],eO=ek[1],eE=Y((0,n.useState)(!0),2),eF=eE[0],eL=eE[1],eA=Y((0,n.useState)(!1),2),eP=eA[0],eM=eA[1],ez=Y((0,n.useState)(null),2),eT=ez[0],eG=ez[1],eC=Y((0,n.useState)(!1),2),eZ=eC[0],eJ=eC[1],eB=Y((0,n.useState)(null),2),eI=eB[0],e_=eB[1],eD=Y((0,n.useState)([]),2),eR=eD[0],eW=eD[1],e$=Y((0,n.useState)(!0),2),eU=e$[0],eK=e$[1],eV=Y((0,n.useState)({}),2),eX=eV[0],eq=eV[1],eH=Y((0,n.useState)(!1),2),eQ=eH[0],eY=eH[1],e0=Y((0,n.useState)(!1),2),e1=e0[0],e2=e0[1],e4=Y((0,n.useState)(J.$d),2),e5=e4[0],e3=e4[1],e6=Y((0,n.useState)(B.zh),2),e7=e6[0],e8=e6[1],e9=Y((0,n.useState)(Z.FT),2),te=e9[0],tt=e9[1],tr=Y((0,n.useState)("pink"),2),tn=tr[0],ta=tr[1],ts=Y((0,n.useState)({}),2),ti=ts[0],tl=ts[1],tc=Y((0,n.useState)({}),2),to=tc[0],tu=tc[1],td=Y((0,n.useState)({}),2),th=td[0],tg=td[1],tm=Y((0,n.useState)(!1),2),tf=tm[0],tp=tm[1],tx=Y((0,n.useState)(null),2),tb=tx[0],ty=tx[1],tv=!!(null!=ea&&ea.uid)&&!!(null!=ec&&ec.adminIds.includes(ea.uid));(0,n.useEffect)(function(){"authenticated"===es&&ex&&!ec&&"string"==typeof ex&&("/groups/settings"===ep.pathname?(console.log("[GroupSettings] Lade Gruppe ".concat(ex," automatisch aus URL")),eh(ex)):console.log("[GroupSettings] Navigation erkannt, \xfcberspringe fetchCurrentGroup"))},[es,ex,ec,eh,ep.pathname]),(0,n.useEffect)(function(){if(ex&&!ec&&"authenticated"===es){var e=setTimeout(function(){console.warn("[GroupSettings] Fallback-Timer: Gruppe ".concat(ex," konnte nicht geladen werden. Zur\xfcck zur Startseite.")),eg({message:"Gruppe konnte nicht geladen werden. Zur\xfcck zur Startseite.",type:"warning"}),ep.push("/start")},1e4);return function(){return clearTimeout(e)}}},[ex,ec,es,ep,eg]),(0,n.useEffect)(function(){if("authenticated"===es||"unauthenticated"===es)if(ei())if(!ec&&ex){if("string"==typeof ex){var e=setTimeout(function(){"/groups/settings"===ep.pathname?(console.log("[GroupSettings] Retry: Versuche Gruppe ".concat(ex," nochmals zu laden")),eh(ex)):console.log("[GroupSettings] Navigation erkannt, \xfcberspringe Retry")},3e3);return function(){return clearTimeout(e)}}}else ec||ex?ec&&!tv&&(eg({message:"Nur Admins k\xf6nnen die Gruppeneinstellungen bearbeiten.",type:"error"}),ep.push("/start")):ep.push("/start");else ep.push("/")},[es,ei,ep,ec,tv,eg,ex,eh]),(0,n.useEffect)(function(){var e,t=(e=Q(q().mark(function e(){var t,r;return q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=ec&&null!=(t=ec.playerIds)&&t.length){e.next=1;break}return eW([]),eK(!1),e.abrupt("return");case 1:return eK(!0),eG(null),e.prev=2,e.next=3,(0,P.ensurePlayersExist)(ec.playerIds,ec.id);case 3:e2((r=e.sent).some(function(e){return e._isPlaceholder})),eW(r.sort(function(e,t){return(e.displayName||"").localeCompare(t.displayName||"")})),e.next=5;break;case 4:e.prev=4,console.error("Fehler beim Laden der Mitgliederdetails:",e.catch(2)),eG("Mitgliederdetails konnten nicht geladen werden."),eg({message:"Mitglieder konnten nicht geladen werden.",type:"error"});case 5:return e.prev=5,eK(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[2,4,5,6]])})),function(){return e.apply(this,arguments)});ec?t():(eW([]),eK(!1))},[ec,eg]),(0,n.useEffect)(function(){if(ec){ev(ec.name||""),ew(ec.description||"Willkommen bei unserer Jassgruppe!");var e,t,r,n=ec.mainLocationZip||"";eO(n),e_((0,D.g)(n)),eL(null==(e=ec.isPublic)||e);var a=V(V({},J.$d),ec.scoreSettings||{}),s=null!=(t=ec.strokeSettings)?t:B.zh,i=null!=(r=ec.farbeSettings)?r:Z.FT;e3(a),e8(s),tt(i),ta(ec.theme||"pink"),tl({}),tu({}),tg({})}else ev(""),ew("Willkommen bei unserer Jassgruppe!"),eO(""),e_(null),eL(!0),e3(J.$d),e8(B.zh),tt(Z.FT),ta("pink")},[ec]);var tj=function(){var e=JSON.parse(JSON.stringify(e5)),t=JSON.parse(JSON.stringify(e7)),r=JSON.parse(JSON.stringify(te));return Object.entries(ti).forEach(function(t){var r=Y(t,2),n=r[0],a=r[1];if(null!=a){var s=parseInt(a,10);if(!isNaN(s)){var i=s<0?0:s,l=V({},e.values),c=V({},e.enabled);if("sieg"===n){var o=Math.max(et.sieg.min,Math.min(i,et.sieg.max));l.sieg=o;var u=Math.floor(o/2);c.berg&&(l.berg=Math.min(u,et.berg.max)),c.schneider&&(l.schneider=Math.min(u,et.schneider.max))}else if("berg"===n){var d=Math.max(0,Math.min(i,Math.floor(l.sieg/2),et.berg.max));l.berg=d,c.schneider&&(l.schneider=Math.min(d,et.schneider.max))}else if("schneider"===n){var h=Math.min(l.sieg,et.schneider.max);l.schneider=Math.max(0,Math.min(i,h))}e=V(V({},e),{},{values:l,enabled:c})}}}),Object.entries(to).forEach(function(e){var r=Y(e,2),n=r[0],a=r[1];if(null!=a){var s=parseInt(a,10);isNaN(s)||((s=Math.max(0,Math.min(s,2)))>0&&1!==s&&2!==s&&(s=2),t=V(V({},t),{},X({},n,s)))}}),Object.entries(th).forEach(function(e){var t=Y(e,2),n=t[0],a=t[1];if(null!=a){var s=parseInt(a,10);isNaN(s)||(s=Math.max(0,Math.min(s,12)),r=V(V({},r),{},{values:V(V({},r.values),{},X({},n,s))}))}}),tl({}),tu({}),tg({}),e3(e),e8(t),tt(r),{finalScoreSettings:e,finalStrokeSettings:t,finalFarbeSettings:r}},tN=(e=Q(q().mark(function e(){var t,r,n,a,s,i,l,c,o,u,d,h,g,m,f,p,x,b,y,v,j,N,w,k;return q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!ec||eP)){e.next=1;break}return e.abrupt("return");case 1:if(eM(!0),eG(null),c="string"==typeof ex?ex:ec.id,u=(o=tj()).finalScoreSettings,d=o.finalStrokeSettings,h=o.finalFarbeSettings,g=ey!==(ec.name||"")||eN!==(ec.description||"")||eS!==(ec.mainLocationZip||"")||eF!==(null==(t=ec.isPublic)||t),m=null!=(r=ec.scoreSettings)?r:J.$d,f=null!=(n=ec.strokeSettings)?n:B.zh,p=null!=(a=null==(s=ec.farbeSettings)?void 0:s.values)?a:Z.FT.values,x=null!=(i=null==(l=ec.farbeSettings)?void 0:l.cardStyle)?i:Z.FT.cardStyle,b=JSON.stringify(u)!==JSON.stringify(m)||JSON.stringify(d)!==JSON.stringify(f)||JSON.stringify(h.values)!==JSON.stringify(p)||h.cardStyle!==x,y=tn!==(ec.theme||"pink"),v="",!(!g&&!b&&!y)){e.next=2;break}return console.log("Keine \xc4nderungen zum Speichern."),eM(!1),eg({message:"Keine \xc4nderungen vorgenommen.",type:"info"}),e.abrupt("return");case 2:return e.prev=2,j=[],N=[],g&&(j.push(eo(c,{name:ey,description:eN,mainLocationZip:eS,isPublic:eF},!1)),N.push("Basis-Informationen")),b&&(console.log("Speichere Jass-Einstellungen..."),w={scoreSettings:JSON.parse(JSON.stringify(u)),strokeSettings:JSON.parse(JSON.stringify(d)),farbeSettingsValues:JSON.parse(JSON.stringify(h.values)),cardStyle:h.cardStyle},j.push(ed(c,w)),N.push("Jass-Einstellungen")),y&&(console.log("Speichere Gruppen-Theme..."),j.push(eo(c,{theme:tn},!1)),N.push("Gruppenfarbe")),e.next=3,Promise.all(j);case 3:eg({message:"Einstellungen erfolgreich gespeichert.",type:"success"}),e.next=5;break;case 4:e.prev=4,eG(v=(k=e.catch(2))instanceof Error?k.message:"Ein unbekannter Fehler ist aufgetreten"),eg({message:"Fehler beim Speichern: ".concat(v),type:"error"});case 5:return e.prev=5,eM(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[2,4,5,6]])})),function(){return e.apply(this,arguments)});(0,n.useEffect)(function(){if(!ec)return void ef();var e,t,r,n,a,s,i,l=ey!==(ec.name||"")||eN!==(ec.description||"")||eS!==(ec.mainLocationZip||"")||eF!==(null==(e=ec.isPublic)||e),c=null!=(t=ec.scoreSettings)?t:J.$d,o=null!=(r=ec.strokeSettings)?r:B.zh,u=null!=(n=null==(a=ec.farbeSettings)?void 0:a.values)?n:Z.FT.values,d=null!=(s=null==(i=ec.farbeSettings)?void 0:i.cardStyle)?s:Z.FT.cardStyle,h=JSON.stringify(e5)!==JSON.stringify(c)||JSON.stringify(e7)!==JSON.stringify(o)||JSON.stringify(te.values)!==JSON.stringify(u)||te.cardStyle!==d,g=Object.keys(ti).length>0||Object.keys(to).length>0||Object.keys(th).length>0,m=l||h||g||tn!==(ec.theme||"pink");return em({isVisible:!0,text:"Speichern",onClick:tN,loading:eP,disabled:eP||!m,variant:"info"}),function(){ef()}},[em,ef,eP,ey,eN,eS,eF,ec,e5,e7,te,tn,ti,to,th]);var tw=(t=Q(q().mark(function e(){var t,r,n,a,s,i;return q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ec){e.next=1;break}return e.abrupt("return");case 1:return eJ(!0),e.prev=2,t=(0,L.Uz)(void 0,"europe-west1"),r=(0,L.Qg)(t,"invalidateActiveGroupInvites"),e.next=3,r({groupId:ec.id});case 3:if(!(n=e.sent.data).success){e.next=4;break}eg({message:(s=null!=(a=n.invalidatedCount)?a:0)>0?"".concat(s," Einladungslink(s) erfolgreich zur\xfcckgesetzt."):"Keine aktiven Links gefunden.",type:"success"}),e.next=5;break;case 4:throw Error(n.message||"Fehler beim Zur\xfccksetzen der Links vom Server.");case 5:e.next=7;break;case 6:e.prev=6,eg({message:(i=e.catch(2))instanceof Error?i.message:"Unbekannter Fehler beim Zur\xfccksetzen der Links.",type:"error"});case 7:return e.prev=7,eJ(!1),e.finish(7);case 8:case"end":return e.stop()}},e,null,[[2,6,7,8]])})),function(){return t.apply(this,arguments)}),tk=(r=Q(q().mark(function e(){var t;return q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ec){e.next=1;break}return e.abrupt("return");case 1:return e.prev=1,eY(!0),eg({message:"Datenkonsistenz wird \xfcberpr\xfcft...",type:"info"}),e.next=2,(0,P.ensurePlayersExist)(ec.playerIds,ec.id);case 2:eW(t=e.sent),e2(!1),eg({message:"Datenreparatur erfolgreich. ".concat(t.length," Spieler-Datens\xe4tze \xfcberpr\xfcft."),type:"success"}),e.next=4;break;case 3:e.prev=3,e.catch(1),eg({message:"Fehler bei der Datenreparatur.",type:"error"});case 4:return e.prev=4,eY(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])})),function(){return r.apply(this,arguments)}),tS=(s=Q(q().mark(function e(t,r){var n;return q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eq(function(e){return V(V({},e),{},X({},t,!0))}),e.prev=1,e.next=2,eu(t,r);case 2:eg({message:"Rolle erfolgreich auf ".concat("admin"===r?"Admin":"Mitglied"," ge\xe4ndert."),type:"success"}),e.next=4;break;case 3:e.prev=3,eg({message:(n=e.catch(1))instanceof Error?n.message:"Rollen\xe4nderung fehlgeschlagen.",type:"error"});case 4:return e.prev=4,eq(function(e){return V(V({},e),{},X({},t,!1))}),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])})),function(e,t){return s.apply(this,arguments)}),tO=(U=Q(q().mark(function e(){var t,r,n,a,s,i,l,c,o,u,d,h,g;return q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!ec||!ea)){e.next=1;break}return e.abrupt("return");case 1:return eG(null),ty(null),tp(!0),t=(0,L.Uz)(void 0,"europe-west1"),r=(0,L.Qg)(t,"generateGroupInviteToken"),e.prev=2,e.next=3,r({groupId:ec.id});case 3:if(n=e.sent.data.token){e.next=4;break}throw Error("Kein Token vom Server erhalten.");case 4:if(a="".concat("https://jassguru.ch","/join?token=").concat(n),s=ea.displayName||ea.email||"Jemand",i="".concat(s,' l\xe4dt dich ein, der Jassgruppe "').concat(ec.name,'" beizutreten.'),l="\uD83D\uDC49 Hier ist dein Einladungslink:\n".concat(a),c="".concat("Du wurdest zu jassguru.ch eingeladen! ✌️","\n\n").concat(i,"\n\n").concat(l,"\n\n").concat("\uD83D\uDCA1 Falls du sp\xe4ter beitreten m\xf6chtest:\n- Melde dich bei jassguru.ch an\n- F\xfcge den kompletten Link ein"),!("share"in navigator)){e.next=13;break}return e.prev=5,o={title:'Einladung zur Jassgruppe "'.concat(ec.name,'"'),text:c},e.next=6,navigator.share(o);case 6:console.log("Settings: Einladung erfolgreich geteilt!"),eg({message:"Einladung erfolgreich geteilt!",type:"success"}),e.next=12;break;case 7:if(e.prev=7,!("AbortError"===(h=e.catch(5)).name||null!=(u=h.message)&&u.includes("abort"))){e.next=8;break}console.log("Settings: Benutzer hat das Teilen abgebrochen."),e.next=12;break;case 8:return console.warn("Settings: Teilen fehlgeschlagen, versuche Fallback:",h),e.prev=9,e.next=10,navigator.clipboard.writeText(a);case 10:eg({message:"Einladungslink in Zwischenablage kopiert!",type:"info"}),e.next=12;break;case 11:throw e.prev=11,console.error("Settings: Auch Zwischenablage fehlgeschlagen:",e.catch(9)),Error("Teilen und Kopieren fehlgeschlagen.");case 12:e.next=17;break;case 13:return console.log("Settings: Share API nicht verf\xfcgbar, nutze Zwischenablage."),e.prev=14,e.next=15,navigator.clipboard.writeText(a);case 15:eg({message:"Einladungslink in Zwischenablage kopiert!",type:"info"}),e.next=17;break;case 16:e.prev=16,console.error("Settings: Zwischenablage fehlgeschlagen:",e.catch(14)),eg({message:"Link konnte nicht kopiert werden. Bitte manuell teilen.",type:"warning"});case 17:e.next=19;break;case 18:e.prev=18,console.error("Settings: Fehler beim Generieren/Teilen der Einladung:",g=e.catch(2)),d="Fehler beim Erstellen der Einladung.",null!=g&&g.code&&"string"==typeof g.code?d="Fehler (".concat(g.code,"): ").concat(g.message||"Keine weitere Information."):g instanceof Error?d="Fehler: ".concat(g.message):"string"==typeof g&&(d=g),ty(d),eg({message:d,type:"error"});case 19:return e.prev=19,tp(!1),e.finish(19);case 20:case"end":return e.stop()}},e,null,[[2,18,19,20],[5,7],[9,11],[14,16]])})),function(){return U.apply(this,arguments)}),tE=function(e,t){var r=t.replace(/[^0-9]/g,"");if(tl(function(t){return V(V({},t),{},X({},e,r))}),""!==r){var n=parseInt(r,10);if(!isNaN(n)){var a=e5.enabled,s=e5.values.sieg;if("sieg"===e){var i=Math.floor((s=Math.max(et.sieg.min,Math.min(n,et.sieg.max)))/2);if(a.berg){var l=Math.min(i,et.berg.max);tl(function(e){return V(V({},e),{},{berg:l.toString()})})}if(a.schneider){var c=Math.min(i,et.schneider.max);tl(function(e){return V(V({},e),{},{schneider:c.toString()})})}}else if("berg"===e){var o=Math.max(0,Math.min(n,Math.floor(s/2),et.berg.max));if(a.schneider){var u=Math.min(o,et.schneider.max);tl(function(e){return V(V({},e),{},{schneider:u.toString()})})}}}}else"sieg"===e?tl(function(e){return V(V({},e),{},{berg:void 0,schneider:void 0})}):"berg"===e&&tl(function(e){return V(V({},e),{},{schneider:void 0})})},tF=function(e){e3(function(t){var r=V(V({},t.enabled),{},X({},e,!t.enabled[e])),n=V({},t.values);if("berg"===e&&!r.berg&&r.schneider){var a=Math.min(Math.floor(n.sieg/2),et.schneider.max);n.schneider=Math.min(n.schneider,a)}return V(V({},t),{},{values:n,enabled:r})})},tL=function(){e3(function(e){return V(V({},e),{},{matschBonus:!e.matschBonus})})},tA=function(e,t){tu(function(r){return V(V({},r),{},X({},e,t.replace(/[^0-9]/g,"")))})},tP=function(e,t){tg(function(r){return V(V({},r),{},X({},e,t.replace(/[^0-9]/g,"")))})},tM=function(e){tt(function(t){return V(V({},t),{},{cardStyle:e})})},tz=function(e){var t=e.replace(/[^0-9]/g,"").slice(0,4);eO(t),4===t.length?e_((0,D.g)(t)):e_(null)};return"loading"===es||ex&&!ec?(0,$.jsx)(N.A,{children:(0,$.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-900 text-white",children:(0,$.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,$.jsx)("div",{className:"h-8 w-8 rounded-full border-2 border-white border-t-transparent animate-spin"}),(0,$.jsxs)("div",{className:"text-center",children:[(0,$.jsx)("p",{className:"text-lg font-medium",children:"Lade Gruppeneinstellungen..."}),(0,$.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Einen Moment bitte"})]}),(0,$.jsx)("button",{onClick:function(){return ep.push("/start")},className:"mt-8 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-sm text-gray-300 hover:text-white transition-colors",children:"Zur\xfcck zur Startseite"})]})})}):(0,$.jsx)(N.A,{children:(0,$.jsxs)("div",{className:"flex min-h-screen flex-col items-center bg-gray-900 p-4 text-white relative",children:[(0,$.jsx)(i(),{href:"/start",passHref:!0,legacyBehavior:!0,children:(0,$.jsx)(w.$,{variant:"ghost",className:"absolute top-8 left-4 text-white hover:bg-gray-700 p-3","aria-label":"Zur\xfcck zur Startseite",children:(0,$.jsx)(c.A,{size:28})})}),(0,$.jsxs)("div",{className:"w-full max-w-md space-y-6 py-16",children:[(0,$.jsx)("h1",{className:"text-center text-2xl font-bold text-white",children:"Gruppeneinstellungen"}),eT&&(0,$.jsx)(O.Fc,{variant:"destructive",className:"bg-red-900/30 border-red-900 text-red-200",children:(0,$.jsx)(O.TN,{children:eT})}),(0,$.jsxs)("div",{className:"space-y-6",id:"group-settings-container",children:[(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,$.jsxs)(F.aR,{children:[(0,$.jsxs)(F.ZB,{className:"text-white flex items-center gap-2",children:[(0,$.jsx)(o.A,{className:"w-5 h-5"}),"Grundinformationen"]}),(0,$.jsx)(F.BT,{className:"text-gray-400",children:"Basis-Einstellungen f\xfcr deine Gruppe"})]}),(0,$.jsxs)(F.Wu,{className:"space-y-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)("label",{htmlFor:"name",className:"text-sm font-medium text-gray-200",children:"Name"}),(0,$.jsx)(k.p,{id:"name",type:"text",value:ey,onChange:function(e){return ev(e.target.value)},className:"bg-gray-700 border-gray-600 text-white",placeholder:"Gruppenname",required:!0})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)("label",{htmlFor:"description",className:"text-sm font-medium text-gray-200",children:"Beschreibung"}),(0,$.jsx)(S.A,{id:"description",value:eN,onChange:function(e){return ew(e.target.value)},className:"bg-gray-700 border-gray-600 text-white min-h-[100px]",placeholder:"Gruppenbeschreibung (optional)",maxLength:150}),(0,$.jsx)("p",{className:"text-xs text-gray-400",children:"Maximal 150 Zeichen."})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)("label",{htmlFor:"mainLocationZip",className:"text-sm font-medium text-gray-200",children:"Hauptspielort (PLZ)"}),(0,$.jsx)(k.p,{id:"mainLocationZip",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:4,value:eS,onChange:function(e){return tz(e.target.value)},className:"bg-gray-700 border-gray-600 text-white",placeholder:"z.B. 8000"}),eI&&(0,$.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,$.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,$.jsx)("p",{className:"text-sm text-green-400 font-medium",children:eI})]}),(0,$.jsx)("p",{className:"text-xs text-gray-400",children:"Schweizer Postleitzahl (4-stellig). Stadt wird automatisch erkannt."})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)("label",{htmlFor:"public-link-info",className:"text-sm font-medium text-gray-200",children:"\xd6ffentlicher Link"}),(0,$.jsx)("p",{id:"public-link-info",className:"text-sm text-gray-400",children:"Die Gruppe kann unter diesem Link eingesehen werden:"}),(null==ec?void 0:ec.id)&&(0,$.jsx)(i(),{href:"https://jassguru.ch/view/group/".concat(ec.id),target:"_blank",className:"block text-sm text-blue-400 hover:text-blue-300 underline break-all",children:"https://jassguru.ch/view/group/".concat(ec.id)})]})]})]}),(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,$.jsxs)(F.aR,{children:[(0,$.jsxs)(F.ZB,{className:"text-white flex items-center gap-2",children:[(0,$.jsx)(l.A,{className:"w-5 h-5"}),"Jass-Einstellungen"]}),(0,$.jsx)(F.BT,{className:"text-gray-400",children:"Lege fest, welche Varianten und Multiplikatoren gelten."})]}),(0,$.jsx)(F.Wu,{children:(0,$.jsxs)(R.tU,{defaultValue:"farben",className:"w-full",children:[(0,$.jsxs)(R.j7,{className:"grid w-full grid-cols-3 bg-gray-700/50 p-1 rounded-lg mb-4",children:[(0,$.jsx)(R.Xi,{value:"farben",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white text-gray-300 hover:bg-gray-600/50 rounded-md py-1.5 text-sm",children:"Farben"}),(0,$.jsx)(R.Xi,{value:"punkte",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white text-gray-300 hover:bg-gray-600/50 rounded-md py-1.5 text-sm",children:"Punkte"}),(0,$.jsx)(R.Xi,{value:"striche",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white text-gray-300 hover:bg-gray-600/50 rounded-md py-1.5 text-sm",children:"Striche"})]}),(0,$.jsx)(R.av,{value:"punkte",children:(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700 shadow-inner mt-4",children:[(0,$.jsxs)(F.aR,{className:"pb-4",children:[(0,$.jsx)(F.ZB,{className:"text-lg text-gray-200",children:"Punkte-Ziele & Modi"}),(0,$.jsx)(F.BT,{className:"text-gray-400 text-sm",children:"..."})]}),(0,$.jsxs)(F.Wu,{className:"space-y-4 pt-0 pb-4",children:[(0,$.jsxs)("div",{className:"flex items-center justify-between space-x-2 p-2 rounded-md hover:bg-gray-700/50",children:[(0,$.jsx)(W.J,{htmlFor:"score-sieg",className:"font-medium text-gray-200",children:"Sieg-Punkte"}),(0,$.jsx)(k.p,{id:"score-sieg",type:"number",inputMode:"numeric",pattern:"[0-9]*",min:et.sieg.min,max:et.sieg.max,className:"w-24 bg-gray-700 border-gray-600 text-white text-right",value:null!=(K=ti.sieg)?K:e5.values.sieg,onChange:function(e){return tE("sieg",e.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]}),(0,$.jsxs)("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden border border-gray-600/50",children:[(0,$.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-600/50",children:[(0,$.jsx)(W.J,{htmlFor:"toggle-berg",className:"font-medium text-gray-200",children:"Berg aktiviert"}),(0,$.jsx)(E.d,{id:"toggle-berg",checked:e5.enabled.berg,onCheckedChange:function(){return tF("berg")},className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-600"})]}),e5.enabled.berg&&(0,$.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,$.jsx)(W.J,{htmlFor:"score-berg",className:"font-medium text-gray-200",children:"Berg-Punkte"}),(0,$.jsx)(k.p,{id:"score-berg",type:"number",inputMode:"numeric",pattern:"[0-9]*",min:"0",max:Math.floor(e5.values.sieg/2),className:"w-24 bg-gray-700 border-gray-600 text-white text-right",value:null!=(H=ti.berg)?H:e5.values.berg,onChange:function(e){return tE("berg",e.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]})]}),(0,$.jsxs)("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden border border-gray-600/50",children:[(0,$.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-600/50",children:[(0,$.jsx)(W.J,{htmlFor:"toggle-schneider",className:"font-medium text-gray-200",children:"Schneider aktiviert"}),(0,$.jsx)(E.d,{id:"toggle-schneider",checked:e5.enabled.schneider,onCheckedChange:function(){return tF("schneider")},className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-600"})]}),e5.enabled.schneider&&(0,$.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,$.jsx)(W.J,{htmlFor:"score-schneider",className:"font-medium text-gray-200",children:"Schneider-Punkte"}),(0,$.jsx)(k.p,{id:"score-schneider",type:"number",inputMode:"numeric",pattern:"[0-9]*",min:"0",max:e5.values.sieg,className:"w-24 bg-gray-700 border-gray-600 text-white text-right",value:null!=(ee=ti.schneider)?ee:e5.values.schneider,onChange:function(e){return tE("schneider",e.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]})]}),(0,$.jsx)("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden border border-gray-600/50",children:(0,$.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,$.jsxs)("div",{className:"flex-1",children:[(0,$.jsx)(W.J,{htmlFor:"toggle-matschbonus",className:"font-medium text-gray-200",children:"Matschbonus aktiviert"}),(0,$.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Bei einem Matsch werden 100 Bonuspunkte hinzugef\xfcgt (Total: 257 Punkte)"})]}),(0,$.jsx)(E.d,{id:"toggle-matschbonus",checked:e5.matschBonus,onCheckedChange:function(){return tL()},className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-600"})]})})]})]})}),(0,$.jsx)(R.av,{value:"striche",children:(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700 shadow-inner mt-4",children:[(0,$.jsxs)(F.aR,{className:"pb-4",children:[(0,$.jsx)(F.ZB,{className:"text-lg text-gray-200",children:"Striche Zuweisung"}),(0,$.jsx)(F.BT,{className:"text-gray-400 text-sm",children:"Bestimme, wie viele Striche pro Schneider und Kontermatsch vergeben werden."})]}),(0,$.jsx)(F.Wu,{className:"space-y-3 pt-0 pb-4",children:M.wq.map(function(e){var t,r;return(0,$.jsxs)("div",{className:"flex items-center justify-between space-x-4 p-2 rounded-md hover:bg-gray-700/50",children:[(0,$.jsxs)(W.J,{htmlFor:"stroke-".concat(e),className:"font-medium capitalize flex-1 text-gray-200",children:[e.replace(/([A-Z])/g," $1").trim()," Striche"]}),(0,$.jsx)(k.p,{id:"stroke-".concat(e),type:"number",min:"0",max:"2",className:"w-20 bg-gray-700 border-gray-600 text-white text-right",value:null!=(t=null!=(r=to[e])?r:e7[e])?t:"",onChange:function(t){return tA(e,t.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]},e)})})]})}),(0,$.jsx)(R.av,{value:"farben",children:(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700 shadow-inner mt-4",children:[(0,$.jsxs)(F.aR,{className:"pb-4",children:[(0,$.jsx)(F.ZB,{className:"text-lg text-gray-200",children:"Farben & Kartensatz"}),(0,$.jsx)(F.BT,{className:"text-gray-400 text-sm",children:"..."})]}),(0,$.jsxs)(F.Wu,{className:"space-y-4 pt-0 pb-4",children:[(0,$.jsxs)("div",{className:"flex items-center justify-between space-x-2 p-3 rounded-lg bg-gray-700/50 border border-gray-600/50",children:[(0,$.jsx)(W.J,{className:"font-medium text-gray-200",children:"Kartensatz"}),(0,$.jsxs)("div",{className:"flex gap-2",children:[(0,$.jsx)(w.$,{type:"button",variant:"DE"===te.cardStyle?"default":"outline",size:"sm",onClick:function(){return tM("DE")},className:"min-w-[50px] text-center font-semibold ".concat("DE"===te.cardStyle?"bg-green-600 hover:bg-green-700 text-white border-green-600":"bg-gray-700 text-gray-400 border-gray-600 hover:bg-gray-600 hover:text-gray-300"),children:"DE"}),(0,$.jsx)(w.$,{type:"button",variant:"FR"===te.cardStyle?"default":"outline",size:"sm",onClick:function(){return tM("FR")},className:"min-w-[50px] text-center font-semibold ".concat("FR"===te.cardStyle?"bg-green-600 hover:bg-green-700 text-white border-green-600":"bg-gray-700 text-gray-400 border-gray-600 hover:bg-gray-600 hover:text-gray-300"),children:"FR"})]})]}),(0,$.jsxs)("div",{className:"border-t border-gray-700/50 pt-4 space-y-3",children:[(0,$.jsx)("h4",{className:"text-base font-medium text-gray-300 mb-2",children:"Multiplikatoren"}),Z.u4.map(function(e){var t,r,n,a,s,i=null!=(t=te.values[e.id])?t:1,l=0===i,c=(0,_.Sn)(e.id),o=null!=(r=null==(n=I.S[c])?void 0:n[te.cardStyle])?r:c;return(0,$.jsxs)("div",{className:"flex items-center justify-between space-x-4 p-2 rounded-md transition-opacity duration-200 ".concat(l?"opacity-60 hover:bg-gray-700/30":"hover:bg-gray-700/50"),children:[(0,$.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,$.jsx)(G.h,{farbe:e.name,mode:"svg",cardStyle:te.cardStyle,className:"w-5 h-5 flex-shrink-0"}),(0,$.jsx)(W.J,{htmlFor:"farbe-".concat(e.id),className:"font-medium text-gray-200",children:o})]}),(0,$.jsx)(k.p,{id:"farbe-".concat(e.id),type:"number",min:"0",max:"12",className:"w-20 bg-gray-700 border-gray-600 text-white text-right ".concat(l?"text-gray-400":""),value:null!=(a=null!=(s=th[e.id])?s:i)?a:"",onChange:function(t){return tP(e.id,t.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]},e.id)})]})]})]})})]})})]}),tv&&(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,$.jsx)(F.aR,{className:"pb-2",children:(0,$.jsxs)(F.ZB,{className:"text-white flex items-center gap-2",children:[(0,$.jsx)(u.A,{className:"w-5 h-5"}),"Freunde einladen"]})}),(0,$.jsxs)(F.Wu,{children:[(0,$.jsx)("p",{className:"text-sm text-gray-400 mt-1 mb-4",children:"Lade deine Jassfreunde ein! Der Link funktioniert \xfcber WhatsApp, E-Mail oder jede andere App."}),(0,$.jsx)(w.$,{onClick:tO,disabled:tf||!ec,className:"w-full bg-green-600 hover:bg-green-700 text-white flex items-center justify-center gap-2",children:tf?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(d.A,{className:"h-4 w-4 animate-spin"}),"Link wird erstellt..."]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(h.A,{className:"h-4 w-4"}),"share"in navigator?"Einladung teilen":"Einladungslink kopieren"]})}),tb&&(0,$.jsx)("p",{className:"text-xs text-red-400 mt-2 text-center",children:tb})]})]}),(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,$.jsxs)(F.aR,{children:[(0,$.jsxs)(F.ZB,{className:"text-white flex items-center gap-2",children:[(0,$.jsx)(g.A,{className:"w-5 h-5"}),"Mitglieder"]}),(0,$.jsx)(F.BT,{className:"text-gray-400",children:"Aktuelle Mitglieder und Admins verwalten"})]}),(0,$.jsxs)(F.Wu,{children:[e1&&(0,$.jsxs)("div",{className:"mb-4 p-3 bg-yellow-900/50 border border-yellow-700 rounded-md flex items-start gap-3",children:[(0,$.jsx)(m.A,{className:"h-5 w-5 text-yellow-500 flex-shrink-0 mt-0.5"}),(0,$.jsxs)("div",{className:"flex-1",children:[(0,$.jsx)("p",{className:"text-sm text-yellow-300 font-medium",children:"Dateninkonsistenz erkannt"}),(0,$.jsx)("p",{className:"text-xs text-gray-300 mt-1",children:"Einige Mitglieder haben unvollst\xe4ndige Daten..."}),(0,$.jsx)(w.$,{variant:"outline",size:"sm",className:"mt-2 text-yellow-300 border-yellow-600 hover:bg-yellow-900/50",onClick:tk,disabled:eQ,children:eQ?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(d.A,{className:"mr-2 h-3 w-3 animate-spin"}),"Wird repariert..."]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(f.A,{className:"mr-2 h-3 w-3"}),"Daten reparieren"]})})]})]}),eU?(0,$.jsxs)("div",{className:"flex justify-center items-center p-4",children:[(0,$.jsx)(d.A,{className:"h-6 w-6 animate-spin text-gray-400"}),(0,$.jsx)("span",{className:"ml-2 text-gray-400",children:"Lade Mitglieder..."})]}):0===eR.length?(0,$.jsx)("p",{className:"text-center text-gray-400",children:"Noch keine Mitglieder."}):(0,$.jsx)(F.Wu,{className:"p-4 pt-0",children:(0,$.jsx)("ul",{className:"space-y-3",children:eR.map(function(e){var t,r,n,a=!!e.userId&&null!=(t=null==ec?void 0:ec.adminIds.includes(e.userId))&&t,s=!!(null!=ea&&ea.playerId)&&e.id===ea.playerId,i=null!=(r=eX[e.id])&&r,l=a&&(null==ec?void 0:ec.adminIds.length)===1,c=e.userId===(null==ec?void 0:ec.createdBy),o=tv&&!s;return(0,$.jsxs)("li",{className:"flex items-center justify-between space-x-3 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[(0,$.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,$.jsx)(T.A,{src:e.photoURL||void 0,alt:e.displayName||"Avatar",size:"sm",className:"flex-shrink-0",fallbackClassName:"text-gray-300 ".concat(e._isPlaceholder?"bg-yellow-800":"bg-gray-600"),fallbackText:(null==(n=e.displayName)?void 0:n.charAt(0).toUpperCase())||"?"}),(0,$.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$.jsxs)("p",{className:"text-sm font-medium text-white truncate",children:[e.displayName||"Unbekannt",e._isPlaceholder&&(0,$.jsx)("span",{className:"ml-2 text-xs text-yellow-400",children:"(unvollst\xe4ndig)"}),s&&(0,$.jsx)("span",{className:"ml-1 text-xs text-blue-400",children:"(Du)"})]}),(0,$.jsx)("p",{className:"text-xs text-gray-400 truncate",children:e._isPlaceholder?(0,$.jsxs)("span",{className:"text-yellow-500",children:["ID: ",e.id.slice(0,6),"..."]}):e.userId?"Registriert":"Gast"})]})]}),(0,$.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a&&(0,$.jsxs)(z.E,{variant:"outline",className:"border-green-600 text-green-400 bg-green-900/30 px-2 py-0.5",children:[(0,$.jsx)(p.A,{className:"w-3 h-3 mr-1"})," ",c?"Gr\xfcnder":"Admin"]}),o&&!c&&(0,$.jsx)($.Fragment,{children:a?(0,$.jsxs)(A.Lt,{children:[(0,$.jsx)(A.tv,{asChild:!0,children:(0,$.jsx)(w.$,{variant:"outline",size:"sm",className:"h-auto text-xs font-medium flex items-center justify-center rounded-md w-6 h-6 p-0 ".concat(i||l?"text-gray-500 border-gray-600 cursor-not-allowed":"bg-red-800/50 text-white hover:bg-red-700/60"),disabled:i||l,title:l?"Letzter Admin kann nicht entfernt werden":"Admin-Status entfernen",children:i?(0,$.jsx)(d.A,{className:"h-4 w-4 animate-spin"}):(0,$.jsx)(x.A,{className:"w-4 h-4"})})}),(0,$.jsxs)(A.EO,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,$.jsxs)(A.wd,{children:[(0,$.jsx)(A.r7,{children:"Admin-Status entfernen?"}),(0,$.jsx)(A.$v,{className:"text-gray-400",children:"..."})]}),(0,$.jsxs)(A.ck,{children:[(0,$.jsx)(A.Zr,{className:"...",disabled:i,children:"Abbrechen"}),(0,$.jsx)(A.Rx,{onClick:function(){return tS(e.id,"member")},className:"...",disabled:i,children:"Ja, entfernen"})]})]})]}):(0,$.jsxs)(A.Lt,{children:[(0,$.jsx)(A.tv,{asChild:!0,children:(0,$.jsx)(w.$,{variant:"outline",size:"sm",className:"h-auto text-xs font-medium flex items-center justify-center px-2 py-1 rounded-lg ".concat(i?"text-gray-500 border-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 border-blue-600"),disabled:i,title:"Zum Admin ernennen",children:i?(0,$.jsx)(d.A,{className:"h-4 w-4 animate-spin"}):"Admin"})}),(0,$.jsxs)(A.EO,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,$.jsxs)(A.wd,{children:[(0,$.jsx)(A.r7,{children:"Zum Admin ernennen?"}),(0,$.jsx)(A.$v,{className:"text-gray-400",children:"..."})]}),(0,$.jsxs)(A.ck,{children:[(0,$.jsx)(A.Zr,{className:"...",disabled:i,children:"Abbrechen"}),(0,$.jsx)(A.Rx,{onClick:function(){return tS(e.id,"admin")},className:"...",disabled:i,children:"Ja, ernennen"})]})]})]})})]})]},e.id)})})})]})]}),(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,$.jsxs)(F.aR,{children:[(0,$.jsxs)(F.ZB,{className:"text-white flex items-center gap-2",children:[(0,$.jsx)(b.A,{className:"w-5 h-5"}),"Sichtbarkeit"]}),(0,$.jsx)(F.BT,{className:"text-gray-400",children:"Wer kann die Gruppe sehen und beitreten?"})]}),(0,$.jsx)(F.Wu,{className:"space-y-4",children:(0,$.jsxs)("div",{className:"flex items-center justify-between",children:[(0,$.jsxs)("div",{className:"space-y-0.5",children:[(0,$.jsx)("label",{htmlFor:"public-toggle",className:"text-sm font-medium text-gray-200",children:"\xd6ffentliche Gruppe"}),(0,$.jsx)("p",{className:"text-sm text-gray-400",children:"Die Gruppe ist f\xfcr alle sichtbar und beitretbar."})]}),(0,$.jsx)(E.d,{id:"public-toggle",checked:eF,onCheckedChange:eL,disabled:eP})]})})]}),tv&&(er={green:{name:"Gr\xfcn",description:""},blue:{name:"Blau",description:""},purple:{name:"Lila",description:""},pink:{name:"Pink",description:""},yellow:{name:"Gelb",description:""},teal:{name:"T\xfcrkis",description:""},orange:{name:"Orange",description:""},cyan:{name:"Cyan",description:""}},(0,$.jsxs)(F.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,$.jsxs)(F.aR,{children:[(0,$.jsxs)(F.ZB,{className:"text-white flex items-center gap-2",children:[(0,$.jsx)(l.A,{className:"w-5 h-5"}),"Gruppenfarbe"]}),(0,$.jsx)(F.BT,{className:"text-gray-400",children:"W\xe4hle eine Farbe f\xfcr die Statistiken dieser Gruppe."})]}),(0,$.jsx)(F.Wu,{children:(0,$.jsx)("div",{className:"grid grid-cols-2 gap-3",children:Object.keys(C.lt).map(function(e){var t=C.lt[e],r=er[e],n=tn===e,a=t.primary.replace("bg-","");return(0,$.jsxs)("button",{type:"button",onClick:function(){return ta(e)},className:"\n                    relative p-3 rounded-lg border-2 transition-all duration-200 text-left\n                    ".concat(n?"border-".concat(a," bg-").concat(a,"/10 shadow-lg"):"border-gray-700 bg-gray-800/50 hover:border-gray-600","\n                  "),children:[(0,$.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,$.jsx)("div",{className:"\n                        w-8 h-8 rounded-full border-2 transition-all duration-200\n                        ".concat(t.primary," border-gray-600\n                        ").concat(n?"scale-110 shadow-md":"","\n                      "),children:n&&(0,$.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})}),(0,$.jsx)("div",{className:"flex-1 min-w-0",children:(0,$.jsx)("div",{className:"font-medium text-sm ".concat(n?"text-white":"text-gray-300"),children:r.name})})]}),n&&(0,$.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 ".concat(t.primary," rounded-full border-2 border-gray-900 flex items-center justify-center"),children:(0,$.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]},e)})})})]})),tv&&(0,$.jsxs)(F.Zp,{className:"bg-red-900/20 border-red-900/50",children:[(0,$.jsx)(F.aR,{children:(0,$.jsx)(F.ZB,{className:"text-red-300",children:"Gefahrenzone"})}),(0,$.jsx)(F.Wu,{children:(0,$.jsx)("div",{className:"flex flex-col space-y-4",children:(0,$.jsxs)("div",{children:[(0,$.jsx)("h4",{className:"font-medium text-gray-200",children:"Einladungslinks zur\xfccksetzen"}),(0,$.jsx)("p",{className:"text-sm text-gray-400 mt-1 mb-3",children:"Macht alle aktuell g\xfcltigen Einladungslinks ung\xfcltig."}),(0,$.jsxs)(A.Lt,{children:[(0,$.jsx)(A.tv,{asChild:!0,children:(0,$.jsx)(w.$,{variant:"destructive",disabled:eZ,className:"bg-red-700 hover:bg-red-800 border-red-900 text-white",children:eZ?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Wird zur\xfcckgesetzt..."]}):"Alle Links zur\xfccksetzen"})}),(0,$.jsxs)(A.EO,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,$.jsxs)(A.wd,{children:[(0,$.jsx)(A.r7,{children:"Wirklich alle Links zur\xfccksetzen?"}),(0,$.jsx)(A.$v,{className:"text-gray-400",children:"..."})]}),(0,$.jsxs)(A.ck,{children:[(0,$.jsx)(A.Zr,{className:"...",disabled:eZ,children:"Abbrechen"}),(0,$.jsx)(A.Rx,{onClick:tw,className:"...",disabled:eZ,children:"Ja, zur\xfccksetzen"})]})]})]})]})})})]})]})]})]})})}},82288:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/groups/settings",function(){return r(56382)}])},97765:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});var n=r(60679),a=r.n(n),s=function(e){if(!e)return null;var t=a()[e];return t||null}}},e=>{e.O(0,[8230,4587,9517,4455,3546,5643,679,4638,4231,9632,636,6593,8792],()=>e(e.s=82288)),_N_E=e.O()}]);