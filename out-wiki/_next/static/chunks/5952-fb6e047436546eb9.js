"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5952],{900:(e,t,n)=>{n.d(t,{j:()=>c});var r=n(88880),i=n(54573),o=["Eicheln","Rosen","Schellen","Schilten"],a={Misère:"\uD83E\uDD2E",Eicheln:"\uD83C\uDF33",Rosen:"\uD83C\uDF39",Schellen:"\uD83D\uDD14",Schilten:"\uD83D\uDEE1️",Obe:"\uD83D\uDC47",Une:"\uD83D\uDC47","3x3":"3️⃣",Quer:"↕️",Slalom:"⛷️"},s={Misère:"\uD83E\uDD2E",Eicheln:"♠️",Rosen:"♣️",Schellen:"♥️",Schilten:"♦️",Obe:"\uD83D\uDC46",Une:"\uD83D\uDC47","3x3":"3️⃣",Quer:"↕️",Slalom:"⛷️"},l={},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DE",c=(0,i.Sn)(e),u="".concat(c,"-").concat(t,"-").concat(n);if(l[u])return l[u];if("emoji"===t){var f="DE"===n?a:s;return l[u]=f[e],l[u]}var d=r.S[c];if(void 0===d||void 0===d[n])return console.warn("getPictogram: Mapping f\xfcr Farbe '".concat(c,"' (Original: '").concat(e,"') oder Stil '").concat(n,"' nicht gefunden. Gebe leeren Pfad zur\xfcck.")),l[u]="","";var m=d[n].toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/g,""),p="FR"===n?"standardFR":"standardDE",h="/assets/pictograms/".concat(p,"/").concat(m,".").concat(o.includes(c)?"png":"svg");return l[u]=h,h}},5952:(e,t,n)=>{n.d(t,{A:()=>nf});var r,i,o,a,s,l,c=n(14232),u=n(89143),f=n(89099),d=n(11510),m=n(37876);let p=function(e){var t=e.className,n=e.outerStrokeWidth,r=void 0===n?2:n,i=e.diagonalStrokeWidth,o=(e.position,e.onShapeRendered),a=(0,c.useRef)(null);(0,c.useEffect)(function(){if(a.current&&o){var e=a.current.getBoundingClientRect();o({width:e.width,height:e.height,left:e.left,top:e.top})}},[o]);var s=Math.sqrt(2);return(0,m.jsx)("svg",{ref:a,className:t,viewBox:"0 0 120 100",preserveAspectRatio:"xMidYMid meet",children:(0,m.jsxs)("g",{transform:"translate(0, 0)",children:[(0,m.jsx)("path",{d:"M0 0 L110 0",stroke:"currentColor",strokeWidth:r,fill:"none"}),(0,m.jsx)("path",{d:"M0 100 L110 0",stroke:"currentColor",strokeWidth:(void 0===i?.75:i)*s,fill:"none"}),(0,m.jsx)("path",{d:"M0 100 L110 100",stroke:"currentColor",strokeWidth:r,fill:"none"})]})})},h=function(e){var t=e.onSwipeUp,n=e.onSwipeDown,r=e.onSwipeLeft,i=e.onSwipeRight,o=e.threshold,a=void 0===o?50:o,s=e.element;(0,c.useEffect)(function(){var e=null,o=null,l=function(t){t.target.closest('[data-swipe-area="'.concat(s,'"]'))&&(e=t.touches[0].clientX,o=t.touches[0].clientY)},c=function(s){if(null!==e&&null!==o){var l=s.touches[0].clientX,c=s.touches[0].clientY,u=e-l,f=o-c;Math.abs(u)>Math.abs(f)?Math.abs(u)>a&&(u>0&&r?r():u<0&&i&&i(),e=null,o=null):Math.abs(f)>a&&(f>0&&t?t():f<0&&n&&n(),e=null,o=null)}};return document.addEventListener("touchstart",l),document.addEventListener("touchmove",c),function(){document.removeEventListener("touchstart",l),document.removeEventListener("touchmove",c)}},[t,n,r,i,a,s])};var g=n(16308);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(0,g.Ay)("div")({position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start"}),(0,g.Ay)(u.CS.div,{shouldForwardProp:function(e){return"isVertical"!==e&&"color"!==e}})(function(e){var t=e.isVertical;return{position:"absolute",backgroundColor:e.color,width:"2px",height:t?"100%":"2px",transformOrigin:"top left"}});var S=(0,g.Ay)("div")(function(e){return{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start",transform:e.isRotated?"rotate(180deg)":"rotate(0)",transformOrigin:"center center"}});let x=function(e){var t=e.stricheCount,n=(e.stricheCounts,e.einheitWert),r=e.strichColor,i=e.animationDuration,o=(e.isActive,e.direction),a=e.edgeOffset,s=e.strichSpacing,l=void 0===s?10:s,f=e.einheitSpacing,d=void 0===f?50:f,p=e.position,h=e.isRotated,g=e.xSize,b=void 0===g?20:g,v=e.isXMode,x=void 0!==v&&v,w=e.xAngle,j=void 0===w?15:w,N=(e.xAlignment,e.isDiagonal,e.diagonalAngle,e.diagonalStrichHeight),k=void 0===N?"100%":N,O=e.diagonalStrichWidth,I=void 0===O?"2px":O,P=(e.diagonalStrichOffset,e.diagonalStrichAngle),E=void 0===P?0:P,C=e.topDiagonalStrichOffset,T=e.bottomDiagonalStrichOffset,A=e.topDiagonalStrichAngle,G=void 0===A?0:A,D=e.bottomDiagonalStrichAngle,L=void 0===D?0:D,R=e.diagonalStrichOffset100er,F=e.diagonalStrichOffset20er,U=e.diagonalStrichAngle100er,_=e.diagonalStrichAngle20er,M=e.xSpacing,K=void 0===M?10:M,z=e.xOffset100erTop,H=void 0===z?63:z,B=e.xOffset100erBottom,W=void 0===B?40:B;e.offset;var J=Math.floor(t/5),Z=t%5,V=t>0;(0,u.zh)({from:{scaleY:0},to:{scaleY:+!!V},config:y(y({},u.$W.stiff),{},{duration:void 0===i?1e3:i})});var Y=(0,c.useCallback)(function(e,t,i){var s=Math.floor(e/5),c=e%5,u=s*(d+4*l),f=c*l;if(4===c){var h,g,b=3*l;100===n&&R?(h=R,g=U||E):20===n&&F?(h=F,g=_||E):(h="top"===p?C:T,g="top"===p?G:L);var v=y(y({position:"absolute",height:k,width:I},"top"===p?{right:"calc(".concat(a+u+b,"px + ").concat(h.horizontal," ").concat(100===n?"- 0px":"",")"),top:"calc(0px + ".concat(h.vertical,")")}:{left:"calc(".concat(a+u,"px + ").concat(h.horizontal,")"),bottom:"calc(0px + ".concat(h.vertical,")")}),{},{transform:"rotate(".concat(g,"deg)"),transformOrigin:("top"===p,"bottom left"),backgroundColor:r});return(0,m.jsx)("div",{style:v},"strich-".concat(e))}if(i){if("ltr"===o){var S,x=5*("bottom"!==p||0!==n);S={left:"".concat(a+u+f+x,"px")}}else S={right:"".concat(a+u+f,"px")};var w=y({position:"absolute",height:"100%",width:"2px"},S);return(0,m.jsx)("div",{style:y(y({},w),{},{backgroundColor:r})},"strich-".concat(e))}return null},[r,o,a,k,I,E,l,d,p,C,T,G,L,n,R,F,U,_]),$=(0,c.useCallback)(function(e){return(0,m.jsxs)(c.Fragment,{children:[[0,1,2,3].map(function(t){return Y(5*e+t,!1,!0)}),Y(5*e+4,!1,!1)," "]},"einheit-".concat(e))},[Y]),q=(0,c.useMemo)(function(){return Array.from({length:J}).map(function(e,t){return $(t)})},[J,$]),Q=(0,c.useMemo)(function(){return Array.from({length:Z}).map(function(e,t){return Y(5*J+t,!1,t<4)})},[Z,J,Y]),X=(0,c.useMemo)(function(){if(V){var e=t-1;return Y(e,!0,e%5<4)}return null},[V,t,Y]),ee=(0,c.useCallback)(function(){return Array.from({length:Math.ceil(t/2)}).map(function(e,t){return"".concat(35*t,"px")})},[t]),et=(0,c.useCallback)(function(){return ee().map(function(e,n){var i=2*n+2<=t,o=2*n+1===t,a={position:"absolute",width:"0%",height:"104%",top:"50%",transform:"translateY(-50%)"};return"top"===p?a.right="calc(".concat(e," + 40px)"):a.left="calc(".concat(e," + 20px)"),(0,m.jsxs)("div",{style:a,children:[(0,m.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(".concat(j,"deg)"),transformOrigin:"center",opacity:i||o?1:0}}),(0,m.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(-".concat(j,"deg)"),transformOrigin:"center",opacity:+!!i}})]},"x-".concat(n))})},[ee,t,j,r,p]),en=(0,c.useCallback)(function(){var e=Math.floor(t/10);return e>0?(0,m.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:Array.from({length:e}).map(function(e,t){return(0,m.jsxs)("div",{style:y(y({position:"absolute"},"top"===p?{right:"".concat(23+t*(b+15),"px")}:{left:"".concat(23+t*(b+15),"px")}),{},{top:"50%",transform:"translateY(-50%)",width:"".concat(b,"px"),height:"107%"}),children:[(0,m.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(".concat(j,"deg)"),transformOrigin:"center"}}),(0,m.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(-".concat(j,"deg)"),transformOrigin:"center"}})]},"hundred-x-".concat(t))})}):null},[t,r,b,j,p]),er=(0,c.useMemo)(function(){if(x)return et();if(100===n){var e=Math.floor(t/10),r=t-10*e,i=e*(b+K);return(0,m.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[en(),r>0&&(0,m.jsx)("div",{style:y(y({position:"absolute"},"top"===p?{right:e>0?"calc(".concat(i,"px + ").concat(null!=H?H:63,"px)"):"calc(".concat(25,"px + 16px)")}:{left:e>0?"calc(".concat(i,"px + ").concat(null!=W?W:40,"px)"):"calc(".concat(25,"px - 8px)")}),{},{top:0,bottom:0,width:"".concat(r*l,"px")}),children:Array.from({length:r}).map(function(e,t){return Y(t,!1,!0)})})]})}if(20!==n)return(0,m.jsxs)(m.Fragment,{children:[q,Q,X]});var o=Math.floor(t/5),a=t%5,s=o*(d+4*l)+a*l;return(0,m.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,m.jsxs)("div",{style:y(y({position:"absolute"},"top"===p?{right:"25px"}:{left:"0px"}),{},{top:0,bottom:0,width:"".concat(s,"px")}),children:[Array.from({length:o}).map(function(e,t){return $(t)}),Array.from({length:a}).map(function(e,t){return Y(5*o+t,!1,t<4)})]})})},[t,n,x,et,en,b,K,p,l,Y,q,Q,X,d,$]);return(0,c.useEffect)(function(){},[t]),(0,m.jsx)(S,{isRotated:void 0!==h&&h,children:er})};var w=n(28742),j=n(94566),N=n(57724);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e,t,n){var r;return(r=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==k(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=(0,g.Ay)("div")({position:"absolute",width:"75%",maxWidth:"320px",height:"80%",top:"10%",left:"50%",transform:"translateX(-50%)",pointerEvents:"none"}),C=(0,g.Ay)("div")(function(e){var t=e.customStyle,n=e.isDisabled;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({position:"absolute",width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0 10px",boxSizing:"border-box",pointerEvents:n?"none":"auto",cursor:n?"default":"pointer"},t)}),T=(0,g.Ay)("span")(function(e){var t=e.position;return P(P(P(P(P(P({position:"absolute"},"top"===t?"left":"right","10px"),"top","50%"),"transform","top"===t?"translateY(-50%) rotate(180deg)":"translateY(-50%)"),"color","rgba(255, 255, 255, 0.8)"),"fontSize","16px"),"fontWeight","bold")}),A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-43,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0%",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0%",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0%",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0%";return"bottom"===e?{"100er":{height:"20%",top:"calc(-3.5% + ".concat(r,")"),left:"-4%",width:"105%"},"50er":{height:"20%",top:"70%",left:"9%",width:"95%",transform:"rotate(".concat(t,"deg)"),transformOrigin:"top left"},"20er":{height:"20%",bottom:"calc(-4.5% + ".concat(o,")"),left:"2%",width:"80%"},restzahl:{height:"20%",top:"76%",right:"-2%",width:"16%"}}:{"20er":{height:"20%",top:"calc(-4.5% + ".concat(i,")"),right:"2%",width:"80%"},"50er":{height:"20%",bottom:"14%",left:"22%",width:"95%",transform:"rotate(".concat(t,"deg)"),transformOrigin:"bottom left"},"100er":{height:"20%",bottom:"calc(-3.5% + ".concat(n,")"),right:"-4%",width:"105%"},restzahl:{height:"20%",bottom:"76%",left:"-2%",width:"16%"}}},G=(0,g.Ay)("div")(function(e){return{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start",transform:e.isRotated?"rotateX(180deg) rotateY(180deg) rotateZ(180deg)":"none",transformOrigin:"center center"}}),D=function(e){if("restzahl"===e)return"restzahl";var t=parseInt(e);return 20===t||50===t||100===t?t:20};let L=function(e){var t=e.position,n=(e.onBlendEffect,e.score),r=e.top100erOffset,i=e.bottom100erOffset,o=e.top20erOffset,a=e.bottom20erOffset,s=e.isInteractionDisabled,l=void 0!==s&&s,c=(0,w.useGameStore)();c.updateScoreByStrich,c.addWeisPoints,c.currentHistoryIndex,c.roundHistory,c.showHistoryWarning,c.jumpToLatest;var u=(0,j.useUIStore)();u.setGameInfoOpen,u.setLastDoubleClickPosition,u.closeHistoryWarning;var f=(0,N.J)(n),d=f.striche,p=f.restZahl,h=A(t,-43,void 0===r?"2%":r,void 0===i?"2%":i,void 0===o?"2%":o,void 0===a?"2%":a);return(0,m.jsx)(E,{children:(0,m.jsx)(G,{isRotated:"top"===t,children:Object.entries(h).map(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,2)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1],o=D(r),a="restzahl"===o?p:d[o]||0;return(0,m.jsx)(C,{customStyle:i,"data-strich-box":"true","data-position":t,"data-box-type":r,isDisabled:l,children:"restzahl"===o?(0,m.jsx)(T,{position:t,children:p}):(0,m.jsx)(x,{stricheCount:a,stricheCounts:d,einheitWert:o,strichColor:"rgb(255, 255, 255)",animationDuration:100,isActive:!0,direction:"top"===t?"rtl":"ltr",edgeOffset:0,isXMode:50===o,xAngle:18,xAlignment:"top"===t?"right":"left",isDiagonal:!0,diagonalAngle:"top"===t?-43:43,diagonalStrichHeight:"116%",diagonalStrichWidth:"2px",diagonalStrichOffset:{vertical:"0%",horizontal:"0%"},diagonalStrichAngle:"top"===t?-25:25,topDiagonalStrichOffset:{vertical:"0%",horizontal:"0%"},bottomDiagonalStrichOffset:{vertical:"0%",horizontal:"0%"},topDiagonalStrichAngle:30,bottomDiagonalStrichAngle:30,position:t,diagonalStrichOffset100er:{vertical:"top"===t?"-18%":"3%",horizontal:"top"===t?"10%":"-5%"},diagonalStrichOffset20er:{vertical:"top"===t?"-20%":"3.5%",horizontal:"top"===t?"5.5%":"-1.5%"},diagonalStrichAngle100er:35,diagonalStrichAngle20er:35})},r)})})})};var R=n(56547),F=n(3501);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){K(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function K(e,t,n){var r;return(r=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==U(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=(0,c.forwardRef)(function(e,t){var n=e.position,r=e.height,i=e.zShapeConfig,o=e.padding,a=e.onSwipe,s=e.y,l=e.mainOpacity,f=e.getBrightness,d=e.onLongPress,g=e.score,b=e.triggerBlendEffect,v=(e.isHistoryNavigationActive,e.onDoubleClick),y=(0,j.useUIStore)(function(e){return e.splitContainer}),S=y.isOpen,x=y.position,w=(0,j.useUIStore)(function(e){return e.isMenuOpen}),N=z((0,c.useState)(null),2),k=N[0],O=N[1],I=(0,R.b)(),P=I.isActive,E=I.getCurrentStep,C=z((0,c.useState)(0),2),T=C[0],A=C[1],G=c.useRef(0),D=c.useRef(!1),U=function(){var e=Date.now();e-G.current<300||(R.b.getState(),G.current,O(setTimeout(function(){D.current&&d(n)},400)),G.current=e,D.current=!0)},_=function(){k&&clearTimeout(k),D.current=!1};(0,c.useEffect)(function(){return function(){k&&clearTimeout(k)}},[k]),h({onSwipeLeft:function(){return a("left",n)},onSwipeRight:function(){return a("right",n)},onSwipeUp:function(){return a("up",n)},onSwipeDown:function(){return a("down",n)},element:n});var H=K(K(K(K(K(K({width:"100%",position:"absolute",left:0,right:0,overflow:"visible",height:"".concat(r,"px")},n,0),o,"env(safe-area-inset-top)"),"userSelect","none"),"WebkitUserSelect","none"),"WebkitTouchCallout","none"),"touchAction","none"),B=K(K({position:"absolute",width:"110%",left:"-1%"},"top"===n?"bottom":"top","".concat(1.5*i.innerSpacing,"px")),"height","calc(100% - ".concat(1.5*i.edgeSpacing+.8*i.innerSpacing,"px)")),W=function(e){var t=new Date().getTime(),r=t-T;if(r<300&&r>0){var i=E();if(P){if((null==i?void 0:i.id)===F.nI.GAME_INFO){null==v||v(n);return}e.preventDefault(),e.stopPropagation();return}null==v||v(n)}A(t)};return(0,m.jsxs)(u.CS.div,{style:M(M({},H),{},{transform:s.to(function(e){return S&&n===x?"translateY(".concat("top"===n?-100:100,"%)"):0===e?"none":"translateY(".concat("top"===n?-e:e,"px)")})}),"data-swipe-area":n,onMouseDown:U,onMouseUp:_,onTouchStart:function(e){U(),W(e)},onTouchEnd:_,onContextMenu:function(e){return e.preventDefault()},onDoubleClick:function(e){var t=E();if(P){if((null==t?void 0:t.id)===F.nI.GAME_INFO){null==v||v(n);return}e.preventDefault(),e.stopPropagation();return}null==v||v(n)},children:[(0,m.jsx)("div",{style:B,children:(0,m.jsx)(p,{className:"w-full h-full text-chalk-red",position:n,isReversed:"top"===n})}),(0,m.jsx)(u.CS.div,{style:M(M({},{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"white",pointerEvents:"none"}),{},{opacity:s.to(f)})}),(0,m.jsx)(u.CS.div,{className:"absolute inset-0 flex items-center justify-center",style:{opacity:l},children:(0,m.jsx)("span",{className:"text-gray-300 text-[9rem] opacity-50 select-none",style:{transform:"top"===n?"rotate(180deg)":"none"},children:g})}),(0,m.jsx)(L,{position:n,onBlendEffect:b,score:g,isInteractionDisabled:w})]})});function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}B.displayName="SplitContainer";let J=function(e){var t,n=e.initialPosition,r=e.maxOffset,i=function(e){if(Array.isArray(e))return e}(t=(0,u.zh)(function(){return{y:n,mainOpacity:1,oppositeOpacity:1,config:{mass:1,tension:120,friction:26,clamp:!0,duration:250}}}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return W(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],a=i[1];return{y:o.y,mainOpacity:o.mainOpacity,oppositeOpacity:o.oppositeOpacity,animateSwipe:function(e){"boolean"==typeof e?a.start({y:e?r:n,mainOpacity:1,oppositeOpacity:1}):a.start({mainOpacity:0,oppositeOpacity:0,config:{duration:125},onRest:function(){a.start({mainOpacity:1,oppositeOpacity:1,config:{duration:125}})}})},getBrightness:function(e){return"number"!=typeof e||isNaN(e)||"number"!=typeof r||0===r?0:Math.max(0,Math.min(e/r*.45,.45))}}};var Z=n(31931),V=n(48101),Y=n(99087),$=n(51324),q=function(e,t){if(!(e<.3)){var n=document.querySelector(".matsch-button");if(n)for(var r=n.getBoundingClientRect(),i=(r.left+r.width/2)/window.innerWidth,o=(r.top+r.height/2)/window.innerHeight,a=10+(e-.3)*30,s=function(e,n,r,a){(0,$.A)({particleCount:r,angle:t?(e+180)%360:e,spread:n,origin:{x:i,y:o},colors:["#FF0000","#FFA500","#FFFF00","#00FF00","#0000FF","#800080"],scalar:a,gravity:t?-1:1,ticks:300})},l=0;l<360;l+=45)s(l,55,Math.floor(.3*a),1.2),s(l,25,Math.floor(.4*a),.8),s(l,10,Math.floor(.3*a),.4)}},Q=n(50498),X=n(85253),ee=n(38791),et=n(900),en=n(68774),er=n(75040);function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eo=function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=(0,c.useState)(1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return ei(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ei(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1],o=(0,j.useUIStore)(function(e){return e.menu.isOpen});return(0,c.useLayoutEffect)(function(){var t=function(){if(e.current){var t=window.innerHeight,n=e.current.offsetHeight;if(0!==n){var r=t-8;n>r?i(r/n):i(1)}}};return t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),function(){window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[e,o]),r},ea=n(42471),es=n(83872);function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||eu(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eu(e,t){if(e){if("string"==typeof e)return ef(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ef(e,t):void 0}}function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=el(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=el(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==el(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ep=function(e){var t,n,r=e.isOpen,i=e.onClose,o=e.onCancel,a=e.initialValue,s=void 0===a?0:a,l=e.clickedPosition;w.useGameStore.getState();var f=(0,w.useGameStore)(),d=f.finalizeRound,p=f.currentHistoryIndex,h=f.roundHistory,g=f.showHistoryWarning,b=f.jumpToLatest,v=f.validateHistoryAction,y=(f.activeGameId,f.farbeSettings,f.scoreSettings,f.strokeSettings,f.setFarbe);f.currentPlayer,f.striche,f.scores;var S=(0,j.useUIStore)(),x=S.calculator,N=S.setCalculatorFlipped,k=S.settings.pictogramConfig,O=S.isReadOnlyMode,I=S.setGlobalClickDisabled,P=(0,R.b)();(P.isActive,P.getCurrentStep)(),(0,Z.Q5)().currentGroup,(0,V.yu)().currentTournamentInstance,(0,es.useJassStore)().currentSession;var E=(0,c.useCallback)(function(){var e=w.useGameStore.getState(),t=e.activeGameId,n=e.farbeSettings,r=e.scoreSettings,i=e.strokeSettings,o=V.yu.getState().currentTournamentInstance,a=Z.Q5.getState().currentGroup,s=j.useUIStore.getState();return t&&n&&r&&i?{farbeSettings:n,scoreSettings:r,strokeSettings:i,source:"gameStore-active"}:null!=o&&o.settings?(console.log("[Calculator] PRIORIT\xc4T 2: Turnier-Kontext. Verwende TURNIER-Settings."),{farbeSettings:o.settings.farbeSettings||X.FT,scoreSettings:em(em({},ee.$d),o.settings.scoreSettings||{}),strokeSettings:o.settings.strokeSettings||ea.zh,source:"tournament"}):a?(console.log("[Calculator] PRIORIT\xc4T 3: Gruppen-Kontext. Verwende GRUPPEN-Settings."),{farbeSettings:a.farbeSettings||X.FT,scoreSettings:em(em({},ee.$d),a.scoreSettings||{}),strokeSettings:a.strokeSettings||ea.zh,source:"group"}):(console.log("[Calculator] PRIORIT\xc4T 4: Kein Online-Kontext. Verwende UI-STORE-Settings (Gastmodus)."),{farbeSettings:s.farbeSettings,scoreSettings:s.scoreSettings,strokeSettings:s.strokeSettings,source:"uiStore-guest"})},[]),C=ec((0,c.useState)(null),2),T=C[0],A=C[1],G=ec((0,c.useState)(null),2),D=G[0],L=G[1],F=ec((0,c.useState)(null),2),U=F[0],_=F[1];(0,c.useEffect)(function(){if(r){var e=E();A(e.farbeSettings),L(e.scoreSettings),_(e.strokeSettings)}},[r,E]);var M=T||X.FT;D||ee.$d,U||ea.zh;var K=ec((0,c.useState)((null==s?void 0:s.toString())||"0"),2),z=K[0],H=K[1],B=ec((0,c.useState)("0"),2),W=B[0],J=B[1],$=ec((0,c.useState)("0"),2),ei=$[0],el=$[1],ed=ec((0,c.useState)(1),2),ep=ed[0],eh=ed[1],eg=ec((0,c.useState)(null),2),eb=eg[0],ev=eg[1],ey=ec((0,c.useState)(new Set),2),eS=(ey[0],ey[1]),ex=ec((0,c.useState)(!1),2),ew=ex[0],ej=ex[1],eN=ec((0,c.useState)(!1),2),ek=eN[0],eO=eN[1],eI=ec((0,c.useState)(0),2),eP=eI[0],eE=eI[1],eC=ec((0,c.useState)(null),2),eT=eC[0],eA=eC[1],eG=ec((0,c.useState)(0),2),eD=eG[0],eL=eG[1],eR=ec((0,c.useState)(!1),2),eF=eR[0],eU=eR[1],e_=ec((0,c.useState)(!1),2),eM=e_[0],eK=e_[1],ez=(0,er.U)(),eH=(ez.scale,ez.overlayScale),eB=c.useRef(null),eW=eo(eB),eJ=(0,u.zh)({opacity:+!!r,transform:"scale(".concat(r?eH*eW:.95,") rotate(").concat(x.isFlipped?"180deg":"0deg",") translateY(").concat(-3,"vh)"),config:{mass:1,tension:300,friction:20}});(0,c.useEffect)(function(){r&&(N(!1),eK(!1))},[r,N,s]),(0,c.useEffect)(function(){r&&l&&N("top"===l)},[r,l,N]),(0,c.useEffect)(function(){eU(!0)},[]);var eZ=(0,c.useCallback)(function(){return E().scoreSettings.matschBonus?257:157},[E]),eV=(0,c.useCallback)(function(e,t){var n=eZ();if("0"===e)J((ee.sz*t).toString()),el("0");else if(e===n.toString())J("0"),el((n*t).toString());else{var r=parseInt(e,10);J((Math.max(ee.sz-r,0)*t).toString()),el((r*t).toString())}},[eZ]);(0,c.useEffect)(function(){eV(z,ep)},[z,ep,eV]);var eY=function(){return eM&&null!==eb},e$=function(e){if(!ew){var t=Date.now();t-eD<100||(eL(t),H(function(t){if("0"===t)return 0===e?"0":e.toString();var n=t+e.toString();return parseInt(n,10)>ee.sz?t:n}),eK(!0),eS(function(t){return new Set(t).add(e)}),setTimeout(function(){eS(function(t){var n=new Set(t);return n.delete(e),n})},100))}},eq=function(e,t){ev(e),eh(t),eV(z,t)},eQ=(0,c.useCallback)(function(e){if(e){var t,n;e.preventDefault(),e.stopPropagation(),null==(t=e.nativeEvent)||null==(n=t.stopImmediatePropagation)||n.call(t)}var r=w.useGameStore.getState().activeGameId;if(O){console.log("[Calculator] Abbruch: ReadOnly-Modus aktiv f\xfcr Spiel ".concat(r||"ID unbekannt",".")),j.useUIStore.getState().showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine Punkte geschrieben werden."});return}if(eY()&&eb){if(r&&!r){console.error("[Calculator] FEHLER: currentActiveGameId ist nicht verf\xfcgbar beim Versuch, die Runde abzuschliessen!"),j.useUIStore.getState().showNotification({type:"error",message:"Spielfehler: Spiel-ID nicht gefunden. Bitte neu laden."});return}var o=parseInt(ei,10),a=parseInt(W,10),s={top:"top"===l?o:a,bottom:"bottom"===l?o:a},c=void 0;if(ew){var u=w.useGameStore.getState().currentPlayer,f=l===(1===u||3===u?"bottom":"top")?"matsch":"kontermatsch";c={team:l,type:f}}if(I(!0,1500),!v())return void setTimeout(function(){g(Q.W,function(){y(eb),d(s,c),i()},function(){return b()})},100);try{y(eb),d(s,c)}catch(e){console.error("[Calculator] Fehler beim Aufruf von finalizeRound:",e),j.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Verarbeiten der Runde."})}i()}},[eY,eb,ei,W,l,ew,p,h.length,g,b,d,i,v,O,y,I]),eX=function(){N(!x.isFlipped)},e0=function(e){null==e||e.stopPropagation();var t=eZ();H(t.toString()),J("0"),el((t*ep).toString()),ej(!0),eK(!0),q(eP,x.isFlipped)},e1=(x.isFlipped,[1,2,3,4,5,6,7,8,9]),e2=X.u4.map(function(e){var t;return{color:e.name,multiplier:null!=(t=M.values[e.id])?t:0}}).filter(function(e){return e.multiplier>0}).sort(function(e,t){return e.multiplier-t.multiplier}),e5=e2.length%2==1?[{color:"empty",multiplier:0}].concat(function(e){if(Array.isArray(e))return ef(e)}(e2)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e2)||eu(e2)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e2,e4=function(e,t,n){var r,i,o,a=X.u4.find(function(t){return t.name===e});return t?"bg-orange-500":"FR"===M.cardStyle?(null==a||null==(i=a.frStyle)?void 0:i.backgroundColor)||"bg-gray-600":"emoji"===n?(null==a||null==(o=a.emojiStyle)?void 0:o.backgroundColor)||"bg-gray-600":(null==a||null==(r=a.standardStyle)?void 0:r.backgroundColor)||"bg-gray-600"},e3=function(e){return k.isEnabled||"une"!==e.toLowerCase()?"FR"===M.cardStyle&&!k.isEnabled&&({Eicheln:"Schaufel",Rosen:"Kreuz",Schellen:"Herz",Schilten:"Ecke"})[e]||e:"Unde"},e6=function(e){var t=e.color,n=e.multiplier,r=e.handleColorClick,i=e.selectedColor,o=e.pictogramConfig,a=e.isClient,s=e.getButtonStyle,l=e.getPictogram,c=e.cardStyle,u=e.getDisplayName,f=(0,en.Z)(function(){return r(t,n)}),d=f.handlers,p=f.buttonClasses,h="mis\xe8re"===t.toLowerCase()&&i===t;return(0,m.jsx)("button",em(em({},d),{},{className:"p-1 rounded text-white select-none text-xs h-12 flex items-center justify-center ".concat(i===t?"active":""," ").concat(s(t,i===t,o.mode)," ").concat(p),"aria-label":"".concat(t),children:a&&o.isEnabled?"emoji"===o.mode?(0,m.jsx)("span",{className:"text-2xl",children:l(t,"emoji",c)}):(0,m.jsx)("img",{src:l(t,"svg",c),alt:t,className:"w-10 h-10 object-contain ".concat(h?"invert brightness-0":""),onError:function(e){e.currentTarget.style.display="none";var n=e.currentTarget.parentElement;n&&(n.textContent=u(t))}}):u(t)}),t)},e8=function(e){var t=e.num,n=e.handleNumberClick,r=(0,en.Z)(function(){return n(t)}),i=r.handlers,o=r.buttonClasses;return(0,m.jsx)("button",em(em({},i),{},{className:"bg-gray-600 text-white p-4 rounded select-none text-2xl ".concat(o),children:t}),t)},e7=function(e){return(0,m.jsx)(e8,{num:e,handleNumberClick:e$},e)},e9=(0,en.Z)(e0);e9.isPressedDown,e9.handlers,e9.buttonClasses;var te=(0,en.Z)(function(){H("0"),J("0"),eh(1),ev(null),ej(!1),eK(!1)}),tt=te.handlers,tn=te.buttonClasses,tr=(0,en.Z)(function(e){return eQ(e)}),ti=tr.handlers,to=tr.buttonClasses;return(0,c.useEffect)(function(){var e=R.b.getState();e.getCurrentStep(),r&&e.isActive&&e.tutorialUIBlocking.calculatorClose},[r,o]),(0,c.useEffect)(function(){r&&document.dispatchEvent(new Event("calculatorOpen"))},[r]),(0,m.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300 prevent-interactions pb-2 ".concat(r?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:i,onContextMenu:function(e){return e.preventDefault()},children:(0,m.jsxs)(u.CS.div,{ref:eB,style:eJ,className:"flex flex-col items-center w-11/12 max-w-md",onClick:function(e){return e.stopPropagation()},children:[(0,m.jsx)("button",{onClick:function(e){e.stopPropagation(),eX()},className:"text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center rounded-full\n            mb-[-10px] z-10\n            ".concat(x.isFlipped?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,m.jsx)(Y.cO3,{className:"w-8 h-8"})}),(0,m.jsxs)("div",{className:"relative bg-gray-800 p-6 rounded-lg transition-all duration-700 flex flex-col items-center w-full",onClick:function(e){return e.stopPropagation()},children:[(0,m.jsx)("button",{onClick:function(e){e.stopPropagation(),i()},className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white transition-colors z-10",children:(0,m.jsx)(Y.yGN,{size:24})}),(0,m.jsx)("h2",{className:"text-white text-xl mb-4 text-center select-none",children:"Runde schreiben"}),(0,m.jsxs)("div",{className:"flex flex-col w-full space-y-4",children:[(0,m.jsx)("input",{type:"text",value:z,readOnly:!0,className:"w-full bg-gray-700 text-white text-6xl p-4 rounded select-none text-center"}),(0,m.jsxs)("div",{className:"flex justify-between items-stretch w-full space-x-2 h-10",children:[(0,m.jsxs)("div",{className:"w-1/3 bg-gray-700 text-white p-1 rounded select-none flex items-center justify-end relative",children:[(0,m.jsx)("div",{className:"text-xs absolute top-0 left-1",children:"Gegner:"}),(0,m.jsx)("div",{className:"text-xl pr-1",children:W})]}),(0,m.jsx)("button",{onClick:e0,onMouseDown:function(){eO(!0),eE(0),eA(setInterval(function(){eE(function(e){return Math.min(e+1,20)})},100))},onMouseUp:function(){eO(!1),eT&&clearInterval(eT),e0()},onMouseLeave:function(){eO(!1),eT&&clearInterval(eT)},onTouchStart:function(){eO(!0),eE(0),eA(setInterval(function(){eE(function(e){return Math.min(e+1,20)})},100))},onTouchEnd:function(){eO(!1),eT&&clearInterval(eT),e0()},className:"w-1/3 p-1 rounded select-none transition-all duration-100 text-lg flex items-center justify-center matsch-button ".concat(ew?"bg-orange-500 text-white":ek?"bg-gray-600 text-white scale-95 opacity-80":"bg-gray-700 text-white hover:bg-orange-500 scale-100 opacity-100"),disabled:ew,children:"Matsch"}),(0,m.jsxs)("div",{className:"w-1/3 bg-gray-700 text-white p-1 rounded select-none flex items-center justify-end relative",children:[(0,m.jsx)("div",{className:"text-xs absolute top-0 left-1",children:"Total:"}),(0,m.jsx)("div",{className:"text-xl pr-1",children:ei})]})]})]}),(0,m.jsx)("div",{className:"mt-4"}),(0,m.jsx)("div",{className:(t=e2.length,n="grid grid-cols-5 gap-2 mb-4 w-full group ".concat(eb?"has-active":""),t<=4?n.replace("grid-cols-5","grid-cols-4"):t<=6?n.replace("grid-cols-5","grid-cols-3"):t<=8?n.replace("grid-cols-5","grid-cols-4"):n),children:e5.map(function(e){var t=e.color,n=e.multiplier;return"empty"===t?(0,m.jsx)("div",{className:"p-1 rounded text-white select-none text-xs h-12 flex items-center justify-center bg-gray-700"},"empty-placeholder"):(0,m.jsx)(e6,{color:t,multiplier:n,handleColorClick:eq,selectedColor:eb||"",pictogramConfig:k,isClient:eF,getButtonStyle:e4,getPictogram:et.j,cardStyle:M.cardStyle,getDisplayName:e3},t)})}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-3 w-full",children:[e1.map(function(e){return e7(e)}),(0,m.jsx)("button",em(em({},tt),{},{className:"bg-red-600 text-white p-4 rounded select-none text-2xl ".concat(tn),children:"C"})),e7(0),(0,m.jsx)("button",em(em({},ti),{},{disabled:!eY(),className:"bg-green-600 text-white p-4 rounded select-none text-2xl ".concat(to,"\n                ").concat(eY()?"":"opacity-50 cursor-not-allowed"),children:"OK"}))]})]})]})})};var eh=n(71716);function eg(e){return(eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ev(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=eg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eg(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eg(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ey=function(e){var t=e.currentPlayer,n=e.startingPlayer,r=(e.currentRound,e.opacity,e.isOpen),i=e.isGameStarted,o=e.startFadeIn,a=(0,w.useGameStore)().playerNames,s=(0,u.zh)({from:{opacity:0},to:{opacity:+!r},config:{duration:150},delay:o&&!r?350:0,immediate:r});if(r)return null;var l=function(e){var r=e?[1,3]:[2,4],o=r[0],s=r[1],l=a[o]||"Spieler ".concat(o),c=a[s]||"Spieler ".concat(s),u=i?t:n;return(0,m.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,m.jsx)("span",{className:u===o?"text-white font-bold text-xl":"text-gray-500",children:l}),(0,m.jsx)("span",{className:"text-gray-500",children:"+"}),(0,m.jsx)("span",{className:u===s?"text-white font-bold text-xl":"text-gray-500",children:c})]})};return(0,m.jsxs)(u.CS.div,{className:"absolute inset-x-0 flex flex-col items-center justify-center pointer-events-none",style:ev(ev({},s),{},{top:"calc(50% - 4rem)",height:"3.5rem"}),children:[(0,m.jsx)("div",{className:"absolute w-full flex justify-center top-[4.5rem]",children:i?l(!0):"START"}),(0,m.jsx)("div",{className:"absolute w-full flex justify-center bottom-0",children:(0,m.jsx)("div",{className:"rotate-180",children:i?l(!1):"START"})})]})};var eS=n(10637),ex=n(50679),ew=n(77750),ej=n(23355),eN=n(27212);let ek=function(e){var t=e.onConfirm,n=e.onDismiss,r=e.show,i=e.swipePosition,o=void 0===i?"bottom":i;return(0,m.jsx)(eN.N,{children:r&&(0,m.jsxs)(ej.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-[9999] p-4 pointer-events-auto\n            ".concat("top"===o?"rotate-180":""),children:[(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:n}),(0,m.jsxs)(ej.P.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-xs w-full relative text-white z-10\n              ".concat("top"===o?"rotate-180":""),children:[(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4",children:[(0,m.jsx)(ex.BS8,{className:"w-12 h-12 text-yellow-600 mb-2"}),(0,m.jsx)("p",{className:"text-center mb-6",children:"M\xf6chten Sie wirklich das Spiel zur\xfccksetzen? Alle Daten werden gel\xf6scht."})]}),(0,m.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,m.jsx)("button",{onClick:t,className:"flex-1 bg-yellow-600 text-white px-6 py-2 rounded-full hover:bg-yellow-700 transition-colors text-lg font-semibold",children:"Ja"}),(0,m.jsx)("button",{onClick:n,className:"flex-1 bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-700 transition-colors text-lg font-semibold",children:"Abbrechen"})]})]})]})})};var eO=n(18847),eI=n.n(eO),eP=n(88880),eE=n(90636),eC=n(54573),eT=n(6284);function eA(e){return(eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eD(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eD(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eL(Object(n),!0).forEach(function(t){eF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eF(e,t,n){var r;return(r=function(e,t){if("object"!=eA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eA(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==eA(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eU=[0,1,2,3,4,5,6,7,8],e_={sieg:{min:0,max:(null==(r=ee.C3.find(function(e){return"sieg"===e.id}))?void 0:r.maxValue)||1e4,default:(null==(i=ee.C3.find(function(e){return"sieg"===e.id}))?void 0:i.defaultValue)||2e3},berg:{min:0,max:(null==(o=ee.C3.find(function(e){return"berg"===e.id}))?void 0:o.maxValue)||5e3,default:(null==(a=ee.C3.find(function(e){return"berg"===e.id}))?void 0:a.defaultValue)||2e3},schneider:{min:0,max:(null==(s=ee.C3.find(function(e){return"schneider"===e.id}))?void 0:s.maxValue)||5e3,default:(null==(l=ee.C3.find(function(e){return"schneider"===e.id}))?void 0:l.defaultValue)||1e3}},eM=function(e){var t=e.multiplier,n=e.onMultiplierClick;return(0,m.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n      ".concat(0===t?"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50":"bg-orange-500 text-white hover:bg-orange-600 active:scale-95 active:opacity-80"),children:0===t?"-":"".concat(t,"x")})},eK=function(e){var t=e.isEnabled,n=e.mode,r=e.onClick,i=(0,en.Z)(r),o=i.handlers,a=i.buttonClasses;return(0,m.jsx)("button",eR(eR({},o),{},{className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n        ".concat(!t?"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50":"bg-green-500 text-white hover:bg-green-600"," ").concat(a),children:t?"svg"===n?"Standard":"Emojis":"Nein"}))},ez=function(e){var t=e.style,n=e.isActive,r=e.onClick,i=(0,en.Z)(r),o=i.handlers,a=i.buttonClasses;return(0,m.jsx)("button",eR(eR({},o),{},{className:"px-3 py-1 rounded ".concat(n?"bg-green-500 text-white":"bg-gray-700 text-gray-300"," ").concat(a),children:t}))},eH=function(e){var t=e.value,n=e.isActive,r=e.onClick,i=(0,en.Z)(r),o=i.handlers,a=i.buttonClasses;return(0,m.jsx)("button",eR(eR({},o),{},{className:"px-4 py-2 rounded-lg text-xl font-bold transition-all duration-150 ".concat(n?"bg-green-500 text-white hover:bg-green-600":"bg-gray-700 text-gray-300 hover:bg-gray-600"," ").concat(a),children:t}))},eB=eI()(function(){return Promise.resolve(function(){var e,t,n,r=(0,eE.H)("settings").preventClose,i=(0,j.useUIStore)(function(e){return e.isSettingsOpen}),o=(0,j.useUIStore)(function(e){return e.closeSettings}),a=(0,j.useUIStore)(function(e){return e.settings}),s=(0,j.useUIStore)(function(e){return e.farbeSettings}),l=(0,j.useUIStore)(function(e){return e.scoreSettings}),f=(0,j.useUIStore)(function(e){return e.strokeSettings}),d=(0,j.useUIStore)(function(e){return e.updateFarbeSettings}),p=(0,j.useUIStore)(function(e){return e.updateScoreSettings}),h=(0,j.useUIStore)(function(e){return e.cyclePictogramMode}),g=(0,j.useUIStore)(function(e){return e.setCardStyle}),b=(0,j.useUIStore)(function(e){return e.updateStrokeSettings});(0,j.useUIStore)(function(e){return e.tutorialBlockedUI}),(0,j.useUIStore)(function(e){return e.openSettings});var v=(0,j.useUIStore)(function(e){return e.showNotification}),y=(0,j.useUIStore)(function(e){return e.setSettingsTab}),S=eG((0,c.useState)(s.values),2),x=S[0],w=S[1],N=eG((0,c.useState)(l.values),2),k=N[0],O=N[1],I=eG((0,c.useState)(l.enabled),2),P=I[0],E=I[1],C=eG((0,c.useState)(f),2),T=C[0],A=C[1],G=eG((0,c.useState)({}),2),D=G[0],L=G[1],U=eG((0,c.useState)(!1),2),_=(U[0],U[1]),M=(0,c.useRef)(null),K=(0,R.b)(function(e){return e.getCurrentStep()}),z=null==K?void 0:K.id.startsWith("SETTINGS_"),H=r||z,B=(0,u.zh)({opacity:+!!a.isOpen,transform:"scale(".concat(a.isOpen?1:.95,")"),config:{mass:1,tension:300,friction:20}}),W=function(e){H||!M.current||M.current.contains(e.target)||J()};(0,c.useEffect)(function(){if(a.isOpen)return document.addEventListener("mousedown",W),function(){document.removeEventListener("mousedown",W)}},[a.isOpen,H]),(0,c.useEffect)(function(){O(l.values),E(l.enabled)},[l]),(0,c.useEffect)(function(){w(s.values)},[s]),(0,c.useEffect)(function(){i&&(w(s.values),O(l.values),E(l.enabled),A(f),_(!1))},[i,s,l,f]),(0,c.useEffect)(function(){if(i){var e=JSON.stringify(x)!==JSON.stringify(s.values),t=JSON.stringify(k)!==JSON.stringify(l.values)||JSON.stringify(P)!==JSON.stringify(l.enabled),n=JSON.stringify(T)!==JSON.stringify(f);_(e||t||n)}},[x,k,P,T,s,l,f,i]);var J=function(){var e=JSON.stringify(x)!==JSON.stringify(s.values),t=JSON.stringify(k)!==JSON.stringify(l.values)||JSON.stringify(P)!==JSON.stringify(l.enabled),n=JSON.stringify(T)!==JSON.stringify(f);(e||t||n)&&(d({values:x}),p({values:k,enabled:P}),b(T),v({type:"success",message:"Einstellungen gespeichert."})),o()},Z=function(e){w(function(t){var n=t[e],r=(eU.indexOf(n)+1)%eU.length;return eR(eR({},t),{},eF({},e,eU[r]))})},V=function(e,t){if(L(function(n){return eR(eR({},n),{},eF({},e,t))}),!(!t||isNaN(parseInt(t)))){var n=parseInt(t);"sieg"===e&&n>=100?$(e,n):"sieg"!==e&&n>0&&$(e,n)}},$=function(e,t){O(function(n){var r=eR({},n),i=parseInt(t.toString().replace(/^0+/,""))||0;if("sieg"===e){var o=Math.max(1e3,Math.min(i,e_[e].max));r.sieg=o;var a=Math.floor(o/2);r.berg=a,r.schneider=a}else if("berg"===e){var s=Math.min(i,e_.berg.max);r.berg=s,r.schneider=s,r.sieg=Math.max(1e3,2*s)}else{var l=Math.floor(n.sieg/2);r[e]=Math.min(i,l)}return r})},q=function(e){E(function(t){return eR(eR({},t),{},eF({},e,!t[e]))})};return(0,m.jsx)(eN.N,{children:a.isOpen&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)(u.CS.div,{ref:M,style:B,className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl shadow-2xl p-5 max-w-lg w-full max-h-[90vh] flex flex-col border border-gray-700/50 ".concat(H?"cursor-not-allowed":""),children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-white",children:function(){switch(a.activeTab){case"farben":return"Jass Einstellungen";case"scores":return"Punkte Einstellungen";case"strokes":return"Striche Einstellungen";default:return""}}()}),(0,m.jsx)("button",{onClick:J,disabled:H&&(null==K?void 0:K.id)!==F.nI.SETTINGS_STROKES,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full ".concat(H&&(null==K?void 0:K.id)!==F.nI.SETTINGS_STROKES?"opacity-50 cursor-not-allowed":"hover:bg-gray-700"),"aria-label":"Einstellungen schlie\xdfen",children:(0,m.jsx)(Y.yGN,{size:24})})]}),(0,m.jsxs)("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2 custom-scrollbar space-y-5",children:[(0,m.jsxs)("div",{className:"flex justify-center space-x-2 bg-gray-700/50 p-1 rounded-lg mb-4 flex-shrink-0 sticky top-0 z-10 backdrop-blur-sm",children:[(0,m.jsx)("button",{onClick:function(){return y("farben")},className:"px-4 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("farben"===a.activeTab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-600"),children:"Farben"}),(0,m.jsx)("button",{onClick:function(){return y("scores")},className:"px-4 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("scores"===a.activeTab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-600"),children:"Punkte"}),(0,m.jsx)("button",{onClick:function(){return y("strokes")},className:"px-4 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("strokes"===a.activeTab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-600"),children:"Striche"})]}),"farben"===a.activeTab&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded-lg",children:[(0,m.jsx)("span",{className:"text-white text-lg",children:"Jasskarten"}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)(ez,{style:"DE",isActive:"DE"===a.cardStyle,onClick:function(){return g("DE")}}),(0,m.jsx)(ez,{style:"FR",isActive:"FR"===a.cardStyle,onClick:function(){return g("FR")}})]})]})}),(0,m.jsxs)("div",{className:"space-y-4 max-h-[40vh] overflow-y-auto pr-2",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded-lg",children:[(0,m.jsx)("span",{className:"text-white text-lg",children:"Piktogramme"}),(0,m.jsx)(eK,{isEnabled:a.pictogramConfig.isEnabled,mode:a.pictogramConfig.mode,onClick:h})]}),(0,m.jsx)("div",{className:"space-y-4",children:X.u4.map(function(e){var t,n,r,i=(0,eC.Sn)(e.id),o=null!=(t=null==(n=eP.S[i])?void 0:n[a.cardStyle])?t:i;return(0,m.jsxs)("div",{className:"flex items-center bg-gray-700/50 p-3 rounded-lg",children:[(0,m.jsx)("span",{className:"text-white text-lg w-20 flex-shrink-0",children:o}),(0,m.jsx)("div",{className:"flex-1 flex justify-center items-center",children:a.pictogramConfig.isEnabled&&(0,m.jsx)(eT.h,{farbe:e.name,mode:null!=(r=a.pictogramConfig.mode)?r:"svg",cardStyle:a.cardStyle})}),(0,m.jsx)(eM,{multiplier:x[e.id],onMultiplierClick:function(){return Z(e.id)}})]},e.id)})})]})]}),"scores"===a.activeTab&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded-lg",children:[(0,m.jsx)("span",{className:"text-white text-lg",children:"Sieg-Punkte"}),(0,m.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:null!=(e=D.sieg)?e:k.sieg,onChange:function(e){V("sieg",e.target.value.replace(/[^0-9]/g,""))},onBlur:function(){$("sieg",parseInt(D.sieg||"0")),L(function(e){return eR(eR({},e),{},{sieg:void 0})})},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)},className:"w-24 px-3 py-2 bg-gray-600 text-white rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]}),(0,m.jsxs)("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-600",children:[(0,m.jsx)("span",{className:"text-white text-lg",children:"Berg aktiviert"}),(0,m.jsx)("button",{onClick:function(){return q("berg")},className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n              ".concat(P.berg?"bg-green-500 text-white hover:bg-green-600":"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50"),children:P.berg?"Ja":"Nein"})]}),P.berg&&(0,m.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,m.jsx)("span",{className:"text-white text-lg",children:"Berg-Punkte"}),(0,m.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:null!=(t=D.berg)?t:k.berg,onChange:function(e){V("berg",e.target.value.replace(/[^0-9]/g,""))},onBlur:function(){$("berg",parseInt(D.berg||"0")),L(function(e){return eR(eR({},e),{},{berg:void 0})})},className:"w-24 px-3 py-2 bg-gray-600 text-white rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]})]}),(0,m.jsxs)("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-600",children:[(0,m.jsx)("span",{className:"text-white text-lg",children:"Schneider aktiviert"}),(0,m.jsx)("button",{onClick:function(){return q("schneider")},className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n              ".concat(P.schneider?"bg-green-500 text-white hover:bg-green-600":"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50"),children:P.schneider?"Ja":"Nein"})]}),P.schneider&&(0,m.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,m.jsx)("span",{className:"text-white text-lg",children:"Schneider-Punkte"}),(0,m.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:null!=(n=D.schneider)?n:k.schneider,onChange:function(e){V("schneider",e.target.value.replace(/[^0-9]/g,""))},onBlur:function(){$("schneider",parseInt(D.schneider||"0")),L(function(e){return eR(eR({},e),{},{schneider:void 0})})},className:"w-24 px-3 py-2 bg-gray-600 text-white rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]})]})]}),"strokes"===a.activeTab&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-4 rounded-lg min-h-[4rem]",children:[(0,m.jsx)("span",{className:"text-lg text-white",children:"Schneider-Striche"}),(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsx)(eH,{value:1,isActive:1===T.schneider,onClick:function(){return A(function(e){return eR(eR({},e),{},{schneider:1})})}}),(0,m.jsx)(eH,{value:2,isActive:2===T.schneider,onClick:function(){return A(function(e){return eR(eR({},e),{},{schneider:2})})}})]})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-4 rounded-lg min-h-[4rem]",children:[(0,m.jsx)("span",{className:"text-lg text-white",children:"Kontermatsch-Striche"}),(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsx)(eH,{value:1,isActive:1===T.kontermatsch,onClick:function(){return A(function(e){return eR(eR({},e),{},{kontermatsch:1})})}}),(0,m.jsx)(eH,{value:2,isActive:2===T.kontermatsch,onClick:function(){return A(function(e){return eR(eR({},e),{},{kontermatsch:2})})}})]})]})]})})]}),(0,m.jsxs)("div",{className:"mt-5 pt-4 border-t border-gray-700/50 flex justify-between items-center flex-shrink-0",children:[(0,m.jsx)("button",{onClick:function(){w(X.FT.values),O(ee.$d.values),E(ee.$d.enabled),A(ea.zh),v({type:"info",message:"Einstellungen auf Standard zur\xfcckgesetzt."})},disabled:H,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full ".concat(H?"opacity-50 cursor-not-allowed":"hover:bg-gray-700"),"aria-label":"Einstellungen zur\xfccksetzen",title:"Auf Standard zur\xfccksetzen",children:(0,m.jsx)(Y.cO3,{size:20})}),(0,m.jsx)(eW,{onClick:J})]})]})})})})},{ssr:!1});(0,c.memo)(function(e){var t=e.direction,n=e.onClick,r=(0,c.useRef)(null),i=(0,en.Z)(n),o=i.handlers,a=i.buttonClasses,s="left"===t?Y.irw:Y.fOo,l=(0,R.b)(function(e){return e.getCurrentStep()}),u="right"===t?"settings-navigation-next-button":"settings-navigation-prev-button",f=(null==l?void 0:l.id)===F.nI.SETTINGS_NAVIGATE_STROKES&&"left"===t||(null==l?void 0:l.id)===F.nI.SETTINGS_NAVIGATE&&"left"===t;return(0,m.jsx)("button",eR(eR({},o),{},{ref:r,id:u,"data-testid":u,disabled:f,className:"p-3 text-white transition-colors\n        bg-gray-700 rounded-lg hover:bg-gray-600 ".concat(a,"\n        ").concat(f?"opacity-50 cursor-not-allowed":""),children:(0,m.jsx)(s,{size:32})}))}).displayName="NavigationButton";var eW=(0,c.memo)(function(e){var t=e.onClick,n=(0,en.Z)(t),r=n.handlers,i=n.buttonClasses,o=(0,eE.H)("settings").preventClose,a=(0,R.b)(function(e){return e.getCurrentStep()}),s=null==a?void 0:a.id.startsWith("SETTINGS_"),l=o||s;return(0,m.jsx)("button",eR(eR({},r),{},{disabled:l&&(null==a?void 0:a.id)!==F.nI.SETTINGS_STROKES,className:"px-6 py-2 rounded-lg text-lg font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transition-all duration-150 shadow-md ".concat(i," ").concat(l&&(null==a?void 0:a.id)!==F.nI.SETTINGS_STROKES?"opacity-50 cursor-not-allowed":""),children:"Speichern"}))}),eJ=n(23513),eZ=n(27788),eV=n(99407),eY=n(40531);function e$(e){return(e$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eq(e){return function(e){if(Array.isArray(e))return e4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||e5(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eQ(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=e$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e$(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e0(){e0=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(P([])));x&&x!==n&&r.call(x,a)&&(y=x);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==e$(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(e$(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function e1(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function e2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||e5(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e5(e,t){if(e){if("string"==typeof e)return e4(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e4(e,t):void 0}}function e4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}eI()(function(){return Promise.resolve().then(n.bind(n,33306))},{loading:function(){return null},ssr:!1});let e3=function(e){var t,n,r=e.isOpen,i=e.onClose,o=e.swipePosition,a=(0,j.useUIStore)(),s=a.openResultatKreidetafel,l=a.openSettings,u=a.isReadOnlyMode,d=e2((0,c.useState)(null),2),p=d[0],h=d[1],g=e2((0,c.useState)(!1),2),b=g[0],v=g[1],y=e2((0,c.useState)(!1),2),S=y[0],x=y[1],N=(0,R.b)(function(e){return e.getCurrentStep()}),k=(0,R.b)().isCategoryCompleted,O=(0,eZ.useAuthStore)(),I=(0,f.useRouter)();O.isAuthenticated,(0,es.useJassStore)(function(e){return e.jassSessionId}),w.useGameStore.getState().activeGameId;var P=(0,V.yu)(function(e){return e.userActiveTournamentId}),E={hidden:{opacity:0,y:0},visible:{opacity:1,y:0}},C=function(e){h(e),setTimeout(function(){return h(null)},150)},T=(0,c.useCallback)(function(){C("home");var e="/auth/login";"authenticated"===O.status&&(e=P?"/view/tournament/".concat(P):"/start"),(0,eY.p)(I,e),setTimeout(function(){i()},150)},[I,i,O,P]),A=function(){if(C("trash"),u)return void j.useUIStore.getState().showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine Partien abgebrochen werden."});var e,t=w.useGameStore.getState().activeGameId,n=null,r=es.useJassStore.getState().currentSession;null!=r&&r.isTournamentSession&&(n=r.tournamentInstanceId||r.instanceId||(null!=(e=r.id)&&e.includes("tournament_")?r.id:null)),j.useUIStore.getState().showNotification({message:"M\xf6chtest du diesen Jass wirklich abbrechen? Die Partie geht verloren und wird nicht gespeichert.",type:"error",isFlipped:"top"===o,actions:[{label:"Nein",onClick:function(){}},{label:"Ja, abbrechen!",onClick:function(){return G(t,n)},className:"bg-red-600 hover:bg-red-700"}]})},G=(0,c.useCallback)((t=e0().mark(function e(t,n){var r,o,a,s,l,c,u,f,d,m,p;return e0().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=w.useGameStore.getState(),o=es.useJassStore.getState(),a=eZ.useAuthStore.getState(),s=j.useUIStore.getState(),l=t,o.jassSessionId,c=!!n,u=n,!(l&&r.isGameStarted&&!r.isGameCompleted)){e.next=6;break}return e.prev=1,x(!0),e.next=2,(0,eV.abortActiveGame)(l,{tournamentInstanceId:u||void 0,skipSessionCleanup:!1});case 2:e.next=4;break;case 3:return e.prev=3,p=e.catch(1),console.error("[MenuOverlay] Error aborting game ".concat(l,":"),p),s.showNotification({type:"error",message:"Fehler beim Abbrechen des Spiels."}),e.abrupt("return");case 4:return e.prev=4,x(!1),e.finish(4);case 5:e.next=6;break;case 6:if(w.useGameStore.getState().resetGameState({newActiveGameId:null}),es.useJassStore.getState().resetJass(),eS.useTimerStore.getState().resetAllTimers(),i(),f=a.isGuest,d="authenticated"===a.status&&!f,!f){e.next=8;break}return j.useUIStore.getState().resetStartScreen(),e.next=7,(0,eY.p)(I,"/jass");case 7:e.next=9;break;case 8:return m=d?"/start":"/auth/register",e.next=9,(0,eY.p)(I,m);case 9:case"end":return e.stop()}},e,null,[[1,3,4,5]])}),n=function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){e1(o,r,i,a,s,"next",e)}function s(e){e1(o,r,i,a,s,"throw",e)}a(void 0)})},function(e,t){return n.apply(this,arguments)}),[i,I]),D=(0,c.useCallback)(function(){s(o),setTimeout(function(){i()},100)},[s,o,i]),L=(0,c.useCallback)(function(){l(),(null==N?void 0:N.id)===F.nI.JASS_SETTINGS&&document.dispatchEvent(new Event("settingsOpen"))},[l,N]),U=(0,c.useCallback)(function(){Object.values(F.xl).some(function(e){return!k(e)})?(j.useUIStore.getState().openTutorialInfo(),setTimeout(function(){i()},100)):i()},[i,k]),_=[{icon:ex.RCe,color:"bg-red-500",id:"trash","data-tutorial":"new-game-button"},{icon:ex.__w,color:"bg-yellow-500",id:"info"},{icon:ex.rQ8,color:"bg-blue-500",id:"home"},{icon:ex.Pcn,color:"bg-blue-500",id:"farbe",className:"settings-button"},{icon:ew.oPo,color:"bg-green-500",id:"resultat"}],M=O.isGuest||"authenticated"!==O.status,K=_.filter(function(e){return("authenticated"!==O.status&&!u||"farbe"!==e.id)&&(!M||"home"!==e.id)}),z=function(e){switch(e){case"trash":return A;case"info":return U;case"home":return T;case"farbe":return L;case"resultat":return D;default:return function(){}}},H=K.map(function(e){return eX(eX({},e),{},{onClick:z(e.id)})}),B="top"===o?eq(H).reverse():H,W="bottom"===o?H:eq(H).reverse(),J="top"===o?B:W;return(0,m.jsxs)(m.Fragment,{children:[S&&(0,m.jsx)(eJ.A,{message:"Spiel wird abgebrochen...",color:"white"}),(0,m.jsx)(ej.P.div,{className:"absolute inset-x-0 top-1/2 transform -translate-y-1/2 flex justify-center items-center h-16 z-10 ".concat(r?"opacity-100":"opacity-0 pointer-events-none"," transition-opacity duration-300"),variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.05}}},initial:"hidden",animate:r?"visible":"hidden",children:(0,m.jsx)("div",{className:"flex justify-center items-center w-full px-8 sm:px-12 min-w-[320px]",children:(0,m.jsx)("div",{className:"flex w-full max-w-2xl ".concat(4===J.length?"justify-around":"justify-between space-x-4 sm:space-x-6"),children:J.map(function(e){var t=e.icon,n=e.onClick,r=e.color,i=e.id,a=e.className,s=e["data-tutorial"];return(0,m.jsx)(ej.P.button,{onClick:n,"data-tutorial":s,disabled:(null==N?void 0:N.id)===F.nI.SETTINGS&&"settings-button"!==a||(null==N?void 0:N.id)===F.nI.MENU_GESTURE&&"resultat"!==i||(null==N?void 0:N.id)===F.nI.RESULTAT_INFO&&"resultat"!==i||(null==N?void 0:N.id)===F.nI.NEW_GAME&&"trash"!==i||(null==N?void 0:N.id)===F.nI.JASS_SETTINGS&&"farbe"!==i&&"authenticated"===O.status&&!O.isGuest,className:"".concat("w-12 h-12 p-2 rounded-xl shadow-md transition-transform hover:scale-110"," ").concat(r," ").concat(a||""," text-white flex-shrink-0\n                  ").concat((null==N?void 0:N.id)===F.nI.RESULTAT_INFO&&"resultat"===i||(null==N?void 0:N.id)===F.nI.NEW_GAME&&"trash"===i||(null==N?void 0:N.id)===F.nI.JASS_SETTINGS&&"farbe"===i?"ring-4 ring-white ring-opacity-50 animate-pulse":"","\n                  ").concat(((null==N?void 0:N.id)!==F.nI.SETTINGS||"settings-button"===a)&&(null==N?void 0:N.id)!==F.nI.MENU_GESTURE&&((null==N?void 0:N.id)!==F.nI.RESULTAT_INFO||"resultat"===i)&&((null==N?void 0:N.id)!==F.nI.NEW_GAME||"trash"===i)&&((null==N?void 0:N.id)!==F.nI.JASS_SETTINGS||"farbe"===i||"authenticated"!==O.status||O.isGuest)?"":"opacity-50 cursor-not-allowed"),variants:E,onMouseDown:function(){return C(i)},onTouchStart:function(){return C(i)},children:(0,m.jsx)(t,{className:"w-full h-full ".concat(p===i?"opacity-70":""),style:{transform:"top"===o?"rotate(180deg)":"none"}})},i)})})})}),(0,m.jsx)(eB,{}),(0,m.jsx)(ek,{show:b,onConfirm:G,onDismiss:function(){return v(!1)}})]})};var e6=n(19732),e8=n(95014),e7=n(15424),e9=n(88813),te=n(16871),tt=n(7110),tn=n(57407),tr=n(43028),ti=n.n(tr),to=n(62602),ta=n(50582),ts=n(42009),tl=n(13848),tc=n(93504),tu=n(37746),tf=n(24534);function td(e){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tm(){tm=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(P([])));x&&x!==n&&r.call(x,a)&&(y=x);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==td(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(td(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function tp(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function th(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){tp(o,r,i,a,s,"next",e)}function s(e){tp(o,r,i,a,s,"throw",e)}a(void 0)})}}function tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tg(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=td(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=td(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==td(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tv(e){return function(e){if(Array.isArray(e))return tx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tS(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||tS(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tS(e,t){if(e){if("string"==typeof e)return tx(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tx(e,t):void 0}}function tx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tw=function(e){var t=e.name,n=e.isStarter,r=(0,c.useRef)(null),i=ty((0,c.useState)(t),2),o=i[0],a=i[1];return(0,c.useEffect)(function(){var e=function(){var e=r.current;if(e){var i=document.createElement("div");i.style.visibility="hidden",i.style.position="absolute",i.style.whiteSpace="nowrap",i.className=e.className,i.textContent=t+(n?" ❀":""),document.body.appendChild(i);var o=i.offsetWidth,s=1.25*e.offsetWidth;if(document.body.removeChild(i),o>s){for(var l=0,c=t.length;l<c;){var u=Math.floor((l+c+1)/2);i.textContent=t.slice(0,u)+(n?"❀":""),document.body.appendChild(i);var f=i.offsetWidth;document.body.removeChild(i),f<=s?l=u:c=u-1}a(t.slice(0,l))}else a(t)}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[t,n]),(0,m.jsx)("div",{ref:r,className:"text-center text-gray-400 px-1",children:(0,m.jsxs)("span",{className:"inline-block",children:[o,n&&(0,m.jsx)("span",{children:"❀"})]})})},tj=function(e,t){for(var n=tv(e);n.length<4;)n.push("placeholder_playerid_".concat(n.length+1));return{teams:{bottom:{players:[{playerId:n[0],displayName:t[1]||"Spieler 1"},{playerId:n[2],displayName:t[3]||"Spieler 3"}]},top:{players:[{playerId:n[1],displayName:t[2]||"Spieler 2"},{playerId:n[3],displayName:t[4]||"Spieler 4"}]}},pairingIdentifiers:{bottom:(0,e9.PW)(n[0],n[2]),top:(0,e9.PW)(n[1],n[3])}}};let tN=function(e){var t,r,i,o,a,s,l,d,p,h,g,b,v,y,S,x,N=e.isReadOnly,k=void 0!==N&&N,O=e.viewerData,I=e.gameTypeLabel,P=(0,j.useUIStore)(function(e){return e.resultatKreidetafel.isOpen}),E=(0,j.useUIStore)(function(e){return e.resultatKreidetafel.swipePosition}),C="top"===E,T=(0,j.useUIStore)(function(e){return e.resultatKreidetafel.currentStatistic}),A=(0,c.useCallback)(function(){j.useUIStore.setState(function(e){return{resultatKreidetafel:tb(tb({},e.resultatKreidetafel),{},{isOpen:!1}),jassFinishNotification:{isOpen:!1,mode:"share",message:{text:"",icon:"♥️"},onShare:void 0,onBack:void 0,onContinue:void 0},signingState:"idle",team1Signed:!1,team2Signed:!1}})},[]),G=(0,j.useUIStore)(),D=G.signingState,L=G.team1Signed,U=G.team2Signed,_=(0,R.b)(),M=_.isActive,K=(0,_.getCurrentStep)(),z=(0,eZ.useAuthStore)();z.user,z.status,z.isAuthenticated;var H=(0,f.useRouter)(),B=ty((0,c.useState)(!1),2);B[0],B[1];var W=ty((0,c.useState)(!1),2);W[0],W[1];var J=ty((0,c.useState)(!1),2);J[0],J[1];var V=ty((0,c.useState)(!1),2),$=(V[0],V[1]),q=ty((0,c.useState)(!1),2),Q=q[0];q[1];var et=ty((0,c.useState)(!1),2),ei=et[0],eo=et[1],el=ty((0,c.useState)(null),2),ec=el[0],eu=el[1],ef=(0,es.useJassStore)().currentSession,ed=(0,j.useUIStore)(function(e){return e.isFinalizingSession}),em=(0,w.useGameStore)(function(e){return e.activeGameId}),ep=(0,c.useMemo)(function(){var e,t,n=null!=(e=null==ef?void 0:ef.isTournamentSession)&&e,r=!!em,i=(null!=(t=null==ef?void 0:ef.id)?t:"").includes("tournament_");return!!(n&&r&&i)},[ef,em]),eh=(0,c.useMemo)(function(){if(null!=ef&&ef.isTournamentSession){var e,t=(null!=(e=ef.id)?e:"").match(/^tournament_(.+)_passe_\d+$/);return t?t[1]:void 0}},[ef]),eg=(0,Z.Q5)().currentGroup,eb=(0,j.useUIStore)(function(e){return e.strokeSettings}),ev=null!=(t=null!=(r=null==eg?void 0:eg.strokeSettings)?r:eb)?t:ea.zh,ey=null!=(i=null==eg?void 0:eg.scoreSettings)?i:j.useUIStore.getState().scoreSettings,ex=null!=(o=null==eg?void 0:eg.farbeSettings)?o:X.FT,ew=ex.cardStyle;es.useJassStore.setState;var eN=(0,es.useJassStore)(function(e){var t;return null==(t=e.currentSession)?void 0:t.id}),ek=(0,es.useJassStore)(function(e){return e.games}),eO=(0,es.useJassStore)(function(e){return e.onlineCompletedGames}),eI=(0,es.useJassStore)(function(e){return e.canNavigateBack()}),eP=(0,es.useJassStore)(function(e){return e.canNavigateForward()}),eE=(0,es.useJassStore)(function(e){return e.currentGameId}),eC=(0,es.useJassStore)(function(e){return e.teams}),eT=(0,w.useGameStore)(function(e){return e.activeGameId}),eA=!!eT,eG=null!=(a=null!=(s=null==O?void 0:O.playerNames)?s:(0,w.useGameStore)(function(e){return e.playerNames}))?a:{1:"Spieler 1",2:"Spieler 2",3:"Spieler 3",4:"Spieler 4"},eD=null!=(l=null==O?void 0:O.currentScores)?l:(0,w.useGameStore)(function(e){return e.scores}),eL=null!=(d=null==eD?void 0:eD.top)?d:0,eR=null!=(p=null==eD?void 0:eD.bottom)?p:0,eF=null!=(h=null==O?void 0:O.weisPoints)?h:(0,w.useGameStore)(function(e){return e.weisPoints}),eU=null!=(g=null!=(b=null==O?void 0:O.currentStriche)?b:(0,w.useGameStore)(function(e){return e.striche}))?g:{top:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},bottom:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0}},e_=(0,c.useCallback)(function(){var e,t=eZ.useAuthStore.getState(),n=w.useGameStore.getState(),r=es.useJassStore.getState(),i=t.isAuthenticated(),o=!!n.activeGameId,a=!!(null!=(e=r.currentSession)&&e.id),s=!t.isGuest;return i&&o&&a&&s},[]),eM=eA?eO:ek,eK=(0,e6.GP)(new Date,"d.M.yyyy"),ez=eP?"1 Spiel\nvorw\xe4rts":"Neues\nSpiel",eH=ty(c.useState(null),2);eH[0],eH[1];var eB=tt.D.find(function(e){return e.id===T}),eW=tn.F,eJ=eB?eB.component:eW,e$=eB?eB.title:"Jassergebnis",eq=(0,c.useMemo)(function(){return{top:tb(tb({},eU.top),{},{normal:(0,te.Zr)(eU.top)}),bottom:tb(tb({},eU.bottom),{},{normal:(0,te.Zr)(eU.bottom)})}},[eU]),eQ=(0,c.useRef)("local");(0,c.useEffect)(function(){if(eA&&eT){eQ.current="firebase";var e=setTimeout(function(){"firebase"!==eQ.current||k||w.useGameStore.setState(function(e){return tb(tb({},e),{},{weisPoints:{top:0,bottom:0},currentRoundWeis:[]})})},100);return function(){return clearTimeout(e)}}},[eA,eT,eL,eR,k]);var eX=(0,c.useMemo)(function(){var e;return k?null!=(e=null==O?void 0:O.canStartNewGameLogic)&&e:eU.top.sieg>0||eU.bottom.sieg>0},[eU,k,O]),e0=(0,c.useMemo)(function(){var e,t,n,r=null!=(e=null==O?void 0:O.weisPoints)?e:w.useGameStore.getState().weisPoints;j.useUIStore.getState().scoreSettings;var i=function(e,t,n){var r=0;return n.berg&&(r+=e.berg),r+=e.sieg,n.schneider&&(r+=e.schneider),r+=e.matsch,r+=e.kontermatsch},o=eM.filter(function(e){var t="gameNumber"in e?e.gameNumber:"id"in e?e.id:0;return("number"==typeof t?t:0)<eE}).reduce(function(e,t){var n,r,o,a,s={berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},l={berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},c=0,u=0;"teams"in t&&t.teams&&"top"in t.teams&&"bottom"in t.teams&&"striche"in t.teams.top&&"striche"in t.teams.bottom?(s=t.teams.top.striche,l=t.teams.bottom.striche,c=null!=(n=t.teams.top.total)?n:0,u=null!=(r=t.teams.bottom.total)?r:0):"finalStriche"in t&&"finalScores"in t&&(s=t.finalStriche.top,l=t.finalStriche.bottom,c=null!=(o=t.finalScores.top)?o:0,u=null!=(a=t.finalScores.bottom)?a:0);var f=i(s,ev,ey.enabled),d=i(l,ev,ey.enabled);return{striche:{top:(e.striche.top||0)+(f||0),bottom:(e.striche.bottom||0)+(d||0)},punkte:{top:(e.punkte.top||0)+(c||0),bottom:(e.punkte.bottom||0)+(u||0)}}},{striche:{top:0,bottom:0},punkte:{top:0,bottom:0}}),a=i(eq.top,ev,ey.enabled),s=i(eq.bottom,ev,ey.enabled);return{striche:{top:o.striche.top+a,bottom:o.striche.bottom+s},punkte:{top:o.punkte.top+eL+(null!=(t=null==r?void 0:r.top)?t:0),bottom:o.punkte.bottom+eR+(null!=(n=null==r?void 0:r.bottom)?n:0)}}},[eE,eq,eL,eR,eM,ev,ey,eF]);(0,c.useMemo)(function(){return k?{totalJassTime:0,currentGameDuration:0}:eS.useTimerStore.getState().getAnalytics()},[eM.length,k]);var e1=(0,c.useMemo)(function(){var e,t,n,r,i,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,S,x,w,N,k,O;return t=(e={playerNames:eG,currentStatistic:"jasspunkte"===T?"punkte":T,totals:{striche:{team1:e0.striche.top,team2:e0.striche.bottom},punkte:{team1:e0.punkte.top,team2:e0.punkte.bottom}},matchCount:{team1:eq.top.matsch||0,team2:eq.bottom.matsch||0},type:"gameEnd",gameHistory:{gesamtStand:{team1:e0.striche.top,team2:e0.striche.bottom},gameNumber:eE,totalGames:eM.length},currentStriche:{team1:tb(tb({},eU.top),{},{sieg:eU.top.sieg}),team2:tb(tb({},eU.bottom),{},{sieg:eU.bottom.sieg})}}).playerNames,n=e.currentStatistic,r=e.totals,i=e.matchCount,o=e.gameHistory,a=e.currentStriche,s=j.useUIStore.getState().scoreSettings.values.schneider,c={team1:[(l=t||{1:"Spieler 1",2:"Spieler 2",3:"Spieler 3",4:"Spieler 4"})[1],l[3]],team2:[l[2],l[4]]},f=(u="striche"===n?r.striche:r.punkte).team2>u.team1,d=u.team1===u.team2,m=f?c.team2.filter(Boolean):c.team1.filter(Boolean),p=f?c.team1.filter(Boolean):c.team2.filter(Boolean),h=Math.abs(r.striche.team1-r.striche.team2),g=Math.abs(r.punkte.team1-r.punkte.team2),b=i?i.team1+i.team2:0,v=r.punkte.team1<s||r.punkte.team2<s,y=r.punkte.team1<s?"team1":r.punkte.team2<s?"team2":void 0,S="sieg",w=(x={team1:o.gesamtStand.team1-(a.team1[S]||0),team2:o.gesamtStand.team2-(a.team2[S]||0)}).team1-x.team2,N=o.gesamtStand.team1-o.gesamtStand.team2,k=w>0&&N<w||w<0&&N>w,O=Math.abs(N),{winnerNames:m,loserNames:p,playerNames:Object.values(l).filter(Boolean),pointDifference:g,stricheDifference:h,totalMatsche:b,isTeam2Winner:f,isDraw:d,isSchneider:v,schneiderTeam:y,gesamtStand:o.gesamtStand,previousGesamtStand:x,gameStats:{currentGameNumber:o.gameNumber,totalGames:o.totalGames,isComeback:k,comebackTeam:k?w>0?"team2":"team1":void 0,führungsWechsel:w>0&&N<0||w<0&&N>0,höchsterVorsprung:{team:N>0?"team1":"team2",differenz:O}}}},[e0,eE,eM.length,eG,T,eq,eU,ey]),e2=(0,c.useCallback)(function(){var e,t,n,r,i=w.useGameStore.getState(),o=es.useJassStore.getState(),a=eS.useTimerStore.getState(),s=o.currentGameId;if(null===s||s<=0)return console.error("[createCompletedGameSummary] Invalid gameNumber:",s),null;var l=i.striche,c=o.getCurrentGame(),u={top:(null==c?void 0:c.teams.top.total)||0,bottom:(null==c?void 0:c.teams.bottom.total)||0},f=i.playerNames,d=a.getGameDuration(s),m={top:(null==c?void 0:c.teams.top.weisPoints)||0,bottom:(null==c?void 0:c.teams.bottom.weisPoints)||0},p=i.startingPlayer,h=i.initialStartingPlayer,g=tv(i.roundHistory),b=null!=(e=null==(t=o.currentSession)?void 0:t.participantUids)?e:[],v=null!=(n=null==(r=o.currentSession)?void 0:r.gruppeId)?n:null,y=i.activeGameId;if(!y)return console.warn("[createCompletedGameSummary] No activeGameId found, cannot create summary."),null;var S=g.filter(function(e){return void 0===e.isActive||!0===e.isActive}),x=new Set,j=S.map(function(e){var t=tb({},e);if("_savedWeisPoints"in t&&delete t._savedWeisPoints,(0,e7.Aw)(t)){t.farbe&&x.add(t.farbe);var n={top:0,bottom:0};(t.weisActions||[]).forEach(function(e){n[e.position]=(n[e.position]||0)+e.points}),t.weisPoints=n}return void 0===t.ansager&&delete t.ansager,void 0===t.startTime&&delete t.startTime,void 0===t.endTime&&delete t.endTime,t}),N=Array.from(x),k=(0,e9.m$)(j),O={gameNumber:s,finalScores:u,finalStriche:l,roundHistory:tv(i.roundHistory),timestampCompleted:ts.Timestamp.now(),durationMillis:null!=d?d:0,weisPoints:m,startingPlayer:p,initialStartingPlayer:h,playerNames:f,trumpColorsPlayed:N,participantUids:b,groupId:v,activeGameId:y,eventCounts:{bottom:{sieg:0,berg:0,matsch:0,kontermatsch:0,schneider:0},top:{sieg:0,berg:0,matsch:0,kontermatsch:0,schneider:0}}};return{gameNumber:s,finalScores:u,finalStriche:l,eventCounts:(0,e9.pK)(O),playerNames:f,timestampCompleted:ts.Timestamp.now(),weisPoints:m,startingPlayer:p,initialStartingPlayer:h,trumpColorsPlayed:N,roundHistory:j,participantUids:b,groupId:v,activeGameId:y,completedAt:ts.Timestamp.now(),durationMillis:null!=d?d:0,totalRoundDurationMillis:k.totalRoundDurationMillis,trumpfCountsByPlayer:k.trumpfCountsByPlayer,roundDurationsByPlayer:k.roundDurationsByPlayer,Rosen10player:k.Rosen10player}},[]),e5=(0,c.useCallback)(function(){var e=es.useJassStore.getState(),t=w.useGameStore.getState();if(e.canNavigateBack()){e.navigateToPreviousGame();var n=e.getCurrentGame();n&&(t.resetGame(n.initialStartingPlayer),w.useGameStore.setState(function(e){return tb(tb({},e),{},{isGameStarted:!0,currentRound:n.currentRound||1,currentPlayer:n.currentPlayer,startingPlayer:n.startingPlayer,initialStartingPlayer:n.initialStartingPlayer,scores:{top:(n.teams.top.jassPoints||0)+(n.teams.top.weisPoints||0),bottom:(n.teams.bottom.jassPoints||0)+(n.teams.bottom.weisPoints||0)},weisPoints:{top:n.teams.top.weisPoints,bottom:n.teams.bottom.weisPoints},striche:{top:tb({},n.teams.top.striche),bottom:tb({},n.teams.bottom.striche)},roundHistory:n.roundHistory||[],isGameCompleted:!1,isRoundCompleted:!1})}))}},[]),e4=(0,c.useCallback)(th(tm().mark(function e(){var t,n,r,i,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,S,x,w;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eu({totals:e0,title:e$,date:eK}),eo(!0),e.next=1,new Promise(function(e){return setTimeout(e,100)});case 1:return t=null,n=null,r=[],i={maxHeight:"",overflowY:"",buttonDisplay:""},o=j.useUIStore.getState().resultatKreidetafel,e.prev=2,console.log("\uD83D\uDD04 Screenshot-Prozess gestartet"),j.useUIStore.setState(function(e){return{resultatKreidetafel:tb(tb({},e.resultatKreidetafel),{},{swipePosition:"bottom",isFlipped:!1})}}),e.next=3,new Promise(function(e){return setTimeout(e,1e3)});case 3:if(a=document.querySelector(".relative.w-11\\/12.max-w-md")){e.next=4;break}throw Error("Kreidetafel-Element nicht gefunden");case 4:if(t=a.querySelector(".statistik-container"),n=a.querySelector("#resultat-action-area"),t&&(r=Array.from(t.querySelectorAll(".space-y-0.px-1"))),!(t&&n)){e.next=6;break}return i.maxHeight=t.style.maxHeight,i.overflowY=t.style.overflowY,i.buttonDisplay=n.style.display,t.style.maxHeight="none",t.style.overflowY="visible",n.style.display="none",r.forEach(function(e){e.style.maxHeight="none",e.style.overflowY="visible"}),e.next=5,new Promise(function(e){return setTimeout(e,250)});case 5:e.next=7;break;case 6:console.warn("⚠️ Statistik-Container oder Action-Area nicht gefunden, Styles nicht angepasst.");case 7:return e.next=8,ti()(a,{background:"#1F2937",useCORS:!0,logging:!1,width:a.offsetWidth,height:a.offsetHeight,scale:2});case 8:return s=e.sent,e.next=9,new Promise(function(e){return s.toBlob(e,"image/png")});case 9:if(l=e.sent){e.next=10;break}throw Error("Fehler beim Erstellen des Bild-Blobs.");case 10:if(c=new File([l],"jass-resultat.png",{type:"image/png"}),!(navigator.share&&navigator.canShare&&navigator.canShare({files:[c]}))){e.next=20;break}return f=null!=(u=j.useUIStore.getState().jassFinishNotification)&&u.message?"string"==typeof u.message?u.message:u.message.text:"Jass Resultat",d="".concat(f,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),e.prev=11,e.next=12,navigator.share({files:[c],text:d});case 12:console.log("✅ Teilen mit Bild erfolgreich!"),e.next=19;break;case 13:if(e.prev=13,!("AbortError"===(S=e.catch(11)).name||null!=(m=S.message)&&m.includes("abort"))){e.next=14;break}console.log("ℹ️ Benutzer hat das Teilen abgebrochen."),e.next=19;break;case 14:return console.warn("⚠️ Teilen mit Datei fehlgeschlagen, versuche Text-only:",S),p="".concat(f,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),e.prev=15,e.next=16,navigator.share({text:p});case 16:console.log("✅ Teilen nur mit Text erfolgreich!"),e.next=19;break;case 17:if(e.prev=17,!("AbortError"===(x=e.catch(15)).name||null!=(h=x.message)&&h.includes("abort"))){e.next=18;break}console.log("ℹ️ Benutzer hat das Text-Teilen abgebrochen."),e.next=19;break;case 18:throw x;case 19:case 25:e.next=27;break;case 20:if(console.warn("⚠️ Teilen von Dateien nicht unterst\xfctzt. Versuche Text-only."),b=null!=(g=j.useUIStore.getState().jassFinishNotification)&&g.message?"string"==typeof g.message?g.message:g.message.text:"Jass Resultat",v="".concat(b,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),!navigator.share){e.next=26;break}return e.prev=21,e.next=22,navigator.share({text:v});case 22:console.log("✅ Teilen nur mit Text erfolgreich!"),e.next=25;break;case 23:if(e.prev=23,!("AbortError"===(w=e.catch(21)).name||null!=(y=w.message)&&y.includes("abort"))){e.next=24;break}console.log("ℹ️ Benutzer hat das Teilen abgebrochen."),e.next=25;break;case 24:throw w;case 26:console.warn("⚠️ navigator.share wird nicht unterst\xfctzt. Kein Teilen m\xf6glich.");case 27:e.next=29;break;case 28:e.prev=28,console.error("❌ Schwerwiegender Fehler im Screenshot-Prozess:",e.catch(2)),j.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Erstellen des Screenshots. Teilen nicht m\xf6glich."});case 29:return e.prev=29,t&&n&&(t.style.maxHeight=i.maxHeight||"",t.style.overflowY=i.overflowY||"",n.style.display=i.buttonDisplay||"",r.forEach(function(e){e.style.maxHeight="",e.style.overflowY=""})),j.useUIStore.setState(function(e){return{resultatKreidetafel:tb(tb({},e.resultatKreidetafel),o)}}),console.log("✅ UI-Zustand und Styles wiederhergestellt"),eo(!1),eu(null),e.finish(29);case 30:case"end":return e.stop()}},e,null,[[2,28,29,30],[11,13],[15,17],[21,23]])})),[e0,e$,eK,A]),e3=c.useCallback(function(e){var t=tt.D.findIndex(function(e){return e.id===T}),n="right"===e?(t+1)%tt.D.length:(t-1+tt.D.length)%tt.D.length;j.useUIStore.setState(function(e){return{resultatKreidetafel:tb(tb({},e.resultatKreidetafel),{},{currentStatistic:tt.D[n].id})}})},[T]),tr=(0,ta.uh)({onSwipedLeft:function(){return e3("right")},onSwipedRight:function(){return e3("left")},preventScrollOnSwipe:!0,trackMouse:!0}),td=(0,c.useCallback)(th(tm().mark(function e(){var t,n,r,i,o,a,s;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.useUIStore.getState(),n=eS.useTimerStore.getState(),r=w.useGameStore.getState(),i=eZ.useAuthStore.getState(),o=es.useJassStore.getState(),!t.isReadOnlyMode){e.next=1;break}return t.showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine Partien beendet werden.",position:null!=E?E:void 0}),e.abrupt("return");case 1:if(eX){e.next=2;break}return t.showNotification({message:"Bitte erst bedanken, bevor der Jass beendet wird.",type:"warning",position:"top"===E?"top":"bottom",isFlipped:"top"===E,actions:[{label:"Verstanden",onClick:A}]}),e.abrupt("return");case 2:if(a=r.activeGameId,!(i.isAuthenticated()&&a)){e.next=3;break}return t.startSigningProcess(),e.abrupt("return");case 3:return n.getAnalytics(),n.prepareJassEnd(),s=function(){var e=th(tm().mark(function e(){var i,a,s,l,c,u,f,d,m,p,h,g,b,v;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!e_()){e.next=4;break}if(a=null==(i=o.currentSession)?void 0:i.id,s=o.games.length,a){e.next=1;break}return console.error("[ResultatKreidetafel] currentSessionIdLocal is undefined despite checkIsRealOnlineSession being true"),e.abrupt("return");case 1:return e.prev=1,f=(0,tu.Uz)(tl.firebaseApp,"europe-west1"),d=(0,tu.Qg)(f,"finalizeSession"),m=r.playerNames,p=(null==(l=o.currentSession)?void 0:l.participantUids)||[],g=tj(h=(null==(c=o.currentSession)?void 0:c.participantPlayerIds)||[],m),b={participantUids:p,participantPlayerIds:h,playerNames:m,gruppeId:(null==(u=o.currentSession)?void 0:u.gruppeId)||null,startedAt:function(e){var t=null==(e=o.currentSession)?void 0:e.startedAt;return t instanceof ts.Timestamp||"number"==typeof t?t:Date.now()}(),teams:g.teams,pairingIdentifiers:g.pairingIdentifiers},e.next=2,d({sessionId:a,expectedGameNumber:s,initialSessionData:b});case 2:e.sent,e.next=4;break;case 3:e.prev=3,console.error("[ResultatKreidetafel] Error calling finalizeSession (Real Online Session):",e.catch(1)),t.showNotification({type:"error",message:"Fehler beim Finalisieren der Session-Statistik."});case 4:return n.finalizeJassEnd(),o.resetJass(),r.resetGameState({newActiveGameId:null,settings:{farbeSettings:X.FT,scoreSettings:ee.$d,strokeSettings:ea.zh}}),t.resetSigningProcess(),t.closeJassFinishNotification(),A(),v=eZ.useAuthStore.getState(),e.next=5,(0,eY.p)(H,v.isAuthenticated()?"/start":"/auth/register?origin=offline",void 0,!0);case 5:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),w.useGameStore.getState().setTransitioning(!0),e.next=4,s();case 4:case"end":return e.stop()}},e)})),[eX,E,A,e4,e0,T,eG,ey,e1,H,eq]),tp=(0,c.useCallback)(function(){var e,t=es.useJassStore.getState(),r=w.useGameStore.getState();eS.useTimerStore.getState();var i=j.useUIStore.getState();if((0,ts.getFirestore)(tl.firebaseApp),i.isReadOnlyMode)return void i.showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine neuen Spiele gestartet werden.",position:null!=E?E:void 0});var o=(s=th(tm().mark(function e(){var t,r,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,S,x,N,k,O,I,P,E,C,T,A,G,D,L,R,F,U,_,M,K,z;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.useGameStore.getState().activeGameId,o=es.useJassStore.getState().currentSession,e.next=1,es.useJassStore.getState().finalizeGame();case 1:if(!((a=e2())&&null!=o&&o.id&&r)){e.next=6;break}return e.prev=2,s=(0,tf.U8)(),e.next=3,s.queueGameFinalization(o.id,a,"HIGH");case 3:e.next=5;break;case 4:e.prev=4,console.error("[ResultatKreidetafel] Fehler beim Speichern des Zwischenspiels:",e.catch(2)),j.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Speichern des letzten Spiels."});case 5:e.next=7;break;case 6:console.warn("[ResultatKreidetafel] \xdcberspringe Speichern des Zwischenspiels, Daten unvollst\xe4ndig.",{summary:!!a,sessionId:null==o?void 0:o.id,activeGameId:r});case 7:return e.next=8,new Promise(function(e){return setTimeout(e,500)});case 8:if((c=(l=w.useGameStore.getState()).striche).top.sieg>0?u="top":c.bottom.sieg>0&&(u="bottom"),(m=(d=l.roundHistory||[]).length>0?d[d.length-1]:null)&&"number"==typeof m.startingPlayer?f=(m.startingPlayer+3-1)%4+1:(p=es.useJassStore.getState().getCurrentGame(),f=(h=l.currentPlayer||(null==p?void 0:p.currentPlayer))?(h-2+4)%4+1:l.initialStartingPlayer||1),g=(0,e7.vm)(f),u&&(0,e7.OB)(g,u)&&(g=(0,e7.vm)(g)),b=eL+eF.top,v=eR+eF.bottom,b<(y=ey.values.sieg)&&v<y&&u&&(0,e7.OB)(f,u)&&(g=(0,e7.vm)(g),u&&(0,e7.OB)(g,u)&&(g=(0,e7.vm)(g))),o){e.next=9;break}return console.error("[ResultatKreidetafel] Keine Session vorhanden - kann kein neues Spiel erstellen"),i.showNotification({type:"error",message:"Fehler: Keine aktive Session gefunden."}),e.abrupt("return");case 9:if(S=null!=(t=o.participantUids)?t:[],x=[],!(S.length>0)){e.next=15;break}return e.next=10,Promise.resolve().then(n.bind(n,66534));case 10:return k=(N=e.sent).getPlayerIdForUser,N.getPlayerByUserId,e.prev=11,E=null==(O=(P=eZ.useAuthStore.getState()).user)?void 0:O.uid,C=S.map(function(){var e=th(tm().mark(function e(t){var r,i,o,a,s,l,c,u;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==E){e.next=2;break}return e.next=1,k(t,null);case 1:return e.abrupt("return",e.sent);case 2:return e.next=3,Promise.resolve().then(n.bind(n,42009));case 3:return i=(r=e.sent).getDoc,o=r.doc,e.next=4,Promise.resolve().then(n.bind(n,13848));case 4:return a=e.sent.firebaseApp,e.next=5,Promise.resolve().then(n.bind(n,42009));case 5:return s=(0,e.sent.getFirestore)(a),e.prev=6,e.next=7,i(o(s,"users",t));case 7:if(!((c=e.sent).exists()&&null!=(l=c.data())&&l.playerId)){e.next=8;break}return e.abrupt("return",c.data().playerId);case 8:e.next=10;break;case 9:e.prev=9,e.catch(6);case 10:return e.prev=10,e.next=11,i(o(s,"players",t));case 11:if(!e.sent.exists()){e.next=12;break}return e.abrupt("return",t);case 12:e.next=14;break;case 13:e.prev=13,e.catch(10);case 14:return console.warn("[ResultatKreidetafel] ⚠️ Weder als UID noch als Player-ID gefunden: ".concat(t," - wird \xfcbersprungen")),e.abrupt("return",void 0);case 15:return e.prev=15,u=e.catch(0),console.error("[ResultatKreidetafel] Fehler bei Player-Aufl\xf6sung f\xfcr ".concat(t,":"),u),e.abrupt("return",void 0);case 16:case"end":return e.stop()}},e,null,[[0,15],[6,9],[10,13]])}));return function(t){return e.apply(this,arguments)}}()),e.next=12,Promise.all(C);case 12:(x=e.sent.filter(function(e){return e&&"undefined"!==e})).length!==S.length&&(console.warn("[ResultatKreidetafel] Nicht alle Player-IDs konnten aufgel\xf6st werden"),o.participantPlayerIds&&o.participantPlayerIds.length>0?x=o.participantPlayerIds.filter(function(e){return e&&"undefined"!==e}):i.showNotification({type:"warning",message:"Einige Spieler-Profile konnten nicht vollst\xe4ndig geladen werden."})),(T=null==(I=P.user)?void 0:I.uid)&&!S.includes(T)&&(console.error("[ResultatKreidetafel] \uD83D\uDEA8 KRITISCHER FEHLER: Aktueller User nicht in participantUids!"),console.error("participantUids:",S),console.error("currentUserId:",T),S.push(T)),e.next=15;break;case 13:if(e.prev=13,console.error("[ResultatKreidetafel] Fehler beim Aufl\xf6sen der Player-IDs:",e.catch(11)),!(o.participantPlayerIds&&o.participantPlayerIds.length>0)){e.next=14;break}x=o.participantPlayerIds.filter(function(e){return e&&"undefined"!==e}),e.next=15;break;case 14:return i.showNotification({type:"error",message:"Fehler beim Laden der Spieler-Profile. Neues Spiel abgebrochen."}),e.abrupt("return");case 15:return(A={farbeSettings:o.currentFarbeSettings,scoreSettings:o.currentScoreSettings,strokeSettings:o.currentStrokeSettings}).farbeSettings&&A.scoreSettings&&A.strokeSettings||(console.warn("[ResultatKreidetafel] Session-Settings unvollst\xe4ndig, verwende Gruppe/UI-Fallbacks"),G=Z.Q5.getState().currentGroup,A={farbeSettings:A.farbeSettings||(null==G?void 0:G.farbeSettings)||ex,scoreSettings:A.scoreSettings||(null==G?void 0:G.scoreSettings)||ey,strokeSettings:A.strokeSettings||(null==G?void 0:G.strokeSettings)||ev}),D=null,e.prev=16,K=tb({},w.useGameStore.getState().playerNames),z={sessionId:o.id,groupId:null!=(L=o.gruppeId)?L:"",participantUids:S,participantPlayerIds:x,playerNames:K,activeFarbeSettings:A.farbeSettings,activeScoreSettings:A.scoreSettings,activeStrokeSettings:A.strokeSettings,teams:{top:{players:[null!=(R=K[2])?R:"Spieler 2",null!=(F=K[4])?F:"Spieler 4"],striche:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},jassPoints:0,weisPoints:0,total:0,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}},bottom:{players:[null!=(U=K[1])?U:"Spieler 1",null!=(_=K[3])?_:"Spieler 3"],striche:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},jassPoints:0,weisPoints:0,total:0,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}}},currentGameNumber:(null!=(M=es.useJassStore.getState().currentGameId)?M:0)+1,scores:{top:0,bottom:0},striche:{top:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},bottom:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0}},weisPoints:{top:0,bottom:0},currentRound:1,currentPlayer:g,startingPlayer:g,initialStartingPlayer:g},e.next=17,(0,eV.createNewActiveGame)(z);case 17:return D=e.sent,e.next=18,(0,eV.updateSessionActiveGameId)(o.id,D);case 18:e.next=20;break;case 19:return e.prev=19,console.error("[ResultatKreidetafel] Error creating new game or updating session:",e.catch(16)),j.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Starten des n\xe4chsten Online-Spiels. Lokaler Ablauf gestoppt."}),e.abrupt("return");case 20:return es.useJassStore.getState().startNextGame(g,D),(0,w.useGameStore.getState().resetGame)(g,null!=D?D:void 0,A),w.useGameStore.setState(function(e){return tb(tb({},e),{},{isGameStarted:!0,currentRound:1,isGameCompleted:!1,isRoundCompleted:!1})}),e.next=21,(0,eY.p)(H,"/jass");case 21:setTimeout(function(){j.useUIStore.getState().setLoading(!1)},500);case 22:case"end":return e.stop()}},e,null,[[2,4],[11,13],[16,19]])})),function(){return s.apply(this,arguments)});if(eP){if(t.canNavigateForward()){t.navigateToNextGame();var a=t.getCurrentGame();if(a){var s,l,c,u,f={berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},d=t.currentSession,m={farbeSettings:null!=(l=null==d?void 0:d.currentFarbeSettings)?l:X.FT,scoreSettings:null!=(c=null==d?void 0:d.currentScoreSettings)?c:ee.$d,strokeSettings:null!=(u=null==d?void 0:d.currentStrokeSettings)?u:ea.zh};r.resetGame(a.initialStartingPlayer,void 0,m),w.useGameStore.setState(function(e){var t,n,r,i,o,s,l,c,u,d,m,p,h;return tb(tb({},e),{},{isGameStarted:!0,currentRound:null!=(t=a.currentRound)?t:1,currentPlayer:null!=(n=a.currentPlayer)?n:1,startingPlayer:null!=(r=a.startingPlayer)?r:1,initialStartingPlayer:null!=(i=a.initialStartingPlayer)?i:1,scores:{top:(null!=(o=a.teams.top.jassPoints)?o:0)+(null!=(s=a.teams.top.weisPoints)?s:0),bottom:(null!=(l=a.teams.bottom.jassPoints)?l:0)+(null!=(c=a.teams.bottom.weisPoints)?c:0)},weisPoints:{top:null!=(u=a.teams.top.weisPoints)?u:0,bottom:null!=(d=a.teams.bottom.weisPoints)?d:0},striche:{top:tb(tb({},f),null!=(m=a.teams.top.striche)?m:{}),bottom:tb(tb({},f),null!=(p=a.teams.bottom.striche)?p:{})},roundHistory:null!=(h=a.roundHistory)?h:[],isGameCompleted:!1,isRoundCompleted:!1})})}}return}return eX?eZ.useAuthStore.getState().isGuest?void j.useUIStore.getState().showNotification({message:"Im Gastmodus ist immer nur ein aktuelles Spiel m\xf6glich. Um deine Spielhistorie und Statistiken zu speichern, melde dich bitte an oder registriere dich.",type:"info",position:null!=E?E:void 0,isFlipped:"top"===E,actions:[{label:"Zur\xfcck",onClick:A},{label:"OK",onClick:function(){A(),(0,eY.p)(H,"/auth/register?origin=offline",void 0,!0)}}]}):void j.useUIStore.getState().showNotification({type:"success",message:"M\xf6chtest du das n\xe4chste Spiel beginnen?",position:null!=E?E:void 0,isFlipped:"top"===E,actions:[{label:"Zur\xfcck",onClick:A},{label:"Weiterjassen!",onClick:(e=th(tm().mark(function e(){var t;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j.useUIStore.getState().setLoading(!0),A(),w.useGameStore.getState().setTransitioning(!0),e.prev=1,e.next=2,o();case 2:e.next=4;break;case 3:throw e.prev=3,console.error("[ResultatKreidetafel] Fehler beim Starten des neuen Spiels:",t=e.catch(1)),w.useGameStore.getState().setTransitioning(!1),j.useUIStore.getState().setLoading(!1),t;case 4:case"end":return e.stop()}},e,null,[[1,3]])})),function(){return e.apply(this,arguments)})}]}):void j.useUIStore.getState().showNotification({message:"Bitte erst bedanken, bevor ein neues Spiel gestartet wird.",type:"warning",position:null!=E?E:void 0,isFlipped:"top"===E,actions:[{label:"Verstanden",onClick:A}]})},[eP,eX,E,A]),tg=(0,c.useCallback)(th(tm().mark(function e(){var t,n,r,i,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,S,x,N,k,O,I,P,E,C,T,G,D,L,R,F,U,_,M,K,z,B;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=j.useUIStore.getState().signingState,r=j.useUIStore.getState().resultatKreidetafel.swipePosition,i=j.useUIStore.getState(),o=w.useGameStore.getState(),a=es.useJassStore.getState(),s=eS.useTimerStore.getState(),l=(null==(t=a.currentSession)?void 0:t.participantPlayerIds)||[],c=null,"waitingTeam1"!==n||"bottom"!==r){e.next=1;break}c="bottom",e.next=3;break;case 1:if("waitingTeam2"!==n||"top"!==r){e.next=2;break}c="top",e.next=3;break;case 2:return e.abrupt("return");case 3:if(!c){e.next=54;break}if(i.recordSignature(c),"completed"!==j.useUIStore.getState().signingState){e.next=53;break}return f=o.activeGameId,d=null==(u=a.currentSession)?void 0:u.id,m=a.currentGameId,p=!1,j.useUIStore.setState(function(e){return{resultatKreidetafel:tb(tb({},e.resultatKreidetafel),{},{swipePosition:"bottom"})}}),e.next=4,new Promise(function(e){return setTimeout(e,500)});case 4:if(j.useUIStore.getState().setFinalizingSession(!0),!f){e.next=9;break}return e.prev=5,e.next=6,(0,eV.updateGameStatus)(f,"completed");case 6:p=!0,e.next=8;break;case 7:return e.prev=7,console.error("Failed to update game status:",e.catch(5)),navigator.onLine?i.showNotification({type:"error",message:"Fehler beim Speichern des Spielstatus. Bitte versuchen Sie es erneut."}):i.showNotification({type:"warning",message:"Internetverbindung unterbrochen. Das Spiel wird lokal gespeichert und automatisch synchronisiert, sobald die Verbindung wieder hergestellt ist.\n\n⚠️ Wichtig: Verwenden Sie nur dieses Ger\xe4t f\xfcr weitere Rundeneingaben, bis die Internetverbindung wieder verf\xfcgbar ist.",preventClose:!0,actions:[{label:"Verstanden",onClick:function(){}}]}),j.useUIStore.getState().setFinalizingSession(!1),e.abrupt("return");case 8:e.next=10;break;case 9:p=!0;case 10:if(!(p&&d&&null!==m&&f)){e.next=23;break}if(e.prev=11,h=e2()){e.next=12;break}throw Error("Konnte Spielzusammenfassung nicht erstellen.");case 12:return w.useGameStore.setState(function(e){return tb(tb({},e),{},{isGameCompleted:!0})}),e.prev=13,g=(0,tf.U8)(),e.next=14,g.queueGameFinalization(d,h,"HIGH");case 14:case 17:e.next=19;break;case 15:return e.prev=15,console.error("[ResultatKreidetafel] ❌ Failed to queue game finalization, falling back to direct save:",e.catch(13)),e.prev=16,e.next=17,(0,eV.saveCompletedGameToFirestore)(d,h.gameNumber,h,!1);case 18:e.prev=18,console.error("[ResultatKreidetafel] ❌ Both queue and fallback failed:",e.catch(16)),i.showNotification({type:"error",message:"Fehler beim Archivieren des Spiels."});case 19:return e.next=20,new Promise(function(e){return setTimeout(e,1500)});case 20:e.next=22;break;case 21:e.prev=21,console.error("Failed to save completed game summary:",e.catch(11)),i.showNotification({type:"error",message:"Fehler beim Archivieren des Spiels."});case 22:e.next=24;break;case 23:f&&(p?d&&m>0||console.warn("[ResultatKreidetafel] Skipping summary save due to missing sessionId or gameNumber.",{currentSessionIdFromStore:d,gameNumberToSave:m}):console.warn("[ResultatKreidetafel] Skipping summary save because status update failed."));case 24:if(!d){e.next=28;break}return e.prev=25,e.next=26,(0,eV.updateSessionActiveGameId)(d,null);case 26:e.next=28;break;case 27:e.prev=27,console.error("Fehler beim Leeren der activeGameId in der Session:",e.catch(25));case 28:if(b=function(){var e=th(tm().mark(function e(){var t,n;return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null==(t=a.currentSession)?void 0:t.id,o.setTransitioning(!0),e.next=1,a.finalizeGame();case 1:if(s.finalizeJassEnd(),o.resetGameState({newActiveGameId:null,nextStarter:1,settings:{farbeSettings:X.FT,scoreSettings:ee.$d,strokeSettings:ea.zh}}),s.resetAllTimers(),i.clearResumableGameId(),i.resetSigningProcess(),i.closeJassFinishNotification(),j.useUIStore.getState().setFinalizingSession(!1),A(),a.resetJass(),o.resetGameState({newActiveGameId:null,settings:{farbeSettings:X.FT,scoreSettings:ee.$d,strokeSettings:ea.zh}}),s.resetAllTimers(),!(ep&&eh)){e.next=3;break}return e.next=2,(0,eY.p)(H,"/tournaments/".concat(eh));case 2:case 4:e.next=6;break;case 3:if(!n){e.next=5;break}return e.next=4,(0,eY.p)(H,"/view/session/".concat(n,"?fromJassCompletion=true"));case 5:return console.warn("[ResultatKreidetafel] Konnte nicht zur Session-Ansicht weiterleiten, da keine Session-ID gefunden wurde."),e.next=6,(0,eY.p)(H,"/");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s.getAnalytics(),v=e_(),!(p&&d&&m>0&&v)){e.next=47;break}if(!ed){e.next=29;break}console.warn("[ResultatKreidetafel] finalizeSession is already in progress. Skipping duplicate call."),e.next=46;break;case 29:j.useUIStore.getState().setFinalizingSession(!0),y=(0,tu.Uz)(tl.firebaseApp,"europe-west1"),S=(0,tu.Qg)(y,"finalizeSession"),x=0,N=3,k=2e3,e.prev=30;case 31:if(!(x<N)){e.next=45;break}if(x++,e.prev=32,O=void 0,!a.currentSession){e.next=37;break}return P=o.playerNames,E=a.currentSession.participantUids||[],C=[],T=void 0,e.prev=33,G=(0,ts.getFirestore)(tl.firebaseApp),D=(0,ts.doc)(G,"sessions",d),e.next=34,(0,ts.getDoc)(D);case 34:(L=e.sent).exists()?(C=(R=L.data()).participantPlayerIds||[],T=R.startedAt):console.warn("[ResultatKreidetafel] Session-Dokument ".concat(d," nicht gefunden in Firestore")),e.next=36;break;case 35:e.prev=35,console.error("[ResultatKreidetafel] Fehler beim Lesen von participantPlayerIds aus Firestore:",e.catch(33));case 36:U=tj(F=C.length>0?C:l.length>0?l:a.currentSession.participantPlayerIds||[],P),O={participantUids:E,participantPlayerIds:F,playerNames:P,gruppeId:(null==(I=a.currentSession)?void 0:I.gruppeId)||null,startedAt:T||function(e){var t=null==(e=a.currentSession)?void 0:e.startedAt;return t instanceof ts.Timestamp||"number"==typeof t?t:Date.now()}(),teams:U.teams,pairingIdentifiers:U.pairingIdentifiers},e.next=38;break;case 37:console.warn("[ResultatKreidetafel] currentSession in jassStore is null, cannot send full initialSessionData.");case 38:if(d){e.next=39;break}throw Error("Session ID is undefined despite isRealOnlineSession check");case 39:return e.next=40,S({sessionId:d,expectedGameNumber:m,initialSessionData:O});case 40:return e.sent,e.abrupt("continue",45);case 41:if(e.prev=41,B=e.catch(32),console.warn("[ResultatKreidetafel] finalizeSession FAILED (Attempt ".concat(x,"):"),B),!((null==B||null==(_=B.details)?void 0:_.customCode)==="GAME_NOT_YET_VISIBLE"&&x<N)){e.next=43;break}return console.log("[ResultatKreidetafel] Custom Precondition failed (Game ".concat(m," likely not visible yet). Retrying in ").concat(k/1e3,"s...")),e.next=42,new Promise(function(e){return setTimeout(e,k)});case 42:return e.abrupt("continue",31);case 43:return console.error("[ResultatKreidetafel] FINAL Error calling finalizeSession after ".concat(x," attempts:"),B),M="Fehler beim Finalisieren der Session-Statistik.",B.code&&B.message?M="Fehler (".concat(B.code,"): ").concat(B.message):B instanceof Error&&(M=B.message),i.showNotification({type:"error",message:M}),e.abrupt("continue",45);case 44:e.next=31;break;case 45:return e.prev=45,e.finish(45);case 46:e.next=48;break;case 47:console.warn("[ResultatKreidetafel] Skipping finalizeSession Cloud Function call: Not a real online session or missing data. IsRealOnlineSession: ".concat(v,", StatusUpdated: ").concat(p,", SessionID: ").concat(!!d,", GameNumber: ").concat(m));case 48:return e.next=49,b();case 49:if(!(K=d)){e.next=51;break}return e.next=50,(0,eY.p)(H,"/view/session/".concat(K));case 50:e.next=52;break;case 51:return console.error("[ResultatKreidetafel] No sessionId available for redirect"),e.next=52,(0,eY.p)(H,"/start");case 52:j.useUIStore.getState().setFinalizingSession(!1),e.next=54;break;case 53:z="bottom"===c?"top":"bottom",i.setResultatPosition(z);case 54:case"end":return e.stop()}},e,null,[[5,7],[11,21],[13,15],[16,18],[25,27],[30,,45,46],[32,41],[33,35]])})),[A,H,e0,T,eG,ey,e1,eq,tp,e4,e_]),tS=(0,en.Z)(e5),tx=(0,en.Z)(e4),tN=(0,en.Z)(tp),tk=(0,c.useRef)(null),tO=(0,er.U)().overlayScale,tI=(0,u.zh)({opacity:+!!P,transform:"scale(".concat(P?tO:.95,") rotate(").concat(C?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}}),tP=(0,u.zh)({});(0,c.useEffect)(function(){tk.current},[P,eM.length,eE]),(0,c.useEffect)(function(){P&&M&&(!K||K.id!==F.nI.RESULTAT_INFO)&&A()},[P,M,K,A]),(0,c.useEffect)(function(){P&&j.useUIStore.setState(function(e){return{}})},[P]);var tE=(0,c.useMemo)(function(){var e=w.useGameStore.getState(),t=es.useJassStore.getState().onlineCompletedGames,n=es.useJassStore.getState().games;if(es.useJassStore.getState().currentGameId,ep){var r,i,o,a,s=e.activeGameId;return e.isGameStarted&&!e.isGameCompleted&&s?[{id:s,gameNumber:s,teams:{top:{striche:tb({},eU.top),jassPoints:e.scores.top-(null!=(r=e.weisPoints.top)?r:0),weisPoints:null!=(i=e.weisPoints.top)?i:0,total:e.scores.top,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}},bottom:{striche:tb({},eU.bottom),jassPoints:e.scores.bottom-(null!=(o=e.weisPoints.bottom)?o:0),weisPoints:null!=(a=e.weisPoints.bottom)?a:0,total:e.scores.bottom,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}}},timestamp:Date.now(),sessionId:null!=eN?eN:"",currentRound:e.currentRound,startingPlayer:e.startingPlayer,initialStartingPlayer:e.initialStartingPlayer,currentPlayer:e.currentPlayer,roundHistory:e.roundHistory,currentHistoryIndex:e.currentHistoryIndex,historyState:e.historyState,isGameStarted:e.isGameStarted,isRoundCompleted:e.isRoundCompleted,isGameCompleted:e.isGameCompleted,__isPlaceholder:!0,__isActive:!0}]:[]}var l=[];if(eA){l=tv(t);var c=e.activeGameId,u="idle"!==j.useUIStore.getState().signingState;if(e.isGameStarted&&!e.isGameCompleted&&c&&!u&&!l.some(function(e){var t="gameNumber"in e?e.gameNumber:e.id,n=es.useJassStore.getState().currentGameId;return String(t)===String(c)||"gameNumber"in e&&e.gameNumber===n})){var f,d,m,p,h={id:c,gameNumber:c,teams:{top:{striche:tb({},eU.top),jassPoints:e.scores.top-(null!=(f=e.weisPoints.top)?f:0),weisPoints:null!=(d=e.weisPoints.top)?d:0,total:e.scores.top,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}},bottom:{striche:tb({},eU.bottom),jassPoints:e.scores.bottom-(null!=(m=e.weisPoints.bottom)?m:0),weisPoints:null!=(p=e.weisPoints.bottom)?p:0,total:e.scores.bottom,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}}},timestamp:Date.now(),sessionId:null!=eN?eN:"",currentRound:e.currentRound,startingPlayer:e.startingPlayer,initialStartingPlayer:e.initialStartingPlayer,currentPlayer:e.currentPlayer,roundHistory:e.roundHistory,currentHistoryIndex:e.currentHistoryIndex,historyState:e.historyState,isGameStarted:e.isGameStarted,isRoundCompleted:e.isRoundCompleted,isGameCompleted:e.isGameCompleted,__isPlaceholder:!0,__isActive:!0};l.push(h)}}else l=n;return l.sort(function(e,t){return("timestampCompleted"in e&&e.timestampCompleted?e.timestampCompleted instanceof ts.Timestamp?e.timestampCompleted.toMillis():e.timestampCompleted:"timestamp"in e?e.timestamp:0)-("timestampCompleted"in t&&t.timestampCompleted?t.timestampCompleted instanceof ts.Timestamp?t.timestampCompleted.toMillis():t.timestampCompleted:"timestamp"in t?t.timestamp:0)}).map(function(e,t){return tb(tb({},e),{},{displayNumber:t+1})})},[ep,eA,eO,ek,eU,eN,w.useGameStore.getState().isGameStarted,w.useGameStore.getState().isGameCompleted,w.useGameStore.getState().activeGameId]);(0,c.useEffect)(function(){var e=tk.current;if(P&&e){var t=setTimeout(function(){tk.current&&(tk.current.scrollTop=tk.current.scrollHeight)},0);return function(){return clearTimeout(t)}}},[P,T,tE]);var tC=(0,c.useCallback)(th(tm().mark(function e(){return tm().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!ep||!em||!eh)){e.next=1;break}return console.error("[ResultatKreidetafel] Incomplete data for completing passe."),j.useUIStore.getState().showNotification({type:"error",message:"Fehlende Daten zum Abschlie\xdfen der Passe."}),e.abrupt("return");case 1:if(eX){e.next=2;break}return j.useUIStore.getState().showNotification({message:"Bitte erst bedanken, bevor die Passe abgeschlossen wird.",type:"warning",position:"top"===E?"top":"bottom",isFlipped:"top"===E,actions:[{label:"Verstanden",onClick:function(){return A()}}]}),e.abrupt("return");case 2:return $(!0),e.prev=3,e.next=4,(0,tc.completeAndRecordTournamentPasse)(em,eh);case 4:if(!e.sent){e.next=6;break}return j.useUIStore.getState().showNotification({type:"success",message:"Passe erfolgreich abgeschlossen!"}),w.useGameStore.getState().resetGame(1),es.useJassStore.getState().clearActiveGameForSession(eh),A(),e.next=5,(0,eY.p)(H,"/tournaments/".concat(eh));case 5:e.next=7;break;case 6:j.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Abschlie\xdfen der Passe."});case 7:e.next=9;break;case 8:e.prev=8,console.error("[ResultatKreidetafel] Unexpected error completing passe:",e.catch(3)),j.useUIStore.getState().showNotification({type:"error",message:"Unerwarteter Fehler beim Abschlie\xdfen der Passe."});case 9:return e.prev=9,$(!1),e.finish(9);case 10:case"end":return e.stop()}},e,null,[[3,8,9,10]])})),[ep,em,eh,A,H,eX,E]);return P?(0,m.jsxs)(m.Fragment,{children:[Q&&(0,m.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-70 z-50"}),P&&(0,m.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50",onClick:function(e){e.target===e.currentTarget&&A()},children:[(0,m.jsxs)(u.CS.div,tb(tb({},tr),{},{style:tI,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-6 shadow-lg select-none",onClick:function(e){return e.stopPropagation()},children:[(0,m.jsxs)("div",{className:"text-center mb-4",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-white",children:ei&&ec?ec.title:e$}),(0,m.jsx)("p",{className:"text-gray-400",children:ei&&ec?ec.date:eK})]}),(0,m.jsx)("button",{onClick:function(){return j.useUIStore.setState(function(e){return{resultatKreidetafel:tb(tb({},e.resultatKreidetafel),{},{swipePosition:C?"bottom":"top"})}})},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n              text-white hover:text-gray-300 transition-all duration-1000\n              w-24 h-24 flex items-center justify-center\n              rounded-full\n              ".concat(C?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,m.jsx)(Y.cO3,{className:"w-8 h-8"})}),(0,m.jsx)("button",{onClick:function(){if(eN){var e="https://jassguru.ch/view/session/public/".concat(eN),t="Verfolge unseren Jass live! Schau dir die aktuellen Ergebnisse und Statistiken in Echtzeit an.\n\n".concat(e,"\n\ngeneriert von:\n\uD83D\uDC49 jassguru.ch");navigator.share?navigator.share({text:t}).then(function(){console.log("✅ Live-Session Link erfolgreich geteilt!"),A()}).catch(function(e){"AbortError"!==e.name&&console.error("❌ Fehler beim Teilen:",e)}):navigator.clipboard.writeText(t).then(function(){j.useUIStore.getState().showNotification({type:"success",message:"Link wurde in die Zwischenablage kopiert!"}),A()}).catch(function(e){console.error("❌ Zwischenablage fehlgeschlagen:",e),j.useUIStore.getState().showNotification({type:"error",message:"Teilen fehlgeschlagen. Bitte versuche es erneut."})})}else A()},className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white transition-colors duration-200","aria-label":eN?"Live-Session teilen":"Schlie\xdfen",children:eN?(0,m.jsx)(Y.Pum,{size:24}):(0,m.jsx)(Y.yGN,{size:24})}),!k&&eI&&!eP&&(0,m.jsx)("button",{onClick:e5,className:"\n                absolute left-2 top-2\n                w-10 h-10 rounded-full \n                flex items-center justify-center\n                bg-gray-600 hover:bg-gray-500\n                text-white hover:text-white\n                transition-all duration-150\n                shadow-md hover:shadow-lg\n              ","aria-label":"Zur\xfcck",children:(0,m.jsx)(Y.APV,{className:"w-5 h-5"})}),(0,m.jsxs)("div",{className:"grid grid-cols-[1fr_4fr_4fr] gap-4 mb-2",children:[(0,m.jsx)("div",{}),(0,m.jsx)("div",{className:"text-center text-white",children:"Team 1"}),(0,m.jsx)("div",{className:"text-center text-white",children:"Team 2"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-[1fr_4fr_4fr] gap-4 mb-4",children:[(0,m.jsx)("div",{}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,m.jsx)(tw,{name:eG[1],isStarter:tE&&tE.length>0&&(null==(v=tE[0])?void 0:v.initialStartingPlayer)===1}),(0,m.jsx)(tw,{name:eG[3],isStarter:tE&&tE.length>0&&(null==(y=tE[0])?void 0:y.initialStartingPlayer)===3})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,m.jsx)(tw,{name:eG[2],isStarter:tE&&tE.length>0&&(null==(S=tE[0])?void 0:S.initialStartingPlayer)===2}),(0,m.jsx)(tw,{name:eG[4],isStarter:tE&&tE.length>0&&(null==(x=tE[0])?void 0:x.initialStartingPlayer)===4})]})]}),(0,m.jsx)("div",{className:"border-t border-b border-gray-700",children:(0,m.jsx)("div",{ref:tk,className:"statistik-container max-h-[280px] overflow-y-auto overflow-x-auto",children:(0,m.jsx)(u.CS.div,{style:tP,className:"py-2 min-w-max",children:(0,m.jsx)(eJ,{teams:eC,games:tE,activeGameScores:eD,currentGameId:eE,playerNames:eG,cardStyle:ew,strokeSettings:ev,scoreSettings:ey,onSwipe:e3,gameTypeLabel:I})})})}),(0,m.jsxs)("div",{className:"grid grid-cols-[0.5fr_5fr_5fr] gap-4 mt-4",children:[(0,m.jsx)("div",{className:"text-gray-400 text-center pr-4",children:"Total:"}),(0,m.jsx)("div",{className:"flex justify-center -ml-[30px]",children:(0,m.jsx)("div",{className:"text-2xl font-bold text-white w-[100px] text-center",children:ei&&ec?"striche"===T?ec.totals.striche.bottom:ec.totals.punkte.bottom:"striche"===T?e0.striche.bottom:e0.punkte.bottom})}),(0,m.jsx)("div",{className:"flex justify-center -ml-[12px]",children:(0,m.jsx)("div",{className:"text-2xl font-bold text-white w-[100px] text-center",children:ei&&ec?"striche"===T?ec.totals.striche.top:ec.totals.punkte.top:"striche"===T?e0.striche.top:e0.punkte.top})})]}),(0,m.jsx)("div",{className:"flex justify-center mt-4 mb-2",children:(0,m.jsx)("div",{className:"flex justify-center items-center space-x-2 bg-gray-700/50 px-1.5 py-1 rounded-full",children:tt.D.map(function(e){return(0,m.jsx)("div",{className:"w-2 h-2 rounded-full transition-all duration-200 ".concat(T===e.id?"bg-white/80 shadow-sm":"bg-gray-500/50")},e.id)})})}),(0,m.jsx)("div",{id:"resultat-action-area",children:k?(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)("button",{onClick:A,className:" w-full py-2 px-4 text-white rounded-lg font-medium text-base transition-all duration-150 bg-gray-600 hover:bg-gray-700 leading-tight ",children:"Schliessen"})}):ep?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)("button",{onClick:tC,className:"\n                        w-full py-3 px-6 text-white rounded-lg font-medium text-base\n                        transition-all duration-150\n                        bg-blue-600 hover:bg-blue-700\n                        flex items-center justify-center gap-2\n                        leading-tight\n                        ".concat(tx.buttonClasses," // Wiederverwende Button-Stil?\n                        ").concat(ed?"opacity-70 cursor-wait":""," // NEU: Ladezustand-Styling\n                      "),disabled:ed,children:ed?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(e8.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Schlie\xdfe Passe ab..."]}):"Passe abschlie\xdfen"})}),(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)("button",{onClick:A,className:" w-full py-2 px-4 text-white rounded-lg font-medium text-base transition-all duration-150 bg-gray-600 hover:bg-gray-700 leading-tight ",children:"Schliessen"})})]}):"idle"===D?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"\n                      grid gap-4 mt-4 \n                      ".concat(eP&&eI?"grid-cols-3":"grid-cols-2 justify-between","\n                    "),children:[eI&&eP&&(0,m.jsx)("button",tb(tb({},tS.handlers),{},{disabled:!eI,className:"\n                          py-2 px-4 text-white rounded-lg font-medium text-base\n                          transition-all duration-150\n                          ".concat(eI?"bg-gray-600":"bg-gray-500/50 cursor-not-allowed","\n                          hover:bg-gray-700\n                          leading-tight\n                          ").concat(tS.buttonClasses,"\n                        "),children:["1 Spiel","zur\xfcck"].map(function(e,t){return(0,m.jsxs)(c.Fragment,{children:[e,0===t&&(0,m.jsx)("br",{})]},t)})})),(0,m.jsx)(ej.P.button,{onClick:td,initial:{scale:.9},animate:{scale:1},whileTap:{scale:.95},className:"\n                        py-2 px-4 text-white rounded-lg font-medium text-base\n                        transition-all duration-150\n                        bg-blue-600 hover:bg-blue-700 border-b-4 border-blue-800\n                        flex items-center justify-center gap-2\n                        leading-tight shadow-lg\n                        active:scale-[0.98] active:border-b-2\n                        ".concat(tx.buttonClasses,"\n                      "),children:["Jass","beenden"].map(function(e,t){return(0,m.jsxs)(c.Fragment,{children:[e,0===t&&(0,m.jsx)("br",{})]},t)})}),(0,m.jsx)(ej.P.button,{onClick:tp,initial:{scale:.9},animate:{scale:1},whileTap:{scale:.95},className:"\n                        py-2 px-4 text-white rounded-lg font-medium text-base\n                        transition-all duration-150 shadow-lg\n                        active:scale-[0.98] active:border-b-2\n                        ".concat(eP?"bg-gray-600 hover:bg-gray-700 border-b-4 border-gray-800":"bg-green-600 hover:bg-green-700 border-b-4 border-green-800","\n                        leading-tight\n                        ").concat(tN.buttonClasses,"\n                      "),children:ez.split("\n").map(function(e,t){return(0,m.jsxs)(c.Fragment,{children:[e,0===t&&ez.includes("\n")&&(0,m.jsx)("br",{})]},t)})})]}),(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)("button",{onClick:A,className:" w-full py-2 px-4 text-white rounded-lg font-medium text-base transition-all duration-150 bg-gray-600 hover:bg-gray-700 leading-tight ",children:"Schliessen"})})]}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"mt-4",children:(0,m.jsx)(ej.P.button,{onClick:tg,initial:{scale:.9},animate:{scale:1},whileTap:{scale:.95},className:"w-full bg-amber-400 text-white text-lg font-bold py-4 px-8 rounded-xl shadow-lg hover:bg-amber-500 transition-colors border-b-4 border-amber-600 active:scale-[0.98] active:border-b-2 disabled:opacity-50 disabled:cursor-not-allowed\n                                 ".concat("bottom"===E&&L||"top"===E&&U?"opacity-70 cursor-default":""),disabled:"waitingTeam1"===D&&"top"===E||"waitingTeam2"===D&&"bottom"===E||"bottom"===E&&L||"top"===E&&U,children:"bottom"===E&&L||"top"===E&&U?"SIGNIERT":"Signieren Team ".concat("bottom"===E?"1":"2")})})})})]})),(0,m.jsx)(to.A,{})]})]}):null};var tk=function(e){var t=(0,w.useGameStore)(),n=t.navigateHistory,r=t.canNavigateForward,i=t.canNavigateBackward,o=t.currentHistoryIndex,a=t.validateHistoryAction;(0,j.useUIStore)().showHistoryWarning;var s=(0,c.useRef)(Date.now()),l=(0,c.useRef)(0);(0,c.useCallback)(function(e){a()&&n(e)},[n,a]);var u=(0,c.useCallback)(function(t){var o=Date.now();if(!(o-s.current<300)){s.current=o;var a="top"===e,l=a&&"left"===t||!a&&"right"===t;(l?r():i())&&n(l?"forward":"backward")}},[e,n,r,i]),f=(0,c.useCallback)(function(e){var t=Date.now();if(t-l.current<500)return void console.log("[useNavigationHistory] Debouncing navigation: ".concat(500-(t-l.current),"ms cooldown remaining"));l.current=t,n(e)},[n]);return{handleSwipe:u,isInPast:o>-1,canNavigateForward:r,canNavigateBackward:i,navigateBack:(0,c.useCallback)(function(){f("backward")},[f]),navigateForward:(0,c.useCallback)(function(){f("forward")},[f])}},tO=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=Math.floor(e/1e3),r=Math.floor(n/60),i=Math.floor(r/60),o=r%60,a=n%60;return i>0?t?"".concat(i,":").concat(o.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(i,":").concat(o.toString().padStart(2,"0")):t?"".concat(r.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"0:".concat(r.toString().padStart(2,"0"))};function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tP(e){return(tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tE=(0,n(8106).v)(function(e,t){return{currentMultiplier:1,setMultiplier:function(t){return e({currentMultiplier:t})},getDividedPoints:function(e){return Math.ceil(e/t().currentMultiplier)},getRemainingPoints:function(e,t){if(!t||"object"!==tP(t))return{title:"SIEG",remaining:0};var n=Z.Q5.getState().currentGroup,r=(null==n?void 0:n.scoreSettings)||j.useUIStore.getState().scoreSettings,i=t[e]||0,o=t["top"===e?"bottom":"top"]||0,a=r.values.sieg,s=r.values.berg,l=r.values.schneider;if(!r.enabled.berg)return{title:"SIEG",remaining:a-i};if(o>=s){if(!r.enabled.schneider||i>=l)return{title:"SIEG",remaining:a-i};if(r.enabled.schneider)return{title:"SCHNEIDER",remaining:l-i}}return i>=s?{title:"SIEG",remaining:a-i}:r.enabled.berg?{title:"BERG",remaining:s-i}:{title:"SIEG",remaining:a-i}}}});let tC=function(e){var t,n=e.mainTitle,r=e.subTitle,i=e.points,o=e.className,a=e.numberSize,s=void 0===a?"text-xl":a,l=(e.scoreSettings,e.scores),u=e.team,f=tE(),d=f.currentMultiplier,p=f.setMultiplier,h=f.getDividedPoints,g=f.getRemainingPoints,b=(0,Z.Q5)(function(e){return e.currentGroup}),v=(0,j.useUIStore)(function(e){return e.farbeSettings}),y=function(e){if(Array.isArray(e))return e}(t=(0,c.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tI(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tI(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),S=y[0],x=y[1];(0,c.useEffect)(function(){var e,t,n=null!=(e=null==b||null==(t=b.farbeSettings)?void 0:t.values)?e:v.values;if(!n){console.warn("[MultiplierCalculator] Keine Farbeinstellungen gefunden."),p(1);return}var r=Object.values(n).filter(function(e){return"number"==typeof e&&e>1}).sort(function(e,t){return t-e});p(r.length>0?r[0]:1)},[p]);var w=c.useMemo(function(){var e,t,n=null!=(e=null==b||null==(t=b.farbeSettings)?void 0:t.values)?e:v.values;if(!n)return 1;var r=Object.values(n).filter(function(e){return"number"==typeof e&&e>1}).sort(function(e,t){return t-e});return r.length>0?r[0]:1},[b,v]),N=d>0?"".concat(d,"x"):"-";return(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"text-gray-400",children:n}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-0 ".concat(void 0===o?"":o),children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("span",{className:"text-gray-400 text-xs",children:r}),(0,m.jsx)("div",{className:"".concat(s," font-bold mt-0"),children:i})]}),(0,m.jsx)("button",{onClick:function(){var e=tE.getState().currentMultiplier;w<=2||p(e>2?e-1:w)},onMouseDown:function(){return x(!0)},onMouseUp:function(){return x(!1)},onMouseLeave:function(){return x(!1)},onTouchStart:function(){return x(!0)},onTouchEnd:function(){return x(!1)},className:"bg-orange-500 hover:bg-orange-600 text-white rounded-lg px-2 py-3 self-center mx-auto h-12 w-14 mt-4 transition-all duration-100 ".concat(S?"bg-orange-700 scale-95 opacity-80":"scale-100 opacity-100","\n            ").concat(w<=1?"opacity-50 cursor-not-allowed":"","\n          }"),disabled:w<=1,children:N}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("span",{className:"text-gray-400 text-xs",children:[d,"-fach"]}),(0,m.jsx)("div",{className:"".concat(s," font-bold mt-0"),children:h(g(u,l||{top:0,bottom:0}).remaining)})]})]})]})};function tT(e,t,n){var r={rain:{y:-.3,gravity:1,startVelocity:15,spread:80},explosion:{y:.5,gravity:1,startVelocity:30,spread:360},cannon:{y:1.1,gravity:1,startVelocity:45,spread:45},firework:{y:-.1,gravity:1,startVelocity:60,spread:20}}[n];return("firework"===n?!t:t)?{y:1.1,gravity:-1,startVelocity:r.startVelocity,spread:r.spread}:r}function tA(e,t,n,r){var i=tG(r);return(0,$.A)({particleCount:Math.floor(i/10),origin:{x:e,y:t},spread:140,gravity:.7*n,startVelocity:n>0?-23:23,decay:.96,ticks:1e3,colors:["#FFD700","#FFA500","#FF8C00"]})}var tG=function(e){switch(e){case"low":return 500;case"medium":return 1e3;case"high":return 2500;case"super":return 5e3;case"extreme":return 1e4;default:return 0}};function tD(e,t,n,r,i){var o=tL(r);return(0,$.A)({particleCount:"shoot"===i?10:Math.floor(o/5),origin:{x:e,y:t},spread:"shoot"===i?15:360,startVelocity:"shoot"===i?n<0?45:-45:30,gravity:n,decay:"shoot"===i?.92:.94,shapes:["circle"],colors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"],scalar:1,ticks:"shoot"===i?100:"extreme"===r?200:150})}var tL=function(e){switch(e){case"low":return 500;case"medium":return 1e3;case"high":return 2500;case"super":return 5e3;case"extreme":return 1e4;default:return 0}},tR=function(e){var t=e.chargeLevel,n=e.team,r=e.isFlipped,i=tT(n,void 0!==r&&r,"rain"),o=i.y,a=i.gravity;if(t&&"none"!==t){var s=[.2,.35,.5,.65,.8];s.forEach(function(e,n){setTimeout(function(){return tA(e,o,a,t)},100*n)}),("high"===t||"super"===t)&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){return tA(e,o,a,t)},100*n)})},300),"extreme"===t&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){return tA(e,o,a,t)},50*n)})},600)}},tF=function(e){var t=e.chargeLevel,n=e.team,r=e.isFlipped;if("none"!==t){var i=tT(n,void 0!==r&&r,"firework"),o=i.y,a=i.gravity,s=[.2,.5,.8];s.forEach(function(e,n){setTimeout(function(){tD(e,o,a,t,"shoot"),setTimeout(function(){tD(e,.5,-a,t,"explode")},300)},500*n)}),("high"===t||"super"===t)&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){tD(e,o,a,t,"shoot"),setTimeout(function(){tD(e,.5,-a,t,"explode")},300)},500*n)})},800),"extreme"===t&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){tD(e,o,a,t,"shoot"),setTimeout(function(){tD(e,.5,-a,t,"explode")},300),setTimeout(function(){tD(e+.1,.5,-a,t,"explode"),tD(e-.1,.5,-a,t,"explode")},400)},400*n)})},1600)}};function tU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return t_(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t_(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tM=function(e,t,n){var r={yellow:"bg-yellow-600",green:"bg-green-600",red:"bg-red-600"}[t],i={yellow:"border-yellow-900",green:"border-green-900",red:"border-red-900"}[t],o={yellow:"shadow-yellow-400",green:"shadow-green-400",red:"shadow-red-400"}[t];switch(e){case"extreme":return"".concat(r," ").concat(i," shadow-[0_0_30px_5px] ").concat(o," animate-pulse");case"super":return"".concat(r," ").concat(i," shadow-[0_0_20px_3px] ").concat(o);case"high":return"".concat(r," ").concat(i," shadow-[0_0_15px_2px] ").concat(o);case"medium":return"".concat(r," ").concat(i," shadow-[0_0_10px_1px] ").concat(o);case"low":return"".concat(r," ").concat(i," shadow-[0_0_5px_0px] ").concat(o);default:return"".concat(r," ").concat(i)}},tK={berg:"rain",sieg:"firework"},tz=function(e){var t=e.onAction,n=e.isButtonActive,r=e.isActiveGlobal,i=e.color,o=e.disabled,a=void 0!==o&&o,s=e.children,l=e.type,u=e.team,f=(0,j.useUIStore)().calculator.isFlipped,d=tU((0,c.useState)(!1),2),p=d[0],h=d[1],g=tU((0,c.useState)("none"),2),b=g[0],v=g[1],y=(0,c.useRef)(null),S=(0,c.useRef)(null),x=(0,c.useRef)(!1),w=function(e){if(e>=e7.s2.extreme)return"extreme";if(e>=e7.s2.super)return"super";if(e>=e7.s2.high)return"high";if(e>=e7.s2.medium)return"medium";if(e>=e7.s2.low)return"low";return"none"},N=function(){a||(h(!0),S.current=Date.now(),y.current=setInterval(function(){v(w(Date.now()-(S.current||0)))},100))},k=function(){if(!a){h(!1),y.current&&(clearInterval(y.current),y.current=null);var e=S.current?Date.now()-S.current:0,i=w(e);t({chargeDuration:{duration:e,level:i},type:l,team:u,isActivating:!n}),r||("berg"===l?tR({chargeLevel:i,team:u,effectType:tK[l],isFlipped:f}):"sieg"===l&&tF({chargeLevel:i,team:u,effectType:tK[l],isFlipped:f})),setTimeout(function(){v("none"),S.current=null,x.current=!1},300)}};return(0,m.jsx)("div",{className:"relative",children:(0,m.jsx)("button",{onMouseDown:function(){x.current||N()},onMouseUp:function(){x.current||k()},onMouseLeave:function(){!x.current&&p&&k()},onTouchStart:function(){x.current=!0,N()},onTouchEnd:function(){k()},onTouchCancel:function(){k()},onContextMenu:function(e){return e.preventDefault()},disabled:a,className:"\n          w-full py-4 text-white rounded-xl font-bold\n          transition-all duration-150\n          ".concat(n?tM(b,i,p):"bg-gray-600 border-gray-500","\n          border-b-4 border-t border-l border-r\n          ").concat(a?"opacity-50 cursor-not-allowed":"","\n          ").concat(p?"translate-y-1 shadow-inner opacity-80":"shadow-lg","\n          select-none touch-manipulation\n          -webkit-touch-callout: none\n          -webkit-user-select: none\n          user-select: none\n        "),children:(0,m.jsx)("div",{className:"relative",children:s})})})},tH={none:[{text:"Alles klar! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Passt! Auswertung anschauen?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Fertig! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sauber bedankt! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Prima! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Bravo! Zum Gesamtergebnis?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Super! Resultate checken?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Perfekt! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Tiptop! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Wunderbar! Zur Gesamtauswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}}],low:[{text:"Ein feiner Sieg! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sauber gespielt! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Gut gemacht! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sch\xf6ne Runde! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Freude herrscht! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Fein gemacht! Resultate checken?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Nett gespielt! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Gut gek\xe4mpft! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Saubere Sache! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}}],medium:[{text:"Ohooo! Da wurde aber sch\xf6n bedankt! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Hoppla! Das war aber ein feiner Zug! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Ui ui ui! Das kann sich sehen lassen! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Aha! Da hat jemand Freude! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Hoho! Freud herrscht! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Jesses! Freude muss sein! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Aha! Da strahlt aber jemand! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Prost! Gute Feier! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Hurra! Siegen macht gl\xfccklich! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Juhui! Zelebrieren muss sein! Resultate angucken?",buttons:{cancel:"Nein",confirm:"Klar!"}}],high:[{text:"Bei den Jasskarten! Was f\xfcr ein Triumph! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter! Das war aber ein Meisterst\xfcck! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bock! Was f\xfcr ein Zug! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel, Herrgott! Das war aber stark! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz! Was f\xfcr eine Show! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Herrjemine! Das war aber grandios! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Trumpf! Was f\xfcr ein Coup! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Jetzt h\xe4t's gesch\xe4llet! Zum Resultat?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heidewitzka! Was f\xfcr ein Geniestreich! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot! Das war aber meisterhaft! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}}],super:[{text:"Potz Blitz! Da hat aber jemand seinen Sieg zelebriert! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bimbam! Was f\xfcr eine Siegesfeier! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmelherrgottsakrament! Das war episch! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter und Hagelschlag! Was f\xfcr ein Spektakel! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliges Kanonenrohr! Das war legend\xe4r! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Donnerkeil! Was f\xfcr ein Feuerwerk! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Holzaxt! Das war gigantisch! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel, Arsch und Zwirn! Was f\xfcr eine Show! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Strohsack! Das war bombastisch! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potz Blitz und Kreuzsakrament! Was f\xfcr ein Triumph! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}}],extreme:[{text:"Himmel, Herrgott und Eichel Buur! Dieser Sieg scheint besonders s\xfcss zu sein! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Schilten K\xf6nig! Da klebt wohl jemand am Siegesknopf fest! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Obenabe! Da hat's aber jemand mit der Siegesfreude! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Trumpf Buur! Das ist ja eine Siegesparade der Extraklasse! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliges Undenufe! Da wird der Sieg aber ausgekostet bis zum letzten Tropfen! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel und Nell! Wenn das kein Grund zum Feiern ist, was dann? Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Wiis! Da tanzt wohl jemand Sirtaki auf dem Jassteppich! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter und Rosen K\xf6nig! Das nenn ich mal eine Sieges-Choreographie! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Match! Da wird ja mehr gefeiert als beim Schellen Ober! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Schellen Ass! Das ist ja eine Siegesfeier wie beim St\xf6ck-Match! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel, Arsch und Wolkenbruch! Da hat's wohl jemand nicht eilig mit dem Weiterspielen! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Strohsack! Der Siegestanz dauert ja l\xe4nger als ein Schieber! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Kreuzjass! Da wird der Sieg zelebriert wie ein Blatt mit Vier K\xf6nigen! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter und Slalom! Diese Siegesfreude ist ja gr\xf6sser als beim Kontermatch! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Mis\xe8re! Da hat's wohl jemand nicht so mit der Bescheidenheit! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bock! Diese Siegesfeier ist ja l\xe4nger als eine Runde Differenzler! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Gusti! Da wird ja mehr zelebriert als beim Papst sein Namenstag! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel und H\xf6lle! Das ist ja eine Siegesfeier wie nach einem Tout! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bimbam! Da wird der Sieg ausgekostet wie der letzte Tropfen im Glas! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Herrgott! Diese Siegesfreude schreit ja f\xf6rmlich nach einem Jassturnier! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Prooooost! Tanzt da jemand schon auf dem Tisch? Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Juhuiii! Die Korken knallen, die Gl\xe4ser klingen! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Ol\xe9, Ol\xe9! Das schreit nach einer Siegesrunde! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Stimmung, Stimmung! Die Party ist noch lange nicht vorbei! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Bier f\xfcr alle! Der Sieg will begossen werden! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"La-Ola! Die Siegesrunde geht auf's Haus! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Fiesta, Fiesta! Der Siegestanz ist in vollem Gange! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Auf die Tische, fertig, los! Das wird eine lange Nacht! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Ramba Zamba! Die Siegesparty ist nicht mehr zu stoppen! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heute wird getanzt, gesungen und gefeiert! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}}]},tB=function(e){var t=tH[e];return t[Math.floor(Math.random()*t.length)]},tW={none:[{text:"Berg! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],low:[{text:"Berg geschafft! Resultate anschauen?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Berg! Weiter zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}}],medium:[{text:"Donnerwetter! Ein Berg wie aus dem Bilderbuch! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz! Das war ein Berg der Extraklasse! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],high:[{text:"Heiliger Strohsack! Was f\xfcr ein Berg! Zur Resultattafel??",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot! Der Berg ist ja h\xf6her als das Matterhorn! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],super:[{text:"Donnerwetter und Hagelschlag! Das ist ja ein Himalaya! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Donnerkeil! Ein Berg wie der Mount Everest! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],extreme:[{text:"Himmel, Herrgott und Eichel Buur! Das ist ja ein Berg bis in den Himmel! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Schilten K\xf6nig! Der Berg ragt ja bis in die Wolken! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}]},tJ=function(e){var t=tW[e];return t[Math.floor(Math.random()*t.length)]};function tZ(e){return(tZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tV(){tV=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(P([])));x&&x!==n&&r.call(x,a)&&(y=x);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==tZ(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(tZ(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function tY(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function t$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t$(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=tZ(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tZ(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tZ(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tQ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||tX(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tX(e,t){if(e){if("string"==typeof e)return t0(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t0(e,t):void 0}}function t0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}let t1=function(e){var t,r,i,o=e.isOpen,a=e.onClose,s=(0,w.useGameStore)(),l=s.currentRound,f=s.currentPlayer,d=s.playerNames,p=s.isBergActive,h=s.isSiegActive,g=s.addBerg,b=s.addSieg,v=s.scores,y=(0,es.useJassStore)().currentGameId,S=(0,Z.Q5)(function(e){return e.currentGroup}),x=tQ((0,c.useState)(!1),2);x[0],x[1];var N=tQ((0,c.useState)(!1),2);N[0],N[1];var k=tQ((0,c.useState)(""),2),O=k[0],I=k[1],P=tQ((0,c.useState)(""),2),E=P[0],C=P[1],T=tQ((0,c.useState)(""),2),A=T[0],G=T[1],D=tQ((0,c.useState)(!0),2),L=D[0],U=D[1],_=(0,eS.useTimerStore)(),M=_.pauseTimer,K=_.resumeTimer,z=_.getCurrentTime,H=_.gameStartTime,B=_.roundStartTime,W=_.jassStartTime,J=(0,j.useUIStore)(),V=J.isPaused,$=J.pauseGame,q=J.resumeGame,Q=J.lastDoubleClickPosition,et=J.calculator.isFlipped,en=J.setCalculatorFlipped,ei=J.showNotification,eo=J.endCharge,ea=J.isReadOnlyMode,el=tE(),ec=el.currentMultiplier,eu=el.getDividedPoints,ef=el.getRemainingPoints,ed=et?"top":"bottom",em=null!=(t=null==S?void 0:S.scoreSettings)?t:ee.$d,ep=null!=(r=null==S?void 0:S.farbeSettings)?r:X.FT,eh=function(){var e;return null==em||null==(e=em.enabled)||!e.berg||p("top")||p("bottom")},eg=function(){if(V)return void ei({message:"Zum Fortfahren bitte die Pause beenden und oben links auf  ▶️  klicken!",type:"warning",position:et?"top":"bottom",isFlipped:et});var e=tE.getState(),t=Object.values(ep.values).filter(function(e){return"number"==typeof e&&e>1}),n=t.length>0?Math.max.apply(Math,function(e){if(Array.isArray(e))return t0(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||tX(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):1;e.setMultiplier(n),a()};(0,c.useEffect)(function(){var e=function(){var e=z();H&&I(tO(e-H,!1)),B&&C(tO(e-B,!0)),W&&G(tO(e-W,!1))};if(e(),o&&!V){var t=setInterval(e,1e3),n=setInterval(function(){var t=eS.useTimerStore.getState(),n=t.gameStartTime,r=t.roundStartTime;(n!==H||r!==B)&&(console.log("⏱️ [SCHNELLES UPDATE] Timer haben sich ge\xe4ndert"),e())},50);return function(){clearInterval(t),clearInterval(n)}}},[o,V,z,H,B,W,y,l,v,eS.useTimerStore.getState().isPaused]);var eb=(0,er.U)().overlayScale,ev=(0,u.zh)({opacity:+!!o,transform:"scale(".concat(o?eb:.95,") rotate(").concat(et?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}});(0,c.useEffect)(function(){o&&Q&&en("top"===Q)},[o,Q]);var ey=(0,R.b)(),ex=ey.isActive,ew=(0,ey.getCurrentStep)();(0,c.useEffect)(function(){o&&ex&&(null==ew?void 0:ew.id)!==F.nI.JASS_SETTINGS&&(null==ew?void 0:ew.id)!==F.nI.GAME_INFO&&a()},[o,ex,ew,a]),(0,c.useEffect)(function(){o&&document.dispatchEvent(new Event("gameInfoOpen"))},[o]),(0,c.useEffect)(function(){if(o){U(!1);var e=setTimeout(function(){U(!0)},230);return function(){return clearTimeout(e)}}},[o]);var ej=function(){ei({message:"M\xf6chtest du die Pause aufheben um fortzufahren?",type:"warning",actions:[{label:(0,m.jsxs)("div",{className:"flex items-center justify-center w-full gap-1.5",children:[(0,m.jsx)(Y.aze,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Pause aufheben"})]}),onClick:function(){q(),a()}}]})},eN=function(e){if(ea)return void ei({type:"info",message:"Als Zuschauer kannst du dich nicht bedanken."});if(V)return void ei({message:"Bitte Pause-Modus beenden",type:"warning",position:et?"top":"bottom",isFlipped:et});var t=et?"top":"bottom";if(h("top"===t?"bottom":"top"))return void ei({type:"warning",message:"Der Gegner hat bereits BEDANKEN aktiviert!",position:t,isFlipped:et});b(t),e.isActivating&&setTimeout(function(){var n=tB(e.chargeDuration.level);ei({type:"bedanken",message:n.text,position:t,isFlipped:et,preventClose:!1,actions:[{label:n.buttons.cancel,onClick:function(){eo(t,"bedanken"),a()}},{label:n.buttons.confirm,onClick:function(){eo(t,"bedanken"),a(),j.useUIStore.setState(function(e){return{resultatKreidetafel:tq(tq({},e.resultatKreidetafel),{},{isOpen:!0,swipePosition:t})}})}}]})},function(e){switch(e){case"extreme":return 5250;case"super":return 3250;case"high":return 2250;case"medium":return 1250;case"low":return 750;default:return 250}}(e.chargeDuration.level))},ek=tQ((0,c.useState)(!1),2),eO=ek[0],eI=ek[1],eP=function(e){w.useGameStore.setState(function(t){return tq(tq({},t),{},{currentPlayer:e},1===l&&{startingPlayer:e})});var t,r=w.useGameStore.getState().activeGameId;r&&setTimeout((t=tV().mark(function t(){var i,o,a;return tV().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,null!=(i=window.__FIRESTORE_SYNC_API__)&&i.markLocalUpdate&&window.__FIRESTORE_SYNC_API__.markLocalUpdate(),t.next=1,Promise.resolve().then(n.bind(n,99407));case 1:return o=t.sent.updateActiveGame,a=tq({currentPlayer:e,lastUpdated:(0,ts.serverTimestamp)()},1===l&&{startingPlayer:e,initialStartingPlayer:e}),t.next=2,o(r,a);case 2:t.next=4;break;case 3:t.prev=3,console.error("[GameInfoOverlay] Firebase sync failed:",t.catch(0)),ei({type:"warning",message:"Spieler-Update konnte nicht synchronisiert werden."});case 4:case"end":return t.stop()}},t,null,[[0,3]])}),function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){tY(o,r,i,a,s,"next",e)}function s(e){tY(o,r,i,a,s,"throw",e)}a(void 0)})}),0)},eE=f||1,eC=d||{1:"Spieler 1",2:"Spieler 2",3:"Spieler 3",4:"Spieler 4"},eT=v||{top:0,bottom:0};return(0,m.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 ".concat(o?"":"pointer-events-none"),onClick:function(e){L&&e.target===e.currentTarget&&eg()},children:(0,m.jsxs)(u.CS.div,{style:ev,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-6 shadow-lg select-none",onClick:function(e){return e.stopPropagation()},children:[(0,m.jsx)("button",{onClick:function(){return en(!et)},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n            text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center\n            rounded-full\n            ".concat(et?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,m.jsx)(Y.cO3,{className:"w-8 h-8"})}),(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsx)("button",{onClick:V?function(){K(),q()}:function(){M(),$()},className:"\n              w-10 h-10 rounded-full flex items-center justify-center\n              ".concat(V?"bg-green-600 hover:bg-green-500":"bg-gray-600 hover:bg-gray-500","\n              text-white hover:text-white\n              transition-all duration-150\n              shadow-md hover:shadow-lg\n            "),"aria-label":V?"Weiter":"Pause",children:V?(0,m.jsx)(Y.aze,{className:"w-5 h-5"}):(0,m.jsx)(Y.GHw,{className:"w-5 h-5"})}),(0,m.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"Spielstand"}),(0,m.jsx)("button",{onClick:eg,className:"w-12 h-12 rounded-full flex items-center justify-center -mr-2 -mt-2 text-gray-400 hover:text-white transition-colors -webkit-tap-highlight-color-transparent",children:(0,m.jsx)(Y.yGN,{className:"w-5 h-5"})})]}),(0,m.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,m.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-white",children:[(0,m.jsxs)("div",{className:"text-center pl-5",children:[(0,m.jsx)("span",{className:"text-gray-400 text-xs",children:"Spiel"}),(0,m.jsx)("div",{className:"text-xl font-bold",children:y})]}),(0,m.jsxs)("div",{className:"text-center -ml-10 pl-0",children:[(0,m.jsx)("span",{className:"text-gray-400 text-xs",children:"Runde"}),(0,m.jsx)("div",{className:"text-xl font-bold",children:l})]}),(0,m.jsxs)("div",{className:"text-center -ml-10 pl-0",children:[(0,m.jsx)("span",{className:"text-gray-400 text-xs",children:"Spieldauer"}),(0,m.jsx)("div",{className:"text-xl font-bold",children:O})]}),(0,m.jsxs)("div",{className:"text-center -ml-8 pl-0",children:[(0,m.jsx)("span",{className:"text-gray-400 text-xs",children:"Jassdauer"}),(0,m.jsx)("div",{className:"text-xl font-bold",children:A})]})]}),(0,m.jsxs)("div",{className:"text-center text-white mt-1",children:[(0,m.jsx)("span",{className:"text-gray-400",children:"Spieler"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("button",{onClick:function(){return eI(!eO)},className:"w-full text-3xl font-bold p-2 bg-gray-700 hover:bg-gray-600 bg-opacity-50 rounded-xl mt-1 transition-colors",children:eC[eE]||"Spieler ".concat(eE)}),eO&&(0,m.jsx)("div",{className:"absolute left-0 right-0 mt-1 bg-gray-700 rounded-xl overflow-hidden shadow-lg z-50",children:Object.entries(eC).map(function(e){var t=tQ(e,2),n=t[0],r=t[1];return(0,m.jsx)("button",{onClick:function(){eP(Number(n)),eI(!1)},className:"w-full p-3 text-left hover:bg-gray-600 transition-colors",children:r||"Spieler ".concat(n)},n)})})]})]}),(0,m.jsxs)("div",{className:"text-center text-white mt-1",children:[(0,m.jsx)("span",{className:"text-gray-400",children:"Zeit Runde"}),(0,m.jsx)("div",{className:"text-3xl font-bold p-2 bg-gray-700 bg-opacity-50 rounded-xl mt-1",children:E})]}),(0,m.jsx)("div",{className:"text-center text-white mt-3",children:(0,m.jsx)(tC,{mainTitle:"Punkte bis",subTitle:ef(et?"top":"bottom",eT).title,points:ef(et?"top":"bottom",eT).remaining,team:et?"top":"bottom",numberSize:"text-3xl",scoreSettings:em,scores:eT})}),(0,m.jsx)("div",{className:"text-center text-white mt-1",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"text-gray-400",children:"Gegner"}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-2 -mt-10",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("span",{className:"text-gray-400 text-xs",children:ef(et?"bottom":"top",eT).title}),(0,m.jsx)("div",{className:"text-xl font-bold mt-0",children:ef(et?"bottom":"top",eT).remaining})]}),(0,m.jsx)("div",{className:"invisible"}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsxs)("span",{className:"text-gray-400 text-xs",children:[ec,"-fach"]}),(0,m.jsx)("div",{className:"text-xl font-bold mt-0",children:eu(ef(et?"bottom":"top",eT).remaining)})]})]})]})})]}),(0,m.jsx)("div",{className:"space-y-4 max-w-md mx-auto mt-12 mb-4",children:null!=em&&null!=(i=em.enabled)&&i.berg?(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsx)(tz,{onAction:function(e){if(ea)return void ei({type:"info",message:"Als Zuschauer k\xf6nnen keine Punkte geschrieben werden."});if(V)return void ej();var t=et?"top":"bottom";if(p("top"===t?"bottom":"top"))return void ei({message:"Sorry, dein Gegner hat den BERG schon geschrieben!",type:"warning",position:t,isFlipped:et});g(t),e.isActivating&&setTimeout(function(){var n=tJ(e.chargeDuration.level);ei({type:"bedanken",message:n.text,position:t,isFlipped:et,preventClose:!1,actions:[{label:n.buttons.cancel,onClick:function(){eo(t,"berg"),a()}},{label:n.buttons.confirm,onClick:function(){eo(t,"berg"),a(),j.useUIStore.setState(function(e){return{resultatKreidetafel:tq(tq({},e.resultatKreidetafel),{},{isOpen:!0,swipePosition:t})}})}}]})},function(e){switch(e){case"extreme":return 5250;case"super":return 3250;case"high":return 2250;case"medium":return 1250;case"low":return 750;default:return 250}}(e.chargeDuration.level))},isButtonActive:p(ed),isActiveGlobal:p("top")||p("bottom"),color:"yellow",disabled:V,type:"berg",team:ed,children:(0,m.jsx)("span",{className:"text-2xl",children:"Berg"})}),(0,m.jsx)(tz,{onAction:eN,isButtonActive:h(ed),isActiveGlobal:h("top")||h("bottom"),color:"yellow",disabled:V||!eh(),type:"sieg",team:ed,children:(0,m.jsx)("span",{className:"text-2xl",children:"Bedanken"})})]}):(0,m.jsx)(tz,{onAction:eN,isButtonActive:h(ed),isActiveGlobal:h("top")||h("bottom"),color:"yellow",disabled:V||!eh(),type:"sieg",team:ed,children:(0,m.jsx)("span",{className:"text-2xl",children:"Bedanken"})})})]})})};var t2=n(57456),t5=n(44221),t4=n(41464),t3=n(33306),t6=n(5875),t8=n(47139),t7=n(48365);F.nI.CALCULATOR_OPEN,ex.Mbp,F.nI.GAME_INFO,t6.HO_,F.nI.CALCULATOR,ex.Mbp,F.nI.NAVIGATE_SCORES,t8.oE7,F.nI.RESULTAT_INFO,ex.__w,F.nI.NEW_GAME,Y.cO3;let t9=function(){var e=(0,R.b)(),t=e.startTutorial,n=e.resetTutorial,r=(0,j.useUIStore)(),i=r.closeTutorialInfo,o=r.isTutorialInfoOpen,a=(0,j.useUIStore)(function(e){return e.calculator.isFlipped}),s=(0,j.useUIStore)().setCalculatorFlipped,l=(0,er.U)().overlayScale,c=[{title:"Punkte schreiben",id:F.nI.CALCULATOR_OPEN,icon:ex.Mbp},{title:"Weisen",id:F.nI.WEIS,icon:ex.HZi},{title:"Berg / Bedanken / Rechnen",id:F.nI.GAME_INFO,icon:t6.HO_},{title:"Resultate / Neues Spiel",id:F.nI.RESULTAT_INFO,icon:ew.oPo,onEnter:function(){window.dispatchEvent(new CustomEvent("tutorial:splitContainer",{detail:{action:"open",teamPosition:"bottom",stepId:F.nI.RESULTAT_INFO}}))}},{title:"L\xf6schen / Neuer Jass",id:F.nI.NEW_GAME,icon:ex.RCe,onEnter:function(){window.dispatchEvent(new CustomEvent("tutorial:splitContainer",{detail:{action:"open",teamPosition:"bottom",stepId:F.nI.NEW_GAME}}))}},{title:"Navigieren / Korrigieren",id:F.nI.NAVIGATE_SCORES,icon:t8.oE7},{title:"Individuelle Einstellungen",id:F.nI.JASS_SETTINGS,icon:ex.Pcn,onEnter:function(){window.dispatchEvent(new CustomEvent("tutorial:splitContainer",{detail:{action:"open",teamPosition:"bottom",stepId:F.nI.JASS_SETTINGS}}))}},{title:"Tipps & Tricks",id:F.nI.TIPS_WELCOME,icon:t7.T7J,onEnter:function(){t(F.nI.TIPS_WELCOME)}}],f=function(e){var r,o=c.find(function(t){return t.id===e});n(),null==o||null==(r=o.onEnter)||r.call(o),t(e,{isHelpMode:!0}),i()},d=(0,u.zh)({opacity:+!!o,transform:"scale(".concat(o?l:.95,") rotate(").concat(a?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}});return o?(0,m.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50",onClick:function(e){e.target===e.currentTarget&&i()},children:(0,m.jsxs)(u.CS.div,{style:d,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-4 shadow-lg select-none",onClick:function(e){return e.stopPropagation()},children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:"Hilfe & Anleitungen"}),(0,m.jsx)("div",{className:"flex justify-center mb-4",children:(0,m.jsx)(t8.zcf,{className:"w-12 h-12 text-yellow-600"})}),(0,m.jsx)("button",{onClick:function(){return s(!a)},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n            text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center rounded-full\n            ".concat(a?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,m.jsx)(Y.cO3,{className:"w-8 h-8"})}),(0,m.jsx)("button",{onClick:i,className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white transition-colors",children:(0,m.jsx)(Y.yGN,{size:28})}),(0,m.jsx)("div",{className:"overflow-y-auto max-h-[60vh] pr-2 space-y-2",children:c.map(function(e){return(0,m.jsxs)("button",{onClick:function(){return f(e.id)},className:"w-full flex items-center gap-4 p-4 rounded-lg text-gray-200 hover:bg-gray-700 transition-colors text-xl",children:[e.icon&&(0,m.jsx)(e.icon,{className:"w-7 h-7 text-yellow-600"}),(0,m.jsx)("span",{children:e.title})]},e.id)})})]})}):null};var ne=n(47735);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(){nn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var S=Object.getPrototypeOf,x=S&&S(S(P([])));x&&x!==n&&r.call(x,a)&&(y=x);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==nt(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(nt(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nt(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nt(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function no(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ns(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ns(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nl=["/join","/login","/register","/groups/new","/groups/join"],nc=function(){var e=(0,j.useUIStore)(function(e){return e.menu.isOpen}),t=(0,j.useUIStore)(function(e){return e.calculator.isOpen}),n=(0,j.useUIStore)(function(e){return e.resultatKreidetafel.isOpen}),r=(0,j.useUIStore)(function(e){return e.isGameInfoOpen}),i=(0,j.useUIStore)(function(e){return e.settings.isOpen}),o=(0,j.useUIStore)(function(e){return e.isTutorialInfoOpen}),a=(0,j.useUIStore)(function(e){return e.isFarbeSettingsModalOpen}),s=(0,j.useUIStore)(function(e){return e.jassFinishNotification.isOpen}),l=(0,j.useUIStore)(function(e){return e.historyWarning.show}),u=(0,j.useUIStore)(function(e){return e.onboarding.show});return(0,c.useMemo)(function(){return e||t||n||r||i||o||a||s||l||u},[e,t,n,r,i,o,a,s,l,u])};function nu(e){var t=(0,c.useRef)();return(0,c.useEffect)(function(){t.current=e},[e]),t.current}let nf=function(e){var t,n,r,i,o,a,s,l,p,h,g,b,v,y,S,x,N,k,O,I,P,E,C,T=e.middleLineThickness,A=void 0===T?4:T,G=e.zShapeConfig;(0,f.useRouter)().pathname;var D=na((0,c.useState)(!1),2),L=D[0],F=D[1],U=na((0,c.useState)(null),2),_=U[0],M=U[1],K=(0,c.useRef)(!1),z=(0,c.useRef)(null),H=(0,f.useRouter)().pathname,W=(0,w.useGameStore)(),V=W.isGameStarted,Y=(W.isGameCompleted,W.scores),$=W.addWeisPoints,q=W.weisPoints,X=W.activeGameId,ee=(W.isRoundCompleted,W.isTransitioning),et=Y||{top:0,bottom:0},en=et.top,ei=void 0===en?0:en,eo=et.bottom,ea=void 0===eo?0:eo,el=(0,es.useJassStore)(),ec=el.isJassStarted;el.jassSessionId;var eu=(0,j.useUIStore)(),ef=eu.menu.isOpen,ed=eu.setMenuOpen,em=eu.historyWarning,eg=eu.isGameInfoOpen,eb=eu.setGameInfoOpen,ev=eu.setOverlayPosition,eS=eu.isTutorialInfoOpen,ex=eu.onboarding,ew=(eu.showOnboarding,eu.hideOnboarding,eu.calculator),ej=eu.openCalculator,eN=eu.closeCalculator,ek=eu.setLastDoubleClickPosition,eO=ew.isOpen,eI=(0,eZ.useAuthStore)(function(e){return e.status}),eP=(0,R.b)(),eE=eP.isActive,eC=eP.hasCompletedTutorial,eT=(eP.getCurrentStep,eP.startTutorial),eA=nc(),eG=(0,d.A)();ex.show;var eD=ex.canBeDismissed,eL=na((0,c.useState)(function(){return(0,t4.x)()}),1)[0],eR=(0,c.useMemo)(function(){var e=nl.includes(H),t=H.startsWith("/view/"),n="/game/new"===H;return(0,ne.ms)(eL,e||t||n)},[eL,H,eI]),eF=(0,t2.F)(eR),eU=eF.currentStep,e_=eF.content,eM=eF.handleNext,eK=eF.handlePrevious,ez=eF.handleDismiss;eF.canBeDismissed,(0,eZ.useAuthStore)().isAuthenticated;var eH=(0,er.U)(),eB=eH.scale;eH.deviceType;var eW=(0,c.useMemo)(function(){return!ec&&!V},[ec,V]),eJ=(0,j.useUIStore)(function(e){return e.isReadOnlyMode});(0,c.useEffect)(function(){F(!0)},[]),(0,c.useEffect)(function(){if(ec||V){var e=setTimeout(function(){j.useUIStore.getState().setLoading(!1)},100);return function(){return clearTimeout(e)}}},[ec,V]);var eV=(0,c.useMemo)(function(){if(!L)return{topContainerHeight:0,bottomContainerHeight:0,middleLinePosition:0};var e=Math.floor(eG/2);return{topContainerHeight:e,bottomContainerHeight:e,middleLinePosition:Math.floor(eG/2)}},[eG,L]),eY=eV.topContainerHeight,e$=eV.bottomContainerHeight,eq=eV.middleLinePosition,eQ=J({initialPosition:0,maxOffset:.07*eG,position:"top"}),eX=eQ.y,e0=eQ.mainOpacity,e1=(eQ.oppositeOpacity,eQ.animateSwipe),e2=eQ.getBrightness,e5=J({initialPosition:0,maxOffset:.07*eG,position:"bottom"}),e4=e5.y,e6=e5.mainOpacity,e8=(e5.oppositeOpacity,e5.animateSwipe),e7=e5.getBrightness,e9=(0,c.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left";("top"===e?e1:e8)(t);var n="top"===e?e2:e7;n(1.2),setTimeout(function(){return n(1)},300)},[e1,e8,e2,e7]),te=tk("top"),tt=tk("bottom"),tn=(0,c.useCallback)(function(e,t){if("left"===e||"right"===e){if(eA)return;var n="left"===e?"backward":"forward";("top"===t?te:tt).handleSwipe(e),e9(t,"backward"===n?"left":"right");return}if("up"===e||"down"===e){K.current=!0,setTimeout(function(){K.current=!1},500);var r="top"===t&&"up"===e||"bottom"===t&&"down"===e,i="top"===t&&"down"===e||"bottom"===t&&"up"===e,o=!eA||ef;r&&o?(ev(t),M(t),setTimeout(function(){ed(!0),e1(!0),e8(!0)},0)):i&&ef&&(ed(!1),M(null),ev(null),e1(!1),e8(!1))}},[eA,ef,te,tt,e1,e8,ed,ev,e9]),tr=(0,c.useCallback)(function(e){!K.current&&(eA||(ev(e),M(e),ej(),window.dispatchEvent(new CustomEvent("calculatorOpen"))))},[eA,ev,M,ej]),to=(0,c.useCallback)(function(){eN(),M(null),ev(null)},[eN,M,ev]),ta=(n=(t={onSingleClick:function(e,t){var n=Date.now();if(z.current&&z.current.team===e&&n-z.current.time<300)return void console.log("⏱️ Weispunkt-Click zu schnell, wird ignoriert (Debounced).");if(M(e),"restzahl"===t)z.current={team:e,time:n},$(e,1);else{var r=parseInt(t,10)||20;z.current={team:e,time:n},$(e,r)}e9(e,"left")},onDoubleClick:function(e,t){(!eA||eg)&&(ek(e),eb(!0))},middleLinePosition:eq,delay:230}).onSingleClick,r=t.onDoubleClick,o=void 0===(i=t.delay)?230:i,s=void 0===(a=t.middleLinePosition)?0:a,l=(0,c.useRef)(0),p=(0,c.useRef)(null),h=(0,c.useRef)(!1),g=(0,c.useRef)(0),v=(b=(0,j.useUIStore)()).canOpenGameInfo,y=b.setGameInfoOpen,S=b.setLastDoubleClickPosition,x=b.isReadOnlyMode,N=b.isGlobalClickDisabled,(0,c.useEffect)(function(){return function(){p.current&&clearTimeout(p.current)}},[]),{handleGlobalClick:(0,c.useCallback)(function(e){if(!N){if(!e.isTrusted){var t;console.warn("\uD83D\uDEAB Synthetischer Click ignoriert - kein echter User-Click",{type:e.type,timeStamp:e.timeStamp,target:null==(t=e.target)?void 0:t.tagName});return}var i=Date.now();if(!(i<g.current)){l.current;var a=e.target.closest('[data-strich-box="true"]'),c=null==a?void 0:a.getAttribute("data-position"),u=null==a?void 0:a.getAttribute("data-box-type"),f=c||(e.clientY<s?"top":"bottom");p.current&&(clearTimeout(p.current),p.current=null),i-l.current<o?(r&&r(f,u),p.current=null,l.current=0,h.current=!0,g.current=i+250,setTimeout(function(){h.current=!1},50)):(l.current=i,h.current||(p.current=setTimeout(function(){Date.now()>=g.current&&!h.current&&a&&c&&u&&n&&n(c,u),l.current=0,p.current=null},o)))}}},[o,s,y,S,n,v,x])}).handleGlobalClick;(0,c.useEffect)(function(){if(L){var e=setTimeout(function(){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},0),t=setTimeout(function(){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},100);return function(){clearTimeout(e),clearTimeout(t)}}},[L]);var ts=nu(ei),tl=nu(ea),tc=nu(q.top),tu=nu(q.bottom);(0,c.useEffect)(function(){var e=ei+q.top,t=(null!=ts?ts:ei)+(null!=tc?tc:q.top);void 0!==ts&&e!==t&&e9("top",e>t?"left":"right")},[ei,q.top,ts,tc,e9]),(0,c.useEffect)(function(){var e=ea+q.bottom,t=(null!=tl?tl:ea)+(null!=tu?tu:q.bottom);void 0!==tl&&e!==t&&e9("bottom",e>t?"left":"right")},[ea,q.bottom,tl,tu,e9]),(0,c.useEffect)(function(){},[ei,ea,q.top,q.bottom,X]);var tf=(0,c.useCallback)(function(){ed(!1),M(null),e1(!1),e8(!1)},[ed,e1,e8]),td=(0,c.useCallback)(function(e){},[]);(0,c.useCallback)(function(){return!eC&&"authenticated"!==eI&&!V&&!ec&&!eS},[V,ec,eS,eC,eI]),(0,c.useEffect)(function(){if(!eJ){var e=R.b.getState(),t=e.isActive,n=!e.hasCompletedTutorial&&"authenticated"!==eI&&!V&&!ec&&!eS,r=ne.Cu&&ne.fM&&"authenticated"!==eI;L&&!t&&(n||r)&&eT()}},[L,eI,V,ec,eS,eJ,eT,eE,eC,ne.Cu]);var tm=(0,c.useMemo)(function(){return eE?{handleSwipe:tn,handleLongPress:function(e){return tr(e)}}:null},[eE,tn,tr]);(0,c.useEffect)(function(){var e=function(e){var t=e.detail,n=t.action,r=t.teamPosition;"open"===n?(ev(r),M(r),ed(!0),requestAnimationFrame(function(){e1(!0),e8(!0)})):"close"===n&&(ev(null),M(null),ed(!1),requestAnimationFrame(function(){e1(!1),e8(!1)}))};return window.addEventListener("tutorial:splitContainer",e),function(){window.removeEventListener("tutorial:splitContainer",e)}},[e1,e8,ed,ev,M]),(0,c.useCallback)((k=nn().mark(function e(t){var n,r,i,o,a,s,l,c;return nn().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=j.useUIStore.getState().resultatKreidetafel,j.useUIStore.setState(function(e){return{resultatKreidetafel:ni(ni({},e.resultatKreidetafel),{},{swipePosition:"bottom",isFlipped:!1})}}),e.next=1,new Promise(function(e){return setTimeout(e,400)});case 1:if(r=document.querySelector(".kreidetafel-content"),i=document.querySelector(".statistik-container"),o=document.querySelector(".button-container"),!(!r||!i||!o||!(r instanceof HTMLElement)||!(i instanceof HTMLElement)||!(o instanceof HTMLElement))){e.next=2;break}throw Error("Erforderliche Elemente nicht gefunden");case 2:return a={maxHeight:i.style.maxHeight,overflowY:i.style.overflowY,buttonDisplay:o.style.display},i.style.maxHeight="none",i.style.overflowY="visible",o.style.display="none",e.prev=3,e.next=4,ti()(r,{useCORS:!0,logging:!1,width:r.scrollWidth,height:r.scrollHeight,scale:2});case 4:return s=e.sent,e.next=5,new Promise(function(e){s.toBlob(function(t){t&&e(t)},"image/png",1)});case 5:if(l=e.sent,!navigator.share){e.next=6;break}return c="".concat(t,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),e.next=6,navigator.share({files:[new File([l],"jass-resultat.png",{type:"image/png"})],text:c});case 6:return e.prev=6,i.style.maxHeight=a.maxHeight,i.style.overflowY=a.overflowY,o.style.display=a.buttonDisplay,j.useUIStore.setState(function(e){return{resultatKreidetafel:ni(ni({},e.resultatKreidetafel),n)}}),e.finish(6);case 7:e.next=9;break;case 8:e.prev=8,console.error("Screenshot/Share Fehler:",e.catch(0));case 9:case"end":return e.stop()}},e,null,[[0,8],[3,,6,7]])}),O=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=k.apply(e,t);function o(e){no(i,n,r,o,a,"next",e)}function a(e){no(i,n,r,o,a,"throw",e)}o(void 0)})},function(e){return O.apply(this,arguments)}),[]);var tp=(0,Z.Q5)().currentGroup,th=(0,eZ.useAuthStore)().user,tg=(0,c.useRef)(null);(0,c.useEffect)(function(){var e,t=null==th?void 0:th.uid,n=null!=(e=null==tp?void 0:tp.id)?e:null;t&&n!==tg.current?tg.current=n:t||null===tg.current||(tg.current=null)},[th,tp]);var tb=(0,w.useGameStore)();if(!L)return null;if(ee)return(0,m.jsx)("div",{className:"relative w-full h-screen overflow-hidden bg-chalk-black prevent-interactions max-w-xl mx-auto flex flex-col justify-center",style:{transform:"scale(".concat(eB,")"),transformOrigin:"center center"},children:(0,m.jsxs)("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-gray-900 bg-opacity-80 z-[9999]",children:[(0,m.jsx)("div",{className:"h-16 w-16 text-white animate-spin",children:"⟳"}),(0,m.jsx)("p",{className:"mt-4 text-white text-lg",children:"Spiel wird finalisiert und n\xe4chste Runde vorbereitet..."})]})});var tv=eW&&!eE;return(0,m.jsxs)("div",{className:"relative w-full overflow-hidden bg-chalk-black prevent-interactions max-w-xl mx-auto flex flex-col justify-center",onClick:ta,onContextMenu:function(e){return e.preventDefault()},style:{height:eG,transform:"scale(".concat(eB,")"),transformOrigin:"center center"},children:[(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(t3.default,{onCloseMenu:tf}),eS&&(0,m.jsx)(t9,{})]}),eR&&(0,m.jsx)(t5.C,{show:eR,step:eU,content:e_,onNext:eM,onPrevious:eK,onDismiss:ez,canBeDismissed:null!=eD&&eD,isPWA:eL,isBrowserOnboarding:eR}),tv?(0,m.jsx)(eh.A,{members:[]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(B,{position:"top",height:eY,zShapeConfig:G,padding:"paddingTop",onSwipe:null!=(I=null==tm?void 0:tm.handleSwipe)?I:tn,y:eX,mainOpacity:e0,getBrightness:e2,onLongPress:null!=(P=null==tm?void 0:tm.handleLongPress)?P:tr,score:ei+q.top,triggerBlendEffect:td,isHistoryNavigationActive:te.isInPast}),(0,m.jsx)(u.CS.div,{style:{position:"absolute",left:"5%",width:"90%",top:eq-A/2,height:"".concat(A/2,"px"),transform:eX.to(function(e){return"translateY(".concat(-e,"px)")})},className:"bg-chalk-red"}),(0,m.jsx)(u.CS.div,{style:{position:"absolute",left:"5%",width:"90%",top:eq,height:"".concat(A/2,"px"),transform:e4.to(function(e){return"translateY(".concat(e,"px)")})},className:"bg-chalk-red"}),(0,m.jsx)(ey,{currentPlayer:tb.currentPlayer,startingPlayer:tb.startingPlayer,currentRound:tb.currentRound,opacity:e0.get(),isOpen:ef,isGameStarted:!tb.isGameCompleted,gameStartTime:null,roundStartTime:null,startFadeIn:!ef}),(0,m.jsx)(B,{position:"bottom",height:e$,zShapeConfig:G,padding:"paddingBottom",onSwipe:null!=(E=null==tm?void 0:tm.handleSwipe)?E:tn,y:e4,mainOpacity:e6,getBrightness:e7,onLongPress:null!=(C=null==tm?void 0:tm.handleLongPress)?C:tr,score:ea+q.bottom,triggerBlendEffect:td,isHistoryNavigationActive:tt.isInPast}),eO&&(0,m.jsx)(ep,{isOpen:eO,onClose:to,onCancel:to,initialValue:0,clickedPosition:_||"bottom"}),(0,m.jsx)(e3,{isOpen:ef,onClose:tf,swipePosition:_||"bottom"}),(0,m.jsx)(tN,{})]}),(0,m.jsx)(Q.A,{show:em.show,message:em.message,onConfirm:em.onConfirm,onDismiss:em.onCancel,swipePosition:_||"bottom"}),(0,m.jsx)(t1,{isOpen:eg,onClose:function(){return eb(!1)}})]})}},6284:(e,t,n)=>{n.d(t,{h:()=>s}),n(14232);var r=n(900),i=n(54573),o=n(88880),a=n(37876),s=function(e){var t,n,s=e.farbe,l=e.mode,c=void 0===l?"svg":l,u=e.cardStyle,f=void 0===u?"DE":u,d=e.className,m=(0,r.j)(s,c,f),p=(0,i.Sn)(s),h=null!=(t=null==(n=o.S[p])?void 0:n[f])?t:p;return m?(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 ".concat(null!=d?d:""),children:"emoji"===c?(0,a.jsx)("span",{className:"text-2xl",children:m}):(0,a.jsx)("img",{src:m,alt:h,className:"w-6 h-6 object-contain"})}):null}},33306:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(14232),i=n(23355),o=n(27212),a=n(56547),s=n(3501),l=n(50679),c=n(68774),u=n(37876);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){var t=e.onClick,n=e.className,r=e.children,i=(0,c.Z)(t);return(0,u.jsx)("button",m(m({},i.handlers),{},{className:"\n        min-w-[140px] h-12 px-6 rounded-full text-white font-semibold\n        transition-colors duration-100 flex items-center justify-center\n        ".concat(i.buttonClasses,"\n        ").concat(void 0===n?"":n,"\n      "),children:r}))};let h=function(e){var t=e.onNext,n=e.showBackButton,r=void 0===n||n,i=e.isFirstStep,o=void 0!==i&&i,s=e.isLastStep,c=void 0!==s&&s,f=(0,a.b)(),d=f.previousStep,m=f.nextStep;return(0,u.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[r&&!o&&(0,u.jsxs)(p,{onClick:d,className:"bg-gray-600 hover:bg-gray-700 active:bg-gray-600",children:[(0,u.jsx)(l.QVr,{className:"mr-2"}),"Zur\xfcck"]}),(0,u.jsxs)(p,{onClick:function(){c&&t?t():m()},className:"bg-yellow-600 hover:bg-yellow-700 active:bg-yellow-600 \n          ".concat(!r||o?"ml-auto":""),children:[c?"Fertig":"Weiter",!c&&(0,u.jsx)(l.Z0P,{className:"ml-2"})]})]})};var g=n(94566),b=n(90636),v=n(27788);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t=e.target,n=w(r.useState(null),2),o=n[0],a=n[1],s=r.useRef(0);return(r.useEffect(function(){var e=function(){if(t){var e=document.querySelector(t);if(e){var r=e.getBoundingClientRect();r.width>0&&r.height>0?(a(r),s.current=0):n()}else n()}},n=function(){s.current<10&&(s.current+=1,setTimeout(e,100))};e();var r=function(){return e()};return window.addEventListener("nextButtonReady",r),function(){window.removeEventListener("nextButtonReady",r)}},[t]),o&&0!==o.width&&0!==o.height)?(0,u.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute",style:{top:o.top,left:o.left,width:o.width,height:o.height,border:"2px solid rgba(255, 255, 255, 0.8)",borderRadius:"8px",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)",zIndex:1e3,pointerEvents:"none"}}):null},k=function(e){var t={position:"fixed",transform:""},n=function(e){return"".concat(.1*e,"vh")},r=function(e){return"".concat(.1*e,"vw")};switch(e.vertical){case"top":t.top="20vh";break;case"center":t.top="50vh",t.transform="translateY(-50%)";break;case"bottom":t.bottom="20vh"}switch(e.horizontal){case"left":t.left="20%";break;case"center":t.left="50%",t.transform?t.transform+=" translateX(-50%)":t.transform="translateX(-50%)";break;case"right":t.right="20%"}return e.offset&&("number"==typeof e.offset.y&&("bottom"===e.vertical?t.bottom="calc(20vh + ".concat(n(e.offset.y),")"):t.top="calc(".concat("center"===e.vertical?"50vh":"20vh"," + ").concat(n(e.offset.y),")")),"number"==typeof e.offset.x&&("right"===e.horizontal?t.right="calc(20% + ".concat(r(e.offset.x),")"):t.left="calc(".concat("center"===e.horizontal?"50%":"20%"," + ").concat(r(e.offset.x),")"))),t.transform||delete t.transform,t};let O=(0,r.memo)(function(e){e.onCloseMenu;var t=(0,a.b)(),n=t.isActive,l=t.getCurrentStep,c=t.nextStep,f=(t.previousStep,t.endTutorial),d=t.isHelpMode,m=t.exitHelpStep,p=t.markCategoryAsCompleted;(0,g.useUIStore)(function(e){return e.closeSettings}),(0,v.useAuthStore)().isGuest;var y=w((0,r.useState)(!0),2),S=y[0],j=y[1],O=w((0,r.useState)(!1),2),I=O[0],P=O[1],E=l();(0,b.H)("splitContainer",j),(0,b.H)("calculator",j),(0,b.H)("gameInfo",j),(0,b.H)("settings",j);var C=(0,r.useCallback)(function(){null!=E&&E.onExit&&E.onExit(),m()},[E,m]),T=(0,r.useCallback)(function(){var e=a.b.getState().getCurrentStep(),t=g.useUIStore.getState();t.closeAllOverlays(),t.setMenuOpen(!1),a.b.getState().setTutorialUIBlocking({calculatorClose:!1,gameInfoClose:!1,settingsClose:!1,resultatKreidetafelClose:!1}),I&&null!=e&&e.category&&p(e.category),f(I)},[I,p,f]),A=(0,r.useCallback)(function(){G()},[]);if((0,r.useEffect)(function(){if((null==E?void 0:E.target)==="save-settings"){var e;null==(e=document.getElementById("save-settings"))||e.addEventListener("click",A)}return function(){var e;null==(e=document.getElementById("save-settings"))||e.removeEventListener("click",A)}},[E,A]),(0,r.useEffect)(function(){var e=!E||E.id!==s.nI.CALCULATOR_OPEN&&E.id!==s.nI.GAME_INFO;return a.b.getState().setTutorialUIBlocking({calculatorClose:e,gameInfoClose:e,settingsClose:!0,resultatKreidetafelClose:!0}),function(){a.b.getState().setTutorialUIBlocking({calculatorClose:!1,gameInfoClose:!1,settingsClose:!1,resultatKreidetafelClose:!1})}},[null==E?void 0:E.id]),(0,r.useEffect)(function(){if((null==E?void 0:E.id)===s.nI.CALCULATOR_OPEN){var e=function(e){j(!1)};return document.addEventListener("calculatorOpen",e),function(){document.removeEventListener("calculatorOpen",e),j(!0)}}if((null==E?void 0:E.id)===s.nI.GAME_INFO){var t=function(){j(!1)};return document.addEventListener("gameInfoOpen",t),function(){document.removeEventListener("gameInfoOpen",t),j(!0)}}if((null==E?void 0:E.id)===s.nI.RESULTAT_INFO){var n=function(){j(!1)};return document.addEventListener("resultatKreidetafelOpen",n),function(){document.removeEventListener("resultatKreidetafelOpen",n),j(!0)}}},[null==E?void 0:E.id]),(0,r.useEffect)(function(){if((null==E?void 0:E.id)===s.nI.JASS_SETTINGS){var e=function(){j(!1)};return document.addEventListener("settingsOpen",e),function(){document.removeEventListener("settingsOpen",e),j(!0)}}},[null==E?void 0:E.id]),!n||!E)return null;var G=function(){var e=l();(null==e?void 0:e.id)===s.nI.SETTINGS_NAVIGATE_STROKES&&c()};return(0,u.jsxs)(o.N,{children:[(0,u.jsxs)(i.P.div,{className:"fixed inset-0 z-50",style:{pointerEvents:"none"},children:[E.target&&(0,u.jsx)(N,{target:E.target}),E.id===s.nI.SETTINGS&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"fixed left-0 right-0 top-0 bg-transparent",style:{height:"calc(50% - 40px)",pointerEvents:"auto",zIndex:1002}}),(0,u.jsx)("div",{className:"fixed left-0 right-0 bg-transparent",style:{top:"calc(50% + 40px)",bottom:0,pointerEvents:"auto",zIndex:1002}})]})]},"tutorial-overlay-backdrop"),S&&(0,u.jsxs)(i.P.div,{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col items-center text-center w-10/12 max-w-md fixed\n            ".concat(E.title?"p-6":"py-4 px-6"),style:x(x({},k(E.overlayPosition)),{},{zIndex:1001,pointerEvents:"none"}),children:[E.title&&(0,u.jsx)("h2",{className:"text-2xl font-bold mb-4 text-white",children:E.title}),E.icon&&(0,u.jsx)(E.icon,{className:"w-12 h-12 text-yellow-600 mb-4"}),E.image&&(0,u.jsx)("img",{src:E.image,alt:"",className:"w-64 h-64 mb-6 rounded-lg object-cover"}),(0,u.jsx)("p",{className:"text-white text-lg max-w-[90%] ".concat(E.title?"":"my-2"),children:E.content})]},"tutorial-overlay-content"),!E||E.hideNavigation?null:(0,u.jsx)(i.P.div,{className:"fixed left-1/2 transform -translate-x-1/2 z-[1001]",style:{bottom:"4vh",pointerEvents:"auto"},children:(0,u.jsxs)("div",{className:"flex flex-col items-center w-full max-w-md px-8 mb-8 mx-auto",children:[(0,u.jsx)("div",{className:"w-full flex items-center ".concat((null==E?void 0:E.id)===s.nI.WELCOME?"justify-center":"justify-between"," gap-4 mb-4"),children:d&&E.category!==s.xl.TIPS?(0,u.jsx)("button",{onClick:C,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-8 rounded-full w-[180px] mx-auto block active:bg-yellow-600",children:"Verstanden"}):(0,u.jsx)(h,{showBackButton:!E.hideBackButton,isFirstStep:E.id===s.nI.WELCOME||E.id===s.nI.SETTINGS||E.id===s.nI.TIPS_WELCOME,isLastStep:E.id===s.nI.BASIC_COMPLETE||E.id===s.nI.BINGO_SETTINGS||E.id===s.nI.TIPS_IPHONE_WAKE,onNext:E.id===s.nI.BASIC_COMPLETE||E.id===s.nI.BINGO_SETTINGS||E.id===s.nI.TIPS_IPHONE_WAKE?T:void 0})}),!d&&(E.id===s.nI.BASIC_COMPLETE||E.id===s.nI.BINGO_SETTINGS||E.id===s.nI.TIPS_IPHONE_WAKE)&&(0,u.jsxs)("div",{className:"flex items-center justify-center gap-2 text-white mt-2",children:[(0,u.jsx)("input",{type:"checkbox",id:"neverShowAgain",checked:I,onChange:function(e){P(e.target.checked)},className:"w-4 h-4 rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"}),(0,u.jsx)("label",{htmlFor:"neverShowAgain",className:"text-sm whitespace-nowrap",children:"Tutorial das n\xe4chste Mal nicht mehr anzeigen"})]})]})},"tutorial-overlay-navigation")]},"tutorial-overlay")})},54573:(e,t,n)=>{n.d(t,{SS:()=>l,Sn:()=>i,Yq:()=>a,Yz:()=>c,a3:()=>s,xW:()=>o});var r=n(42009);function i(e){return e?e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function a(e){var t;if(!e)return"-";if(e instanceof Date)t=e;else{if(!e||"number"!=typeof e.seconds)return"-";t=new r.Timestamp(e.seconds,e.nanoseconds).toDate()}return t.toLocaleDateString("de-CH")}function s(e){if(e<60)return"".concat(e,"s");var t=Math.floor(e/60),n=e%60;if(t<60)return n>0?"".concat(t,"m ").concat(n,"s"):"".concat(t,"m");var r=Math.floor(t/60),i=t%60;if(r<24)return i>0?"".concat(r,"h ").concat(i,"m"):"".concat(r,"h");var o=Math.floor(r/24),a=r%24;return a>0?"".concat(o,"d ").concat(a,"h"):"".concat(o,"d")}function l(e){return s(Math.floor(e/1e3))}function c(e){var t=e/60;return t<30?"blitz_schnell":t<75?"schnell":t<150?"normal":t<240?"gem\xfctlich":"marathon"}},90636:(e,t,n)=>{n.d(t,{H:()=>u});var r,i=n(56547),o=n(3501);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){var r;return(r=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(s(s(s(s(s(s(s(s(s(s(r={},o.nI.SETTINGS,"settings"),o.nI.SETTINGS_INTRO,"settings"),o.nI.SETTINGS_CARDS,"settings"),o.nI.SETTINGS_PICTOGRAMS,"settings"),o.nI.SETTINGS_MULTIPLIER,"settings"),o.nI.SETTINGS_CONFIGURE,"settings"),o.nI.SETTINGS_NAVIGATE,"settings"),o.nI.CALCULATOR,"calculator"),o.nI.GAME_INFO,"gameInfo"),o.nI.NEW_GAME,"splitContainer"),s(r,o.nI.RESULTAT_INFO,"splitContainer")),c=n(14232),u=function(e,t){var n=(0,i.b)(),r=n.isActive,a=n.getCurrentStep,s=n.registerEvent,u=a();return((0,c.useEffect)(function(){if(u&&t&&"calculator"===e&&u.id===o.nI.CALCULATOR_OPEN){var n=function(){return t(!1)};return document.addEventListener("calculatorOpen",n),s("calculatorOpen"),function(){document.removeEventListener("calculatorOpen",n),t(!0)}}},[e,null==u?void 0:u.id,t]),null!=u&&u.id&&("calculator"===e&&["CALCULATOR_OPEN","CALCULATOR_INPUT"].includes(u.id)||"gameInfo"===e&&u.id===o.nI.GAME_INFO))?{preventClose:!0}:{preventClose:!!(r&&u&&l[u.id]===e)}}}}]);