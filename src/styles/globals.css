@tailwind base;
@tailwind components;
@tailwind utilities;

/* Browser-spezifische Schriftgr√∂√üen-Korrektur */
html {
  /* Standard-Schriftgr√∂√üe f√ºr alle Browser */
  font-size: 16px;
  
  /* Chrome-spezifische Korrektur */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Chrome-spezifische Zoom-Korrektur */
@supports (-webkit-appearance: none) {
  body {
    /* Verhindere automatische Schriftgr√∂√üen-Anpassung in Chrome */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
}

/* Chrome-spezifische Anpassungen */
.chrome-browser {
  /* Chrome-spezifische Schriftgr√∂√üen-Korrektur */
  font-size: 16px !important;
  
  /* Verhindere automatische Zoom-Anpassung */
  zoom: 1.0 !important;
  
  /* Chrome-spezifische Text-Rendering-Optimierung */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Chrome-spezifische Button-Gr√∂√üen-Korrektur */
.chrome-browser button {
  min-height: 44px; /* iOS/Android Touch-Target-Gr√∂√üe */
}

.chrome-browser .text-sm {
  font-size: 0.875rem !important; /* 14px */
}

.chrome-browser .text-base {
  font-size: 1rem !important; /* 16px */
}

.chrome-browser .text-lg {
  font-size: 1.125rem !important; /* 18px */
}

:root {
  --background: 0 0% 100%;
  --foreground: 0 0% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 0 0% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 3.9%;
  --primary: 0 0% 9%;
  --primary-foreground: 0 0% 98%;
  --secondary: 0 0% 96.1%;
  --secondary-foreground: 0 0% 9%;
  --muted: 0 0% 96.1%;
  --muted-foreground: 0 0% 45.1%;
  --accent: 0 0% 96.1%;
  --accent-foreground: 0 0% 9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 89.8%;
  --input: 0 0% 89.8%;
  --ring: 0 0% 3.9%;
  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;
  --radius: 0.5rem;
}

.dark {
  --background: 0 0% 3.9%;
  --foreground: 0 0% 98%;
  --card: 0 0% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 0 0% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 0 0% 9%;
  --secondary: 0 0% 14.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 0 0% 14.9%;
  --muted-foreground: 0 0% 63.9%;
  --accent: 0 0% 14.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 14.9%;
  --input: 0 0% 14.9%;
  --ring: 0 0% 83.1%;
  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;
}

* {
  border-color: hsl(var(--border));
  box-sizing: border-box;
}

body {
  color: hsl(var(--foreground));
  background-color: hsl(var(--background));
}

html,
body,
#__next {
  padding: 0;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,
    Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;
}

/* App-specific styles - nur f√ºr Nicht-Lexikon-Seiten */
body:not(.lexikon-page),
body:not(.lexikon-page) #__next {
  height: 100%;
  width: 100%;
  /* Standard Viewport-H√∂he - KEIN -webkit-fill-available wegen Safe Area Konflikten */
  height: 100vh;
  overflow: hidden;
  
  /* üö´ GLOBALE DEAKTIVIERUNG VON TEXT-AUSWAHL F√úR ALLE ELEMENTE */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

/* Jass-spezifische Styles - nur f√ºr Nicht-Lexikon-Seiten */
body:not(.lexikon-page) {
  background-color: black;
  touch-action: none;
  display: flex;
  align-items: center;
  justify-content: center;
  /* position: fixed; ENTFERNT - verursacht Layout-Probleme mit Safe Areas */
  
  /* üö´ KOMPLETTE DEAKTIVIERUNG VON TEXT-AUSWAHL UND UNERW√úNSCHTEN INTERAKTIONEN */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-action: none;
  touch-action: none;
}

/* Lexikon/Wissen-Seiten √ºberschreiben die App-Styles */
body.lexikon-page {
  background-color: #111827 !important; /* gray-900 - Jassguru Dark */
  touch-action: auto !important;
  display: block !important;
  align-items: initial !important;
  justify-content: initial !important;
  position: relative !important;
  overflow: auto !important;
  height: auto !important;
  min-height: 100vh !important;
  
  /* ‚úÖ LEXIKON: TEXT-AUSWAHL WIEDER AKTIVIEREN */
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
  -webkit-touch-callout: default !important;
}

body.lexikon-page #__next {
  overflow: auto !important;
  height: auto !important;
  min-height: 100vh !important;
  position: relative !important;
  display: block !important;
  
  /* ‚úÖ LEXIKON: TEXT-AUSWAHL AUCH F√úR #__next AKTIVIEREN */
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}

/* Verhindern, dass die Jass-App-Styles die Lexikon-Seiten beeinflussen */
body.lexikon-page .prevent-interactions {
  touch-action: auto !important;
}

/* Zus√§tzliche Overrides f√ºr Container */
body.lexikon-page * {
  position: static;
}

body.lexikon-page div[id="__next"] {
  position: relative !important;
  inset: auto !important;
}

/* Jassguru Dark Theme f√ºr Lexikon-Content */
.content-formatting {
  line-height: 1.7;
  color: #f9fafb; /* Haupttext wei√ü */
}

.content-formatting a {
  color: #ffffff !important; /* Wei√ü f√ºr alle Links */
  text-decoration: underline;
  text-decoration-color: #10b981; /* Gr√ºne Unterstreichung */
  text-underline-offset: 2px;
  transition: all 0.2s ease;
}

.content-formatting a:hover {
  color: #10b981 !important; /* Gr√ºn beim Hover */
  text-decoration-color: #fbbf24; /* Gelbe Unterstreichung beim Hover */
}

.content-formatting h1 {
  font-size: 2.5rem;
  font-weight: 800;
  line-height: 1.2;
  margin-bottom: 1.5rem;
  color: #ffffff; /* Wei√ü f√ºr Haupttitel */
}

.content-formatting h2 {
  font-size: 2rem;
  font-weight: 700;
  line-height: 1.3;
  margin-top: 2rem;
  margin-bottom: 1rem;
  color: #10b981; /* Jassguru Gr√ºn f√ºr √úberschriften */
}

.content-formatting h3 {
  font-size: 1.5rem;
  font-weight: 600;
  line-height: 1.4;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  color: #fbbf24; /* Jassguru Gelb f√ºr Subheadings */
}

.content-formatting p {
  font-size: 1.125rem;
  line-height: 1.7;
  margin-bottom: 1.5rem;
  color: #e5e7eb; /* Helles Grau f√ºr Text */
}

/* Listen - √úberschreibt alle Prose-Klassen */
.prose ul,
.content-formatting ul {
  margin: 1.5rem 0;
  padding-left: 0;
  list-style: none;
}

.prose ul li,
.content-formatting ul li {
  position: relative;
  padding-left: 2rem;
  margin-bottom: 0.75rem;
  font-size: 1.125rem;
  line-height: 1.6;
  color: #e5e7eb; /* Helles Grau f√ºr Listen */
}

/* Bullet Points - √úberschreibt alle Prose-Klassen */
.prose ul li::before,
.content-formatting ul li::before {
  content: "‚Ä¢";
  position: absolute;
  left: 0.5rem;
  top: -0.25em;
  color: #10b981; /* Jassguru Gr√ºn f√ºr Bullets */
  font-weight: bold;
  font-size: 1.25rem;
}

.content-formatting ol {
  margin: 1.5rem 0;
  padding-left: 2rem;
  counter-reset: list-counter;
}

.content-formatting ol li {
  position: relative;
  margin-bottom: 0.75rem;
  font-size: 1.125rem;
  line-height: 1.6;
  color: #e5e7eb;
  counter-increment: list-counter;
}

.content-formatting strong {
  font-weight: 700;
  color: #ffffff; /* Wei√ü f√ºr Hervorhebungen */
}

.content-formatting em {
  font-style: italic;
  color: #d1d5db; /* Mittleres Grau f√ºr Kursiv */
}

/* Mobile Optimierungen */
@media (max-width: 640px) {
  .content-formatting h1 {
    font-size: 2rem;
  }
  
  .content-formatting h2 {
    font-size: 1.75rem;
  }
  
  .content-formatting h3 {
    font-size: 1.375rem;
  }
  
  .content-formatting p,
  .content-formatting ul li,
  .content-formatting ol li {
    font-size: 1rem;
  }
}

/* iOS Safe Area Support - NUR f√ºr PWA-Modus */
@media (display-mode: standalone) {
  @supports (padding: env(safe-area-inset-top)) {
    /* Safe Areas nur f√ºr spezifische Container in PWA */
    .safe-area-container {
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
    
    /* üéØ LEXIKON HEADER: Perfektes Spacing f√ºr iOS PWA */
    .lexikon-header-pwa {
      /* iOS Safe Area (ca. 47px auf iPhone) + nur 12px extra = perfekter Abstand */
      padding-top: calc(env(safe-area-inset-top) + 0.75rem);
      padding-bottom: 2rem; /* pb-8 = 2rem */
    }
    
    /* PWA: Vollscreen f√ºr Jass-App ohne Safe Area Padding */
    body:not(.lexikon-page) {
      background-color: black;
      height: 100vh !important;
      padding: 0 !important;
      margin: 0 !important;
    }
    
    body:not(.lexikon-page) #__next {
      height: 100vh !important;
    }
  }
}

/* Fallback f√ºr PWA ohne @supports - iOS < 11.0 und Android */
@media (display-mode: standalone) {
  .lexikon-header-pwa {
    /* Universeller Fallback: ~40px Statusleiste + 12px extra = 52px */
    padding-top: 3.25rem; /* 52px - funktioniert f√ºr beide Plattformen */
    padding-bottom: 2rem;
  }
  
  /* Android-spezifische Erkennung und Anpassung */
  @media screen and (max-width: 768px) {
    .lexikon-header-pwa {
      /* Android: Kleinere Statusleisten (~24px) + 12px extra = 36px */
      padding-top: 2.25rem; /* 36px */
    }
    
    /* iOS-Erkennung: Gr√∂√üere Statusleisten */
    @supports (-webkit-touch-callout: none) {
      .lexikon-header-pwa {
        /* iOS: Gr√∂√üere Statusleisten (~47px) + 12px extra = 59px */
        padding-top: 3.75rem; /* 60px */
      }
    }
  }
}

/* Browser-Modus: Korrekte Viewport-H√∂he mit JS-Fallback, um UI-Leisten auszugleichen */
@media not (display-mode: standalone) {
  body:not(.lexikon-page),
  body:not(.lexikon-page) #__next {
    height: 100%;
    width: 100%;
    /* WICHTIG: Stellt die korrekte H√∂he f√ºr mobile Browser sicher */
    height: var(--vh, 100vh);
  }
}

.text-chalk-red {
  color: #FF0000;
}

.bg-chalk-red {
  background-color: #FF0000;
}

.touch-action-none {
  touch-action: none;
}

.touch-callout-none {
  -webkit-touch-callout: none;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

@keyframes shake {
  0% { transform: translate(1px, 1px) rotate(0deg); }
  10% { transform: translate(-1px, -2px) rotate(-1deg); }
  20% { transform: translate(-3px, 0px) rotate(1deg); }
  30% { transform: translate(3px, 2px) rotate(0deg); }
  40% { transform: translate(1px, -1px) rotate(1deg); }
  50% { transform: translate(-1px, 2px) rotate(-1deg); }
  60% { transform: translate(-3px, 1px) rotate(0deg); }
  70% { transform: translate(3px, 1px) rotate(-1deg); }
  80% { transform: translate(-1px, -1px) rotate(1deg); }
  90% { transform: translate(1px, 2px) rotate(0deg); }
  100% { transform: translate(1px, -2px) rotate(-1deg); }
}

.prevent-interactions {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  pointer-events: auto;
  touch-action: manipulation;
  -webkit-overflow-scrolling: none;
  overscroll-behavior: none;
}

.prevent-interactions * {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

button {
  -webkit-tap-highlight-color: transparent;
}

/* üö´ GLOBALE REGEL: KEINE TEXT-AUSWAHL F√úR ALLE ELEMENTE IN DER PWA */
body:not(.lexikon-page) * {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  -webkit-touch-callout: none !important;
  -webkit-tap-highlight-color: transparent !important;
}

/* ‚úÖ AUSNAHME: Input-Felder und Textareas sollen Textauswahl haben */
body:not(.lexikon-page) input,
body:not(.lexikon-page) textarea,
body:not(.lexikon-page) [contenteditable="true"] {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}

/* Utility-Klassen f√ºr Skalierung */
.scale-95 {
  transform: scale(0.95);
}

.scale-100 {
  transform: scale(1);
} 