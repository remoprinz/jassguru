"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2325],{1812:(e,t,n)=>{n.d(t,{A:()=>nB});var r,i,o,a,s,l,c=n(4232),u=n(9143),f=n(9099);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}let m=function(){var e,t=function(e){if(Array.isArray(e))return e}(e=(0,c.useState)(function(){return window.innerHeight}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,2)||function(e,t){if(e){if("string"==typeof e)return d(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],r=t[1];return(0,c.useEffect)(function(){var e=function(){var e=window.innerHeight;r(e),document.documentElement.style.setProperty("--vh","".concat(e,"px"))};e();var t=setTimeout(e,100);return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),function(){clearTimeout(t),window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),n};var p=n(7876);let h=function(e){var t=e.className,n=e.outerStrokeWidth,r=void 0===n?2:n,i=e.diagonalStrokeWidth,o=(e.position,e.onShapeRendered),a=(0,c.useRef)(null);(0,c.useEffect)(function(){if(a.current&&o){var e=a.current.getBoundingClientRect();o({width:e.width,height:e.height,left:e.left,top:e.top})}},[o]);var s=Math.sqrt(2);return(0,p.jsx)("svg",{ref:a,className:t,viewBox:"0 0 120 100",preserveAspectRatio:"xMidYMid meet",children:(0,p.jsxs)("g",{transform:"translate(0, 0)",children:[(0,p.jsx)("path",{d:"M0 0 L110 0",stroke:"currentColor",strokeWidth:r,fill:"none"}),(0,p.jsx)("path",{d:"M0 100 L110 0",stroke:"currentColor",strokeWidth:(void 0===i?.75:i)*s,fill:"none"}),(0,p.jsx)("path",{d:"M0 100 L110 100",stroke:"currentColor",strokeWidth:r,fill:"none"})]})})},g=function(e){var t=e.onSwipeUp,n=e.onSwipeDown,r=e.onSwipeLeft,i=e.onSwipeRight,o=e.threshold,a=void 0===o?50:o,s=e.element;(0,c.useEffect)(function(){var e=null,o=null,l=function(t){t.target.closest('[data-swipe-area="'.concat(s,'"]'))&&(e=t.touches[0].clientX,o=t.touches[0].clientY)},c=function(s){if(null!==e&&null!==o){var l=s.touches[0].clientX,c=s.touches[0].clientY,u=e-l,f=o-c;Math.abs(u)>Math.abs(f)?Math.abs(u)>a&&(u>0&&r?r():u<0&&i&&i(),e=null,o=null):Math.abs(f)>a&&(f>0&&t?t():f<0&&n&&n(),e=null,o=null)}};return document.addEventListener("touchstart",l),document.addEventListener("touchmove",c),function(){document.removeEventListener("touchstart",l),document.removeEventListener("touchmove",c)}},[t,n,r,i,a,s])};var b=n(4952);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(0,b.Ay)("div")({position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start"}),(0,b.Ay)(u.CS.div,{shouldForwardProp:function(e){return"isVertical"!==e&&"color"!==e}})(function(e){var t=e.isVertical;return{position:"absolute",backgroundColor:e.color,width:"2px",height:t?"100%":"2px",transformOrigin:"top left"}});var S=(0,b.Ay)("div")(function(e){return{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start",transform:e.isRotated?"rotate(180deg)":"rotate(0)",transformOrigin:"center center"}});let w=function(e){var t=e.stricheCount,n=(e.stricheCounts,e.einheitWert),r=e.strichColor,i=e.animationDuration,o=(e.isActive,e.direction),a=e.edgeOffset,s=e.strichSpacing,l=void 0===s?10:s,f=e.einheitSpacing,d=void 0===f?50:f,m=e.position,h=e.isRotated,g=e.xSize,b=void 0===g?20:g,v=e.isXMode,y=void 0!==v&&v,w=e.xAngle,j=void 0===w?15:w,N=(e.xAlignment,e.isDiagonal,e.diagonalAngle,e.diagonalStrichHeight),O=void 0===N?"100%":N,k=e.diagonalStrichWidth,I=void 0===k?"2px":k,E=(e.diagonalStrichOffset,e.diagonalStrichAngle),P=void 0===E?0:E,C=e.topDiagonalStrichOffset,A=e.bottomDiagonalStrichOffset,T=e.topDiagonalStrichAngle,L=void 0===T?0:T,G=e.bottomDiagonalStrichAngle,D=void 0===G?0:G,R=e.diagonalStrichOffset100er,_=e.diagonalStrichOffset20er,F=e.diagonalStrichAngle100er,M=e.diagonalStrichAngle20er,z=e.xSpacing,K=void 0===z?10:z,U=e.xOffset100erTop,H=void 0===U?63:U,B=e.xOffset100erBottom,W=void 0===B?40:B;e.offset;var J=Math.floor(t/5),Z=t%5,V=t>0;(0,u.zh)({from:{scaleY:0},to:{scaleY:+!!V},config:x(x({},u.$W.stiff),{},{duration:void 0===i?1e3:i})});var Y=(0,c.useCallback)(function(e,t,i){var s=Math.floor(e/5),c=e%5,u=s*(d+4*l),f=c*l;if(4===c){var h,g,b=3*l;100===n&&R?(h=R,g=F||P):20===n&&_?(h=_,g=M||P):(h="top"===m?C:A,g="top"===m?L:D);var v=x(x({position:"absolute",height:O,width:I},"top"===m?{right:"calc(".concat(a+u+b,"px + ").concat(h.horizontal," ").concat(100===n?"- 0px":"",")"),top:"calc(0px + ".concat(h.vertical,")")}:{left:"calc(".concat(a+u,"px + ").concat(h.horizontal,")"),bottom:"calc(0px + ".concat(h.vertical,")")}),{},{transform:"rotate(".concat(g,"deg)"),transformOrigin:("top"===m,"bottom left"),backgroundColor:r});return(0,p.jsx)("div",{style:v},"strich-".concat(e))}if(i){if("ltr"===o){var y,S=5*("bottom"!==m||0!==n);y={left:"".concat(a+u+f+S,"px")}}else y={right:"".concat(a+u+f,"px")};var w=x({position:"absolute",height:"100%",width:"2px"},y);return(0,p.jsx)("div",{style:x(x({},w),{},{backgroundColor:r})},"strich-".concat(e))}return null},[r,o,a,O,I,P,l,d,m,C,A,L,D,n,R,_,F,M]),$=(0,c.useCallback)(function(e){return(0,p.jsxs)(c.Fragment,{children:[[0,1,2,3].map(function(t){return Y(5*e+t,!1,!0)}),Y(5*e+4,!1,!1)," "]},"einheit-".concat(e))},[Y]),q=(0,c.useMemo)(function(){return Array.from({length:J}).map(function(e,t){return $(t)})},[J,$]),Q=(0,c.useMemo)(function(){return Array.from({length:Z}).map(function(e,t){return Y(5*J+t,!1,t<4)})},[Z,J,Y]),X=(0,c.useMemo)(function(){if(V){var e=t-1;return Y(e,!0,e%5<4)}return null},[V,t,Y]),ee=(0,c.useCallback)(function(){return Array.from({length:Math.ceil(t/2)}).map(function(e,t){return"".concat(35*t,"px")})},[t]),et=(0,c.useCallback)(function(){return ee().map(function(e,n){var i=2*n+2<=t,o=2*n+1===t,a={position:"absolute",width:"0%",height:"104%",top:"50%",transform:"translateY(-50%)"};return"top"===m?a.right="calc(".concat(e," + 40px)"):a.left="calc(".concat(e," + 20px)"),(0,p.jsxs)("div",{style:a,children:[(0,p.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(".concat(j,"deg)"),transformOrigin:"center",opacity:i||o?1:0}}),(0,p.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(-".concat(j,"deg)"),transformOrigin:"center",opacity:+!!i}})]},"x-".concat(n))})},[ee,t,j,r,m]),en=(0,c.useCallback)(function(){var e=Math.floor(t/10);return e>0?(0,p.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:Array.from({length:e}).map(function(e,t){return(0,p.jsxs)("div",{style:x(x({position:"absolute"},"top"===m?{right:"".concat(23+t*(b+15),"px")}:{left:"".concat(23+t*(b+15),"px")}),{},{top:"50%",transform:"translateY(-50%)",width:"".concat(b,"px"),height:"107%"}),children:[(0,p.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(".concat(j,"deg)"),transformOrigin:"center"}}),(0,p.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:r,transform:"rotate(-".concat(j,"deg)"),transformOrigin:"center"}})]},"hundred-x-".concat(t))})}):null},[t,r,b,j,m]),er=(0,c.useMemo)(function(){if(y)return et();if(100===n){var e=Math.floor(t/10),r=t-10*e,i=e*(b+K);return(0,p.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[en(),r>0&&(0,p.jsx)("div",{style:x(x({position:"absolute"},"top"===m?{right:e>0?"calc(".concat(i,"px + ").concat(null!=H?H:63,"px)"):"calc(".concat(25,"px + 16px)")}:{left:e>0?"calc(".concat(i,"px + ").concat(null!=W?W:40,"px)"):"calc(".concat(25,"px - 8px)")}),{},{top:0,bottom:0,width:"".concat(r*l,"px")}),children:Array.from({length:r}).map(function(e,t){return Y(t,!1,!0)})})]})}if(20!==n)return(0,p.jsxs)(p.Fragment,{children:[q,Q,X]});var o=Math.floor(t/5),a=t%5,s=o*(d+4*l)+a*l;return(0,p.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,p.jsxs)("div",{style:x(x({position:"absolute"},"top"===m?{right:"25px"}:{left:"0px"}),{},{top:0,bottom:0,width:"".concat(s,"px")}),children:[Array.from({length:o}).map(function(e,t){return $(t)}),Array.from({length:a}).map(function(e,t){return Y(5*o+t,!1,t<4)})]})})},[t,n,y,et,en,b,K,m,l,Y,q,Q,X,d,$]);return(0,c.useEffect)(function(){},[t]),(0,p.jsx)(S,{isRotated:void 0!==h&&h,children:er})};var j=n(4277),N=n(3649),O=n(9045);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e,t,n){var r;return(r=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===k(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=(0,b.Ay)("div")({position:"absolute",width:"75%",maxWidth:"320px",height:"80%",top:"10%",left:"50%",transform:"translateX(-50%)",pointerEvents:"none"}),A=(0,b.Ay)("div")(function(e){var t=e.customStyle,n=e.isDisabled;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({position:"absolute",width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0 10px",boxSizing:"border-box",pointerEvents:n?"none":"auto",cursor:n?"default":"pointer"},t)}),T=(0,b.Ay)("span")(function(e){var t=e.position;return P(P(P(P(P(P({position:"absolute"},"top"===t?"left":"right","10px"),"top","50%"),"transform","top"===t?"translateY(-50%) rotate(180deg)":"translateY(-50%)"),"color","rgba(255, 255, 255, 0.8)"),"fontSize","16px"),"fontWeight","bold")}),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-43,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0%",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0%",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0%",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0%";return"bottom"===e?{"100er":{height:"20%",top:"calc(-3.5% + ".concat(r,")"),left:"-4%",width:"105%"},"50er":{height:"20%",top:"70%",left:"9%",width:"95%",transform:"rotate(".concat(t,"deg)"),transformOrigin:"top left"},"20er":{height:"20%",bottom:"calc(-4.5% + ".concat(o,")"),left:"2%",width:"80%"},restzahl:{height:"20%",top:"76%",right:"-2%",width:"16%"}}:{"20er":{height:"20%",top:"calc(-4.5% + ".concat(i,")"),right:"2%",width:"80%"},"50er":{height:"20%",bottom:"14%",left:"22%",width:"95%",transform:"rotate(".concat(t,"deg)"),transformOrigin:"bottom left"},"100er":{height:"20%",bottom:"calc(-3.5% + ".concat(n,")"),right:"-4%",width:"105%"},restzahl:{height:"20%",bottom:"76%",left:"-2%",width:"16%"}}},G=(0,b.Ay)("div")(function(e){return{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start",transform:e.isRotated?"rotateX(180deg) rotateY(180deg) rotateZ(180deg)":"none",transformOrigin:"center center"}}),D=function(e){if("restzahl"===e)return"restzahl";var t=parseInt(e);return 20===t||50===t||100===t?t:20};let R=function(e){var t=e.position,n=(e.onBlendEffect,e.score),r=e.top100erOffset,i=e.bottom100erOffset,o=e.top20erOffset,a=e.bottom20erOffset,s=e.isInteractionDisabled,l=void 0!==s&&s,c=(0,j.useGameStore)();c.updateScoreByStrich,c.addWeisPoints,c.currentHistoryIndex,c.roundHistory,c.showHistoryWarning,c.jumpToLatest;var u=(0,N.useUIStore)();u.setGameInfoOpen,u.setLastDoubleClickPosition,u.closeHistoryWarning;var f=(0,O.J)(n),d={stricheCounts:f.striche,restZahl:f.restZahl},m=L(t,-43,void 0===r?"2%":r,void 0===i?"2%":i,void 0===o?"2%":o,void 0===a?"2%":a);return(0,p.jsx)(C,{children:(0,p.jsx)(G,{isRotated:"top"===t,children:Object.entries(m).map(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,2)||function(e,t){if(e){if("string"==typeof e)return I(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1],o=D(r),a="restzahl"===o?d.restZahl:d.stricheCounts[o]||0;return(0,p.jsx)(A,{customStyle:i,"data-strich-box":"true","data-position":t,"data-box-type":r,isDisabled:l,children:"restzahl"===o?(0,p.jsx)(T,{position:t,children:d.restZahl}):(0,p.jsx)(w,{stricheCount:a,stricheCounts:d.stricheCounts,einheitWert:o,strichColor:"rgb(255, 255, 255)",animationDuration:100,isActive:!0,direction:"top"===t?"rtl":"ltr",edgeOffset:0,isXMode:50===o,xAngle:18,xAlignment:"top"===t?"right":"left",isDiagonal:!0,diagonalAngle:"top"===t?-43:43,diagonalStrichHeight:"116%",diagonalStrichWidth:"2px",diagonalStrichOffset:{vertical:"0%",horizontal:"0%"},diagonalStrichAngle:"top"===t?-25:25,topDiagonalStrichOffset:{vertical:"0%",horizontal:"0%"},bottomDiagonalStrichOffset:{vertical:"0%",horizontal:"0%"},topDiagonalStrichAngle:30,bottomDiagonalStrichAngle:30,position:t,diagonalStrichOffset100er:{vertical:"top"===t?"-18%":"3%",horizontal:"top"===t?"10%":"-5%"},diagonalStrichOffset20er:{vertical:"top"===t?"-20%":"3.5%",horizontal:"top"===t?"5.5%":"-1.5%"},diagonalStrichAngle100er:35,diagonalStrichAngle20er:35})},r)})})})};var _=n(4738),F=n(2292);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n){var r;return(r=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==M(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===M(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W=(0,c.forwardRef)(function(e,t){var n=e.position,r=e.height,i=e.zShapeConfig,o=e.padding,a=e.onSwipe,s=e.y,l=e.mainOpacity,f=e.getBrightness,d=e.onLongPress,m=e.score,b=e.triggerBlendEffect,v=(e.isHistoryNavigationActive,e.onDoubleClick),y=(0,N.useUIStore)(function(e){return e.splitContainer}),x=y.isOpen,S=y.position,w=(0,N.useUIStore)(function(e){return e.isMenuOpen}),j=H((0,c.useState)(null),2),O=j[0],k=j[1],I=(0,_.b)(),E=I.isActive,P=I.getCurrentStep,C=H((0,c.useState)(0),2),A=C[0],T=C[1],L=c.useRef(0),G=c.useRef(!1),D=function(){var e=Date.now();e-L.current<300||(_.b.getState(),L.current,k(setTimeout(function(){G.current&&d(n)},400)),L.current=e,G.current=!0)},M=function(){O&&clearTimeout(O),G.current=!1};(0,c.useEffect)(function(){return function(){O&&clearTimeout(O)}},[O]),g({onSwipeLeft:function(){return a("left",n)},onSwipeRight:function(){return a("right",n)},onSwipeUp:function(){return a("up",n)},onSwipeDown:function(){return a("down",n)},element:n});var z=U(U(U(U(U(U({width:"100%",position:"absolute",left:0,right:0,overflow:"visible",height:"".concat(r,"px")},n,0),o,"env(safe-area-inset-top)"),"userSelect","none"),"WebkitUserSelect","none"),"WebkitTouchCallout","none"),"touchAction","none"),B=U(U({position:"absolute",width:"110%",left:"-1%"},"top"===n?"bottom":"top","".concat(1.5*i.innerSpacing,"px")),"height","calc(100% - ".concat(1.5*i.edgeSpacing+.8*i.innerSpacing,"px)")),W=function(e){var t=new Date().getTime(),r=t-A;if(r<300&&r>0){var i=P();if(E){if((null==i?void 0:i.id)===F.nI.GAME_INFO){null==v||v(n);return}e.preventDefault(),e.stopPropagation();return}null==v||v(n)}T(t)};return(0,p.jsxs)(u.CS.div,{style:K(K({},z),{},{transform:s.to(function(e){return x&&n===S?"translateY(".concat("top"===n?-100:100,"%)"):0===e?"none":"translateY(".concat("top"===n?-e:e,"px)")})}),"data-swipe-area":n,onMouseDown:D,onMouseUp:M,onTouchStart:function(e){D(),W(e)},onTouchEnd:M,onContextMenu:function(e){return e.preventDefault()},onDoubleClick:function(e){var t=P();if(E){if((null==t?void 0:t.id)===F.nI.GAME_INFO){null==v||v(n);return}e.preventDefault(),e.stopPropagation();return}null==v||v(n)},children:[(0,p.jsx)("div",{style:B,children:(0,p.jsx)(h,{className:"w-full h-full text-chalk-red",position:n,isReversed:"top"===n})}),(0,p.jsx)(u.CS.div,{style:K(K({},{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"white",pointerEvents:"none"}),{},{opacity:s.to(f)})}),(0,p.jsx)(u.CS.div,{className:"absolute inset-0 flex items-center justify-center",style:{opacity:l},children:(0,p.jsx)("span",{className:"text-gray-300 text-[9rem] opacity-50 select-none",style:{transform:"top"===n?"rotate(180deg)":"none"},children:m})}),(0,p.jsx)(R,{position:n,onBlendEffect:b,score:m,isInteractionDisabled:w})]})});function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}W.displayName="SplitContainer";let Z=function(e){var t,n=e.initialPosition,r=e.maxOffset,i=function(e){if(Array.isArray(e))return e}(t=(0,u.zh)(function(){return{y:n,mainOpacity:1,oppositeOpacity:1,config:{mass:1,tension:120,friction:26,clamp:!0,duration:250}}}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return J(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],a=i[1];return{y:o.y,mainOpacity:o.mainOpacity,oppositeOpacity:o.oppositeOpacity,animateSwipe:function(e){"boolean"==typeof e?a.start({y:e?r:n,mainOpacity:1,oppositeOpacity:1}):a.start({mainOpacity:0,oppositeOpacity:0,config:{duration:125},onRest:function(){a.start({mainOpacity:1,oppositeOpacity:1,config:{duration:125}})}})},getBrightness:function(e){return"number"!=typeof e||isNaN(e)||"number"!=typeof r||0===r?0:Math.max(0,Math.min(e/r*.45,.45))}}};var V=n(2322),Y=n(6602),$=n(4110),q=n(1324),Q=function(e,t){if(!(e<.3)){var n=document.querySelector(".matsch-button");if(n)for(var r=n.getBoundingClientRect(),i=(r.left+r.width/2)/window.innerWidth,o=(r.top+r.height/2)/window.innerHeight,a=10+(e-.3)*30,s=function(e,n,r,a){(0,q.A)({particleCount:r,angle:t?(e+180)%360:e,spread:n,origin:{x:i,y:o},colors:["#FF0000","#FFA500","#FFFF00","#00FF00","#0000FF","#800080"],scalar:a,gravity:t?-1:1,ticks:300})},l=0;l<360;l+=45)s(l,55,Math.floor(.3*a),1.2),s(l,25,Math.floor(.4*a),.8),s(l,10,Math.floor(.3*a),.4)}},X=n(6333),ee=n(132),et=n(8310),en=n(4165),er=n(8731),ei=function(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ea=function(){var e,t=function(e){if(Array.isArray(e))return e}(e=(0,c.useState)({scale:1,overlayScale:1,deviceType:"default",urlBarPosition:"bottom"}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,2)||function(e,t){if(e){if("string"==typeof e)return eo(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eo(e,t)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=t[0],r=t[1];return(0,c.useEffect)(function(){var e=function(){var e,t=window.innerHeight,n=window.innerWidth,r=((null==(e=window.visualViewport)?void 0:e.height)||t)<t&&window.scrollY<10?"top":"bottom";return ei()&&375===n?t<=667?{scale:1,overlayScale:.78,deviceType:"iphone_se",urlBarPosition:r}:t<=812?{scale:1,overlayScale:.95,deviceType:"iphone_mini",urlBarPosition:r}:{scale:1,overlayScale:1,deviceType:"default",urlBarPosition:r}:{scale:1,overlayScale:1,deviceType:"default",urlBarPosition:r}};r(e());var t=function(){r(e())};return window.addEventListener("resize",t),window.addEventListener("scroll",t),window.addEventListener("orientationchange",t),function(){window.removeEventListener("resize",t),window.removeEventListener("scroll",t),window.removeEventListener("orientationchange",t)}},[]),n};function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var el=function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=(0,c.useState)(1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return es(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return es(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1];return(0,c.useLayoutEffect)(function(){var t=function(){if(e.current){var t=window.innerHeight,n=e.current.offsetHeight;if(0!==n){var r=t-8;n>r?i(r/n):i(1)}}};t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t);var n=setInterval(t,500);return function(){window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t),clearInterval(n)}},[e]),r},ec=n(7044),eu=n(4536);function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==ef(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ef(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ef(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ep(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||eh(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eh(e,t){if(e){if("string"==typeof e)return eg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eg(e,t)}}function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}let eb=function(e){var t,n,r=e.isOpen,i=e.onClose,o=e.onCancel,a=e.initialValue,s=void 0===a?0:a,l=e.clickedPosition;j.useGameStore.getState();var f=(0,j.useGameStore)(),d=f.finalizeRound,m=f.currentHistoryIndex,h=f.roundHistory,g=f.showHistoryWarning,b=f.jumpToLatest,v=f.validateHistoryAction,y=(f.activeGameId,f.farbeSettings,f.scoreSettings,f.strokeSettings,f.setFarbe);f.currentPlayer,f.striche,f.scores;var x=(0,N.useUIStore)(),S=x.calculator,w=x.setCalculatorFlipped,O=x.settings.pictogramConfig,k=x.isReadOnlyMode,I=x.setGlobalClickDisabled,E=(0,_.b)();(E.isActive,E.getCurrentStep)(),(0,V.Q5)().currentGroup,(0,Y.yu)().currentTournamentInstance,(0,eu.useJassStore)().currentSession;var P=(0,c.useCallback)(function(){var e=j.useGameStore.getState(),t=e.activeGameId,n=e.farbeSettings,r=e.scoreSettings,i=e.strokeSettings,o=Y.yu.getState().currentTournamentInstance,a=V.Q5.getState().currentGroup,s=N.useUIStore.getState();return t&&n&&r&&i?{farbeSettings:n,scoreSettings:r,strokeSettings:i,source:"gameStore-active"}:null!=o&&o.settings?(console.log("[Calculator] PRIORIT\xc4T 2: Turnier-Kontext. Verwende TURNIER-Settings."),{farbeSettings:o.settings.farbeSettings||ee.FT,scoreSettings:o.settings.scoreSettings||et.$d,strokeSettings:o.settings.strokeSettings||ec.zh,source:"tournament"}):a?(console.log("[Calculator] PRIORIT\xc4T 3: Gruppen-Kontext. Verwende GRUPPEN-Settings."),{farbeSettings:a.farbeSettings||ee.FT,scoreSettings:a.scoreSettings||et.$d,strokeSettings:a.strokeSettings||ec.zh,source:"group"}):(console.log("[Calculator] PRIORIT\xc4T 4: Kein Online-Kontext. Verwende UI-STORE-Settings (Gastmodus)."),{farbeSettings:s.farbeSettings,scoreSettings:s.scoreSettings,strokeSettings:s.strokeSettings,source:"uiStore-guest"})},[]),C=ep((0,c.useState)(null),2),A=C[0],T=C[1],L=ep((0,c.useState)(null),2),G=L[0],D=L[1],R=ep((0,c.useState)(null),2),F=R[0],M=R[1];(0,c.useEffect)(function(){if(r){var e=P();T(e.farbeSettings),D(e.scoreSettings),M(e.strokeSettings)}},[r,P]);var z=A||ee.FT;G||et.$d,F||ec.zh;var K=ep((0,c.useState)((null==s?void 0:s.toString())||"0"),2),U=K[0],H=K[1],B=ep((0,c.useState)("0"),2),W=B[0],J=B[1],Z=ep((0,c.useState)("0"),2),q=Z[0],ei=Z[1],eo=ep((0,c.useState)(1),2),es=eo[0],ef=eo[1],ed=ep((0,c.useState)(null),2),eb=ed[0],ev=ed[1],ey=ep((0,c.useState)(new Set),2),ex=(ey[0],ey[1]),eS=ep((0,c.useState)(!1),2),ew=eS[0],ej=eS[1],eN=ep((0,c.useState)(!1),2),eO=eN[0],ek=eN[1],eI=ep((0,c.useState)(0),2),eE=eI[0],eP=eI[1],eC=ep((0,c.useState)(null),2),eA=eC[0],eT=eC[1],eL=ep((0,c.useState)(0),2),eG=eL[0],eD=eL[1],eR=ep((0,c.useState)(!1),2),e_=eR[0],eF=eR[1],eM=ep((0,c.useState)(!1),2),ez=eM[0],eK=eM[1],eU=ea(),eH=(eU.scale,eU.overlayScale),eB=c.useRef(null),eW=el(eB),eJ=(0,u.zh)({opacity:+!!r,transform:"scale(".concat(r?eH*eW:.95,") rotate(").concat(S.isFlipped?"180deg":"0deg",") translateY(").concat(-3,"vh)"),config:{mass:1,tension:300,friction:20}});(0,c.useEffect)(function(){r&&(w(!1),eK(!1))},[r,w,s]),(0,c.useEffect)(function(){r&&l&&w("top"===l)},[r,l,w]),(0,c.useEffect)(function(){eF(!0)},[]);var eZ=function(e,t){if("0"===e)J((et.sz*t).toString()),ei("0");else if(e===et.qC.toString())J("0"),ei((et.qC*t).toString());else{var n=parseInt(e,10);J((Math.max(et.sz-n,0)*t).toString()),ei((n*t).toString())}};(0,c.useEffect)(function(){eZ(U,es)},[U,es]);var eV=function(){return ez&&null!==eb},eY=function(e){if(!ew){var t=Date.now();t-eG<100||(eD(t),H(function(t){if("0"===t)return 0===e?"0":e.toString();var n=t+e.toString();return parseInt(n,10)>et.sz?t:n}),eK(!0),ex(function(t){return new Set(t).add(e)}),setTimeout(function(){ex(function(t){var n=new Set(t);return n.delete(e),n})},100))}},e$=function(e,t){ev(e),ef(t),eZ(U,t)},eq=(0,c.useCallback)(function(e){if(e){var t,n;e.preventDefault(),e.stopPropagation(),null==(t=e.nativeEvent)||null==(n=t.stopImmediatePropagation)||n.call(t)}var r=j.useGameStore.getState().activeGameId;if(k){console.log("[Calculator] Abbruch: ReadOnly-Modus aktiv f\xfcr Spiel ".concat(r||"ID unbekannt",".")),N.useUIStore.getState().showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine Punkte geschrieben werden."});return}if(eV()&&eb){if(r&&!r){console.error("[Calculator] FEHLER: currentActiveGameId ist nicht verf\xfcgbar beim Versuch, die Runde abzuschliessen!"),N.useUIStore.getState().showNotification({type:"error",message:"Spielfehler: Spiel-ID nicht gefunden. Bitte neu laden."});return}var o=parseInt(q,10),a=parseInt(W,10),s={top:"top"===l?o:a,bottom:"bottom"===l?o:a},c=void 0;if(ew){var u=j.useGameStore.getState().currentPlayer,f=l===(1===u||3===u?"bottom":"top")?"matsch":"kontermatsch";c={team:l,type:f}}if(console.log("⚡️ Globale Klicksperre f\xfcr 1.5s aktiviert."),I(!0,1500),!v())return void setTimeout(function(){g(X.W,function(){y(eb),d(s,c),i()},function(){return b()})},100);try{y(eb),d(s,c)}catch(e){console.error("[Calculator] Fehler beim Aufruf von finalizeRound:",e),N.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Verarbeiten der Runde."})}i()}},[eV,eb,q,W,l,ew,m,h.length,g,b,d,i,v,k,y,I]),eQ=function(){w(!S.isFlipped)},eX=function(e){null==e||e.stopPropagation(),H("257"),J("0"),ei((257*es).toString()),ej(!0),eK(!0),Q(eE,S.isFlipped)},e0=(S.isFlipped,[1,2,3,4,5,6,7,8,9]),e1=ee.u4.map(function(e){var t;return{color:e.name,multiplier:null!=(t=z.values[e.id])?t:0}}).filter(function(e){return e.multiplier>0}).sort(function(e,t){return e.multiplier-t.multiplier}),e2=e1.length%2==1?[{color:"empty",multiplier:0}].concat(function(e){if(Array.isArray(e))return eg(e)}(e1)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e1)||eh(e1)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e1,e5=function(e,t,n){var r,i,o,a=ee.u4.find(function(t){return t.name===e});return t?"bg-orange-500":"FR"===z.cardStyle?(null==a||null==(i=a.frStyle)?void 0:i.backgroundColor)||"bg-gray-600":"emoji"===n?(null==a||null==(o=a.emojiStyle)?void 0:o.backgroundColor)||"bg-gray-600":(null==a||null==(r=a.standardStyle)?void 0:r.backgroundColor)||"bg-gray-600"},e4=function(e){return O.isEnabled||"une"!==e.toLowerCase()?"FR"===z.cardStyle&&!O.isEnabled&&({Eicheln:"Schaufel",Rosen:"Kreuz",Schellen:"Herz",Schilten:"Ecke"})[e]||e:"Unde"},e3=function(e){var t=e.color,n=e.multiplier,r=e.handleColorClick,i=e.selectedColor,o=e.pictogramConfig,a=e.isClient,s=e.getButtonStyle,l=e.getPictogram,c=e.cardStyle,u=e.getDisplayName,f=(0,er.Z)(function(){return r(t,n)}),d=f.handlers,m=f.buttonClasses,h="mis\xe8re"===t.toLowerCase()&&i===t;return(0,p.jsx)("button",em(em({},d),{},{className:"p-1 rounded text-white select-none text-xs h-12 flex items-center justify-center ".concat(i===t?"active":""," ").concat(s(t,i===t,o.mode)," ").concat(m),"aria-label":"".concat(t),children:a&&o.isEnabled?"emoji"===o.mode?(0,p.jsx)("span",{className:"text-2xl",children:l(t,"emoji",c)}):(0,p.jsx)("img",{src:l(t,"svg",c),alt:t,className:"w-10 h-10 object-contain ".concat(h?"invert brightness-0":""),onError:function(e){e.currentTarget.style.display="none";var n=e.currentTarget.parentElement;n&&(n.textContent=u(t))}}):u(t)}),t)},e6=function(e){var t=e.num,n=e.handleNumberClick,r=(0,er.Z)(function(){return n(t)}),i=r.handlers,o=r.buttonClasses;return(0,p.jsx)("button",em(em({},i),{},{className:"bg-gray-600 text-white p-4 rounded select-none text-2xl ".concat(o),children:t}),t)},e8=function(e){return(0,p.jsx)(e6,{num:e,handleNumberClick:eY},e)},e7=(0,er.Z)(eX);e7.isPressedDown,e7.handlers,e7.buttonClasses;var e9=(0,er.Z)(function(){H("0"),J("0"),ef(1),ev(null),ej(!1),eK(!1)}),te=e9.handlers,tt=e9.buttonClasses,tn=(0,er.Z)(function(e){return eq(e)}),tr=tn.handlers,ti=tn.buttonClasses;return(0,c.useEffect)(function(){var e=_.b.getState();e.getCurrentStep(),r&&e.isActive&&e.tutorialUIBlocking.calculatorClose},[r,o]),(0,c.useEffect)(function(){r&&document.dispatchEvent(new Event("calculatorOpen"))},[r]),(0,p.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300 prevent-interactions pb-2 ".concat(r?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:i,onContextMenu:function(e){return e.preventDefault()},children:(0,p.jsxs)(u.CS.div,{ref:eB,style:eJ,className:"flex flex-col items-center w-11/12 max-w-md",onClick:function(e){return e.stopPropagation()},children:[(0,p.jsx)("button",{onClick:function(e){e.stopPropagation(),eQ()},className:"text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center rounded-full\n            mb-[-10px] z-10\n            ".concat(S.isFlipped?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,p.jsx)($.cO3,{className:"w-8 h-8"})}),(0,p.jsxs)("div",{className:"relative bg-gray-800 p-6 rounded-lg transition-all duration-700 flex flex-col items-center w-full",onClick:function(e){return e.stopPropagation()},children:[(0,p.jsx)("button",{onClick:function(e){e.stopPropagation(),i()},className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white transition-colors z-10",children:(0,p.jsx)($.yGN,{size:24})}),(0,p.jsx)("h2",{className:"text-white text-xl mb-4 text-center select-none",children:"Runde schreiben"}),(0,p.jsxs)("div",{className:"flex flex-col w-full space-y-4",children:[(0,p.jsx)("input",{type:"text",value:U,readOnly:!0,className:"w-full bg-gray-700 text-white text-6xl p-4 rounded select-none text-center"}),(0,p.jsxs)("div",{className:"flex justify-between items-stretch w-full space-x-2 h-10",children:[(0,p.jsxs)("div",{className:"w-1/3 bg-gray-700 text-white p-1 rounded select-none flex items-center justify-end relative",children:[(0,p.jsx)("div",{className:"text-xs absolute top-0 left-1",children:"Gegner:"}),(0,p.jsx)("div",{className:"text-xl pr-1",children:W})]}),(0,p.jsx)("button",{onClick:eX,onMouseDown:function(){ek(!0),eP(0),eT(setInterval(function(){eP(function(e){return Math.min(e+1,20)})},100))},onMouseUp:function(){ek(!1),eA&&clearInterval(eA),eX()},onMouseLeave:function(){ek(!1),eA&&clearInterval(eA)},onTouchStart:function(){ek(!0),eP(0),eT(setInterval(function(){eP(function(e){return Math.min(e+1,20)})},100))},onTouchEnd:function(){ek(!1),eA&&clearInterval(eA),eX()},className:"w-1/3 p-1 rounded select-none transition-all duration-100 text-lg flex items-center justify-center matsch-button ".concat(ew?"bg-orange-500 text-white":eO?"bg-gray-600 text-white scale-95 opacity-80":"bg-gray-700 text-white hover:bg-orange-500 scale-100 opacity-100"),disabled:ew,children:"Matsch"}),(0,p.jsxs)("div",{className:"w-1/3 bg-gray-700 text-white p-1 rounded select-none flex items-center justify-end relative",children:[(0,p.jsx)("div",{className:"text-xs absolute top-0 left-1",children:"Total:"}),(0,p.jsx)("div",{className:"text-xl pr-1",children:q})]})]})]}),(0,p.jsx)("div",{className:"mt-4"}),(0,p.jsx)("div",{className:(t=e1.length,n="grid grid-cols-5 gap-2 mb-4 w-full group ".concat(eb?"has-active":""),t<=4?n.replace("grid-cols-5","grid-cols-4"):t<=6?n.replace("grid-cols-5","grid-cols-3"):t<=8?n.replace("grid-cols-5","grid-cols-4"):n),children:e2.map(function(e){var t=e.color,n=e.multiplier;return"empty"===t?(0,p.jsx)("div",{className:"p-1 rounded text-white select-none text-xs h-12 flex items-center justify-center bg-gray-700"},"empty-placeholder"):(0,p.jsx)(e3,{color:t,multiplier:n,handleColorClick:e$,selectedColor:eb||"",pictogramConfig:O,isClient:e_,getButtonStyle:e5,getPictogram:en.j,cardStyle:z.cardStyle,getDisplayName:e4},t)})}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-3 w-full",children:[e0.map(function(e){return e8(e)}),(0,p.jsx)("button",em(em({},te),{},{className:"bg-red-600 text-white p-4 rounded select-none text-2xl ".concat(tt),children:"C"})),e8(0),(0,p.jsx)("button",em(em({},tr),{},{disabled:!eV(),className:"bg-green-600 text-white p-4 rounded select-none text-2xl ".concat(ti,"\n                ").concat(eV()?"":"opacity-50 cursor-not-allowed"),children:"OK"}))]})]})]})})};var ev=n(2894);function ey(e){return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ex(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ex(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==ey(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ey(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ey(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ex(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ew=function(e){var t=e.currentPlayer,n=e.startingPlayer,r=(e.currentRound,e.opacity,e.isOpen),i=e.isGameStarted,o=e.startFadeIn,a=(0,j.useGameStore)().playerNames,s=(0,u.zh)({from:{opacity:0},to:{opacity:+!r},config:{duration:150},delay:o&&!r?350:0,immediate:r});if(r)return null;var l=function(e){var r=e?[1,3]:[2,4],o=r[0],s=r[1],l=a[o]||"Spieler ".concat(o),c=a[s]||"Spieler ".concat(s),u=i?t:n;return(0,p.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,p.jsx)("span",{className:u===o?"text-white font-bold text-xl":"text-gray-500",children:l}),(0,p.jsx)("span",{className:"text-gray-500",children:"+"}),(0,p.jsx)("span",{className:u===s?"text-white font-bold text-xl":"text-gray-500",children:c})]})};return(0,p.jsxs)(u.CS.div,{className:"absolute inset-x-0 flex flex-col items-center justify-center pointer-events-none",style:eS(eS({},s),{},{top:"calc(50% - 4rem)",height:"3.5rem"}),children:[(0,p.jsx)("div",{className:"absolute w-full flex justify-center top-[4.5rem]",children:i?l(!0):"START"}),(0,p.jsx)("div",{className:"absolute w-full flex justify-center bottom-0",children:(0,p.jsx)("div",{className:"rotate-180",children:i?l(!1):"START"})})]})};var ej=n(4415),eN=n(1302),eO=n(5435),ek=n(3355),eI=n(7212);let eE=function(e){var t=e.onConfirm,n=e.onDismiss,r=e.show,i=e.swipePosition,o=void 0===i?"bottom":i;return(0,p.jsx)(eI.N,{children:r&&(0,p.jsxs)(ek.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-[9999] p-4 pointer-events-auto\n            ".concat("top"===o?"rotate-180":""),children:[(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:n}),(0,p.jsxs)(ek.P.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-xs w-full relative text-white z-10\n              ".concat("top"===o?"rotate-180":""),children:[(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4",children:[(0,p.jsx)(eN.BS8,{className:"w-12 h-12 text-yellow-600 mb-2"}),(0,p.jsx)("p",{className:"text-center mb-6",children:"M\xf6chten Sie wirklich das Spiel zur\xfccksetzen? Alle Daten werden gel\xf6scht."})]}),(0,p.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,p.jsx)("button",{onClick:t,className:"flex-1 bg-yellow-600 text-white px-6 py-2 rounded-full hover:bg-yellow-700 transition-colors text-lg font-semibold",children:"Ja"}),(0,p.jsx)("button",{onClick:n,className:"flex-1 bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-700 transition-colors text-lg font-semibold",children:"Abbrechen"})]})]})]})})};var eP=n(8847),eC=n.n(eP),eA=n(415),eT=n(7040),eL=n(8506),eG=n(1163);function eD(e){return(eD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e_(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eF(Object(n),!0).forEach(function(t){ez(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ez(e,t,n){var r;return(r=function(e,t){if("object"!==eD(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eD(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===eD(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eK=[0,1,2,3,4,5,6,7,8],eU={sieg:{min:0,max:(null==(r=et.C3.find(function(e){return"sieg"===e.id}))?void 0:r.maxValue)||1e4,default:(null==(i=et.C3.find(function(e){return"sieg"===e.id}))?void 0:i.defaultValue)||2e3},berg:{min:0,max:(null==(o=et.C3.find(function(e){return"berg"===e.id}))?void 0:o.maxValue)||5e3,default:(null==(a=et.C3.find(function(e){return"berg"===e.id}))?void 0:a.defaultValue)||2e3},schneider:{min:0,max:(null==(s=et.C3.find(function(e){return"schneider"===e.id}))?void 0:s.maxValue)||5e3,default:(null==(l=et.C3.find(function(e){return"schneider"===e.id}))?void 0:l.defaultValue)||1e3}},eH=function(e){var t=e.multiplier,n=e.onMultiplierClick;return(0,p.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n      ".concat(0===t?"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50":"bg-orange-500 text-white hover:bg-orange-600 active:scale-95 active:opacity-80"),children:0===t?"-":"".concat(t,"x")})},eB=function(e){var t=e.isEnabled,n=e.mode,r=e.onClick,i=(0,er.Z)(r),o=i.handlers,a=i.buttonClasses;return(0,p.jsx)("button",eM(eM({},o),{},{className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n        ".concat(!t?"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50":"bg-green-500 text-white hover:bg-green-600"," ").concat(a),children:t?"svg"===n?"Standard":"Emojis":"Nein"}))},eW=function(e){var t=e.style,n=e.isActive,r=e.onClick,i=(0,er.Z)(r),o=i.handlers,a=i.buttonClasses;return(0,p.jsx)("button",eM(eM({},o),{},{className:"px-3 py-1 rounded ".concat(n?"bg-green-500 text-white":"bg-gray-700 text-gray-300"," ").concat(a),children:t}))},eJ=function(e){var t=e.value,n=e.isActive,r=e.onClick,i=(0,er.Z)(r),o=i.handlers,a=i.buttonClasses;return(0,p.jsx)("button",eM(eM({},o),{},{className:"px-4 py-2 rounded-lg text-xl font-bold transition-all duration-150 ".concat(n?"bg-green-500 text-white hover:bg-green-600":"bg-gray-700 text-gray-300 hover:bg-gray-600"," ").concat(a),children:t}))},eZ=eC()(function(){return Promise.resolve(function(){var e,t,n,r=(0,eT.H)("settings").preventClose,i=(0,N.useUIStore)(function(e){return e.isSettingsOpen}),o=(0,N.useUIStore)(function(e){return e.closeSettings}),a=(0,N.useUIStore)(function(e){return e.settings}),s=(0,N.useUIStore)(function(e){return e.farbeSettings}),l=(0,N.useUIStore)(function(e){return e.scoreSettings}),f=(0,N.useUIStore)(function(e){return e.strokeSettings}),d=(0,N.useUIStore)(function(e){return e.updateFarbeSettings}),m=(0,N.useUIStore)(function(e){return e.updateScoreSettings}),h=(0,N.useUIStore)(function(e){return e.cyclePictogramMode}),g=(0,N.useUIStore)(function(e){return e.setCardStyle}),b=(0,N.useUIStore)(function(e){return e.updateStrokeSettings});(0,N.useUIStore)(function(e){return e.tutorialBlockedUI}),(0,N.useUIStore)(function(e){return e.openSettings});var v=(0,N.useUIStore)(function(e){return e.showNotification}),y=(0,N.useUIStore)(function(e){return e.setSettingsTab}),x=eR((0,c.useState)(s.values),2),S=x[0],w=x[1],j=eR((0,c.useState)(l.values),2),O=j[0],k=j[1],I=eR((0,c.useState)(l.enabled),2),E=I[0],P=I[1],C=eR((0,c.useState)(f),2),A=C[0],T=C[1],L=eR((0,c.useState)({}),2),G=L[0],D=L[1],R=eR((0,c.useState)(!1),2),M=(R[0],R[1]),z=(0,c.useRef)(null),K=(0,_.b)(function(e){return e.getCurrentStep()}),U=null==K?void 0:K.id.startsWith("SETTINGS_"),H=r||U,B=(0,u.zh)({opacity:+!!a.isOpen,transform:"scale(".concat(a.isOpen?1:.95,")"),config:{mass:1,tension:300,friction:20}}),W=function(e){H||!z.current||z.current.contains(e.target)||J()};(0,c.useEffect)(function(){if(a.isOpen)return document.addEventListener("mousedown",W),function(){document.removeEventListener("mousedown",W)}},[a.isOpen,H]),(0,c.useEffect)(function(){k(l.values),P(l.enabled)},[l]),(0,c.useEffect)(function(){w(s.values)},[s]),(0,c.useEffect)(function(){i&&(w(s.values),k(l.values),P(l.enabled),T(f),M(!1))},[i,s,l,f]),(0,c.useEffect)(function(){if(i){var e=JSON.stringify(S)!==JSON.stringify(s.values),t=JSON.stringify(O)!==JSON.stringify(l.values)||JSON.stringify(E)!==JSON.stringify(l.enabled),n=JSON.stringify(A)!==JSON.stringify(f);M(e||t||n)}},[S,O,E,A,s,l,f,i]);var J=function(){var e=JSON.stringify(S)!==JSON.stringify(s.values),t=JSON.stringify(O)!==JSON.stringify(l.values)||JSON.stringify(E)!==JSON.stringify(l.enabled),n=JSON.stringify(A)!==JSON.stringify(f);(e||t||n)&&(d({values:S}),m({values:O,enabled:E}),b(A),v({type:"success",message:"Einstellungen gespeichert."})),o()},Z=function(e){w(function(t){var n=t[e],r=(eK.indexOf(n)+1)%eK.length;return eM(eM({},t),{},ez({},e,eK[r]))})},V=function(e,t){if(D(function(n){return eM(eM({},n),{},ez({},e,t))}),!(!t||isNaN(parseInt(t)))){var n=parseInt(t);"sieg"===e&&n>=100?Y(e,n):"sieg"!==e&&n>0&&Y(e,n)}},Y=function(e,t){k(function(n){var r=eM({},n),i=parseInt(t.toString().replace(/^0+/,""))||0;if("sieg"===e){var o=Math.max(1e3,Math.min(i,eU[e].max));r.sieg=o;var a=Math.floor(o/2);r.berg=a,r.schneider=a}else if("berg"===e){var s=Math.min(i,eU.berg.max);r.berg=s,r.schneider=s,r.sieg=Math.max(1e3,2*s)}else{var l=Math.floor(n.sieg/2);r[e]=Math.min(i,l)}return r})},q=function(e){P(function(t){return eM(eM({},t),{},ez({},e,!t[e]))})};return(0,p.jsx)(eI.N,{children:a.isOpen&&(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,p.jsxs)(u.CS.div,{ref:z,style:B,className:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl shadow-2xl p-5 max-w-lg w-full max-h-[90vh] flex flex-col border border-gray-700/50 ".concat(H?"cursor-not-allowed":""),children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,p.jsx)("h2",{className:"text-2xl font-bold text-white",children:function(){switch(a.activeTab){case"farben":return"Jass Einstellungen";case"scores":return"Punkte Einstellungen";case"strokes":return"Striche Einstellungen";default:return""}}()}),(0,p.jsx)("button",{onClick:J,disabled:H&&(null==K?void 0:K.id)!==F.nI.SETTINGS_STROKES,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full ".concat(H&&(null==K?void 0:K.id)!==F.nI.SETTINGS_STROKES?"opacity-50 cursor-not-allowed":"hover:bg-gray-700"),"aria-label":"Einstellungen schlie\xdfen",children:(0,p.jsx)($.yGN,{size:24})})]}),(0,p.jsxs)("div",{className:"flex-grow overflow-y-auto pr-2 -mr-2 custom-scrollbar space-y-5",children:[(0,p.jsxs)("div",{className:"flex justify-center space-x-2 bg-gray-700/50 p-1 rounded-lg mb-4 flex-shrink-0 sticky top-0 z-10 backdrop-blur-sm",children:[(0,p.jsx)("button",{onClick:function(){return y("farben")},className:"px-4 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("farben"===a.activeTab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-600"),children:"Farben"}),(0,p.jsx)("button",{onClick:function(){return y("scores")},className:"px-4 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("scores"===a.activeTab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-600"),children:"Punkte"}),(0,p.jsx)("button",{onClick:function(){return y("strokes")},className:"px-4 py-1.5 rounded-md text-sm font-medium transition-colors ".concat("strokes"===a.activeTab?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-600"),children:"Striche"})]}),"farben"===a.activeTab&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded-lg",children:[(0,p.jsx)("span",{className:"text-white text-lg",children:"Jasskarten"}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(eW,{style:"DE",isActive:"DE"===a.cardStyle,onClick:function(){return g("DE")}}),(0,p.jsx)(eW,{style:"FR",isActive:"FR"===a.cardStyle,onClick:function(){return g("FR")}})]})]})}),(0,p.jsxs)("div",{className:"space-y-4 max-h-[40vh] overflow-y-auto pr-2",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded-lg",children:[(0,p.jsx)("span",{className:"text-white text-lg",children:"Piktogramme"}),(0,p.jsx)(eB,{isEnabled:a.pictogramConfig.isEnabled,mode:a.pictogramConfig.mode,onClick:h})]}),(0,p.jsx)("div",{className:"space-y-4",children:ee.u4.map(function(e){var t,n,r,i=(0,eL.Sn)(e.id),o=null!=(t=null==(n=eA.S[i])?void 0:n[a.cardStyle])?t:i;return(0,p.jsxs)("div",{className:"flex items-center bg-gray-700/50 p-3 rounded-lg",children:[(0,p.jsx)("span",{className:"text-white text-lg w-20 flex-shrink-0",children:o}),(0,p.jsx)("div",{className:"flex-1 flex justify-center items-center",children:a.pictogramConfig.isEnabled&&(0,p.jsx)(eG.h,{farbe:e.name,mode:null!=(r=a.pictogramConfig.mode)?r:"svg",cardStyle:a.cardStyle})}),(0,p.jsx)(eH,{multiplier:S[e.id],onMultiplierClick:function(){return Z(e.id)}})]},e.id)})})]})]}),"scores"===a.activeTab&&(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-3 rounded-lg",children:[(0,p.jsx)("span",{className:"text-white text-lg",children:"Sieg-Punkte"}),(0,p.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:null!=(e=G.sieg)?e:O.sieg,onChange:function(e){V("sieg",e.target.value.replace(/[^0-9]/g,""))},onBlur:function(){Y("sieg",parseInt(G.sieg||"0")),D(function(e){return eM(eM({},e),{},{sieg:void 0})})},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)},className:"w-24 px-3 py-2 bg-gray-600 text-white rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]}),(0,p.jsxs)("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-600",children:[(0,p.jsx)("span",{className:"text-white text-lg",children:"Berg aktiviert"}),(0,p.jsx)("button",{onClick:function(){return q("berg")},className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n              ".concat(E.berg?"bg-green-500 text-white hover:bg-green-600":"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50"),children:E.berg?"Ja":"Nein"})]}),E.berg&&(0,p.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,p.jsx)("span",{className:"text-white text-lg",children:"Berg-Punkte"}),(0,p.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:null!=(t=G.berg)?t:O.berg,onChange:function(e){V("berg",e.target.value.replace(/[^0-9]/g,""))},onBlur:function(){Y("berg",parseInt(G.berg||"0")),D(function(e){return eM(eM({},e),{},{berg:void 0})})},className:"w-24 px-3 py-2 bg-gray-600 text-white rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]})]}),(0,p.jsxs)("div",{className:"bg-gray-700/50 rounded-lg overflow-hidden",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-600",children:[(0,p.jsx)("span",{className:"text-white text-lg",children:"Schneider aktiviert"}),(0,p.jsx)("button",{onClick:function(){return q("schneider")},className:"px-4 py-2 rounded-lg text-lg font-bold transition-all duration-150\n              ".concat(E.schneider?"bg-green-500 text-white hover:bg-green-600":"bg-gray-600/50 text-gray-400 hover:bg-gray-700/50"),children:E.schneider?"Ja":"Nein"})]}),E.schneider&&(0,p.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,p.jsx)("span",{className:"text-white text-lg",children:"Schneider-Punkte"}),(0,p.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:null!=(n=G.schneider)?n:O.schneider,onChange:function(e){V("schneider",e.target.value.replace(/[^0-9]/g,""))},onBlur:function(){Y("schneider",parseInt(G.schneider||"0")),D(function(e){return eM(eM({},e),{},{schneider:void 0})})},className:"w-24 px-3 py-2 bg-gray-600 text-white rounded-lg text-right focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]})]})]}),"strokes"===a.activeTab&&(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-4 rounded-lg min-h-[4rem]",children:[(0,p.jsx)("span",{className:"text-lg text-white",children:"Schneider-Striche"}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)(eJ,{value:1,isActive:1===A.schneider,onClick:function(){return T(function(e){return eM(eM({},e),{},{schneider:1})})}}),(0,p.jsx)(eJ,{value:2,isActive:2===A.schneider,onClick:function(){return T(function(e){return eM(eM({},e),{},{schneider:2})})}})]})]}),(0,p.jsxs)("div",{className:"flex items-center justify-between bg-gray-700/50 p-4 rounded-lg min-h-[4rem]",children:[(0,p.jsx)("span",{className:"text-lg text-white",children:"Kontermatsch-Striche"}),(0,p.jsxs)("div",{className:"flex gap-3",children:[(0,p.jsx)(eJ,{value:1,isActive:1===A.kontermatsch,onClick:function(){return T(function(e){return eM(eM({},e),{},{kontermatsch:1})})}}),(0,p.jsx)(eJ,{value:2,isActive:2===A.kontermatsch,onClick:function(){return T(function(e){return eM(eM({},e),{},{kontermatsch:2})})}})]})]})]})})]}),(0,p.jsxs)("div",{className:"mt-5 pt-4 border-t border-gray-700/50 flex justify-between items-center flex-shrink-0",children:[(0,p.jsx)("button",{onClick:function(){w(ee.FT.values),k(et.$d.values),P(et.$d.enabled),T(ec.zh),v({type:"info",message:"Einstellungen auf Standard zur\xfcckgesetzt."})},disabled:H,className:"text-gray-400 hover:text-white transition-colors p-2 rounded-full ".concat(H?"opacity-50 cursor-not-allowed":"hover:bg-gray-700"),"aria-label":"Einstellungen zur\xfccksetzen",title:"Auf Standard zur\xfccksetzen",children:(0,p.jsx)($.cO3,{size:20})}),(0,p.jsx)(eV,{onClick:J})]})]})})})})},{ssr:!1});(0,c.memo)(function(e){var t=e.direction,n=e.onClick,r=(0,c.useRef)(null),i=(0,er.Z)(n),o=i.handlers,a=i.buttonClasses,s="left"===t?$.irw:$.fOo,l=(0,_.b)(function(e){return e.getCurrentStep()}),u="right"===t?"settings-navigation-next-button":"settings-navigation-prev-button",f=(null==l?void 0:l.id)===F.nI.SETTINGS_NAVIGATE_STROKES&&"left"===t||(null==l?void 0:l.id)===F.nI.SETTINGS_NAVIGATE&&"left"===t;return(0,p.jsx)("button",eM(eM({},o),{},{ref:r,id:u,"data-testid":u,disabled:f,className:"p-3 text-white transition-colors\n        bg-gray-700 rounded-lg hover:bg-gray-600 ".concat(a,"\n        ").concat(f?"opacity-50 cursor-not-allowed":""),children:(0,p.jsx)(s,{size:32})}))}).displayName="NavigationButton";var eV=(0,c.memo)(function(e){var t=e.onClick,n=(0,er.Z)(t),r=n.handlers,i=n.buttonClasses,o=(0,eT.H)("settings").preventClose,a=(0,_.b)(function(e){return e.getCurrentStep()}),s=null==a?void 0:a.id.startsWith("SETTINGS_"),l=o||s;return(0,p.jsx)("button",eM(eM({},r),{},{disabled:l&&(null==a?void 0:a.id)!==F.nI.SETTINGS_STROKES,className:"px-6 py-2 rounded-lg text-lg font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transition-all duration-150 shadow-md ".concat(i," ").concat(l&&(null==a?void 0:a.id)!==F.nI.SETTINGS_STROKES?"opacity-50 cursor-not-allowed":""),children:"Speichern"}))}),eY=n(7078),e$=n(950),eq=n(3558),eQ=n(7200);function eX(e){return(eX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e0(e){return function(e){if(Array.isArray(e))return e8(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||e6(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e1(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==eX(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eX(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eX(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e5(){e5=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(E([])));S&&S!==n&&r.call(S,a)&&(y=S);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==eX(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(eX(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function e4(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function e3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||e6(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e6(e,t){if(e){if("string"==typeof e)return e8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e8(e,t)}}function e8(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}eC()(function(){return Promise.resolve().then(n.bind(n,4173))},{loading:function(){return null},ssr:!1});let e7=function(e){var t,n,r=e.isOpen,i=e.onClose,o=e.swipePosition,a=(0,N.useUIStore)(),s=a.openResultatKreidetafel,l=a.openSettings,u=a.isReadOnlyMode,d=e3((0,c.useState)(null),2),m=d[0],h=d[1],g=e3((0,c.useState)(!1),2),b=g[0],v=g[1],y=e3((0,c.useState)(!1),2),x=y[0],S=y[1],w=(0,_.b)(function(e){return e.getCurrentStep()}),O=(0,_.b)().isCategoryCompleted,k=(0,e$.useAuthStore)(),I=(0,f.useRouter)();k.isAuthenticated,(0,eu.useJassStore)(function(e){return e.jassSessionId}),j.useGameStore.getState().activeGameId;var E=(0,Y.yu)(function(e){return e.userActiveTournamentId}),P={hidden:{opacity:0,y:0},visible:{opacity:1,y:0}},C=function(e){h(e),setTimeout(function(){return h(null)},150)},A=(0,c.useCallback)(function(){C("home");var e="/auth/login";"authenticated"===k.status?E?(e="/view/tournament/".concat(E),console.log("[MenuOverlay] Active tournament detected via tournamentStore. Navigating to: ".concat(e))):(e="/start",console.log("[MenuOverlay] No active tournament in tournamentStore. Navigating to: ".concat(e))):console.log("[MenuOverlay] User not authenticated. Navigating to: ".concat(e)),(0,eQ.p)(I,e),setTimeout(function(){i()},150)},[I,i,k,E]),T=function(){if(C("trash"),u)return void N.useUIStore.getState().showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine Partien abgebrochen werden."});var e,t=j.useGameStore.getState().activeGameId,n=null,r=eu.useJassStore.getState().currentSession;null!=r&&r.isTournamentSession&&(n=r.tournamentInstanceId||r.instanceId||(null!=(e=r.id)&&e.includes("tournament_")?r.id:null)),N.useUIStore.getState().showNotification({message:"M\xf6chtest du diesen Jass wirklich abbrechen? Die Partie geht verloren und wird nicht gespeichert.",type:"error",isFlipped:"top"===o,actions:[{label:"Nein",onClick:function(){}},{label:"Ja, abbrechen!",onClick:function(){return L(t,n)},className:"bg-red-600 hover:bg-red-700"}]})},L=(0,c.useCallback)((t=e5().mark(function e(t,n){var r,o,a,s,l,c,u,f,d,m,p;return e5().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=j.useGameStore.getState(),o=eu.useJassStore.getState(),a=e$.useAuthStore.getState(),s=N.useUIStore.getState(),l=t,o.jassSessionId,c=!!n,u=n,c&&u?console.log("[MenuOverlay] Turnierpasse erkannt. Instance ID: ".concat(u,", Game ID to abort: ").concat(l)):console.log("[MenuOverlay] Gruppenpasse (oder kein Spiel aktiv) erkannt. Game ID to abort: ".concat(l)),!(l&&r.isGameStarted&&!r.isGameCompleted)){e.next=6;break}return e.prev=1,S(!0),console.log("[MenuOverlay] Calling abortActiveGame for ".concat(l)),e.next=2,(0,eq.abortActiveGame)(l,{tournamentInstanceId:u||void 0,skipSessionCleanup:!1});case 2:console.log("[MenuOverlay] Successfully aborted game ".concat(l)),e.next=4;break;case 3:return e.prev=3,p=e.catch(1),console.error("[MenuOverlay] Error aborting game ".concat(l,":"),p),s.showNotification({type:"error",message:"Fehler beim Abbrechen des Spiels."}),e.abrupt("return");case 4:return e.prev=4,S(!1),e.finish(4);case 5:e.next=7;break;case 6:console.log("[MenuOverlay] Kein aktives Spiel zum Abbrechen gefunden (ID: ".concat(l,") oder Spiel bereits beendet/nicht gestartet."));case 7:if(console.log("[MenuOverlay] Resetting local stores (Game, Jass, Timer)"),j.useGameStore.getState().resetGameState({newActiveGameId:null}),eu.useJassStore.getState().resetJass(),ej.useTimerStore.getState().resetAllTimers(),i(),f=a.isGuest,d="authenticated"===a.status&&!f,!f){e.next=9;break}return console.log("[MenuOverlay] Gastmodus erkannt: Aufsetzen eines neuen Spiels in der Jasstafel"),N.useUIStore.getState().resetStartScreen(),e.next=8,(0,eQ.p)(I,"/jass");case 8:e.next=10;break;case 9:return m=d?"/start":"/auth/register",console.log("[MenuOverlay] Navigating to ".concat(m," (isTrulyAuthenticated: ").concat(d,")")),e.next=10,(0,eQ.p)(I,m);case 10:case"end":return e.stop()}},e,null,[[1,3,4,5]])}),n=function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){e4(o,r,i,a,s,"next",e)}function s(e){e4(o,r,i,a,s,"throw",e)}a(void 0)})},function(e,t){return n.apply(this,arguments)}),[i,I]),G=(0,c.useCallback)(function(){s(o),setTimeout(function(){i()},100)},[s,o,i]),D=(0,c.useCallback)(function(){l(),(null==w?void 0:w.id)===F.nI.JASS_SETTINGS&&document.dispatchEvent(new Event("settingsOpen"))},[l,w]),R=(0,c.useCallback)(function(){Object.values(F.xl).some(function(e){return!O(e)})?(N.useUIStore.getState().openTutorialInfo(),setTimeout(function(){i()},100)):i()},[i,O]),M=[{icon:eN.RCe,color:"bg-red-500",id:"trash","data-tutorial":"new-game-button"},{icon:eN.__w,color:"bg-yellow-500",id:"info"},{icon:eN.rQ8,color:"bg-blue-500",id:"home"},{icon:eN.Pcn,color:"bg-blue-500",id:"farbe",className:"settings-button"},{icon:eO.oPo,color:"bg-green-500",id:"resultat"}],z=k.isGuest||"authenticated"!==k.status,K=M.filter(function(e){return("authenticated"!==k.status&&!u||"farbe"!==e.id)&&(!z||"home"!==e.id)}),U=function(e){switch(e){case"trash":return T;case"info":return R;case"home":return A;case"farbe":return D;case"resultat":return G;default:return function(){}}},H=K.map(function(e){return e2(e2({},e),{},{onClick:U(e.id)})}),B="top"===o?e0(H).reverse():H,W="bottom"===o?H:e0(H).reverse(),J="top"===o?B:W;return(0,p.jsxs)(p.Fragment,{children:[x&&(0,p.jsx)(eY.A,{message:"Spiel wird abgebrochen...",color:"white"}),(0,p.jsx)(ek.P.div,{className:"absolute inset-x-0 top-1/2 transform -translate-y-1/2 flex justify-center items-center h-16 z-10 ".concat(r?"opacity-100":"opacity-0 pointer-events-none"," transition-opacity duration-300"),variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.05}}},initial:"hidden",animate:r?"visible":"hidden",children:(0,p.jsx)("div",{className:"flex justify-center items-center w-full px-8 sm:px-12 min-w-[320px]",children:(0,p.jsx)("div",{className:"flex w-full max-w-2xl ".concat(4===J.length?"justify-around":"justify-between space-x-4 sm:space-x-6"),children:J.map(function(e){var t=e.icon,n=e.onClick,r=e.color,i=e.id,a=e.className,s=e["data-tutorial"];return(0,p.jsx)(ek.P.button,{onClick:n,"data-tutorial":s,disabled:(null==w?void 0:w.id)===F.nI.SETTINGS&&"settings-button"!==a||(null==w?void 0:w.id)===F.nI.MENU_GESTURE&&"resultat"!==i||(null==w?void 0:w.id)===F.nI.RESULTAT_INFO&&"resultat"!==i||(null==w?void 0:w.id)===F.nI.NEW_GAME&&"trash"!==i||(null==w?void 0:w.id)===F.nI.JASS_SETTINGS&&"farbe"!==i&&"authenticated"===k.status&&!k.isGuest,className:"".concat("w-12 h-12 p-2 rounded-xl shadow-md transition-transform hover:scale-110"," ").concat(r," ").concat(a||""," text-white flex-shrink-0\n                  ").concat((null==w?void 0:w.id)===F.nI.RESULTAT_INFO&&"resultat"===i||(null==w?void 0:w.id)===F.nI.NEW_GAME&&"trash"===i||(null==w?void 0:w.id)===F.nI.JASS_SETTINGS&&"farbe"===i?"ring-4 ring-white ring-opacity-50 animate-pulse":"","\n                  ").concat(((null==w?void 0:w.id)!==F.nI.SETTINGS||"settings-button"===a)&&(null==w?void 0:w.id)!==F.nI.MENU_GESTURE&&((null==w?void 0:w.id)!==F.nI.RESULTAT_INFO||"resultat"===i)&&((null==w?void 0:w.id)!==F.nI.NEW_GAME||"trash"===i)&&((null==w?void 0:w.id)!==F.nI.JASS_SETTINGS||"farbe"===i||"authenticated"!==k.status||k.isGuest)?"":"opacity-50 cursor-not-allowed"),variants:P,onMouseDown:function(){return C(i)},onTouchStart:function(){return C(i)},children:(0,p.jsx)(t,{className:"w-full h-full ".concat(m===i?"opacity-70":""),style:{transform:"top"===o?"rotate(180deg)":"none"}})},i)})})})}),(0,p.jsx)(eZ,{}),(0,p.jsx)(eE,{show:b,onConfirm:L,onDismiss:function(){return v(!1)}})]})};var e9=n(7887),te=n(7947),tt=n(8517),tn=n(6170),tr=n(4796),ti=n(6757),to=n(9e3),ta=n(3028),ts=n.n(ta),tl=n(5259),tc=n(582),tu=n(2009),tf=n(5519),td=n(7133),tm=n(7746),tp=n(8934),th=n(3668);function tg(e){return(tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tb(){tb=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(E([])));S&&S!==n&&r.call(S,a)&&(y=S);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==tg(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(tg(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function tv(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function ty(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){tv(o,r,i,a,s,"next",e)}function s(e){tv(o,r,i,a,s,"throw",e)}a(void 0)})}}function tx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tx(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==tg(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==tg(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===tg(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function tw(e){return function(e){if(Array.isArray(e))return tO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tN(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||tN(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tN(e,t){if(e){if("string"==typeof e)return tO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tO(e,t)}}function tO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tk=function(e){var t=e.name,n=e.isStarter,r=(0,c.useRef)(null),i=tj((0,c.useState)(t),2),o=i[0],a=i[1];return(0,c.useEffect)(function(){var e=function(){var e=r.current;if(e){var i=document.createElement("div");i.style.visibility="hidden",i.style.position="absolute",i.style.whiteSpace="nowrap",i.className=e.className,i.textContent=t+(n?" ❀":""),document.body.appendChild(i);var o=i.offsetWidth,s=1.25*e.offsetWidth;if(document.body.removeChild(i),o>s){for(var l=0,c=t.length;l<c;){var u=Math.floor((l+c+1)/2);i.textContent=t.slice(0,u)+(n?"❀":""),document.body.appendChild(i);var f=i.offsetWidth;document.body.removeChild(i),f<=s?l=u:c=u-1}a(t.slice(0,l))}else a(t)}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[t,n]),(0,p.jsx)("div",{ref:r,className:"text-center text-gray-400 px-1",children:(0,p.jsxs)("span",{className:"inline-block",children:[o,n&&(0,p.jsx)("span",{children:"❀"})]})})},tI=function(e,t){for(var n=tw(e);n.length<4;)n.push("placeholder_playerid_".concat(n.length+1));return{teams:{bottom:{players:[{playerId:n[0],displayName:t[1]||"Spieler 1"},{playerId:n[2],displayName:t[3]||"Spieler 3"}]},top:{players:[{playerId:n[1],displayName:t[2]||"Spieler 2"},{playerId:n[3],displayName:t[4]||"Spieler 4"}]}},pairingIdentifiers:{bottom:(0,tn.PW)(n[0],n[2]),top:(0,tn.PW)(n[1],n[3])}}};let tE=function(e){var t,r,i,o,a,s,l,d,m,h,g,b,v,y,x,S,w=e.isReadOnly,O=void 0!==w&&w,k=e.viewerData,I=e.gameTypeLabel,E=(0,N.useUIStore)(function(e){return e.resultatKreidetafel.isOpen}),P=(0,N.useUIStore)(function(e){return e.resultatKreidetafel.swipePosition}),C="top"===P,A=(0,N.useUIStore)(function(e){return e.resultatKreidetafel.currentStatistic}),T=(0,c.useCallback)(function(){N.useUIStore.setState(function(e){return{resultatKreidetafel:tS(tS({},e.resultatKreidetafel),{},{isOpen:!1}),jassFinishNotification:{isOpen:!1,mode:"share",message:{text:"",icon:"♥️"},onShare:void 0,onBack:void 0,onContinue:void 0},signingState:"idle",team1Signed:!1,team2Signed:!1}})},[]),L=(0,N.useUIStore)(),G=L.signingState,D=L.team1Signed,R=L.team2Signed,M=(0,_.b)(),z=M.isActive,K=(0,M.getCurrentStep)(),U=(0,e$.useAuthStore)();U.user,U.status,U.isAuthenticated;var H=(0,f.useRouter)(),B=tj((0,c.useState)(!1),2);B[0],B[1];var W=tj((0,c.useState)(!1),2);W[0],W[1];var J=tj((0,c.useState)(!1),2);J[0],J[1];var Z=tj((0,c.useState)(!1),2),Y=(Z[0],Z[1]),q=tj((0,c.useState)(!1),2),Q=q[0],X=q[1],en=tj((0,c.useState)(!1),2),ei=en[0];en[1];var eo=tj((0,c.useState)(!1),2),es=eo[0];eo[1];var el=tj((0,c.useState)(!1),2),ef=el[0],ed=el[1],em=tj((0,c.useState)(null),2),ep=em[0],eh=em[1],eg=(0,eu.useJassStore)().currentSession,eb=(0,j.useGameStore)(function(e){return e.activeGameId}),ev=(0,c.useMemo)(function(){var e,t,n=null!=(e=null==eg?void 0:eg.isTournamentSession)&&e,r=!!eb,i=(null!=(t=null==eg?void 0:eg.id)?t:"").includes("tournament_");return!!(n&&r&&i)},[eg,eb]),ey=(0,c.useMemo)(function(){if(null!=eg&&eg.isTournamentSession){var e,t=(null!=(e=eg.id)?e:"").match(/^tournament_(.+)_passe_\d+$/);return t?t[1]:void 0}},[eg]),ex=(0,V.Q5)().currentGroup,eS=(0,N.useUIStore)(function(e){return e.strokeSettings}),ew=null!=(t=null!=(r=null==ex?void 0:ex.strokeSettings)?r:eS)?t:ec.zh,eN=null!=(i=null==ex?void 0:ex.scoreSettings)?i:N.useUIStore.getState().scoreSettings,eO=null!=(o=null==ex?void 0:ex.farbeSettings)?o:ee.FT,eI=eO.cardStyle;eu.useJassStore.setState;var eE=(0,eu.useJassStore)(function(e){var t;return null==(t=e.currentSession)?void 0:t.id}),eP=(0,eu.useJassStore)(function(e){return e.games}),eC=(0,eu.useJassStore)(function(e){return e.onlineCompletedGames}),eA=(0,eu.useJassStore)(function(e){return e.canNavigateBack()}),eT=(0,eu.useJassStore)(function(e){return e.canNavigateForward()}),eL=(0,eu.useJassStore)(function(e){return e.currentGameId}),eG=(0,eu.useJassStore)(function(e){return e.teams}),eD=(0,j.useGameStore)(function(e){return e.activeGameId}),eR=!!eD,e_=null!=(a=null!=(s=null==k?void 0:k.playerNames)?s:(0,j.useGameStore)(function(e){return e.playerNames}))?a:{1:"Spieler 1",2:"Spieler 2",3:"Spieler 3",4:"Spieler 4"},eF=null!=(l=null==k?void 0:k.currentScores)?l:(0,j.useGameStore)(function(e){return e.scores}),eM=null!=(d=null==eF?void 0:eF.top)?d:0,ez=null!=(m=null==eF?void 0:eF.bottom)?m:0,eK=null!=(h=null==k?void 0:k.weisPoints)?h:(0,j.useGameStore)(function(e){return e.weisPoints}),eU=null!=(g=null!=(b=null==k?void 0:k.currentStriche)?b:(0,j.useGameStore)(function(e){return e.striche}))?g:{top:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},bottom:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0}},eH=(0,c.useCallback)(function(){var e,t=e$.useAuthStore.getState(),n=j.useGameStore.getState(),r=eu.useJassStore.getState(),i=t.isAuthenticated(),o=!!n.activeGameId,a=!!(null!=(e=r.currentSession)&&e.id),s=!t.isGuest;return i&&o&&a&&s},[]),eB=eR?eC:eP,eW=(0,e9.GP)(new Date,"d.M.yyyy"),eJ=eT?"1 Spiel\nvorw\xe4rts":"Neues\nSpiel",eZ=tj(c.useState(null),2);eZ[0],eZ[1];var eV=ti.D.find(function(e){return e.id===A}),eY=to.F,eX=eV?eV.component:eY,e0=eV?eV.title:"Jassergebnis",e1=(0,c.useMemo)(function(){return{top:tS(tS({},eU.top),{},{normal:(0,tr.Zr)(eU.top)}),bottom:tS(tS({},eU.bottom),{},{normal:(0,tr.Zr)(eU.bottom)})}},[eU]),e2=(0,c.useRef)("local");(0,c.useEffect)(function(){if(eR&&eD){e2.current="firebase";var e=setTimeout(function(){"firebase"!==e2.current||O||j.useGameStore.setState(function(e){return tS(tS({},e),{},{weisPoints:{top:0,bottom:0},currentRoundWeis:[]})})},100);return function(){return clearTimeout(e)}}},[eR,eD,eM,ez,O]);var e5=(0,c.useMemo)(function(){var e;return O?null!=(e=null==k?void 0:k.canStartNewGameLogic)&&e:eU.top.sieg>0||eU.bottom.sieg>0},[eU,O,k]),e4=(0,c.useMemo)(function(){var e,t,n,r=null!=(e=null==k?void 0:k.weisPoints)?e:j.useGameStore.getState().weisPoints;N.useUIStore.getState().scoreSettings;var i=function(e,t,n){var r=0;return n.berg&&(r+=e.berg),r+=e.sieg,n.schneider&&(r+=e.schneider),r+=e.matsch,r+=e.kontermatsch},o=eB.filter(function(e){var t="gameNumber"in e?e.gameNumber:"id"in e?e.id:0;return("number"==typeof t?t:0)<eL}).reduce(function(e,t){var n,r,o,a,s={berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},l={berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},c=0,u=0;"teams"in t&&t.teams&&"top"in t.teams&&"bottom"in t.teams&&"striche"in t.teams.top&&"striche"in t.teams.bottom?(s=t.teams.top.striche,l=t.teams.bottom.striche,c=null!=(n=t.teams.top.total)?n:0,u=null!=(r=t.teams.bottom.total)?r:0):"finalStriche"in t&&"finalScores"in t&&(s=t.finalStriche.top,l=t.finalStriche.bottom,c=null!=(o=t.finalScores.top)?o:0,u=null!=(a=t.finalScores.bottom)?a:0);var f=i(s,ew,eN.enabled),d=i(l,ew,eN.enabled);return{striche:{top:(e.striche.top||0)+(f||0),bottom:(e.striche.bottom||0)+(d||0)},punkte:{top:(e.punkte.top||0)+(c||0),bottom:(e.punkte.bottom||0)+(u||0)}}},{striche:{top:0,bottom:0},punkte:{top:0,bottom:0}}),a=i(e1.top,ew,eN.enabled),s=i(e1.bottom,ew,eN.enabled);return{striche:{top:o.striche.top+a,bottom:o.striche.bottom+s},punkte:{top:o.punkte.top+eM+(null!=(t=null==r?void 0:r.top)?t:0),bottom:o.punkte.bottom+ez+(null!=(n=null==r?void 0:r.bottom)?n:0)}}},[eL,e1,eM,ez,eB,ew,eN,eK]);(0,c.useMemo)(function(){return O?{totalJassTime:0,currentGameDuration:0}:ej.useTimerStore.getState().getAnalytics()},[eB.length,O]);var e3=(0,c.useMemo)(function(){var e,t,n,r,i,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,x,S,w,j,O,k;return t=(e={playerNames:e_,currentStatistic:"jasspunkte"===A?"punkte":A,totals:{striche:{team1:e4.striche.top,team2:e4.striche.bottom},punkte:{team1:e4.punkte.top,team2:e4.punkte.bottom}},matchCount:{team1:e1.top.matsch||0,team2:e1.bottom.matsch||0},type:"gameEnd",gameHistory:{gesamtStand:{team1:e4.striche.top,team2:e4.striche.bottom},gameNumber:eL,totalGames:eB.length},currentStriche:{team1:tS(tS({},eU.top),{},{sieg:eU.top.sieg}),team2:tS(tS({},eU.bottom),{},{sieg:eU.bottom.sieg})}}).playerNames,n=e.currentStatistic,r=e.totals,i=e.matchCount,o=e.gameHistory,a=e.currentStriche,s=N.useUIStore.getState().scoreSettings.values.schneider,c={team1:[(l=t||{1:"Spieler 1",2:"Spieler 2",3:"Spieler 3",4:"Spieler 4"})[1],l[3]],team2:[l[2],l[4]]},f=(u="striche"===n?r.striche:r.punkte).team2>u.team1,d=u.team1===u.team2,m=f?c.team2.filter(Boolean):c.team1.filter(Boolean),p=f?c.team1.filter(Boolean):c.team2.filter(Boolean),h=Math.abs(r.striche.team1-r.striche.team2),g=Math.abs(r.punkte.team1-r.punkte.team2),b=i?i.team1+i.team2:0,v=r.punkte.team1<s||r.punkte.team2<s,y=r.punkte.team1<s?"team1":r.punkte.team2<s?"team2":void 0,x="sieg",w=(S={team1:o.gesamtStand.team1-(a.team1[x]||0),team2:o.gesamtStand.team2-(a.team2[x]||0)}).team1-S.team2,j=o.gesamtStand.team1-o.gesamtStand.team2,O=w>0&&j<w||w<0&&j>w,k=Math.abs(j),{winnerNames:m,loserNames:p,playerNames:Object.values(l).filter(Boolean),pointDifference:g,stricheDifference:h,totalMatsche:b,isTeam2Winner:f,isDraw:d,isSchneider:v,schneiderTeam:y,gesamtStand:o.gesamtStand,previousGesamtStand:S,gameStats:{currentGameNumber:o.gameNumber,totalGames:o.totalGames,isComeback:O,comebackTeam:O?w>0?"team2":"team1":void 0,führungsWechsel:w>0&&j<0||w<0&&j>0,höchsterVorsprung:{team:j>0?"team1":"team2",differenz:k}}}},[e4,eL,eB.length,e_,A,e1,eU,eN]),e6=(0,c.useCallback)(function(){var e=eu.useJassStore.getState(),t=j.useGameStore.getState();if(e.canNavigateBack()){e.navigateToPreviousGame();var n=e.getCurrentGame();n&&(t.resetGame(n.initialStartingPlayer),j.useGameStore.setState(function(e){return tS(tS({},e),{},{isGameStarted:!0,currentRound:n.currentRound||1,currentPlayer:n.currentPlayer,startingPlayer:n.startingPlayer,initialStartingPlayer:n.initialStartingPlayer,scores:{top:(n.teams.top.jassPoints||0)+(n.teams.top.weisPoints||0),bottom:(n.teams.bottom.jassPoints||0)+(n.teams.bottom.weisPoints||0)},weisPoints:{top:n.teams.top.weisPoints,bottom:n.teams.bottom.weisPoints},striche:{top:tS({},n.teams.top.striche),bottom:tS({},n.teams.bottom.striche)},roundHistory:n.roundHistory||[],isGameCompleted:!1,isRoundCompleted:!1})}))}},[]),e8=(0,c.useCallback)(ty(tb().mark(function e(){var t,n,r,i,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,x,S,w;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eh({totals:e4,title:e0,date:eW}),ed(!0),e.next=1,new Promise(function(e){return setTimeout(e,100)});case 1:return t=null,n=null,r=[],i={maxHeight:"",overflowY:"",buttonDisplay:""},o=N.useUIStore.getState().resultatKreidetafel,e.prev=2,console.log("\uD83D\uDD04 Screenshot-Prozess gestartet"),N.useUIStore.setState(function(e){return{resultatKreidetafel:tS(tS({},e.resultatKreidetafel),{},{swipePosition:"bottom",isFlipped:!1})}}),e.next=3,new Promise(function(e){return setTimeout(e,1e3)});case 3:if(a=document.querySelector(".relative.w-11\\/12.max-w-md")){e.next=4;break}throw Error("Kreidetafel-Element nicht gefunden");case 4:if(t=a.querySelector(".statistik-container"),n=a.querySelector("#resultat-action-area"),t&&(r=Array.from(t.querySelectorAll(".space-y-0.px-1"))),!(t&&n)){e.next=6;break}return i.maxHeight=t.style.maxHeight,i.overflowY=t.style.overflowY,i.buttonDisplay=n.style.display,t.style.maxHeight="none",t.style.overflowY="visible",n.style.display="none",r.forEach(function(e){e.style.maxHeight="none",e.style.overflowY="visible"}),e.next=5,new Promise(function(e){return setTimeout(e,250)});case 5:e.next=7;break;case 6:console.warn("⚠️ Statistik-Container oder Action-Area nicht gefunden, Styles nicht angepasst.");case 7:return e.next=8,ts()(a,{background:"#1F2937",useCORS:!0,logging:!1,width:a.offsetWidth,height:a.offsetHeight,scale:2});case 8:return s=e.sent,e.next=9,new Promise(function(e){return s.toBlob(e,"image/png")});case 9:if(l=e.sent){e.next=10;break}throw Error("Fehler beim Erstellen des Bild-Blobs.");case 10:if(c=new File([l],"jass-resultat.png",{type:"image/png"}),!(navigator.share&&navigator.canShare&&navigator.canShare({files:[c]}))){e.next=20;break}return f=null!=(u=N.useUIStore.getState().jassFinishNotification)&&u.message?"string"==typeof u.message?u.message:u.message.text:"Jass Resultat",d="".concat(f,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),e.prev=11,e.next=12,navigator.share({files:[c],text:d});case 12:console.log("✅ Teilen mit Bild erfolgreich!"),e.next=19;break;case 13:if(e.prev=13,!("AbortError"===(x=e.catch(11)).name||null!=(m=x.message)&&m.includes("abort"))){e.next=14;break}console.log("ℹ️ Benutzer hat das Teilen abgebrochen."),e.next=19;break;case 14:return console.warn("⚠️ Teilen mit Datei fehlgeschlagen, versuche Text-only:",x),p="".concat(f,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),e.prev=15,e.next=16,navigator.share({text:p});case 16:console.log("✅ Teilen nur mit Text erfolgreich!"),e.next=19;break;case 17:if(e.prev=17,!("AbortError"===(S=e.catch(15)).name||null!=(h=S.message)&&h.includes("abort"))){e.next=18;break}console.log("ℹ️ Benutzer hat das Text-Teilen abgebrochen."),e.next=19;break;case 18:throw S;case 19:case 25:e.next=27;break;case 20:if(console.warn("⚠️ Teilen von Dateien nicht unterst\xfctzt. Versuche Text-only."),b=null!=(g=N.useUIStore.getState().jassFinishNotification)&&g.message?"string"==typeof g.message?g.message:g.message.text:"Jass Resultat",v="".concat(b,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),!navigator.share){e.next=26;break}return e.prev=21,e.next=22,navigator.share({text:v});case 22:console.log("✅ Teilen nur mit Text erfolgreich!"),e.next=25;break;case 23:if(e.prev=23,!("AbortError"===(w=e.catch(21)).name||null!=(y=w.message)&&y.includes("abort"))){e.next=24;break}console.log("ℹ️ Benutzer hat das Teilen abgebrochen."),e.next=25;break;case 24:throw w;case 26:console.warn("⚠️ navigator.share wird nicht unterst\xfctzt. Kein Teilen m\xf6glich.");case 27:e.next=29;break;case 28:e.prev=28,console.error("❌ Schwerwiegender Fehler im Screenshot-Prozess:",e.catch(2)),N.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Erstellen des Screenshots. Teilen nicht m\xf6glich."});case 29:return e.prev=29,t&&n&&(t.style.maxHeight=i.maxHeight||"",t.style.overflowY=i.overflowY||"",n.style.display=i.buttonDisplay||"",r.forEach(function(e){e.style.maxHeight="",e.style.overflowY=""})),N.useUIStore.setState(function(e){return{resultatKreidetafel:tS(tS({},e.resultatKreidetafel),o)}}),console.log("✅ UI-Zustand und Styles wiederhergestellt"),ed(!1),eh(null),e.finish(29);case 30:case"end":return e.stop()}},e,null,[[2,28,29,30],[11,13],[15,17],[21,23]])})),[e4,e0,eW,T]),e7=c.useCallback(function(e){var t=ti.D.findIndex(function(e){return e.id===A}),n="right"===e?(t+1)%ti.D.length:(t-1+ti.D.length)%ti.D.length;N.useUIStore.setState(function(e){return{resultatKreidetafel:tS(tS({},e.resultatKreidetafel),{},{currentStatistic:ti.D[n].id})}})},[A]),ta=(0,tc.uh)({onSwipedLeft:function(){return e7("right")},onSwipedRight:function(){return e7("left")},preventScrollOnSwipe:!0,trackMouse:!0}),tg=(0,c.useCallback)(ty(tb().mark(function e(){var t,n,r,i,o,a,s;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=N.useUIStore.getState(),n=ej.useTimerStore.getState(),r=j.useGameStore.getState(),i=e$.useAuthStore.getState(),o=eu.useJassStore.getState(),!t.isReadOnlyMode){e.next=1;break}return t.showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine Partien beendet werden.",position:null!=P?P:void 0}),e.abrupt("return");case 1:if(e5){e.next=2;break}return t.showNotification({message:"Bitte erst bedanken, bevor der Jass beendet wird.",type:"warning",position:"top"===P?"top":"bottom",isFlipped:"top"===P,actions:[{label:"Verstanden",onClick:T}]}),e.abrupt("return");case 2:if(a=r.activeGameId,!(i.isAuthenticated()&&a)){e.next=3;break}return t.startSigningProcess(),e.abrupt("return");case 3:return n.getAnalytics(),n.prepareJassEnd(),console.log("[ResultatKreidetafel] Offline-Modus: Finalisiere lokal ohne Spruch"),s=function(){var e=ty(tb().mark(function e(){var i,a,s,l,c,u,f,d,m,p,h,g,b,v;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!eH()){e.next=4;break}if(a=null==(i=o.currentSession)?void 0:i.id,s=o.games.length,a){e.next=1;break}return console.error("[ResultatKreidetafel] currentSessionIdLocal is undefined despite checkIsRealOnlineSession being true"),e.abrupt("return");case 1:return e.prev=1,f=(0,tm.Uz)(tf.xv,"us-central1"),d=(0,tm.Qg)(f,"finalizeSession"),m=r.playerNames,p=(null==(l=o.currentSession)?void 0:l.participantUids)||[],g=tI(h=(null==(c=o.currentSession)?void 0:c.participantPlayerIds)||[],m),b={participantUids:p,participantPlayerIds:h,playerNames:m,gruppeId:(null==(u=o.currentSession)?void 0:u.gruppeId)||null,startedAt:function(){var e,t=null==(e=o.currentSession)?void 0:e.startedAt;return t instanceof tu.Timestamp||"number"==typeof t?t:Date.now()}(),teams:g.teams,pairingIdentifiers:g.pairingIdentifiers},e.next=2,d({sessionId:a,expectedGameNumber:s,initialSessionData:b});case 2:e.sent,e.next=4;break;case 3:e.prev=3,console.error("[ResultatKreidetafel] Error calling finalizeSession (Real Online Session):",e.catch(1)),t.showNotification({type:"error",message:"Fehler beim Finalisieren der Session-Statistik."});case 4:return n.finalizeJassEnd(),o.resetJass(),r.resetGameState({newActiveGameId:null,settings:{farbeSettings:ee.FT,scoreSettings:et.$d,strokeSettings:ec.zh}}),t.resetSigningProcess(),t.closeJassFinishNotification(),T(),v=e$.useAuthStore.getState(),e.next=5,(0,eQ.p)(H,v.isAuthenticated()?"/start":"/auth/register?origin=offline",void 0,!0);case 5:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),j.useGameStore.getState().setTransitioning(!0),e.next=4,s();case 4:case"end":return e.stop()}},e)})),[e5,P,T,e8,e4,A,e_,eN,e3,H,e1]),tv=(0,c.useCallback)(function(){var e,t=eu.useJassStore.getState(),r=j.useGameStore.getState();ej.useTimerStore.getState();var i=N.useUIStore.getState();if((0,tu.getFirestore)(tf.xv),i.isReadOnlyMode)return void i.showNotification({type:"info",message:"Als Zuschauer k\xf6nnen keine neuen Spiele gestartet werden.",position:null!=P?P:void 0});var o=(s=ty(tb().mark(function e(){var t,r,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,x,S,w,O,k,I,E,P,C,A,T,L,G,D,R,_;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return j.useGameStore.getState().activeGameId,r=eu.useJassStore.getState().currentSession,e.next=1,eu.useJassStore.getState().finalizeGame();case 1:return console.log("[ResultatKreidetafel] Warte auf Firestore-Sync nach finalizeGame..."),e.next=2,new Promise(function(e){return setTimeout(e,500)});case 2:if((a=(o=j.useGameStore.getState()).striche).top.sieg>0?s="top":a.bottom.sieg>0&&(s="bottom"),(u=(c=o.roundHistory||[]).length>0?c[c.length-1]:null)&&"number"==typeof u.startingPlayer?l=(u.startingPlayer+3-1)%4+1:(f=eu.useJassStore.getState().getCurrentGame(),l=(d=o.currentPlayer||(null==f?void 0:f.currentPlayer))?(d-2+4)%4+1:o.initialStartingPlayer||1),m=(0,tt.vm)(l),s&&(0,tt.OB)(m,s)&&(m=(0,tt.vm)(m)),r){e.next=3;break}return console.error("[ResultatKreidetafel] Keine Session vorhanden - kann kein neues Spiel erstellen"),i.showNotification({type:"error",message:"Fehler: Keine aktive Session gefunden."}),e.abrupt("return");case 3:if(p=null!=(t=r.participantUids)?t:[],h=[],!(p.length>0)){e.next=9;break}return console.log("[ResultatKreidetafel] Warte auf Aufl\xf6sung aller Player-IDs..."),e.next=4,Promise.resolve().then(n.bind(n,1411));case 4:return b=(g=e.sent).getPlayerIdForUser,v=g.getPlayerByUserId,e.prev=5,w=null==(y=(S=e$.useAuthStore.getState()).user)?void 0:y.uid,O=p.map(function(){var e=ty(tb().mark(function e(t){var n,r;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t!==w){e.next=2;break}return e.next=1,b(t,null);case 1:return e.abrupt("return",e.sent);case 2:return console.log("[ResultatKreidetafel] Direkte Player-Suche f\xfcr fremde UID: ".concat(t)),e.next=3,v(t);case 3:if(!((n=e.sent)&&n.id)){e.next=4;break}return console.log("[ResultatKreidetafel] ✅ Player gefunden f\xfcr ".concat(t,": ").concat(n.id)),e.abrupt("return",n.id);case 4:return console.warn("[ResultatKreidetafel] ⚠️ Kein Player gefunden f\xfcr UID ".concat(t," - wird \xfcbersprungen")),e.abrupt("return",void 0);case 5:return e.prev=5,r=e.catch(0),console.error("[ResultatKreidetafel] Fehler bei Player-Aufl\xf6sung f\xfcr ".concat(t,":"),r),e.abrupt("return",void 0);case 6:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(O);case 6:h=e.sent.filter(function(e){return e&&"undefined"!==e}),console.log("[ResultatKreidetafel] Player-IDs aufgel\xf6st: ".concat(h.length,"/").concat(p.length)),h.length!==p.length&&(console.warn("[ResultatKreidetafel] Nicht alle Player-IDs konnten aufgel\xf6st werden"),r.participantPlayerIds&&r.participantPlayerIds.length>0?(console.log("[ResultatKreidetafel] \uD83D\uDD04 Fallback: Verwende participantPlayerIds aus Session"),h=r.participantPlayerIds.filter(function(e){return e&&"undefined"!==e})):i.showNotification({type:"warning",message:"Einige Spieler-Profile konnten nicht vollst\xe4ndig geladen werden."})),(k=null==(x=S.user)?void 0:x.uid)&&!p.includes(k)&&(console.error("[ResultatKreidetafel] \uD83D\uDEA8 KRITISCHER FEHLER: Aktueller User nicht in participantUids!"),console.error("participantUids:",p),console.error("currentUserId:",k),p.push(k),console.log("[ResultatKreidetafel] ✅ KORREKTUR: Aktueller User zu participantUids hinzugef\xfcgt")),e.next=9;break;case 7:if(e.prev=7,console.error("[ResultatKreidetafel] Fehler beim Aufl\xf6sen der Player-IDs:",e.catch(5)),!(r.participantPlayerIds&&r.participantPlayerIds.length>0)){e.next=8;break}console.log("[ResultatKreidetafel] \uD83D\uDD04 Ultimativer Fallback: Verwende Session participantPlayerIds"),h=r.participantPlayerIds.filter(function(e){return e&&"undefined"!==e}),e.next=9;break;case 8:return i.showNotification({type:"error",message:"Fehler beim Laden der Spieler-Profile. Neues Spiel abgebrochen."}),e.abrupt("return");case 9:return(I={farbeSettings:r.currentFarbeSettings,scoreSettings:r.currentScoreSettings,strokeSettings:r.currentStrokeSettings}).farbeSettings&&I.scoreSettings&&I.strokeSettings||(console.warn("[ResultatKreidetafel] Session-Settings unvollst\xe4ndig, verwende Gruppe/UI-Fallbacks"),E=V.Q5.getState().currentGroup,I={farbeSettings:I.farbeSettings||(null==E?void 0:E.farbeSettings)||eO,scoreSettings:I.scoreSettings||(null==E?void 0:E.scoreSettings)||eN,strokeSettings:I.strokeSettings||(null==E?void 0:E.strokeSettings)||ew}),P=null,e.prev=10,R=tS({},j.useGameStore.getState().playerNames),_={sessionId:r.id,groupId:null!=(C=r.gruppeId)?C:"",participantUids:p,participantPlayerIds:h,playerNames:R,activeFarbeSettings:I.farbeSettings,activeScoreSettings:I.scoreSettings,activeStrokeSettings:I.strokeSettings,teams:{top:{players:[null!=(A=R[2])?A:"Spieler 2",null!=(T=R[4])?T:"Spieler 4"],striche:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},jassPoints:0,weisPoints:0,total:0,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}},bottom:{players:[null!=(L=R[1])?L:"Spieler 1",null!=(G=R[3])?G:"Spieler 3"],striche:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},jassPoints:0,weisPoints:0,total:0,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}}},currentGameNumber:(null!=(D=eu.useJassStore.getState().currentGameId)?D:0)+1,scores:{top:0,bottom:0},striche:{top:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},bottom:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0}},weisPoints:{top:0,bottom:0},currentRound:1,currentPlayer:m,startingPlayer:m,initialStartingPlayer:m},e.next=11,(0,eq.createNewActiveGame)(_);case 11:return P=e.sent,e.next=12,(0,eq.updateSessionActiveGameId)(r.id,P);case 12:e.next=14;break;case 13:return e.prev=13,console.error("[ResultatKreidetafel] Error creating new game or updating session:",e.catch(10)),N.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Starten des n\xe4chsten Online-Spiels. Lokaler Ablauf gestoppt."}),e.abrupt("return");case 14:return eu.useJassStore.getState().startNextGame(m,P),(0,j.useGameStore.getState().resetGame)(m,null!=P?P:void 0,I),j.useGameStore.setState(function(e){return tS(tS({},e),{},{isGameStarted:!0,currentRound:1,isGameCompleted:!1,isRoundCompleted:!1})}),e.next=15,(0,eQ.p)(H,"/jass");case 15:case"end":return e.stop()}},e,null,[[5,7],[10,13]])})),function(){return s.apply(this,arguments)});if(eT){if(t.canNavigateForward()){t.navigateToNextGame();var a=t.getCurrentGame();if(a){var s,l,c,u,f={berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},d=t.currentSession,m={farbeSettings:null!=(l=null==d?void 0:d.currentFarbeSettings)?l:ee.FT,scoreSettings:null!=(c=null==d?void 0:d.currentScoreSettings)?c:et.$d,strokeSettings:null!=(u=null==d?void 0:d.currentStrokeSettings)?u:ec.zh};console.log("[ResultatKreidetafel] Navigation-Pfad: \xdcbergebe Settings an resetGame:",{source:null!=d&&d.currentFarbeSettings?"Session":"Default",cardStyle:m.farbeSettings.cardStyle,siegPunkte:m.scoreSettings.values.sieg,schneiderStriche:m.strokeSettings.schneider}),r.resetGame(a.initialStartingPlayer,void 0,m),j.useGameStore.setState(function(e){var t,n,r,i,o,s,l,c,u,d,m,p,h;return tS(tS({},e),{},{isGameStarted:!0,currentRound:null!=(t=a.currentRound)?t:1,currentPlayer:null!=(n=a.currentPlayer)?n:1,startingPlayer:null!=(r=a.startingPlayer)?r:1,initialStartingPlayer:null!=(i=a.initialStartingPlayer)?i:1,scores:{top:(null!=(o=a.teams.top.jassPoints)?o:0)+(null!=(s=a.teams.top.weisPoints)?s:0),bottom:(null!=(l=a.teams.bottom.jassPoints)?l:0)+(null!=(c=a.teams.bottom.weisPoints)?c:0)},weisPoints:{top:null!=(u=a.teams.top.weisPoints)?u:0,bottom:null!=(d=a.teams.bottom.weisPoints)?d:0},striche:{top:tS(tS({},f),null!=(m=a.teams.top.striche)?m:{}),bottom:tS(tS({},f),null!=(p=a.teams.bottom.striche)?p:{})},roundHistory:null!=(h=a.roundHistory)?h:[],isGameCompleted:!1,isRoundCompleted:!1})})}}return}return e5?e$.useAuthStore.getState().isGuest?void N.useUIStore.getState().showNotification({message:"Im Gastmodus ist immer nur ein aktuelles Spiel m\xf6glich. Um deine Spielhistorie und Statistiken zu speichern, melde dich bitte an oder registriere dich.",type:"info",position:null!=P?P:void 0,isFlipped:"top"===P,actions:[{label:"Zur\xfcck",onClick:T},{label:"OK",onClick:function(){T(),(0,eQ.p)(H,"/auth/register?origin=offline",void 0,!0)}}]}):void N.useUIStore.getState().showNotification({type:"success",message:"M\xf6chtest du das n\xe4chste Spiel beginnen?",position:null!=P?P:void 0,isFlipped:"top"===P,actions:[{label:"Zur\xfcck",onClick:T},{label:"Weiterjassen!",onClick:(e=ty(tb().mark(function e(){var t;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T(),console.log("[ResultatKreidetafel] Starte neues Spiel - Game Transition wird angezeigt..."),j.useGameStore.getState().setTransitioning(!0),e.prev=1,e.next=2,o();case 2:e.next=4;break;case 3:throw e.prev=3,console.error("[ResultatKreidetafel] Fehler beim Starten des neuen Spiels:",t=e.catch(1)),j.useGameStore.getState().setTransitioning(!1),t;case 4:case"end":return e.stop()}},e,null,[[1,3]])})),function(){return e.apply(this,arguments)})}]}):void N.useUIStore.getState().showNotification({message:"Bitte erst bedanken, bevor ein neues Spiel gestartet wird.",type:"warning",position:null!=P?P:void 0,isFlipped:"top"===P,actions:[{label:"Verstanden",onClick:T}]})},[eT,e5,P,T]),tx=(0,c.useCallback)(ty(tb().mark(function e(){var t,n,r,i,o,a,s,l,c,u,f,d,m,p,h,g,b,v,y,x,S,w,O,k,I,E,P,C,A,L,G,D,R,_,F,M,z,K,U,B,W,J,Z,V,Y,$,q,en,er,ei,eo,ea,es,el,ef,ed,em,ep,eh,eg,eb,ex,eS,ew;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N.useUIStore.getState().signingState,r=N.useUIStore.getState().resultatKreidetafel.swipePosition,i=N.useUIStore.getState(),o=j.useGameStore.getState(),a=eu.useJassStore.getState(),s=ej.useTimerStore.getState(),l=(null==(t=a.currentSession)?void 0:t.participantPlayerIds)||[],c=null,"waitingTeam1"!==n||"bottom"!==r){e.next=1;break}c="bottom",e.next=3;break;case 1:if("waitingTeam2"!==n||"top"!==r){e.next=2;break}c="top",e.next=3;break;case 2:return e.abrupt("return");case 3:if(!c){e.next=53;break}if(i.recordSignature(c),"completed"!==N.useUIStore.getState().signingState){e.next=52;break}return f=o.activeGameId,d=null==(u=a.currentSession)?void 0:u.id,m=a.currentGameId,p=!1,N.useUIStore.setState(function(e){return{resultatKreidetafel:tS(tS({},e.resultatKreidetafel),{},{swipePosition:"bottom"})}}),e.next=4,new Promise(function(e){return setTimeout(e,500)});case 4:if(X(!0),!f){e.next=9;break}return e.prev=5,e.next=6,(0,eq.updateGameStatus)(f,"completed");case 6:p=!0,e.next=8;break;case 7:return e.prev=7,console.error("Failed to update game status:",e.catch(5)),i.showNotification({type:"error",message:"Fehler beim Speichern des Spielstatus."}),X(!1),e.abrupt("return");case 8:e.next=10;break;case 9:p=!0;case 10:if(!(p&&d&&null!==m&&f)){e.next=22;break}return e.prev=11,y=o.striche,S={top:(null==(x=a.getCurrentGame())?void 0:x.teams.top.total)||0,bottom:(null==x?void 0:x.teams.bottom.total)||0},w=o.playerNames,O=s.getGameDuration(m),k={top:(null==x?void 0:x.teams.top.weisPoints)||0,bottom:(null==x?void 0:x.teams.bottom.weisPoints)||0},I=o.startingPlayer,E=o.initialStartingPlayer,P=tw(o.roundHistory),C=null!=(h=null==(g=a.currentSession)?void 0:g.participantUids)?h:[],A=null!=(b=null==(v=a.currentSession)?void 0:v.gruppeId)?b:null,L=P.filter(function(e){return void 0===e.isActive||!0===e.isActive}),G=new Set,D=L.map(function(e){var t,n,r,i=tS({},e);if("_savedWeisPoints"in i&&delete i._savedWeisPoints,(0,tt.Aw)(i)){i.farbe&&G.add(i.farbe),void 0===i.strichInfo&&delete i.strichInfo;var o={top:0,bottom:0};(i.weisActions||[]).forEach(function(e){o[e.position]=(o[e.position]||0)+e.points}),i.weisPoints=o}return void 0===i.ansager&&delete i.ansager,void 0===i.startTime&&delete i.startTime,void 0===i.endTime&&delete i.endTime,void 0===i.playerTurns&&delete i.playerTurns,void 0===i.timerSnapshot&&delete i.timerSnapshot,void 0===i.previousRoundId&&delete i.previousRoundId,void 0===i.nextRoundId&&delete i.nextRoundId,(null==(t=i.scores)?void 0:t.weisPoints)===void 0&&i.scores&&(i.scores.weisPoints={top:0,bottom:0}),(null==(n=i.visualStriche)?void 0:n.top)===void 0&&i.visualStriche&&(i.visualStriche.top={stricheCounts:{20:0,50:0,100:0},restZahl:0}),(null==(r=i.visualStriche)?void 0:r.bottom)===void 0&&i.visualStriche&&(i.visualStriche.bottom={stricheCounts:{20:0,50:0,100:0},restZahl:0}),i}),R=Array.from(G),_=(0,tn.m$)(D),F=tw(o.roundHistory),M={gameNumber:m,finalScores:S,finalStriche:y,roundHistory:F,timestampCompleted:tu.Timestamp.now(),durationMillis:null!=O?O:0,weisPoints:k,startingPlayer:I,initialStartingPlayer:E,playerNames:w,trumpColorsPlayed:R,participantUids:C,groupId:A,activeGameId:f,eventCounts:{bottom:{sieg:0,berg:0,matsch:0,kontermatsch:0,schneider:0},top:{sieg:0,berg:0,matsch:0,kontermatsch:0,schneider:0}}},z={gameNumber:m,finalScores:S,finalStriche:y,eventCounts:(0,tn.pK)(M),playerNames:w,timestampCompleted:tu.Timestamp.now(),weisPoints:k,startingPlayer:I,initialStartingPlayer:E,trumpColorsPlayed:R,roundHistory:D,participantUids:C,groupId:A,activeGameId:f,completedAt:tu.Timestamp.now(),durationMillis:null!=O?O:0,totalRoundDurationMillis:_.totalRoundDurationMillis,trumpfCountsByPlayer:_.trumpfCountsByPlayer,roundDurationsByPlayer:_.roundDurationsByPlayer,Rosen10player:_.Rosen10player},j.useGameStore.setState(function(e){return tS(tS({},e),{},{isGameCompleted:!0})}),e.prev=12,K=(0,tp.U8)(),e.next=13,K.queueGameFinalization(d,z,"HIGH");case 13:case 16:e.next=18;break;case 14:return e.prev=14,console.error("[ResultatKreidetafel] ❌ Failed to queue game finalization, falling back to direct save:",e.catch(12)),e.prev=15,e.next=16,(0,eq.saveCompletedGameToFirestore)(d,m,z,!1);case 17:e.prev=17,console.error("[ResultatKreidetafel] ❌ Both queue and fallback failed:",e.catch(15)),i.showNotification({type:"error",message:"Fehler beim Archivieren des Spiels."});case 18:return e.next=19,new Promise(function(e){return setTimeout(e,1500)});case 19:e.next=21;break;case 20:e.prev=20,console.error("Failed to save completed game summary:",e.catch(11)),i.showNotification({type:"error",message:"Fehler beim Archivieren des Spiels."});case 21:e.next=23;break;case 22:f?p?d&&m>0||console.warn("[ResultatKreidetafel] Skipping summary save due to missing sessionId or gameNumber.",{currentSessionIdFromStore:d,gameNumberToSave:m}):console.warn("[ResultatKreidetafel] Skipping summary save because status update failed."):console.log("[ResultatKreidetafel] Skipping summary save because no activeGameId (Offline/Guest).");case 23:if(!d){e.next=27;break}return e.prev=24,e.next=25,(0,eq.updateSessionActiveGameId)(d,null);case 25:e.next=27;break;case 26:e.prev=26,console.error("Fehler beim Leeren der activeGameId in der Session:",e.catch(24));case 27:if(U=function(){var e=ty(tb().mark(function e(){var t,n;return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null==(t=a.currentSession)?void 0:t.id,o.setTransitioning(!0),e.next=1,a.finalizeGame();case 1:if(s.finalizeJassEnd(),o.resetGameState({newActiveGameId:null,nextStarter:1,settings:{farbeSettings:ee.FT,scoreSettings:et.$d,strokeSettings:ec.zh}}),s.resetAllTimers(),i.clearResumableGameId(),i.resetSigningProcess(),i.closeJassFinishNotification(),X(!1),T(),a.resetJass(),o.resetGameState({newActiveGameId:null,settings:{farbeSettings:ee.FT,scoreSettings:et.$d,strokeSettings:ec.zh}}),s.resetAllTimers(),!(ev&&ey)){e.next=3;break}return e.next=2,(0,eQ.p)(H,"/tournaments/".concat(ey));case 2:case 4:e.next=6;break;case 3:if(!n){e.next=5;break}return e.next=4,(0,eQ.p)(H,"/view/session/".concat(n,"?fromJassCompletion=true"));case 5:return console.warn("[ResultatKreidetafel] Konnte nicht zur Session-Ansicht weiterleiten, da keine Session-ID gefunden wurde."),e.next=6,(0,eQ.p)(H,"/");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),s.getAnalytics(),B=eH(),!(p&&d&&m>0&&B)){e.next=46;break}if(console.log("[ResultatKreidetafel] Attempting to call finalizeSession Cloud Function for REAL online session ".concat(d,", expecting game ").concat(m)),!Q){e.next=28;break}console.warn("[ResultatKreidetafel] finalizeSession is already in progress. Skipping duplicate call."),e.next=45;break;case 28:X(!0),W=(0,tm.Uz)(tf.xv,"us-central1"),J=(0,tm.Qg)(W,"finalizeSession"),Z=0,V=3,Y=2e3,e.prev=29;case 30:if(!(Z<V)){e.next=44;break}if(Z++,e.prev=31,console.log("[ResultatKreidetafel] Calling finalizeSession (Attempt ".concat(Z,")...")),$=void 0,!a.currentSession){e.next=36;break}return er=o.playerNames,ei=a.currentSession.participantUids||[],eo=[],ea=void 0,e.prev=32,console.log("[ResultatKreidetafel] Lade participantPlayerIds direkt aus Firestore f\xfcr Session ".concat(d,"...")),es=(0,tu.getFirestore)(tf.xv),el=(0,tu.doc)(es,"sessions",d),e.next=33,(0,tu.getDoc)(el);case 33:(ef=e.sent).exists()?(eo=(ed=ef.data()).participantPlayerIds||[],ea=ed.startedAt,console.log("[ResultatKreidetafel] participantPlayerIds aus Firestore erhalten: ".concat(eo.length," IDs")),console.log("[ResultatKreidetafel] startedAt aus Firestore erhalten:",ea)):console.warn("[ResultatKreidetafel] Session-Dokument ".concat(d," nicht gefunden in Firestore")),e.next=35;break;case 34:e.prev=34,console.error("[ResultatKreidetafel] Fehler beim Lesen von participantPlayerIds aus Firestore:",e.catch(32));case 35:em=eo.length>0?eo:l.length>0?l:a.currentSession.participantPlayerIds||[],console.log("[ResultatKreidetafel] Finale participantPlayerIds: ".concat(em.length," IDs (firestore: ").concat(eo.length,", preserved: ").concat(l.length,", current: ").concat((null==(q=a.currentSession.participantPlayerIds)?void 0:q.length)||0,")")),ep=tI(em,er),console.log("[ResultatKreidetafel] initialSessionData prepared:",JSON.stringify($={participantUids:ei,participantPlayerIds:em,playerNames:er,gruppeId:(null==(en=a.currentSession)?void 0:en.gruppeId)||null,startedAt:ea||function(){var e,t=null==(e=a.currentSession)?void 0:e.startedAt;return t instanceof tu.Timestamp||"number"==typeof t?t:Date.now()}(),teams:ep.teams,pairingIdentifiers:ep.pairingIdentifiers})),e.next=37;break;case 36:console.warn("[ResultatKreidetafel] currentSession in jassStore is null, cannot send full initialSessionData.");case 37:if(d){e.next=38;break}throw Error("Session ID is undefined despite isRealOnlineSession check");case 38:return e.next=39,J({sessionId:d,expectedGameNumber:m,initialSessionData:$});case 39:return eh=e.sent,console.log("[ResultatKreidetafel] finalizeSession SUCCESS (Attempt ".concat(Z,"):"),eh.data),e.abrupt("continue",44);case 40:if(e.prev=40,ew=e.catch(31),console.warn("[ResultatKreidetafel] finalizeSession FAILED (Attempt ".concat(Z,"):"),ew),!((null==ew||null==(eg=ew.details)?void 0:eg.customCode)==="GAME_NOT_YET_VISIBLE"&&Z<V)){e.next=42;break}return console.log("[ResultatKreidetafel] Custom Precondition failed (Game ".concat(m," likely not visible yet). Retrying in ").concat(Y/1e3,"s...")),e.next=41,new Promise(function(e){return setTimeout(e,Y)});case 41:return e.abrupt("continue",30);case 42:return console.error("[ResultatKreidetafel] FINAL Error calling finalizeSession after ".concat(Z," attempts:"),ew),eb="Fehler beim Finalisieren der Session-Statistik.",ew.code&&ew.message?eb="Fehler (".concat(ew.code,"): ").concat(ew.message):ew instanceof Error&&(eb=ew.message),i.showNotification({type:"error",message:eb}),e.abrupt("continue",44);case 43:e.next=30;break;case 44:return e.prev=44,e.finish(44);case 45:e.next=47;break;case 46:console.warn("[ResultatKreidetafel] Skipping finalizeSession Cloud Function call: Not a real online session or missing data. IsRealOnlineSession: ".concat(B,", StatusUpdated: ").concat(p,", SessionID: ").concat(!!d,", GameNumber: ").concat(m));case 47:return console.log("[ResultatKreidetafel] Session finalisiert. Weiterleitung zu GameViewerKreidetafel..."),e.next=48,U();case 48:if(!(ex=d)){e.next=50;break}return e.next=49,(0,eQ.p)(H,"/view/session/".concat(ex));case 49:e.next=51;break;case 50:return console.error("[ResultatKreidetafel] No sessionId available for redirect"),e.next=51,(0,eQ.p)(H,"/start");case 51:console.log("[ResultatKreidetafel] FullscreenLoader ausblenden nach Weiterleitung..."),X(!1),e.next=53;break;case 52:eS="bottom"===c?"top":"bottom",i.setResultatPosition(eS);case 53:case"end":return e.stop()}},e,null,[[5,7],[11,20],[12,14],[15,17],[24,26],[29,,44,45],[31,40],[32,34]])})),[T,H,e4,A,e_,eN,e3,e1,tv,e8,eH]),tN=(0,er.Z)(e6),tO=(0,er.Z)(e8),tE=(0,er.Z)(tv),tP=(0,c.useRef)(null),tC=ea().overlayScale,tA=(0,u.zh)({opacity:+!!E,transform:"scale(".concat(E?tC:.95,") rotate(").concat(C?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}}),tT=(0,u.zh)({});(0,c.useEffect)(function(){tP.current},[E,eB.length,eL]),(0,c.useEffect)(function(){E&&z&&(!K||K.id!==F.nI.RESULTAT_INFO)&&T()},[E,z,K,T]),(0,c.useEffect)(function(){E&&N.useUIStore.setState(function(e){return{}})},[E]);var tL=(0,c.useMemo)(function(){var e=j.useGameStore.getState(),t=eu.useJassStore.getState().onlineCompletedGames,n=eu.useJassStore.getState().games;if(eu.useJassStore.getState().currentGameId,ev){var r,i,o,a,s=e.activeGameId;return e.isGameStarted&&!e.isGameCompleted&&s?[{id:s,gameNumber:s,teams:{top:{striche:tS({},eU.top),jassPoints:e.scores.top-(null!=(r=e.weisPoints.top)?r:0),weisPoints:null!=(i=e.weisPoints.top)?i:0,total:e.scores.top,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}},bottom:{striche:tS({},eU.bottom),jassPoints:e.scores.bottom-(null!=(o=e.weisPoints.bottom)?o:0),weisPoints:null!=(a=e.weisPoints.bottom)?a:0,total:e.scores.bottom,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}}},timestamp:Date.now(),sessionId:null!=eE?eE:"",currentRound:e.currentRound,startingPlayer:e.startingPlayer,initialStartingPlayer:e.initialStartingPlayer,currentPlayer:e.currentPlayer,roundHistory:e.roundHistory,currentHistoryIndex:e.currentHistoryIndex,historyState:e.historyState,isGameStarted:e.isGameStarted,isRoundCompleted:e.isRoundCompleted,isGameCompleted:e.isGameCompleted,__isPlaceholder:!0,__isActive:!0}]:[]}var l=[];if(eR){l=tw(t);var c=e.activeGameId,u="idle"!==N.useUIStore.getState().signingState;if(e.isGameStarted&&!e.isGameCompleted&&c&&!u&&!l.some(function(e){var t="gameNumber"in e?e.gameNumber:e.id,n=eu.useJassStore.getState().currentGameId;return String(t)===String(c)||"gameNumber"in e&&e.gameNumber===n})){var f,d,m,p,h={id:c,gameNumber:c,teams:{top:{striche:tS({},eU.top),jassPoints:e.scores.top-(null!=(f=e.weisPoints.top)?f:0),weisPoints:null!=(d=e.weisPoints.top)?d:0,total:e.scores.top,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}},bottom:{striche:tS({},eU.bottom),jassPoints:e.scores.bottom-(null!=(m=e.weisPoints.bottom)?m:0),weisPoints:null!=(p=e.weisPoints.bottom)?p:0,total:e.scores.bottom,bergActive:!1,bedankenActive:!1,isSigned:!1,playerStats:{}}},timestamp:Date.now(),sessionId:null!=eE?eE:"",currentRound:e.currentRound,startingPlayer:e.startingPlayer,initialStartingPlayer:e.initialStartingPlayer,currentPlayer:e.currentPlayer,roundHistory:e.roundHistory,currentHistoryIndex:e.currentHistoryIndex,historyState:e.historyState,isGameStarted:e.isGameStarted,isRoundCompleted:e.isRoundCompleted,isGameCompleted:e.isGameCompleted,__isPlaceholder:!0,__isActive:!0};l.push(h)}}else l=n;return l.sort(function(e,t){var n;return("timestampCompleted"in e&&e.timestampCompleted?e.timestampCompleted instanceof tu.Timestamp?e.timestampCompleted.toMillis():e.timestampCompleted:"timestamp"in e?e.timestamp:0)-("timestampCompleted"in t&&t.timestampCompleted?t.timestampCompleted instanceof tu.Timestamp?t.timestampCompleted.toMillis():t.timestampCompleted:"timestamp"in t?t.timestamp:0)}).map(function(e,t){return tS(tS({},e),{},{displayNumber:t+1})})},[ev,eR,eC,eP,eU,eE,j.useGameStore.getState().isGameStarted,j.useGameStore.getState().isGameCompleted,j.useGameStore.getState().activeGameId]);(0,c.useEffect)(function(){var e=tP.current;if(E&&e){var t=setTimeout(function(){tP.current&&(tP.current.scrollTop=tP.current.scrollHeight)},0);return function(){return clearTimeout(t)}}},[E,A,tL]);var tG=(0,c.useCallback)(ty(tb().mark(function e(){return tb().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!ev||!eb||!ey)){e.next=1;break}return console.error("[ResultatKreidetafel] Incomplete data for completing passe."),N.useUIStore.getState().showNotification({type:"error",message:"Fehlende Daten zum Abschlie\xdfen der Passe."}),e.abrupt("return");case 1:if(e5){e.next=2;break}return N.useUIStore.getState().showNotification({message:"Bitte erst bedanken, bevor die Passe abgeschlossen wird.",type:"warning",position:"top"===P?"top":"bottom",isFlipped:"top"===P,actions:[{label:"Verstanden",onClick:function(){return T()}}]}),e.abrupt("return");case 2:return Y(!0),e.prev=3,e.next=4,(0,td.completeAndRecordTournamentPasse)(eb,ey);case 4:if(!e.sent){e.next=6;break}return N.useUIStore.getState().showNotification({type:"success",message:"Passe erfolgreich abgeschlossen!"}),j.useGameStore.getState().resetGame(1),eu.useJassStore.getState().clearActiveGameForSession(ey),T(),e.next=5,(0,eQ.p)(H,"/tournaments/".concat(ey));case 5:e.next=7;break;case 6:N.useUIStore.getState().showNotification({type:"error",message:"Fehler beim Abschlie\xdfen der Passe."});case 7:e.next=9;break;case 8:e.prev=8,console.error("[ResultatKreidetafel] Unexpected error completing passe:",e.catch(3)),N.useUIStore.getState().showNotification({type:"error",message:"Unerwarteter Fehler beim Abschlie\xdfen der Passe."});case 9:return e.prev=9,Y(!1),e.finish(9);case 10:case"end":return e.stop()}},e,null,[[3,8,9,10]])})),[ev,eb,ey,T,H,e5,P]);return E||ei||Q?(0,p.jsxs)(p.Fragment,{children:[ei&&(0,p.jsx)(th.A,{text:"N\xe4chstes Spiel wird vorbereitet..."}),Q&&(0,p.jsx)(th.A,{text:"Daten und Statistiken werden aktualisiert..."}),es&&(0,p.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-70 z-50"}),E&&(0,p.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50",onClick:function(e){e.target===e.currentTarget&&T()},children:[(0,p.jsxs)(u.CS.div,tS(tS({},ta),{},{style:tA,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-6 shadow-lg select-none",onClick:function(e){return e.stopPropagation()},children:[(0,p.jsxs)("div",{className:"text-center mb-4",children:[(0,p.jsx)("h2",{className:"text-2xl font-bold text-white",children:ef&&ep?ep.title:e0}),(0,p.jsx)("p",{className:"text-gray-400",children:ef&&ep?ep.date:eW})]}),(0,p.jsx)("button",{onClick:function(){return N.useUIStore.setState(function(e){return{resultatKreidetafel:tS(tS({},e.resultatKreidetafel),{},{swipePosition:C?"bottom":"top"})}})},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n              text-white hover:text-gray-300 transition-all duration-1000\n              w-24 h-24 flex items-center justify-center\n              rounded-full\n              ".concat(C?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,p.jsx)($.cO3,{className:"w-8 h-8"})}),(0,p.jsx)("button",{onClick:T,className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white",children:(0,p.jsx)($.yGN,{size:24})}),!O&&eA&&!eT&&(0,p.jsx)("button",{onClick:e6,className:"\n                absolute left-2 top-2\n                w-10 h-10 rounded-full \n                flex items-center justify-center\n                bg-gray-600 hover:bg-gray-500\n                text-white hover:text-white\n                transition-all duration-150\n                shadow-md hover:shadow-lg\n              ","aria-label":"Zur\xfcck",children:(0,p.jsx)($.APV,{className:"w-5 h-5"})}),(0,p.jsxs)("div",{className:"grid grid-cols-[1fr_4fr_4fr] gap-4 mb-2",children:[(0,p.jsx)("div",{}),(0,p.jsx)("div",{className:"text-center text-white",children:"Team 1"}),(0,p.jsx)("div",{className:"text-center text-white",children:"Team 2"})]}),(0,p.jsxs)("div",{className:"grid grid-cols-[1fr_4fr_4fr] gap-4 mb-4",children:[(0,p.jsx)("div",{}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,p.jsx)(tk,{name:e_[1],isStarter:tL&&tL.length>0&&(null==(v=tL[0])?void 0:v.initialStartingPlayer)===1}),(0,p.jsx)(tk,{name:e_[3],isStarter:tL&&tL.length>0&&(null==(y=tL[0])?void 0:y.initialStartingPlayer)===3})]}),(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,p.jsx)(tk,{name:e_[2],isStarter:tL&&tL.length>0&&(null==(x=tL[0])?void 0:x.initialStartingPlayer)===2}),(0,p.jsx)(tk,{name:e_[4],isStarter:tL&&tL.length>0&&(null==(S=tL[0])?void 0:S.initialStartingPlayer)===4})]})]}),(0,p.jsx)("div",{className:"border-t border-b border-gray-700",children:(0,p.jsx)("div",{ref:tP,className:"statistik-container max-h-[280px] overflow-y-auto overflow-x-auto",children:(0,p.jsx)(u.CS.div,{style:tT,className:"py-2 min-w-max",children:(0,p.jsx)(eX,{teams:eG,games:tL,activeGameScores:eF,currentGameId:eL,playerNames:e_,cardStyle:eI,strokeSettings:ew,scoreSettings:eN,onSwipe:e7,gameTypeLabel:I})})})}),(0,p.jsxs)("div",{className:"grid grid-cols-[0.5fr_5fr_5fr] gap-4 mt-4",children:[(0,p.jsx)("div",{className:"text-gray-400 text-center pr-4",children:"Total:"}),(0,p.jsx)("div",{className:"flex justify-center -ml-[30px]",children:(0,p.jsx)("div",{className:"text-2xl font-bold text-white w-[100px] text-center",children:ef&&ep?"striche"===A?ep.totals.striche.bottom:ep.totals.punkte.bottom:"striche"===A?e4.striche.bottom:e4.punkte.bottom})}),(0,p.jsx)("div",{className:"flex justify-center -ml-[12px]",children:(0,p.jsx)("div",{className:"text-2xl font-bold text-white w-[100px] text-center",children:ef&&ep?"striche"===A?ep.totals.striche.top:ep.totals.punkte.top:"striche"===A?e4.striche.top:e4.punkte.top})})]}),(0,p.jsx)("div",{className:"flex justify-center mt-4 mb-2",children:(0,p.jsx)("div",{className:"flex justify-center items-center space-x-2 bg-gray-700/50 px-1.5 py-1 rounded-full",children:ti.D.map(function(e){return(0,p.jsx)("div",{className:"w-2 h-2 rounded-full transition-all duration-200 ".concat(A===e.id?"bg-white/80 shadow-sm":"bg-gray-500/50")},e.id)})})}),(0,p.jsx)("div",{id:"resultat-action-area",children:O?(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{onClick:T,className:" w-full py-2 px-4 text-white rounded-lg font-medium text-base transition-all duration-150 bg-gray-600 hover:bg-gray-700 leading-tight ",children:"Schliessen"})}):ev?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{onClick:tG,className:"\n                        w-full py-3 px-6 text-white rounded-lg font-medium text-base\n                        transition-all duration-150\n                        bg-blue-600 hover:bg-blue-700\n                        flex items-center justify-center gap-2\n                        leading-tight\n                        ".concat(tO.buttonClasses," // Wiederverwende Button-Stil?\n                        ").concat(Q?"opacity-70 cursor-wait":""," // NEU: Ladezustand-Styling\n                      "),disabled:Q,children:Q?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(te.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Schlie\xdfe Passe ab..."]}):"Passe abschlie\xdfen"})}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{onClick:T,className:" w-full py-2 px-4 text-white rounded-lg font-medium text-base transition-all duration-150 bg-gray-600 hover:bg-gray-700 leading-tight ",children:"Schliessen"})})]}):"idle"===G?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"\n                      grid gap-4 mt-4 \n                      ".concat(eT&&eA?"grid-cols-3":"grid-cols-2 justify-between","\n                    "),children:[eA&&eT&&(0,p.jsx)("button",tS(tS({},tN.handlers),{},{disabled:!eA,className:"\n                          py-2 px-4 text-white rounded-lg font-medium text-base\n                          transition-all duration-150\n                          ".concat(eA?"bg-gray-600":"bg-gray-500/50 cursor-not-allowed","\n                          hover:bg-gray-700\n                          leading-tight\n                          ").concat(tN.buttonClasses,"\n                        "),children:["1 Spiel","zur\xfcck"].map(function(e,t){return(0,p.jsxs)(c.Fragment,{children:[e,0===t&&(0,p.jsx)("br",{})]},t)})})),(0,p.jsx)(ek.P.button,{onClick:tg,initial:{scale:.9},animate:{scale:1},whileTap:{scale:.95},className:"\n                        py-2 px-4 text-white rounded-lg font-medium text-base\n                        transition-all duration-150\n                        bg-blue-600 hover:bg-blue-700 border-b-4 border-blue-800\n                        flex items-center justify-center gap-2\n                        leading-tight shadow-lg\n                        active:scale-[0.98] active:border-b-2\n                        ".concat(tO.buttonClasses,"\n                      "),children:["Jass","beenden"].map(function(e,t){return(0,p.jsxs)(c.Fragment,{children:[e,0===t&&(0,p.jsx)("br",{})]},t)})}),(0,p.jsx)(ek.P.button,{onClick:tv,initial:{scale:.9},animate:{scale:1},whileTap:{scale:.95},className:"\n                        py-2 px-4 text-white rounded-lg font-medium text-base\n                        transition-all duration-150 shadow-lg\n                        active:scale-[0.98] active:border-b-2\n                        ".concat(eT?"bg-gray-600 hover:bg-gray-700 border-b-4 border-gray-800":"bg-green-600 hover:bg-green-700 border-b-4 border-green-800","\n                        leading-tight\n                        ").concat(tE.buttonClasses,"\n                      "),children:eJ.split("\n").map(function(e,t){return(0,p.jsxs)(c.Fragment,{children:[e,0===t&&eJ.includes("\n")&&(0,p.jsx)("br",{})]},t)})})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{onClick:T,className:" w-full py-2 px-4 text-white rounded-lg font-medium text-base transition-all duration-150 bg-gray-600 hover:bg-gray-700 leading-tight ",children:"Schliessen"})})]}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)(ek.P.button,{onClick:tx,initial:{scale:.9},animate:{scale:1},whileTap:{scale:.95},className:"w-full bg-amber-400 text-white text-lg font-bold py-4 px-8 rounded-xl shadow-lg hover:bg-amber-500 transition-colors border-b-4 border-amber-600 active:scale-[0.98] active:border-b-2 disabled:opacity-50 disabled:cursor-not-allowed\n                                 ".concat("bottom"===P&&D||"top"===P&&R?"opacity-70 cursor-default":""),disabled:"waitingTeam1"===G&&"top"===P||"waitingTeam2"===G&&"bottom"===P||"bottom"===P&&D||"top"===P&&R,children:"bottom"===P&&D||"top"===P&&R?"SIGNIERT":"Signieren Team ".concat("bottom"===P?"1":"2")})})})})]})),(0,p.jsx)(tl.A,{})]})]}):null};var tP=function(e){var t=(0,j.useGameStore)(),n=t.navigateHistory,r=t.canNavigateForward,i=t.canNavigateBackward,o=t.currentHistoryIndex,a=t.validateHistoryAction;(0,N.useUIStore)().showHistoryWarning;var s=(0,c.useRef)(Date.now()),l=(0,c.useRef)(0);(0,c.useCallback)(function(e){a()&&n(e)},[n,a]);var u=(0,c.useCallback)(function(t){var o=Date.now();if(!(o-s.current<300)){s.current=o;var a="top"===e,l=a&&"left"===t||!a&&"right"===t;(l?r():i())&&n(l?"forward":"backward")}},[e,n,r,i]),f=(0,c.useCallback)(function(e){var t=Date.now();if(t-l.current<500)return void console.log("[useNavigationHistory] Debouncing navigation: ".concat(500-(t-l.current),"ms cooldown remaining"));l.current=t,n(e)},[n]);return{handleSwipe:u,isInPast:o>-1,canNavigateForward:r,canNavigateBackward:i,navigateBack:(0,c.useCallback)(function(){f("backward")},[f]),navigateForward:(0,c.useCallback)(function(){f("forward")},[f])}},tC=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=Math.floor(e/1e3),r=Math.floor(n/60),i=Math.floor(r/60),o=r%60,a=n%60;return i>0?t?"".concat(i,":").concat(o.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(i,":").concat(o.toString().padStart(2,"0")):t?"".concat(r.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"0:".concat(r.toString().padStart(2,"0"))};function tA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tT(e){return(tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tL=(0,n(8106).v)(function(e,t){return{currentMultiplier:1,setMultiplier:function(t){return e({currentMultiplier:t})},getDividedPoints:function(e){return Math.ceil(e/t().currentMultiplier)},getRemainingPoints:function(e,t){if(!t||"object"!==tT(t))return{title:"SIEG",remaining:0};var n=V.Q5.getState().currentGroup,r=(null==n?void 0:n.scoreSettings)||N.useUIStore.getState().scoreSettings,i=t[e]||0,o=t["top"===e?"bottom":"top"]||0,a=r.values.sieg,s=r.values.berg,l=r.values.schneider;if(!r.enabled.berg)return{title:"SIEG",remaining:a-i};if(o>=s){if(!r.enabled.schneider||i>=l)return{title:"SIEG",remaining:a-i};if(r.enabled.schneider)return{title:"SCHNEIDER",remaining:l-i}}return i>=s?{title:"SIEG",remaining:a-i}:r.enabled.berg?{title:"BERG",remaining:s-i}:{title:"SIEG",remaining:a-i}}}});let tG=function(e){var t,n=e.mainTitle,r=e.subTitle,i=e.points,o=e.className,a=e.numberSize,s=void 0===a?"text-xl":a,l=(e.scoreSettings,e.scores),u=e.team,f=tL(),d=f.currentMultiplier,m=f.setMultiplier,h=f.getDividedPoints,g=f.getRemainingPoints,b=(0,V.Q5)(function(e){return e.currentGroup}),v=(0,N.useUIStore)(function(e){return e.farbeSettings}),y=function(e){if(Array.isArray(e))return e}(t=(0,c.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return tA(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tA(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),x=y[0],S=y[1];(0,c.useEffect)(function(){var e,t,n=null!=(e=null==b||null==(t=b.farbeSettings)?void 0:t.values)?e:v.values;if(!n){console.warn("[MultiplierCalculator] Keine Farbeinstellungen gefunden."),m(1);return}var r=Object.values(n).filter(function(e){return"number"==typeof e&&e>1}).sort(function(e,t){return t-e});m(r.length>0?r[0]:1)},[m]);var w=c.useMemo(function(){var e,t,n=null!=(e=null==b||null==(t=b.farbeSettings)?void 0:t.values)?e:v.values;if(!n)return 1;var r=Object.values(n).filter(function(e){return"number"==typeof e&&e>1}).sort(function(e,t){return t-e});return r.length>0?r[0]:1},[b,v]),j=d>0?"".concat(d,"x"):"-";return(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:"text-gray-400",children:n}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-0 ".concat(void 0===o?"":o),children:[(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("span",{className:"text-gray-400 text-xs",children:r}),(0,p.jsx)("div",{className:"".concat(s," font-bold mt-0"),children:i})]}),(0,p.jsx)("button",{onClick:function(){var e=tL.getState().currentMultiplier;w<=2||m(e>2?e-1:w)},onMouseDown:function(){return S(!0)},onMouseUp:function(){return S(!1)},onMouseLeave:function(){return S(!1)},onTouchStart:function(){return S(!0)},onTouchEnd:function(){return S(!1)},className:"bg-orange-500 hover:bg-orange-600 text-white rounded-lg px-2 py-3 self-center mx-auto h-12 w-14 mt-4 transition-all duration-100 ".concat(x?"bg-orange-700 scale-95 opacity-80":"scale-100 opacity-100","\n            ").concat(w<=1?"opacity-50 cursor-not-allowed":"","\n          }"),disabled:w<=1,children:j}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsxs)("span",{className:"text-gray-400 text-xs",children:[d,"-fach"]}),(0,p.jsx)("div",{className:"".concat(s," font-bold mt-0"),children:h(g(u,l||{top:0,bottom:0}).remaining)})]})]})]})};function tD(e,t,n){var r={rain:{y:-.3,gravity:1,startVelocity:15,spread:80},explosion:{y:.5,gravity:1,startVelocity:30,spread:360},cannon:{y:1.1,gravity:1,startVelocity:45,spread:45},firework:{y:-.1,gravity:1,startVelocity:60,spread:20}}[n];return("firework"===n?!t:t)?{y:1.1,gravity:-1,startVelocity:r.startVelocity,spread:r.spread}:r}function tR(e){return(tR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t_(){t_=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(E([])));S&&S!==n&&r.call(S,a)&&(y=S);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==tR(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(tR(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function tF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tM(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function tz(e,t,n,r){var i=tK(r);return(0,q.A)({particleCount:Math.floor(i/10),origin:{x:e,y:t},spread:140,gravity:.7*n,startVelocity:n>0?-23:23,decay:.96,ticks:1e3,colors:["#FFD700","#FFA500","#FF8C00"]})}var tK=function(e){switch(e){case"low":return 500;case"medium":return 1e3;case"high":return 2500;case"super":return 5e3;case"extreme":return 1e4;default:return 0}};function tU(e){return(tU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tH(){tH=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(E([])));S&&S!==n&&r.call(S,a)&&(y=S);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==tU(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(tU(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function tB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tW(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function tJ(e,t,n,r,i){var o=tZ(r);return(0,q.A)({particleCount:"shoot"===i?10:Math.floor(o/5),origin:{x:e,y:t},spread:"shoot"===i?15:360,startVelocity:"shoot"===i?n<0?45:-45:30,gravity:n,decay:"shoot"===i?.92:.94,shapes:["circle"],colors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"],scalar:1,ticks:"shoot"===i?100:"extreme"===r?200:150})}var tZ=function(e){switch(e){case"low":return 500;case"medium":return 1e3;case"high":return 2500;case"super":return 5e3;case"extreme":return 1e4;default:return 0}},tV=function(e){var t=e.chargeLevel,n=e.team,r=e.isFlipped,i=tD(n,void 0!==r&&r,"rain"),o=i.y,a=i.gravity;if(t&&"none"!==t){var s=[.2,.35,.5,.65,.8];s.forEach(function(e,n){setTimeout(function(){return tz(e,o,a,t)},100*n)}),("high"===t||"super"===t)&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){return tz(e,o,a,t)},100*n)})},300),"extreme"===t&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){return tz(e,o,a,t)},50*n)})},600)}},tY=function(e){var t=e.chargeLevel,n=e.team,r=e.isFlipped;if("none"!==t){var i=tD(n,void 0!==r&&r,"firework"),o=i.y,a=i.gravity,s=[.2,.5,.8];s.forEach(function(e,n){setTimeout(function(){tJ(e,o,a,t,"shoot"),setTimeout(function(){tJ(e,.5,-a,t,"explode")},300)},500*n)}),("high"===t||"super"===t)&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){tJ(e,o,a,t,"shoot"),setTimeout(function(){tJ(e,.5,-a,t,"explode")},300)},500*n)})},800),"extreme"===t&&setTimeout(function(){s.forEach(function(e,n){setTimeout(function(){tJ(e,o,a,t,"shoot"),setTimeout(function(){tJ(e,.5,-a,t,"explode")},300),setTimeout(function(){tJ(e+.1,.5,-a,t,"explode"),tJ(e-.1,.5,-a,t,"explode")},400)},400*n)})},1600)}};function t$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tq(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tQ=function(e,t,n){var r={yellow:"bg-yellow-600",green:"bg-green-600",red:"bg-red-600"}[t],i={yellow:"border-yellow-900",green:"border-green-900",red:"border-red-900"}[t],o={yellow:"shadow-yellow-400",green:"shadow-green-400",red:"shadow-red-400"}[t];switch(e){case"extreme":return"".concat(r," ").concat(i," shadow-[0_0_30px_5px] ").concat(o," animate-pulse");case"super":return"".concat(r," ").concat(i," shadow-[0_0_20px_3px] ").concat(o);case"high":return"".concat(r," ").concat(i," shadow-[0_0_15px_2px] ").concat(o);case"medium":return"".concat(r," ").concat(i," shadow-[0_0_10px_1px] ").concat(o);case"low":return"".concat(r," ").concat(i," shadow-[0_0_5px_0px] ").concat(o);default:return"".concat(r," ").concat(i)}},tX={berg:"rain",sieg:"firework"},t0=function(e){var t=e.onAction,n=e.isButtonActive,r=e.isActiveGlobal,i=e.color,o=e.disabled,a=void 0!==o&&o,s=e.children,l=e.type,u=e.team,f=(0,N.useUIStore)().calculator.isFlipped,d=t$((0,c.useState)(!1),2),m=d[0],h=d[1],g=t$((0,c.useState)("none"),2),b=g[0],v=g[1],y=(0,c.useRef)(null),x=(0,c.useRef)(null),S=(0,c.useRef)(!1),w=function(e){if(e>=tt.s2.extreme)return"extreme";if(e>=tt.s2.super)return"super";if(e>=tt.s2.high)return"high";if(e>=tt.s2.medium)return"medium";if(e>=tt.s2.low)return"low";return"none"},j=function(){a||(h(!0),x.current=Date.now(),y.current=setInterval(function(){v(w(Date.now()-(x.current||0)))},100))},O=function(){if(!a){h(!1),y.current&&(clearInterval(y.current),y.current=null);var e=x.current?Date.now()-x.current:0,i=w(e);t({chargeDuration:{duration:e,level:i},type:l,team:u,isActivating:!n}),r||("berg"===l?tV({chargeLevel:i,team:u,effectType:tX[l],isFlipped:f}):"sieg"===l&&tY({chargeLevel:i,team:u,effectType:tX[l],isFlipped:f})),setTimeout(function(){v("none"),x.current=null,S.current=!1},300)}};return(0,p.jsx)("div",{className:"relative",children:(0,p.jsx)("button",{onMouseDown:function(){S.current||j()},onMouseUp:function(){S.current||O()},onMouseLeave:function(){!S.current&&m&&O()},onTouchStart:function(){S.current=!0,j()},onTouchEnd:function(){O()},onTouchCancel:function(){O()},onContextMenu:function(e){return e.preventDefault()},disabled:a,className:"\n          w-full py-4 text-white rounded-xl font-bold\n          transition-all duration-150\n          ".concat(n?tQ(b,i,m):"bg-gray-600 border-gray-500","\n          border-b-4 border-t border-l border-r\n          ").concat(a?"opacity-50 cursor-not-allowed":"","\n          ").concat(m?"translate-y-1 shadow-inner opacity-80":"shadow-lg","\n          select-none touch-manipulation\n          -webkit-touch-callout: none\n          -webkit-user-select: none\n          user-select: none\n        "),children:(0,p.jsx)("div",{className:"relative",children:s})})})},t1={none:[{text:"Alles klar! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Passt! Auswertung anschauen?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Fertig! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sauber bedankt! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Prima! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Bravo! Zum Gesamtergebnis?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Super! Resultate checken?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Perfekt! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Tiptop! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Wunderbar! Zur Gesamtauswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}}],low:[{text:"Ein feiner Sieg! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sauber gespielt! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Gut gemacht! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sch\xf6ne Runde! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Freude herrscht! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Fein gemacht! Resultate checken?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Nett gespielt! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Gut gek\xe4mpft! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Saubere Sache! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}}],medium:[{text:"Ohooo! Da wurde aber sch\xf6n bedankt! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Hoppla! Das war aber ein feiner Zug! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Ui ui ui! Das kann sich sehen lassen! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Aha! Da hat jemand Freude! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Hoho! Freud herrscht! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Jesses! Freude muss sein! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Aha! Da strahlt aber jemand! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Prost! Gute Feier! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Hurra! Siegen macht gl\xfccklich! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Juhui! Zelebrieren muss sein! Resultate angucken?",buttons:{cancel:"Nein",confirm:"Klar!"}}],high:[{text:"Bei den Jasskarten! Was f\xfcr ein Triumph! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter! Das war aber ein Meisterst\xfcck! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bock! Was f\xfcr ein Zug! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel, Herrgott! Das war aber stark! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz! Was f\xfcr eine Show! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Herrjemine! Das war aber grandios! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Trumpf! Was f\xfcr ein Coup! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Jetzt h\xe4t's gesch\xe4llet! Zum Resultat?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heidewitzka! Was f\xfcr ein Geniestreich! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot! Das war aber meisterhaft! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}}],super:[{text:"Potz Blitz! Da hat aber jemand seinen Sieg zelebriert! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bimbam! Was f\xfcr eine Siegesfeier! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmelherrgottsakrament! Das war episch! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter und Hagelschlag! Was f\xfcr ein Spektakel! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliges Kanonenrohr! Das war legend\xe4r! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Donnerkeil! Was f\xfcr ein Feuerwerk! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Holzaxt! Das war gigantisch! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel, Arsch und Zwirn! Was f\xfcr eine Show! Schauen wir?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Strohsack! Das war bombastisch! Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potz Blitz und Kreuzsakrament! Was f\xfcr ein Triumph! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}}],extreme:[{text:"Himmel, Herrgott und Eichel Buur! Dieser Sieg scheint besonders s\xfcss zu sein! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Schilten K\xf6nig! Da klebt wohl jemand am Siegesknopf fest! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Obenabe! Da hat's aber jemand mit der Siegesfreude! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Trumpf Buur! Das ist ja eine Siegesparade der Extraklasse! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliges Undenufe! Da wird der Sieg aber ausgekostet bis zum letzten Tropfen! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel und Nell! Wenn das kein Grund zum Feiern ist, was dann? Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Wiis! Da tanzt wohl jemand Sirtaki auf dem Jassteppich! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter und Rosen K\xf6nig! Das nenn ich mal eine Sieges-Choreographie! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Match! Da wird ja mehr gefeiert als beim Schellen Ober! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Schellen Ass! Das ist ja eine Siegesfeier wie beim St\xf6ck-Match! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel, Arsch und Wolkenbruch! Da hat's wohl jemand nicht eilig mit dem Weiterspielen! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Strohsack! Der Siegestanz dauert ja l\xe4nger als ein Schieber! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Kreuzjass! Da wird der Sieg zelebriert wie ein Blatt mit Vier K\xf6nigen! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Donnerwetter und Slalom! Diese Siegesfreude ist ja gr\xf6sser als beim Kontermatch! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Mis\xe8re! Da hat's wohl jemand nicht so mit der Bescheidenheit! Zur Auswertung?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bock! Diese Siegesfeier ist ja l\xe4nger als eine Runde Differenzler! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot und Gusti! Da wird ja mehr zelebriert als beim Papst sein Namenstag! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Himmel und H\xf6lle! Das ist ja eine Siegesfeier wie nach einem Tout! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Bimbam! Da wird der Sieg ausgekostet wie der letzte Tropfen im Glas! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Herrgott! Diese Siegesfreude schreit ja f\xf6rmlich nach einem Jassturnier! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Prooooost! Tanzt da jemand schon auf dem Tisch? Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Juhuiii! Die Korken knallen, die Gl\xe4ser klingen! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Ol\xe9, Ol\xe9! Das schreit nach einer Siegesrunde! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Stimmung, Stimmung! Die Party ist noch lange nicht vorbei! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Bier f\xfcr alle! Der Sieg will begossen werden! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"La-Ola! Die Siegesrunde geht auf's Haus! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Fiesta, Fiesta! Der Siegestanz ist in vollem Gange! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Auf die Tische, fertig, los! Das wird eine lange Nacht! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Ramba Zamba! Die Siegesparty ist nicht mehr zu stoppen! Zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heute wird getanzt, gesungen und gefeiert! Weiter?",buttons:{cancel:"Nein",confirm:"Klar!"}}]},t2=function(e){var t=t1[e];return t[Math.floor(Math.random()*t.length)]},t5={none:[{text:"Berg! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],low:[{text:"Berg geschafft! Resultate anschauen?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Berg! Weiter zur \xdcbersicht?",buttons:{cancel:"Nein",confirm:"Klar!"}}],medium:[{text:"Donnerwetter! Ein Berg wie aus dem Bilderbuch! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz! Das war ein Berg der Extraklasse! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],high:[{text:"Heiliger Strohsack! Was f\xfcr ein Berg! Zur Resultattafel??",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Sapperlot! Der Berg ist ja h\xf6her als das Matterhorn! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],super:[{text:"Donnerwetter und Hagelschlag! Das ist ja ein Himalaya! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Potzblitz und Donnerkeil! Ein Berg wie der Mount Everest! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}],extreme:[{text:"Himmel, Herrgott und Eichel Buur! Das ist ja ein Berg bis in den Himmel! Resultate?",buttons:{cancel:"Nein",confirm:"Klar!"}},{text:"Heiliger Schilten K\xf6nig! Der Berg ragt ja bis in die Wolken! Zur Resultattafel?",buttons:{cancel:"Nein",confirm:"Klar!"}}]},t4=function(e){var t=t5[e];return t[Math.floor(Math.random()*t.length)]};function t3(e){return(t3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t6(){t6=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(E([])));S&&S!==n&&r.call(S,a)&&(y=S);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==t3(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(t3(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function t8(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function t7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t7(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==t3(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==t3(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===t3(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||nt(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){if(e){if("string"==typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nn(e,t)}}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}let nr=function(e){var t,r,i,o=e.isOpen,a=e.onClose,s=(0,j.useGameStore)(),l=s.currentRound,f=s.currentPlayer,d=s.playerNames,m=s.isBergActive,h=s.isSiegActive,g=s.addBerg,b=s.addSieg,v=s.scores,y=(0,eu.useJassStore)().currentGameId,x=(0,V.Q5)(function(e){return e.currentGroup}),S=ne((0,c.useState)(!1),2);S[0],S[1];var w=ne((0,c.useState)(!1),2);w[0],w[1];var O=ne((0,c.useState)(""),2),k=O[0],I=O[1],E=ne((0,c.useState)(""),2),P=E[0],C=E[1],A=ne((0,c.useState)(""),2),T=A[0],L=A[1],G=ne((0,c.useState)(!0),2),D=G[0],R=G[1],M=(0,ej.useTimerStore)(),z=M.pauseTimer,K=M.resumeTimer,U=M.getCurrentTime,H=M.gameStartTime,B=M.roundStartTime,W=M.jassStartTime,J=(0,N.useUIStore)(),Z=J.isPaused,Y=J.pauseGame,q=J.resumeGame,Q=J.lastDoubleClickPosition,X=J.calculator.isFlipped,en=J.setCalculatorFlipped,er=J.showNotification,ei=J.endCharge,eo=J.isReadOnlyMode,es=tL(),el=es.currentMultiplier,ec=es.getDividedPoints,ef=es.getRemainingPoints,ed=X?"top":"bottom",em=null!=(t=null==x?void 0:x.scoreSettings)?t:et.$d,ep=null!=(r=null==x?void 0:x.farbeSettings)?r:ee.FT,eh=function(){var e;return null==em||null==(e=em.enabled)||!e.berg||m("top")||m("bottom")},eg=function(){if(Z)return void er({message:"Zum Fortfahren bitte die Pause beenden und oben links auf  ▶️  klicken!",type:"warning",position:X?"top":"bottom",isFlipped:X});var e=tL.getState(),t=Object.values(ep.values).filter(function(e){return"number"==typeof e&&e>1}),n=t.length>0?Math.max.apply(Math,function(e){if(Array.isArray(e))return nn(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||nt(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):1;e.setMultiplier(n),a()};(0,c.useEffect)(function(){var e=function(){var e=U();H&&I(tC(e-H,!1)),B&&C(tC(e-B,!0)),W&&L(tC(e-W,!1))};if(e(),o&&!Z){var t=setInterval(e,1e3),n=setInterval(function(){var t=ej.useTimerStore.getState(),n=t.gameStartTime,r=t.roundStartTime;(n!==H||r!==B)&&(console.log("⏱️ [SCHNELLES UPDATE] Timer haben sich ge\xe4ndert"),e())},50);return function(){clearInterval(t),clearInterval(n)}}},[o,Z,U,H,B,W,y,l,v,ej.useTimerStore.getState().isPaused]);var eb=ea().overlayScale,ev=(0,u.zh)({opacity:+!!o,transform:"scale(".concat(o?eb:.95,") rotate(").concat(X?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}});(0,c.useEffect)(function(){o&&Q&&en("top"===Q)},[o,Q]);var ey=(0,_.b)(),ex=ey.isActive,eS=(0,ey.getCurrentStep)();(0,c.useEffect)(function(){o&&ex&&(null==eS?void 0:eS.id)!==F.nI.JASS_SETTINGS&&(null==eS?void 0:eS.id)!==F.nI.GAME_INFO&&a()},[o,ex,eS,a]),(0,c.useEffect)(function(){o&&document.dispatchEvent(new Event("gameInfoOpen"))},[o]),(0,c.useEffect)(function(){if(o){R(!1);var e=setTimeout(function(){R(!0)},230);return function(){return clearTimeout(e)}}},[o]);var ew=function(){er({message:"M\xf6chtest du die Pause aufheben um fortzufahren?",type:"warning",actions:[{label:(0,p.jsxs)("div",{className:"flex items-center justify-center w-full gap-1.5",children:[(0,p.jsx)($.aze,{className:"w-4 h-4"}),(0,p.jsx)("span",{children:"Pause aufheben"})]}),onClick:function(){q(),a()}}]})},eN=function(e){if(eo)return void er({type:"info",message:"Als Zuschauer kannst du dich nicht bedanken."});if(Z)return void er({message:"Bitte Pause-Modus beenden",type:"warning",position:X?"top":"bottom",isFlipped:X});var t=X?"top":"bottom";if(h("top"===t?"bottom":"top"))return void er({type:"warning",message:"Der Gegner hat bereits BEDANKEN aktiviert!",position:t,isFlipped:X});b(t),e.isActivating&&setTimeout(function(){var n=t2(e.chargeDuration.level);er({type:"bedanken",message:n.text,position:t,isFlipped:X,preventClose:!1,actions:[{label:n.buttons.cancel,onClick:function(){ei(t,"bedanken"),a()}},{label:n.buttons.confirm,onClick:function(){ei(t,"bedanken"),a(),N.useUIStore.setState(function(e){return{resultatKreidetafel:t9(t9({},e.resultatKreidetafel),{},{isOpen:!0,swipePosition:t})}})}}]})},function(e){switch(e){case"extreme":return 5250;case"super":return 3250;case"high":return 2250;case"medium":return 1250;case"low":return 750;default:return 250}}(e.chargeDuration.level))},eO=ne((0,c.useState)(!1),2),ek=eO[0],eI=eO[1],eE=function(e){j.useGameStore.setState(function(t){return t9(t9({},t),{},{currentPlayer:e},1===l&&{startingPlayer:e})});var t,r=j.useGameStore.getState().activeGameId;r&&setTimeout((t=t6().mark(function t(){var i,o,a;return t6().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,null!=(i=window.__FIRESTORE_SYNC_API__)&&i.markLocalUpdate&&window.__FIRESTORE_SYNC_API__.markLocalUpdate(),t.next=1,Promise.resolve().then(n.bind(n,3558));case 1:return o=t.sent.updateActiveGame,a=t9({currentPlayer:e,lastUpdated:(0,tu.serverTimestamp)()},1===l&&{startingPlayer:e,initialStartingPlayer:e}),t.next=2,o(r,a);case 2:t.next=4;break;case 3:t.prev=3,console.error("[GameInfoOverlay] Firebase sync failed:",t.catch(0)),er({type:"warning",message:"Spieler-Update konnte nicht synchronisiert werden."});case 4:case"end":return t.stop()}},t,null,[[0,3]])}),function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(e){t8(o,r,i,a,s,"next",e)}function s(e){t8(o,r,i,a,s,"throw",e)}a(void 0)})}),0)},eP=f||1,eC=d||{1:"Spieler 1",2:"Spieler 2",3:"Spieler 3",4:"Spieler 4"},eA=v||{top:0,bottom:0};return(0,p.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 ".concat(o?"":"pointer-events-none"),onClick:function(e){D&&e.target===e.currentTarget&&eg()},children:(0,p.jsxs)(u.CS.div,{style:ev,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-6 shadow-lg select-none",onClick:function(e){return e.stopPropagation()},children:[(0,p.jsx)("button",{onClick:function(){return en(!X)},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n            text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center\n            rounded-full\n            ".concat(X?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,p.jsx)($.cO3,{className:"w-8 h-8"})}),(0,p.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,p.jsx)("button",{onClick:Z?function(){K(),q()}:function(){z(),Y()},className:"\n              w-10 h-10 rounded-full flex items-center justify-center\n              ".concat(Z?"bg-green-600 hover:bg-green-500":"bg-gray-600 hover:bg-gray-500","\n              text-white hover:text-white\n              transition-all duration-150\n              shadow-md hover:shadow-lg\n            "),"aria-label":Z?"Weiter":"Pause",children:Z?(0,p.jsx)($.aze,{className:"w-5 h-5"}):(0,p.jsx)($.GHw,{className:"w-5 h-5"})}),(0,p.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"Spielstand"}),(0,p.jsx)("button",{onClick:eg,className:"w-12 h-12 rounded-full flex items-center justify-center -mr-2 -mt-2 text-gray-400 hover:text-white transition-colors -webkit-tap-highlight-color-transparent",children:(0,p.jsx)($.yGN,{className:"w-5 h-5"})})]}),(0,p.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,p.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-white",children:[(0,p.jsxs)("div",{className:"text-center pl-5",children:[(0,p.jsx)("span",{className:"text-gray-400 text-xs",children:"Spiel"}),(0,p.jsx)("div",{className:"text-xl font-bold",children:y})]}),(0,p.jsxs)("div",{className:"text-center -ml-10 pl-0",children:[(0,p.jsx)("span",{className:"text-gray-400 text-xs",children:"Runde"}),(0,p.jsx)("div",{className:"text-xl font-bold",children:l})]}),(0,p.jsxs)("div",{className:"text-center -ml-10 pl-0",children:[(0,p.jsx)("span",{className:"text-gray-400 text-xs",children:"Spieldauer"}),(0,p.jsx)("div",{className:"text-xl font-bold",children:k})]}),(0,p.jsxs)("div",{className:"text-center -ml-8 pl-0",children:[(0,p.jsx)("span",{className:"text-gray-400 text-xs",children:"Jassdauer"}),(0,p.jsx)("div",{className:"text-xl font-bold",children:T})]})]}),(0,p.jsxs)("div",{className:"text-center text-white mt-1",children:[(0,p.jsx)("span",{className:"text-gray-400",children:"Spieler"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("button",{onClick:function(){return eI(!ek)},className:"w-full text-3xl font-bold p-2 bg-gray-700 hover:bg-gray-600 bg-opacity-50 rounded-xl mt-1 transition-colors",children:eC[eP]||"Spieler ".concat(eP)}),ek&&(0,p.jsx)("div",{className:"absolute left-0 right-0 mt-1 bg-gray-700 rounded-xl overflow-hidden shadow-lg z-50",children:Object.entries(eC).map(function(e){var t=ne(e,2),n=t[0],r=t[1];return(0,p.jsx)("button",{onClick:function(){eE(Number(n)),eI(!1)},className:"w-full p-3 text-left hover:bg-gray-600 transition-colors",children:r||"Spieler ".concat(n)},n)})})]})]}),(0,p.jsxs)("div",{className:"text-center text-white mt-1",children:[(0,p.jsx)("span",{className:"text-gray-400",children:"Zeit Runde"}),(0,p.jsx)("div",{className:"text-3xl font-bold p-2 bg-gray-700 bg-opacity-50 rounded-xl mt-1",children:P})]}),(0,p.jsx)("div",{className:"text-center text-white mt-3",children:(0,p.jsx)(tG,{mainTitle:"Punkte bis",subTitle:ef(X?"top":"bottom",eA).title,points:ef(X?"top":"bottom",eA).remaining,team:X?"top":"bottom",numberSize:"text-3xl",scoreSettings:em,scores:eA})}),(0,p.jsx)("div",{className:"text-center text-white mt-1",children:(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:"text-gray-400",children:"Gegner"}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-2 -mt-10",children:[(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("span",{className:"text-gray-400 text-xs",children:ef(X?"bottom":"top",eA).title}),(0,p.jsx)("div",{className:"text-xl font-bold mt-0",children:ef(X?"bottom":"top",eA).remaining})]}),(0,p.jsx)("div",{className:"invisible"}),(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsxs)("span",{className:"text-gray-400 text-xs",children:[el,"-fach"]}),(0,p.jsx)("div",{className:"text-xl font-bold mt-0",children:ec(ef(X?"bottom":"top",eA).remaining)})]})]})]})})]}),(0,p.jsx)("div",{className:"space-y-4 max-w-md mx-auto mt-12 mb-4",children:null!=em&&null!=(i=em.enabled)&&i.berg?(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsx)(t0,{onAction:function(e){if(eo)return void er({type:"info",message:"Als Zuschauer k\xf6nnen keine Punkte geschrieben werden."});if(Z)return void ew();var t=X?"top":"bottom";if(m("top"===t?"bottom":"top"))return void er({message:"Sorry, dein Gegner hat den BERG schon geschrieben!",type:"warning",position:t,isFlipped:X});g(t),e.isActivating&&setTimeout(function(){var n=t4(e.chargeDuration.level);er({type:"bedanken",message:n.text,position:t,isFlipped:X,preventClose:!1,actions:[{label:n.buttons.cancel,onClick:function(){ei(t,"berg"),a()}},{label:n.buttons.confirm,onClick:function(){ei(t,"berg"),a(),N.useUIStore.setState(function(e){return{resultatKreidetafel:t9(t9({},e.resultatKreidetafel),{},{isOpen:!0,swipePosition:t})}})}}]})},function(e){switch(e){case"extreme":return 5250;case"super":return 3250;case"high":return 2250;case"medium":return 1250;case"low":return 750;default:return 250}}(e.chargeDuration.level))},isButtonActive:m(ed),isActiveGlobal:m("top")||m("bottom"),color:"yellow",disabled:Z,type:"berg",team:ed,children:(0,p.jsx)("span",{className:"text-2xl",children:"Berg"})}),(0,p.jsx)(t0,{onAction:eN,isButtonActive:h(ed),isActiveGlobal:h("top")||h("bottom"),color:"yellow",disabled:Z||!eh(),type:"sieg",team:ed,children:(0,p.jsx)("span",{className:"text-2xl",children:"Bedanken"})})]}):(0,p.jsx)(t0,{onAction:eN,isButtonActive:h(ed),isActiveGlobal:h("top")||h("bottom"),color:"yellow",disabled:Z||!eh(),type:"sieg",team:ed,children:(0,p.jsx)("span",{className:"text-2xl",children:"Bedanken"})})})]})})};var ni=n(5797),no={WELCOME_SCREEN:"WELCOME_SCREEN",INSTALL_WELCOME:"INSTALL_WELCOME",INSTALL_SHARE:"INSTALL_SHARE",INSTALL_HOME:"INSTALL_HOME",INSTALL_FINAL:"INSTALL_FINAL",INSTALL_DONE:"INSTALL_DONE",FINAL_HINTS:"FINAL_HINTS"},na={WELCOME_SCREEN:"WELCOME_SCREEN",INSTALL_WELCOME:"INSTALL_WELCOME",INSTALL_SHARE:"INSTALL_SHARE",INSTALL_HOME:"INSTALL_HOME",INSTALL_FINAL:"INSTALL_FINAL",FINAL_HINTS:"FINAL_HINTS"},ns=function(e){return e.INTRODUCTION="INTRODUCTION",e}({}),nl={iOS:{WELCOME_SCREEN:{title:"Jetzt App installieren",message:"Installiere jetzt die digitale Jasstafel, die sich alles merkt und alles kann. Nie mehr Diskussionen ums Z\xe4hlen, keine Zeitverschwendung f\xfcr Rechnereien, keine zerknitterte Zettel.",secondaryMessage:"Ihr macht die Stiche – ich schreib die Striche.",image:"/welcome-guru.png"},INSTALL_WELCOME:{title:"Jassguru in 3 Schritten",message:"Die moderne Jassguru-App funktioniert ganz ohne App Store. In drei einfachen Schritten bist du startklar:",image:"/welcome-guru.png",desktopTitle:"Mobile App installieren",desktopMessage:"Jassguru ist eine Mobile App. Scanne einfach diesen QR-Code mit der Kamera deines Telefons.",desktopSecondaryMessage:"Die App wird direkt in Deinem Browser ge\xf6ffnet, wo Du sie mit wenigen Klicks installieren kannst."},INSTALL_SHARE:{title:"Schritt 1",message:"Tippe auf das Teilen-Symbol.",image:"/onboarding_pics/pfeilchenbox.png"},INSTALL_HOME:{title:"Schritt 2",message:'Scrolle hinunter und w\xe4hle "Zum Home-Bildschirm".',image:"/onboarding_pics/zumhomebildschirm.png"},INSTALL_FINAL:{title:"Schritt 3",message:'Tippe auf "Hinzuf\xfcgen".',image:"/onboarding_pics/hinzufuegen.png"},INSTALL_DONE:{title:"Fertig",message:"App \xf6ffnen und Jassen.",image:"/onboarding_pics/homescreen.png"},FINAL_HINTS:{title:"Hinweise",message:"",icon:eN.__w}},Android:{WELCOME_SCREEN:{title:"Jetzt App installieren",message:"Installiere jetzt die digitale Jasstafel, die sich alles merkt und alles kann. Nie mehr Diskussionen ums Z\xe4hlen, keine Zeitverschwendung f\xfcr Rechnereien, keine zerknitterte Zettel.",secondaryMessage:"Ihr macht die Stiche – ich schreib die Striche.",image:"/welcome-guru.png"},INSTALL_WELCOME:{title:"Jassguru in 3 Schritten",message:"Die moderne Jassguru-App funktioniert ganz ohne App Store. In drei einfachen Schritten bist du startklar:",icon:ni.QkS,image:"/welcome-guru.png",desktopTitle:"Mobile App installieren",desktopMessage:"Jassguru funktioniert am besten als App auf Deinem Smartphone. Scanne einfach diesen QR-Code mit der Kamera Deines Telefons.",desktopSecondaryMessage:"Die App wird direkt in Deinem Browser ge\xf6ffnet, wo Du sie mit wenigen Klicks installieren kannst."},INSTALL_SHARE:{title:"Schritt 1",message:"Klicke auf die drei Punkte.",image:"/onboarding_pics/android_menu.png"},INSTALL_HOME:{title:"Schritt 2",message:'W\xe4hle "Zum Startbildschirm hin..."',image:"/onboarding_pics/android_hinzufuegen.png"},INSTALL_FINAL:{title:"Schritt 3",message:"App \xf6ffnen und Jassen!",image:"/onboarding_pics/homescreen.png"},FINAL_HINTS:{title:"Hinweise",message:"Vermeide es, die App mehrfach zu installieren. Das kann zu unerw\xfcnschtem Verhalten f\xfchren.",secondaryMessage:"Beim ersten \xd6ffnen der App wirst du durch alle wichtigen Funktionen gef\xfchrt.",finalMessage:"Viel Spass beim Jassen!",image:"/welcome-guru.png"}}},nc=function(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)?"iOS":/android/.test(e)?"Android":"other"};function nu(e){return(nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nd(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nm=function(e,t,n){var r;return(r=function(e,t){if("object"!==nu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===nu(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},ns.INTRODUCTION,{title:"Willkommen",message:"Willkommen bei Jassguru",icon:eN.__w}),np=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=nc(),i="other"===r?"Android":r,o="iOS"===i?no:na,a=nf((0,c.useState)(n?"WELCOME_SCREEN":ns.INTRODUCTION),2),s=a[0],l=a[1],u=nf((0,c.useState)(!1),2),f=(u[0],u[1]);(0,c.useEffect)(function(){if(n){var e=Object.values(o),t=e.indexOf(s),r=e[t+1];if(r){var a=nl[i][r];"image"in a&&(new Image().src=a.image)}}},[s,n,i,o]);var d=(0,c.useCallback)(function(){var e=Object.values(n?o:ns),t=e.indexOf(s);l(t<e.length-1?e[t+1]:e[0])},[n,o,s]),m=(0,c.useCallback)(function(){var e=Object.values(n?o:ns),t=e.indexOf(s);l(t>0?e[t-1]:e[e.length-1])},[n,o,s]),p=(0,c.useCallback)(function(){N.useUIStore.getState().hideOnboarding(),f(!1)},[]),h=n?null==(e=nl[i])?void 0:e[s]:null!=(t=nm[s])?t:{title:"Fehler",message:"Inhalt nicht gefunden",icon:eN.__w};return h||console.error("Kein Content gefunden f\xfcr Step: ".concat(s)),{currentStep:s,content:h||{title:"",message:""},handleNext:d,handlePrevious:m,handleDismiss:p,canBeDismissed:!0,isBrowserOnboarding:n}},nh=n(2370);function ng(e){return(ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==ng(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ng(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ng(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ny(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nx(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nS="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=".concat(encodeURIComponent("https://jassguru.web.app")),nw=function(e){var t=e.show,n=e.step,r=e.content,i=e.onNext,o=e.onPrevious;if(e.onDismiss,e.canBeDismissed,e.isPWA,e.isBrowserOnboarding,nh.Cu)return console.log("[DEV MODE] OnboardingFlow: isDev is true. Rendering null."),null;var a=ea(),s=a.overlayScale,l=a.urlBarPosition,u=ny((0,c.useState)(0),2),f=u[0],d=u[1],m=ny((0,c.useState)(0),2),h=m[0],g=m[1],b=ny((0,c.useState)(!1),2),v=b[0],y=b[1],x=(0,er.Z)(o),S=(0,er.Z)(i);(0,c.useEffect)(function(){var e=function(){d(window.innerHeight),g(window.innerHeight-60-60-48),y(!("ontouchstart"in window)&&!(navigator.maxTouchPoints>0)||!!(window.innerWidth>=1024))};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var w=(0,c.useMemo)(function(){return f<600?"xs":f<700?"sm":f>=750?"lg":"md"},[f]),j=(0,c.useMemo)(function(){return Math.min(Math.max(Math.floor(.4*h),100),220)},[h]),N=(0,c.useMemo)(function(){return Math.min("lg"===w?380:"md"===w?320:"sm"===w?260:220,Math.floor(.65*h))},[h,w]),O="WELCOME_SCREEN"===n||"INSTALL_WELCOME"===n,k=v&&"INSTALL_WELCOME"===n;return t?(0,p.jsx)(eI.N,{children:t&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ek.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-[99998]"}),(0,p.jsx)(ek.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center z-[99999] \n              ".concat("top"===l?"pt-8 sm:pt-16 pb-4 sm:pb-8":"pt-4 sm:pt-8 pb-8 sm:pb-16"),children:(0,p.jsx)(ek.P.div,{initial:{scale:.95},animate:{scale:s,y:"top"===l?"xs"===w?20:40:"xs"===w?-20:-40},exit:{scale:.95},className:"bg-gray-800 ".concat(function(){switch(w){case"xs":return"p-3";case"sm":return"p-4";case"lg":return"p-6";default:return"p-5"}}()," rounded-lg shadow-lg w-full relative text-white \n                max-w-xs sm:max-w-sm md:max-w-md \n                ").concat("xs"===w?"max-h-[90vh] overflow-y-auto":""),children:(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[O?k?(0,p.jsx)(nj,{content:r,deviceSize:w,optimalImageHeight:j}):(0,p.jsx)(nN,{content:r,deviceSize:w,optimalImageHeight:j}):"FINAL_HINTS"===n?(0,p.jsx)(nO,{deviceSize:w,optimalImageHeight:j,optimalStepImageHeight:N}):(0,p.jsx)(nk,{content:r,deviceSize:w,optimalImageHeight:j,optimalStepImageHeight:N}),(0,p.jsx)(nI,{previousButton:x,nextButton:S,step:n,deviceSize:w,optimalImageHeight:j,optimalStepImageHeight:N})]})},n)})]})}):(console.log("OnboardingFlow: 'show' prop is false. Rendering null."),null)},nj=function(e){var t=e.content,n=e.deviceSize,r=Math.min(1.2*e.optimalImageHeight,220),i=t.desktopTitle||t.title,o=t.desktopMessage||t.message,a=t.desktopSecondaryMessage||t.secondaryMessage;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{className:"font-bold text-center text-white ".concat(function(){switch(n){case"xs":return"text-2xl mb-2";case"sm":return"text-2xl mb-3";case"lg":return"text-3xl mb-5";default:return"text-3xl mb-4"}}()),children:i}),(0,p.jsx)("div",{className:"flex justify-center items-center ".concat("xs"===n?"mb-2":"sm"===n?"mb-3":"mb-5"),children:(0,p.jsx)("img",{src:nS,alt:"QR-Code f\xfcr Jassguru App",style:{height:"".concat(r,"px"),width:"".concat(r,"px")},className:"object-contain bg-white p-2 rounded-md"})}),(0,p.jsx)("p",{className:"\n        text-center whitespace-pre-line ".concat(function(){switch(n){case"xs":return"text-sm mb-3";case"sm":return"text-base mb-4";case"lg":return"text-base mb-6";default:return"text-base mb-5"}}(),"\n      "),children:o}),a&&(0,p.jsx)("p",{className:"text-center ".concat("xs"===n?"text-sm mb-3":"text-base mb-6"),children:a})]})},nN=function(e){var t=e.content,n=e.deviceSize,r=e.optimalImageHeight;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{className:"font-bold text-center text-white ".concat(function(){switch(n){case"xs":return"text-2xl mb-2";case"sm":return"text-2xl mb-3";case"lg":return"text-3xl mb-5";default:return"text-3xl mb-4"}}()),children:t.title}),t.image&&(0,p.jsx)("img",{src:t.image,alt:"Jass Guru",style:{height:"".concat(r,"px")},className:"w-auto object-contain ".concat("xs"===n?"mb-2":"sm"===n?"mb-3":"mb-5")}),(0,p.jsx)("p",{className:"\n        text-center whitespace-pre-line ".concat(function(){switch(n){case"xs":return"text-sm mb-3";case"sm":return"text-base mb-4";case"lg":return"text-base mb-6";default:return"text-base mb-5"}}(),"\n        ").concat("Jassguru in 3 Schritten"===t.title&&("md"===n||"lg"===n)?"mb-12":"","\n      "),children:t.message}),t.secondaryMessage&&(0,p.jsx)("p",{className:"text-center ".concat("xs"===n?"text-sm mb-3":"text-base mb-6"),children:t.secondaryMessage})]})},nO=function(e){var t=e.deviceSize,n=e.optimalImageHeight,r=(e.optimalStepImageHeight,function(){switch(t){case"xs":return"text-base mb-2";case"sm":return"text-lg mb-2";case"lg":return"text-xl mb-3";default:return"text-lg mb-3"}}),i=function(){switch(t){case"xs":return"text-sm mb-3";case"sm":return"text-base mb-4";case"lg":return"text-base mb-6";default:return"text-base mb-5"}},o=Math.min(.8*n,180);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{className:"font-bold text-center text-white ".concat(function(){switch(t){case"xs":return"text-xl mb-2";case"sm":return"text-2xl mb-3";default:return"text-3xl mb-4"}}()),children:"Letzte Hinweise"}),(0,p.jsx)("img",{src:"/welcome-guru.png",alt:"Jass Guru",style:{height:"".concat(o,"px"),width:"auto"},className:"object-contain ".concat("xs"===t?"mb-2":"sm"===t?"mb-3":"mb-4")}),(0,p.jsx)("h3",{className:"font-semibold text-gray-300 ".concat(r()),children:"Achtung:"}),(0,p.jsx)("p",{className:"text-center ".concat(i()),children:"Vermeide es, die App mehrfach zu installieren – das kann zu unerw\xfcnschtem Verhalten f\xfchren!"}),(0,p.jsx)("h4",{className:"font-semibold text-gray-300 ".concat(r()),children:"N\xe4chster Schritt:"}),(0,p.jsx)("p",{className:"text-center ".concat(i()),children:"Du kannst das Browser-Fenster nach der Installation schliessen. Beim ersten \xd6ffnen der App wirst du durch alle wichtigen Funktionen gef\xfchrt."}),(0,p.jsx)("h2",{className:"font-bold text-center ".concat("xs"===t?"text-xl mb-4":"lg"===t?"text-2xl mb-8":"text-2xl mb-6"),children:"Gutes Jassen!"})]})},nk=function(e){var t=e.content,n=e.deviceSize,r=e.optimalImageHeight,i=e.optimalStepImageHeight,o=function(){switch(n){case"xs":return"text-sm mb-4";case"sm":return"text-base mb-5";case"lg":return"text-base mb-7";default:return"text-base mb-6"}};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{className:"font-bold text-center text-white ".concat(function(){switch(n){case"xs":return"text-xl mb-2";case"sm":return"text-2xl mb-3";case"lg":return"text-3xl mb-5";default:return"text-3xl mb-4"}}()),children:t.title}),t.image&&(0,p.jsx)("div",{className:"w-full mx-auto ".concat("xs"===n?"mb-3":"lg"===n?"mb-6":"mb-5"),children:(0,p.jsx)("img",{src:t.image,alt:t.title,style:{maxHeight:"".concat(void 0===i?r:i,"px"),maxWidth:"".concat("xs"===n?220:"sm"===n?260:"lg"===n?420:340,"px"),width:"auto"},className:"object-contain mx-auto"})}),t.icon&&(0,p.jsx)("div",{className:"text-yellow-600 ".concat("xs"===n?"mb-2":"lg"===n?"mb-5":"mb-4"),children:(0,p.jsx)(t.icon,{size:function(){switch(n){case"xs":return 36;case"sm":return 42;case"lg":return 56;default:return 48}}()})}),(0,p.jsx)("p",{className:"text-center ".concat(o()),children:t.message}),t.secondaryMessage&&(0,p.jsx)("p",{className:"text-center ".concat(o()),children:t.secondaryMessage})]})},nI=function(e){var t=e.previousButton,n=e.nextButton,r=(e.step,e.deviceSize);e.optimalImageHeight,e.optimalStepImageHeight;var i=function(){switch(r){case"xs":return"px-3 py-1.5 text-sm";case"sm":return"px-4 py-2 text-base";case"lg":return"px-6 py-2.5 text-lg";default:return"px-5 py-2 text-base"}};return(0,p.jsxs)("div",{className:"flex justify-between w-full gap-2 sm:gap-3",children:[(0,p.jsxs)("button",nv(nv({},t.handlers),{},{className:"\n          flex-1 bg-gray-600 text-white rounded-full \n          hover:bg-gray-700 transition-all duration-100 font-semibold \n          flex items-center justify-center ".concat(i(),"\n          ").concat(t.buttonClasses,"\n        "),children:[(0,p.jsx)(eN.QVr,{className:"".concat("xs"===r?"mr-0.5":"mr-1"),size:"xs"===r?12:14}),"Zur\xfcck"]})),(0,p.jsx)("button",nv(nv({},n.handlers),{},{className:"\n          flex-1 bg-yellow-600 text-white rounded-full \n          hover:bg-yellow-700 transition-all duration-100 font-semibold \n          flex items-center justify-center ".concat(i(),"\n          ").concat(n.buttonClasses,"\n        "),children:(0,p.jsxs)(p.Fragment,{children:["Weiter",(0,p.jsx)(eN.Z0P,{className:"".concat("xs"===r?"ml-0.5":"ml-1"),size:"xs"===r?12:14})]})}))]})},nE=n(9017),nP=n(4173),nC=n(8612),nA=n(874),nT=n(7332);F.nI.CALCULATOR_OPEN,eN.Mbp,F.nI.GAME_INFO,nC.HO_,F.nI.CALCULATOR,eN.Mbp,F.nI.NAVIGATE_SCORES,nA.oE7,F.nI.RESULTAT_INFO,eN.__w,F.nI.NEW_GAME,$.cO3;let nL=function(){var e=(0,_.b)(),t=e.startTutorial,n=e.resetTutorial,r=(0,N.useUIStore)(),i=r.closeTutorialInfo,o=r.isTutorialInfoOpen,a=(0,N.useUIStore)(function(e){return e.calculator.isFlipped}),s=(0,N.useUIStore)().setCalculatorFlipped,l=ea().overlayScale,c=[{title:"Punkte schreiben",id:F.nI.CALCULATOR_OPEN,icon:eN.Mbp},{title:"Weisen",id:F.nI.WEIS,icon:eN.HZi},{title:"Berg / Bedanken / Rechnen",id:F.nI.GAME_INFO,icon:nC.HO_},{title:"Resultate / Neues Spiel",id:F.nI.RESULTAT_INFO,icon:eO.oPo,onEnter:function(){window.dispatchEvent(new CustomEvent("tutorial:splitContainer",{detail:{action:"open",teamPosition:"bottom",stepId:F.nI.RESULTAT_INFO}}))}},{title:"L\xf6schen / Neuer Jass",id:F.nI.NEW_GAME,icon:eN.RCe,onEnter:function(){window.dispatchEvent(new CustomEvent("tutorial:splitContainer",{detail:{action:"open",teamPosition:"bottom",stepId:F.nI.NEW_GAME}}))}},{title:"Navigieren / Korrigieren",id:F.nI.NAVIGATE_SCORES,icon:nA.oE7},{title:"Individuelle Einstellungen",id:F.nI.JASS_SETTINGS,icon:eN.Pcn,onEnter:function(){window.dispatchEvent(new CustomEvent("tutorial:splitContainer",{detail:{action:"open",teamPosition:"bottom",stepId:F.nI.JASS_SETTINGS}}))}},{title:"Tipps & Tricks",id:F.nI.TIPS_WELCOME,icon:nT.T7J,onEnter:function(){t(F.nI.TIPS_WELCOME)}}],f=function(e){var r,o=c.find(function(t){return t.id===e});n(),null==o||null==(r=o.onEnter)||r.call(o),t(e,{isHelpMode:!0}),i()},d=(0,u.zh)({opacity:+!!o,transform:"scale(".concat(o?l:.95,") rotate(").concat(a?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}});return o?(0,p.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50",onClick:function(e){e.target===e.currentTarget&&i()},children:(0,p.jsxs)(u.CS.div,{style:d,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-4 shadow-lg select-none",onClick:function(e){return e.stopPropagation()},children:[(0,p.jsx)("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:"Hilfe & Anleitungen"}),(0,p.jsx)("div",{className:"flex justify-center mb-4",children:(0,p.jsx)(nA.zcf,{className:"w-12 h-12 text-yellow-600"})}),(0,p.jsx)("button",{onClick:function(){return s(!a)},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n            text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center rounded-full\n            ".concat(a?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,p.jsx)($.cO3,{className:"w-8 h-8"})}),(0,p.jsx)("button",{onClick:i,className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white transition-colors",children:(0,p.jsx)($.yGN,{size:28})}),(0,p.jsx)("div",{className:"overflow-y-auto max-h-[60vh] pr-2 space-y-2",children:c.map(function(e){return(0,p.jsxs)("button",{onClick:function(){return f(e.id)},className:"w-full flex items-center gap-4 p-4 rounded-lg text-gray-200 hover:bg-gray-700 transition-colors text-xl",children:[e.icon&&(0,p.jsx)(e.icon,{className:"w-7 h-7 text-yellow-600"}),(0,p.jsx)("span",{children:e.title})]},e.id)})})]})}):null};function nG(e){return(nG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nD(){nD=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(t,n,r,o){var a,s,l,c,u=Object.create((n&&n.prototype instanceof g?n:g).prototype);return i(u,"_invoke",{value:(a=t,s=r,l=new I(o||[]),c=d,function(t,n){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw n;return{value:e,done:!0}}for(l.method=t,l.arg=n;;){var r=l.delegate;if(r){var i=function t(n,r){var i=r.method,o=n.iterator[i];if(o===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=f(o,n.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,h;var s=a.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(r,l);if(i){if(i===h)continue;return i}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var o=f(a,s,l);if("normal"===o.type){if(c=l.done?p:"suspendedYield",o.arg===h)continue;return{value:o.arg,done:l.done}}"throw"===o.type&&(c=p,l.method="throw",l.arg=o.arg)}})}),u}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function g(){}function b(){}function v(){}var y={};c(y,a,function(){return this});var x=Object.getPrototypeOf,S=x&&x(x(E([])));S&&S!==n&&r.call(S,a)&&(y=S);var w=v.prototype=g.prototype=Object.create(y);function j(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function N(e,t){var n;i(this,"_invoke",{value:function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==nG(u)&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,s)})}s(l.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}})}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw TypeError(nG(t)+" is not iterable")}return b.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},j(N.prototype),c(N.prototype,s,function(){return this}),t.AsyncIterator=N,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new N(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},j(w),c(w,l,"Generator"),c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function nR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nR(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==nG(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nG(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nG(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nF(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,i)}function nM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nz(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nz(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nK=["/join","/login","/register","/groups/new","/groups/join"],nU=function(){var e=(0,N.useUIStore)(function(e){return e.menu.isOpen}),t=(0,N.useUIStore)(function(e){return e.calculator.isOpen}),n=(0,N.useUIStore)(function(e){return e.resultatKreidetafel.isOpen}),r=(0,N.useUIStore)(function(e){return e.isGameInfoOpen}),i=(0,N.useUIStore)(function(e){return e.settings.isOpen}),o=(0,N.useUIStore)(function(e){return e.isTutorialInfoOpen}),a=(0,N.useUIStore)(function(e){return e.isFarbeSettingsModalOpen}),s=(0,N.useUIStore)(function(e){return e.jassFinishNotification.isOpen}),l=(0,N.useUIStore)(function(e){return e.historyWarning.show}),u=(0,N.useUIStore)(function(e){return e.onboarding.show});return(0,c.useMemo)(function(){return e||t||n||r||i||o||a||s||l||u},[e,t,n,r,i,o,a,s,l,u])};function nH(e){var t=(0,c.useRef)();return(0,c.useEffect)(function(){t.current=e},[e]),t.current}let nB=function(e){var t,n,r,i,o,a,s,l,d,h,g,b,v,y,x,S,w,O,k,I,E,P,C,A=e.middleLineThickness,T=void 0===A?4:A,L=e.zShapeConfig;(0,f.useRouter)().pathname;var G=nM((0,c.useState)(!1),2),D=G[0],R=G[1],F=nM((0,c.useState)(null),2),M=F[0],z=F[1],K=(0,c.useRef)(!1),U=(0,c.useRef)(null),H=(0,f.useRouter)().pathname,B=(0,j.useGameStore)(),J=B.isGameStarted,Y=(B.isGameCompleted,B.scores),$=B.addWeisPoints,q=B.weisPoints,Q=B.activeGameId,ee=(B.isRoundCompleted,B.isTransitioning),et=Y||{top:0,bottom:0},en=et.top,er=void 0===en?0:en,ei=et.bottom,eo=void 0===ei?0:ei,es=(0,eu.useJassStore)().isJassStarted,el=(0,N.useUIStore)(),ec=el.menu.isOpen,ef=el.setMenuOpen,ed=el.historyWarning,em=el.isGameInfoOpen,ep=el.setGameInfoOpen,eh=el.setOverlayPosition,eg=el.isTutorialInfoOpen,ey=el.onboarding,ex=(el.showOnboarding,el.hideOnboarding,el.calculator),eS=el.openCalculator,ej=el.closeCalculator,eN=el.setLastDoubleClickPosition,eO=ex.isOpen,ek=(0,e$.useAuthStore)(function(e){return e.status}),eI=(0,_.b)(),eE=eI.isActive,eP=eI.hasCompletedTutorial,eC=(eI.getCurrentStep,eI.startTutorial),eA=nU(),eT=m();ey.show;var eL=ey.canBeDismissed,eG=nM((0,c.useState)(function(){return(0,nE.x)()}),1)[0],eD=(0,c.useMemo)(function(){var e=nK.includes(H);return!nh.Cu&&!eG&&!e},[nh.Cu,eG,H]),eR=np(eD),e_=eR.currentStep,eF=eR.content,eM=eR.handleNext,ez=eR.handlePrevious,eK=eR.handleDismiss;eR.canBeDismissed,(0,e$.useAuthStore)().isAuthenticated;var eU=ea(),eH=eU.scale;eU.deviceType;var eB=(0,c.useMemo)(function(){return!es&&!J},[es,J]),eW=(0,N.useUIStore)(function(e){return e.isReadOnlyMode});(0,c.useEffect)(function(){R(!0)},[]);var eJ=(0,c.useMemo)(function(){if(!D)return{topContainerHeight:0,bottomContainerHeight:0,middleLinePosition:0};var e=(0,nE.x)()?parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top")||"0"):0,t=eT-e-((0,nE.x)()?parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom")||"0"):0),n=Math.floor(t/2),r=Math.floor(t/2);return{topContainerHeight:r,bottomContainerHeight:r,middleLinePosition:n+e}},[eT,T,D]),eZ=eJ.topContainerHeight,eV=eJ.bottomContainerHeight,eY=eJ.middleLinePosition,eq=Z({initialPosition:0,maxOffset:.07*eT,position:"top"}),eQ=eq.y,eX=eq.mainOpacity,e0=(eq.oppositeOpacity,eq.animateSwipe),e1=eq.getBrightness,e2=Z({initialPosition:0,maxOffset:.07*eT,position:"bottom"}),e5=e2.y,e4=e2.mainOpacity,e3=(e2.oppositeOpacity,e2.animateSwipe),e6=e2.getBrightness,e8=(0,c.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left";("top"===e?e0:e3)(t);var n="top"===e?e1:e6;n(1.2),setTimeout(function(){return n(1)},300)},[e0,e3,e1,e6]),e9=tP("top"),te=tP("bottom"),tt=(0,c.useCallback)(function(e,t){if("left"===e||"right"===e){if(eA)return;var n="left"===e?"backward":"forward";("top"===t?e9:te).handleSwipe(e),e8(t,"backward"===n?"left":"right");return}if("up"===e||"down"===e){K.current=!0,setTimeout(function(){K.current=!1},500);var r="top"===t&&"up"===e||"bottom"===t&&"down"===e,i="top"===t&&"down"===e||"bottom"===t&&"up"===e,o=!eA||ec;r&&o?(eh(t),z(t),setTimeout(function(){ef(!0),e0(!0),e3(!0)},0)):i&&ec&&(ef(!1),z(null),eh(null),e0(!1),e3(!1))}},[eA,ec,e9,te,e0,e3,ef,eh,e8]),tn=(0,c.useCallback)(function(e){!K.current&&(eA||(eh(e),z(e),eS(),window.dispatchEvent(new CustomEvent("calculatorOpen"))))},[eA,eh,z,eS]),tr=(0,c.useCallback)(function(){ej(),z(null),eh(null)},[ej,z,eh]),ti=(n=(t={onSingleClick:function(e,t){var n=Date.now();if(U.current&&U.current.team===e&&n-U.current.time<300)return void console.log("⏱️ Weispunkt-Click zu schnell, wird ignoriert (Debounced).");if(z(e),"restzahl"===t)U.current={team:e,time:n},$(e,1);else{var r=parseInt(t,10)||20;U.current={team:e,time:n},$(e,r)}e8(e,"left")},onDoubleClick:function(e,t){(!eA||em)&&(eN(e),ep(!0))},middleLinePosition:eY,delay:230}).onSingleClick,r=t.onDoubleClick,o=void 0===(i=t.delay)?230:i,s=void 0===(a=t.middleLinePosition)?0:a,l=(0,c.useRef)(0),d=(0,c.useRef)(null),h=(0,c.useRef)(!1),g=(0,c.useRef)(0),v=(b=(0,N.useUIStore)()).canOpenGameInfo,y=b.setGameInfoOpen,x=b.setLastDoubleClickPosition,S=b.isReadOnlyMode,w=b.isGlobalClickDisabled,(0,c.useEffect)(function(){return function(){d.current&&clearTimeout(d.current)}},[]),{handleGlobalClick:(0,c.useCallback)(function(e){if(w)return void console.log("\uD83D\uDEAB Klick ignoriert: Globale Sperre ist aktiv.");if(!e.isTrusted){var t;console.warn("\uD83D\uDEAB Synthetischer Click ignoriert - kein echter User-Click",{type:e.type,timeStamp:e.timeStamp,target:null==(t=e.target)?void 0:t.tagName});return}var i=Date.now();if(!(i<g.current)){l.current;var a=e.target.closest('[data-strich-box="true"]'),c=null==a?void 0:a.getAttribute("data-position"),u=null==a?void 0:a.getAttribute("data-box-type"),f=c||(e.clientY<s?"top":"bottom");d.current&&(clearTimeout(d.current),d.current=null),i-l.current<o?(r&&r(f,u),d.current=null,l.current=0,h.current=!0,g.current=i+250,setTimeout(function(){h.current=!1},50)):(l.current=i,h.current||(d.current=setTimeout(function(){Date.now()>=g.current&&!h.current&&a&&c&&u&&n&&(console.log("\uD83D\uDDB1️ Einzelklick ausgef\xfchrt f\xfcr:",u,c),n(c,u)),l.current=0,d.current=null},o)))}},[o,s,y,x,n,v,S])}).handleGlobalClick;(0,c.useEffect)(function(){if(D){var e=setTimeout(function(){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},0),t=setTimeout(function(){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))},100);return function(){clearTimeout(e),clearTimeout(t)}}},[D]);var to=nH(er),ta=nH(eo),tl=nH(q.top),tc=nH(q.bottom);(0,c.useEffect)(function(){var e=er+q.top,t=(null!=to?to:er)+(null!=tl?tl:q.top);void 0!==to&&e!==t&&e8("top",e>t?"left":"right")},[er,q.top,to,tl,e8]),(0,c.useEffect)(function(){var e=eo+q.bottom,t=(null!=ta?ta:eo)+(null!=tc?tc:q.bottom);void 0!==ta&&e!==t&&e8("bottom",e>t?"left":"right")},[eo,q.bottom,ta,tc,e8]),(0,c.useEffect)(function(){},[er,eo,q.top,q.bottom,Q]);var tu=(0,c.useCallback)(function(){ef(!1),z(null),e0(!1),e3(!1)},[ef,e0,e3]),tf=(0,c.useCallback)(function(e){},[]);(0,c.useCallback)(function(){return!eP&&"authenticated"!==ek&&!J&&!es&&!eg},[J,es,eg,eP,ek]),(0,c.useEffect)(function(){if(!eW){var e=_.b.getState(),t=e.isActive,n=!e.hasCompletedTutorial&&"authenticated"!==ek&&!J&&!es&&!eg,r=nh.Cu&&nh.fM&&"authenticated"!==ek;D&&!t&&(n||r)&&eC()}},[D,ek,J,es,eg,eW,eC,eE,eP,nh.Cu]);var td=(0,c.useMemo)(function(){return eE?{handleSwipe:tt,handleLongPress:function(e){return tn(e)}}:null},[eE,tt,tn]);(0,c.useEffect)(function(){var e=function(e){var t=e.detail,n=t.action,r=t.teamPosition;"open"===n?(eh(r),z(r),ef(!0),requestAnimationFrame(function(){e0(!0),e3(!0)})):"close"===n&&(eh(null),z(null),ef(!1),requestAnimationFrame(function(){e0(!1),e3(!1)}))};return window.addEventListener("tutorial:splitContainer",e),function(){window.removeEventListener("tutorial:splitContainer",e)}},[e0,e3,ef,eh,z]),(0,c.useCallback)((O=nD().mark(function e(t){var n,r,i,o,a,s,l,c;return nD().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N.useUIStore.getState().resultatKreidetafel,N.useUIStore.setState(function(e){return{resultatKreidetafel:n_(n_({},e.resultatKreidetafel),{},{swipePosition:"bottom",isFlipped:!1})}}),e.next=1,new Promise(function(e){return setTimeout(e,400)});case 1:if(r=document.querySelector(".kreidetafel-content"),i=document.querySelector(".statistik-container"),o=document.querySelector(".button-container"),!(!r||!i||!o||!(r instanceof HTMLElement)||!(i instanceof HTMLElement)||!(o instanceof HTMLElement))){e.next=2;break}throw Error("Erforderliche Elemente nicht gefunden");case 2:return a={maxHeight:i.style.maxHeight,overflowY:i.style.overflowY,buttonDisplay:o.style.display},i.style.maxHeight="none",i.style.overflowY="visible",o.style.display="none",e.prev=3,e.next=4,ts()(r,{useCORS:!0,logging:!1,width:r.scrollWidth,height:r.scrollHeight,scale:2});case 4:return s=e.sent,e.next=5,new Promise(function(e){s.toBlob(function(t){t&&e(t)},"image/png",1)});case 5:if(l=e.sent,!navigator.share){e.next=6;break}return c="".concat(t,"\n\nGeneriert von:\n\uD83D\uDC49 jassguru.ch"),e.next=6,navigator.share({files:[new File([l],"jass-resultat.png",{type:"image/png"})],text:c});case 6:return e.prev=6,i.style.maxHeight=a.maxHeight,i.style.overflowY=a.overflowY,o.style.display=a.buttonDisplay,N.useUIStore.setState(function(e){return{resultatKreidetafel:n_(n_({},e.resultatKreidetafel),n)}}),e.finish(6);case 7:e.next=9;break;case 8:e.prev=8,console.error("Screenshot/Share Fehler:",e.catch(0));case 9:case"end":return e.stop()}},e,null,[[0,8],[3,,6,7]])}),k=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=O.apply(e,t);function o(e){nF(i,n,r,o,a,"next",e)}function a(e){nF(i,n,r,o,a,"throw",e)}o(void 0)})},function(e){return k.apply(this,arguments)}),[]);var tm=(0,V.Q5)().currentGroup,tp=(0,e$.useAuthStore)().user,th=(0,c.useRef)(null);(0,c.useEffect)(function(){var e,t=null==tp?void 0:tp.uid,n=null!=(e=null==tm?void 0:tm.id)?e:null;t&&n!==th.current?th.current=n:t||null===th.current||(th.current=null)},[tp,tm]);var tg=(0,j.useGameStore)();if(!D)return null;if(ee)return(0,p.jsx)("div",{className:"relative w-full h-screen overflow-hidden bg-chalk-black prevent-interactions max-w-xl mx-auto flex flex-col justify-center",style:{transform:"scale(".concat(eH,")"),transformOrigin:"center center"},children:(0,p.jsxs)("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-gray-900 bg-opacity-80 z-[9999]",children:[(0,p.jsx)("div",{className:"h-16 w-16 text-white animate-spin",children:"⟳"}),(0,p.jsx)("p",{className:"mt-4 text-white text-lg",children:"Spiel wird finalisiert und n\xe4chste Runde vorbereitet..."})]})});var tb=eB&&!eE;return(0,p.jsxs)("div",{className:"relative w-full h-screen overflow-hidden bg-chalk-black prevent-interactions max-w-xl mx-auto flex flex-col justify-center",onClick:ti,onContextMenu:function(e){return e.preventDefault()},style:{transform:"scale(".concat(eH,")"),transformOrigin:"center center"},children:[(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(nP.default,{onCloseMenu:tu}),eg&&(0,p.jsx)(nL,{})]}),eD&&(0,p.jsx)(nw,{show:eD&&!nh.Cu,step:e_,content:eF,onNext:eM,onPrevious:ez,onDismiss:eK,canBeDismissed:null!=eL&&eL,isPWA:eG,isBrowserOnboarding:eD}),tb?(0,p.jsx)(ev.A,{members:[]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(W,{position:"top",height:eZ,zShapeConfig:L,padding:"paddingTop",onSwipe:null!=(I=null==td?void 0:td.handleSwipe)?I:tt,y:eQ,mainOpacity:eX,getBrightness:e1,onLongPress:null!=(E=null==td?void 0:td.handleLongPress)?E:tn,score:er+q.top,triggerBlendEffect:tf,isHistoryNavigationActive:e9.isInPast}),(0,p.jsx)(u.CS.div,{style:{position:"absolute",left:"5%",width:"90%",top:eY-T/2,height:"".concat(T/2,"px"),transform:eQ.to(function(e){return"translateY(".concat(-e,"px)")})},className:"bg-chalk-red"}),(0,p.jsx)(u.CS.div,{style:{position:"absolute",left:"5%",width:"90%",top:eY,height:"".concat(T/2,"px"),transform:e5.to(function(e){return"translateY(".concat(e,"px)")})},className:"bg-chalk-red"}),(0,p.jsx)(ew,{currentPlayer:tg.currentPlayer,startingPlayer:tg.startingPlayer,currentRound:tg.currentRound,opacity:eX.get(),isOpen:ec,isGameStarted:!tg.isGameCompleted,gameStartTime:null,roundStartTime:null,startFadeIn:!ec}),(0,p.jsx)(W,{position:"bottom",height:eV,zShapeConfig:L,padding:"paddingBottom",onSwipe:null!=(P=null==td?void 0:td.handleSwipe)?P:tt,y:e5,mainOpacity:e4,getBrightness:e6,onLongPress:null!=(C=null==td?void 0:td.handleLongPress)?C:tn,score:eo+q.bottom,triggerBlendEffect:tf,isHistoryNavigationActive:te.isInPast}),eO&&(0,p.jsx)(eb,{isOpen:eO,onClose:tr,onCancel:tr,initialValue:0,clickedPosition:M||"bottom"}),(0,p.jsx)(e7,{isOpen:ec,onClose:tu,swipePosition:M||"bottom"}),(0,p.jsx)(tE,{})]}),(0,p.jsx)(X.A,{show:ed.show,message:ed.message,onConfirm:ed.onConfirm,onDismiss:ed.onCancel,swipePosition:M||"bottom"}),(0,p.jsx)(nr,{isOpen:em,onClose:function(){return ep(!1)}})]})}},3668:(e,t,n)=>{n.d(t,{A:()=>o}),n(4232);var r=n(7947),i=n(7876);let o=function(e){var t=e.text;return(0,i.jsxs)("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-gray-900 bg-opacity-90 text-white",children:[(0,i.jsx)(r.A,{className:"h-12 w-12 animate-spin text-white mb-4"}),(0,i.jsx)("p",{className:"text-lg font-medium",children:void 0===t?"Laden...":t})]})}},4173:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(4232),i=n(3355),o=n(7212),a=n(4738),s=n(2292),l=n(1302),c=n(8731),u=n(7876);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=function(e){var t=e.onClick,n=e.className,r=e.children,i=(0,c.Z)(t);return(0,u.jsx)("button",m(m({},i.handlers),{},{className:"\n        min-w-[140px] h-12 px-6 rounded-full text-white font-semibold\n        transition-colors duration-100 flex items-center justify-center\n        ".concat(i.buttonClasses,"\n        ").concat(void 0===n?"":n,"\n      "),children:r}))};let h=function(e){var t=e.onNext,n=e.showBackButton,r=void 0===n||n,i=e.isFirstStep,o=void 0!==i&&i,s=e.isLastStep,c=void 0!==s&&s,f=(0,a.b)(),d=f.previousStep,m=f.nextStep;return(0,u.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[r&&!o&&(0,u.jsxs)(p,{onClick:d,className:"bg-gray-600 hover:bg-gray-700 active:bg-gray-600",children:[(0,u.jsx)(l.QVr,{className:"mr-2"}),"Zur\xfcck"]}),(0,u.jsxs)(p,{onClick:function(){c&&t?t():m()},className:"bg-yellow-600 hover:bg-yellow-700 active:bg-yellow-600 \n          ".concat(!r||o?"ml-auto":""),children:[c?"Fertig":"Weiter",!c&&(0,u.jsx)(l.Z0P,{className:"ml-2"})]})]})};var g=n(3649),b=n(7040),v=n(950);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t=e.target,n=w(r.useState(null),2),o=n[0],a=n[1],s=r.useRef(0);return(r.useEffect(function(){var e=function(){if(t){var e=document.querySelector(t);if(e){var r=e.getBoundingClientRect();r.width>0&&r.height>0?(a(r),s.current=0):n()}else n()}},n=function(){s.current<10&&(s.current+=1,setTimeout(e,100))};e();var r=function(){return e()};return window.addEventListener("nextButtonReady",r),function(){window.removeEventListener("nextButtonReady",r)}},[t]),o&&0!==o.width&&0!==o.height)?(0,u.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute",style:{top:o.top,left:o.left,width:o.width,height:o.height,border:"2px solid rgba(255, 255, 255, 0.8)",borderRadius:"8px",boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)",zIndex:1e3,pointerEvents:"none"}}):null},O=function(e){var t={position:"fixed",transform:""},n=function(e){return"".concat(.1*e,"vh")},r=function(e){return"".concat(.1*e,"vw")};switch(e.vertical){case"top":t.top="20vh";break;case"center":t.top="50vh",t.transform="translateY(-50%)";break;case"bottom":t.bottom="20vh"}switch(e.horizontal){case"left":t.left="20%";break;case"center":t.left="50%",t.transform?t.transform+=" translateX(-50%)":t.transform="translateX(-50%)";break;case"right":t.right="20%"}return e.offset&&("number"==typeof e.offset.y&&("bottom"===e.vertical?t.bottom="calc(20vh + ".concat(n(e.offset.y),")"):t.top="calc(".concat("center"===e.vertical?"50vh":"20vh"," + ").concat(n(e.offset.y),")")),"number"==typeof e.offset.x&&("right"===e.horizontal?t.right="calc(20% + ".concat(r(e.offset.x),")"):t.left="calc(".concat("center"===e.horizontal?"50%":"20%"," + ").concat(r(e.offset.x),")"))),t.transform||delete t.transform,t};let k=(0,r.memo)(function(e){e.onCloseMenu;var t=(0,a.b)(),n=t.isActive,l=t.getCurrentStep,c=t.nextStep,f=(t.previousStep,t.endTutorial),d=t.isHelpMode,m=t.exitHelpStep,p=t.markCategoryAsCompleted;(0,g.useUIStore)(function(e){return e.closeSettings}),(0,v.useAuthStore)().isGuest;var y=w((0,r.useState)(!0),2),x=y[0],j=y[1],k=w((0,r.useState)(!1),2),I=k[0],E=k[1],P=l();(0,b.H)("splitContainer",j),(0,b.H)("calculator",j),(0,b.H)("gameInfo",j),(0,b.H)("settings",j);var C=(0,r.useCallback)(function(){null!=P&&P.onExit&&P.onExit(),m()},[P,m]),A=(0,r.useCallback)(function(){var e=a.b.getState().getCurrentStep(),t=g.useUIStore.getState();t.closeAllOverlays(),t.setMenuOpen(!1),a.b.getState().setTutorialUIBlocking({calculatorClose:!1,gameInfoClose:!1,settingsClose:!1,resultatKreidetafelClose:!1}),I&&null!=e&&e.category&&p(e.category),f(I)},[I,p,f]),T=(0,r.useCallback)(function(){L()},[]);if((0,r.useEffect)(function(){if((null==P?void 0:P.target)==="save-settings"){var e;null==(e=document.getElementById("save-settings"))||e.addEventListener("click",T)}return function(){var e;null==(e=document.getElementById("save-settings"))||e.removeEventListener("click",T)}},[P,T]),(0,r.useEffect)(function(){var e=!P||P.id!==s.nI.CALCULATOR_OPEN&&P.id!==s.nI.GAME_INFO;return a.b.getState().setTutorialUIBlocking({calculatorClose:e,gameInfoClose:e,settingsClose:!0,resultatKreidetafelClose:!0}),function(){a.b.getState().setTutorialUIBlocking({calculatorClose:!1,gameInfoClose:!1,settingsClose:!1,resultatKreidetafelClose:!1})}},[null==P?void 0:P.id]),(0,r.useEffect)(function(){if((null==P?void 0:P.id)===s.nI.CALCULATOR_OPEN){var e=function(e){j(!1)};return document.addEventListener("calculatorOpen",e),function(){document.removeEventListener("calculatorOpen",e),j(!0)}}if((null==P?void 0:P.id)===s.nI.GAME_INFO){var t=function(){j(!1)};return document.addEventListener("gameInfoOpen",t),function(){document.removeEventListener("gameInfoOpen",t),j(!0)}}if((null==P?void 0:P.id)===s.nI.RESULTAT_INFO){var n=function(){j(!1)};return document.addEventListener("resultatKreidetafelOpen",n),function(){document.removeEventListener("resultatKreidetafelOpen",n),j(!0)}}},[null==P?void 0:P.id]),(0,r.useEffect)(function(){if((null==P?void 0:P.id)===s.nI.JASS_SETTINGS){var e=function(){j(!1)};return document.addEventListener("settingsOpen",e),function(){document.removeEventListener("settingsOpen",e),j(!0)}}},[null==P?void 0:P.id]),!n||!P)return null;var L=function(){var e=l();(null==e?void 0:e.id)===s.nI.SETTINGS_NAVIGATE_STROKES&&c()};return(0,u.jsxs)(o.N,{children:[(0,u.jsxs)(i.P.div,{className:"fixed inset-0 z-50",style:{pointerEvents:"none"},children:[P.target&&(0,u.jsx)(N,{target:P.target}),P.id===s.nI.SETTINGS&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"fixed left-0 right-0 top-0 bg-transparent",style:{height:"calc(50% - 40px)",pointerEvents:"auto",zIndex:1002}}),(0,u.jsx)("div",{className:"fixed left-0 right-0 bg-transparent",style:{top:"calc(50% + 40px)",bottom:0,pointerEvents:"auto",zIndex:1002}})]})]},"tutorial-overlay-backdrop"),x&&(0,u.jsxs)(i.P.div,{className:"bg-gray-800 rounded-lg shadow-lg flex flex-col items-center text-center w-10/12 max-w-md fixed\n            ".concat(P.title?"p-6":"py-4 px-6"),style:S(S({},O(P.overlayPosition)),{},{zIndex:1001,pointerEvents:"none"}),children:[P.title&&(0,u.jsx)("h2",{className:"text-2xl font-bold mb-4 text-white",children:P.title}),P.icon&&(0,u.jsx)(P.icon,{className:"w-12 h-12 text-yellow-600 mb-4"}),P.image&&(0,u.jsx)("img",{src:P.image,alt:"",className:"w-64 h-64 mb-6 rounded-lg object-cover"}),(0,u.jsx)("p",{className:"text-white text-lg max-w-[90%] ".concat(P.title?"":"my-2"),children:P.content})]},"tutorial-overlay-content"),!P||P.hideNavigation?null:(0,u.jsx)(i.P.div,{className:"fixed left-1/2 transform -translate-x-1/2 z-[1001]",style:{bottom:"4vh",pointerEvents:"auto"},children:(0,u.jsxs)("div",{className:"flex flex-col items-center w-full max-w-md px-8 mb-8 mx-auto",children:[(0,u.jsx)("div",{className:"w-full flex items-center ".concat((null==P?void 0:P.id)===s.nI.WELCOME?"justify-center":"justify-between"," gap-4 mb-4"),children:d&&P.category!==s.xl.TIPS?(0,u.jsx)("button",{onClick:C,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-8 rounded-full w-[180px] mx-auto block active:bg-yellow-600",children:"Verstanden"}):(0,u.jsx)(h,{showBackButton:!P.hideBackButton,isFirstStep:P.id===s.nI.WELCOME||P.id===s.nI.SETTINGS||P.id===s.nI.TIPS_WELCOME,isLastStep:P.id===s.nI.BASIC_COMPLETE||P.id===s.nI.BINGO_SETTINGS||P.id===s.nI.TIPS_IPHONE_WAKE,onNext:P.id===s.nI.BASIC_COMPLETE||P.id===s.nI.BINGO_SETTINGS||P.id===s.nI.TIPS_IPHONE_WAKE?A:void 0})}),!d&&(P.id===s.nI.BASIC_COMPLETE||P.id===s.nI.BINGO_SETTINGS||P.id===s.nI.TIPS_IPHONE_WAKE)&&(0,u.jsxs)("div",{className:"flex items-center justify-center gap-2 text-white mt-2",children:[(0,u.jsx)("input",{type:"checkbox",id:"neverShowAgain",checked:I,onChange:function(e){E(e.target.checked)},className:"w-4 h-4 rounded border-gray-300 text-yellow-600 focus:ring-yellow-500"}),(0,u.jsx)("label",{htmlFor:"neverShowAgain",className:"text-sm whitespace-nowrap",children:"Tutorial das n\xe4chste Mal nicht mehr anzeigen"})]})]})},"tutorial-overlay-navigation")]},"tutorial-overlay")})},7040:(e,t,n)=>{n.d(t,{H:()=>u});var r,i=n(4738),o=n(2292);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){var r;return(r=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===a(r)?r:String(r))in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(s(s(s(s(s(s(s(s(s(s(r={},o.nI.SETTINGS,"settings"),o.nI.SETTINGS_INTRO,"settings"),o.nI.SETTINGS_CARDS,"settings"),o.nI.SETTINGS_PICTOGRAMS,"settings"),o.nI.SETTINGS_MULTIPLIER,"settings"),o.nI.SETTINGS_CONFIGURE,"settings"),o.nI.SETTINGS_NAVIGATE,"settings"),o.nI.CALCULATOR,"calculator"),o.nI.GAME_INFO,"gameInfo"),o.nI.NEW_GAME,"splitContainer"),s(r,o.nI.RESULTAT_INFO,"splitContainer")),c=n(4232),u=function(e,t){var n=(0,i.b)(),r=n.isActive,a=n.getCurrentStep,s=n.registerEvent,u=a();return((0,c.useEffect)(function(){if(u&&t&&"calculator"===e&&u.id===o.nI.CALCULATOR_OPEN){var n=function(){return t(!1)};return document.addEventListener("calculatorOpen",n),s("calculatorOpen"),function(){document.removeEventListener("calculatorOpen",n),t(!0)}}},[e,null==u?void 0:u.id,t]),null!=u&&u.id&&("calculator"===e&&["CALCULATOR_OPEN","CALCULATOR_INPUT"].includes(u.id)||"gameInfo"===e&&u.id===o.nI.GAME_INFO))?{preventClose:!0}:{preventClose:!!(r&&u&&l[u.id]===e)}}},9770:(e,t,n)=>{n.d(t,{$:()=>d,r:()=>f});var r=n(4232),i=n(2987),o=n(7137),a=n(6722),s=n(7876);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["className","variant","size","asChild"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var f=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(function(e,t){var n=e.className,r=e.variant,o=e.size,d=e.asChild,m=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,c),p=void 0!==d&&d?i.DX:"button";return(0,s.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],(i=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({className:(0,a.cn)(f({variant:r,size:o,className:n})),ref:t},m))});d.displayName="Button"}}]);