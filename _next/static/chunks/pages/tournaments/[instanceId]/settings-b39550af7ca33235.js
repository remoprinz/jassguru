(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6455],{1549:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ef});var n=r(4232),a=r(9099),i=r(7947),s=r(1032),o=r(390),c=r(5954),l=r(5831),u=r(6133),d=r(5527),h=r(6802),m=r(7714),f=r(9961),g=r(3664),p=r(950),b=r(6602),y=r(3649),x=r(5881),v=r(9770),j=r(8874),w=r(8096),N=r(4612),S=r(4881),k=r(1322),O=r(8484),T=r(8238),A=r(9712),E=r(4790),P=r(5541),L=r(1223),D=r(6176),C=r(7876);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){F=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(t,r,n,i){var s,o,c,l,u=Object.create((r&&r.prototype instanceof p?r:p).prototype);return a(u,"_invoke",{value:(s=t,o=n,c=new T(i||[]),l=h,function(t,r){if(l===m)throw Error("Generator is already running");if(l===f){if("throw"===t)throw r;return{value:e,done:!0}}for(c.method=t,c.arg=r;;){var n=c.delegate;if(n){var a=function t(r,n){var a=n.method,i=r.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+a+"' method")),g;var s=d(i,r.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[r.resultName]=o.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,g)}(n,c);if(a){if(a===g)continue;return a}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(l===h)throw l=f,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);l=m;var i=d(s,o,c);if("normal"===i.type){if(l=c.done?f:"suspendedYield",i.arg===g)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(l=f,c.method="throw",c.arg=i.arg)}})}),u}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",m="executing",f="completed",g={};function p(){}function b(){}function y(){}var x={};l(x,s,function(){return this});var v=Object.getPrototypeOf,j=v&&v(v(A([])));j&&j!==r&&n.call(j,s)&&(x=j);var w=y.prototype=p.prototype=Object.create(x);function N(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;a(this,"_invoke",{value:function(a,i){function s(){return new t(function(r,s){!function r(a,i,s,o){var c=d(e[a],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==I(u)&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,s,o)},function(e){r("throw",e,s,o)}):t.resolve(u).then(function(e){l.value=e,s(l)},function(e){return r("throw",e,s,o)})}o(c.arg)}(a,i,r,s)})}return r=r?r.then(s,s):s()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(I(t)+" is not iterable")}return b.prototype=y,a(w,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},N(S.prototype),l(S.prototype,o,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var s=new S(u(e,r,n,a),i);return t.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},N(w),l(w,c,"Generator"),l(w,s,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return o.type="throw",o.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function R(e,t,r,n,a,i,s){try{var o=e[i](s),c=o.value}catch(e){r(e);return}o.done?t(c):Promise.resolve(c).then(n,a)}function z(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){R(i,n,a,s,o,"next",e)}function o(e){R(i,n,a,s,o,"throw",e)}s(void 0)})}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}(e,t)||M(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let G=function(e){var t,r,a,o=e.isOpen,c=e.onClose,l=e.tournamentId,u=e.groupId,h=(0,y.useUIStore)(function(e){return e.showNotification}),m=(0,b.yu)(function(e){return e.currentTournamentInstance}),f=_((0,n.useState)(!1),2),g=f[0],p=f[1],x=_((0,n.useState)(null),2),j=x[0],w=x[1],N=_((0,n.useState)([]),2),S=N[0],k=N[1],T=_((0,n.useState)([]),2),A=T[0],I=T[1],R=_((0,n.useState)(!1),2),G=R[0],Z=R[1],U=null==m||null==(r=m.settings)?void 0:r.maxParticipants,$=(null==m||null==(a=m.participantUids)?void 0:a.length)||0,B=U&&U>0?Math.max(0,U-$):1/0;(0,n.useEffect)(function(){var e;(e=z(F().mark(function e(){var t,r;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!o||!u||!l)){e.next=1;break}return k([]),I([]),w(null),e.abrupt("return");case 1:return p(!0),w(null),e.prev=2,e.next=3,(0,L.fetchGroupMembers)(u);case 3:k(e.sent||[]),e.next=5;break;case 4:e.prev=4,w(t=(r=e.catch(2))instanceof Error?r.message:"Gruppenmitglieder konnten nicht geladen werden."),h({message:t,type:"error"});case 5:p(!1);case 6:case"end":return e.stop()}},e,null,[[2,4]])})),function(){return e.apply(this,arguments)})()},[o,u,l,h]);var W=function(e){I(function(t){if(t.includes(e))return t.filter(function(t){return t!==e});if(A.length<B)return[].concat(function(e){if(Array.isArray(e))return J(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||M(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]);return h({message:"Maximale Teilnehmerzahl (".concat(U,") w\xfcrde \xfcberschritten."),type:"warning"}),t})},q=(t=z(F().mark(function e(){var t;return F().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!l||0===A.length)){e.next=1;break}return h({message:"Keine Spieler ausgew\xe4hlt oder Turnier-ID fehlt.",type:"warning"}),e.abrupt("return");case 1:if(Z(!0),e.prev=2,!(A.length>B)){e.next=3;break}return h({message:"Auswahl \xfcberschreitet die maximal erlaubte Teilnehmerzahl von ".concat(U,"."),type:"error"}),Z(!1),e.abrupt("return");case 3:return e.next=4,b.yu.getState().addMultipleParticipants(l,A);case 4:if(!e.sent){e.next=5;break}h({message:"".concat(A.length," Spieler zum Turnier hinzugef\xfcgt."),type:"success"}),I([]),c(),b.yu.getState().fetchTournamentInstanceDetails(l),e.next=6;break;case 5:throw Error("Spieler konnten nicht hinzugef\xfcgt werden.");case 6:e.next=8;break;case 7:e.prev=7,h({message:(t=e.catch(2))instanceof Error?t.message:"Fehler beim Hinzuf\xfcgen der Spieler.",type:"error"});case 8:return e.prev=8,Z(!1),e.finish(8);case 9:case"end":return e.stop()}},e,null,[[2,7,8,9]])})),function(){return t.apply(this,arguments)}),V=(0,n.useMemo)(function(){if(!m)return S;var e=m.participantUids||[];return S.filter(function(t){return!!t.userId&&!e.includes(t.userId)})},[S,m]);return o?(0,C.jsx)(E.lG,{open:o,onOpenChange:function(e){return!e&&c()},children:(0,C.jsxs)(E.Cf,{className:"sm:max-w-lg bg-gray-800 border-gray-700 text-white rounded-xl",children:[(0,C.jsxs)(E.c7,{className:"pt-4",children:[(0,C.jsxs)(E.L3,{className:"text-xl text-white flex items-center justify-center",children:[(0,C.jsx)(d.A,{className:"mr-2 h-5 w-5 text-blue-400"})," Mitglieder aus Gruppe hinzuf\xfcgen"]}),(0,C.jsxs)(E.rr,{className:"text-gray-400 text-center pt-2",children:['W\xe4hle Gruppenmitglieder aus, die du zum Turnier "',(null==m?void 0:m.name)||"Turnier",'" hinzuf\xfcgen m\xf6chtest.']})]}),g&&(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center h-48",children:[(0,C.jsx)(i.A,{className:"h-10 w-10 animate-spin text-blue-400 mb-3"}),(0,C.jsx)("p",{className:"text-gray-300",children:"Lade Gruppenmitglieder..."})]}),!g&&j&&(0,C.jsxs)("div",{className:"my-4 p-3 bg-red-900/50 border border-red-700 rounded-md text-red-300 text-center",children:[(0,C.jsx)(s.A,{className:"inline-block h-5 w-5 mr-2"}),j]}),!g&&!j&&0===V.length&&(0,C.jsx)("div",{className:"my-4 p-3 text-center text-gray-400",children:(0,C.jsx)("p",{children:"Alle Gruppenmitglieder nehmen bereits am Turnier teil oder es konnten keine Mitglieder geladen werden."})}),!g&&!j&&V.length>0&&(0,C.jsxs)("div",{className:"max-h-[calc(100vh-300px)] my-4 pr-3 overflow-y-auto",children:[U&&U>0&&(0,C.jsxs)("p",{className:"text-sm text-yellow-400 mb-2 px-1",children:["Max. Teilnehmer: ",$," / ",U,". Du kannst noch ",B," Spieler ausw\xe4hlen.",0===B&&0===A.length&&" Limit erreicht."]}),(0,C.jsx)("div",{className:"space-y-2",children:V.map(function(e){var t,r=A.length>=B&&!A.includes(e.userId||" ");return(0,C.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-700/50 cursor-pointer ".concat(r?"opacity-50":""),onClick:function(){return!r&&e.userId&&W(e.userId)},children:[(0,C.jsx)(P.S,{id:"player-".concat(e.id),checked:!!e.userId&&A.includes(e.userId),onCheckedChange:function(){return e.userId&&W(e.userId)},disabled:r,className:"data-[state=checked]:bg-blue-600 data-[state=checked]:border-blue-600"}),(0,C.jsxs)(O.J,{htmlFor:"player-".concat(e.id),className:"flex items-center space-x-3 flex-1 cursor-pointer",children:[(0,C.jsx)(D.A,{src:e.photoURL||void 0,alt:e.displayName||"Avatar",size:"sm",fallbackClassName:"bg-gray-600 text-gray-300",fallbackText:(null==(t=e.displayName)?void 0:t.charAt(0).toUpperCase())||"P"}),(0,C.jsx)("span",{className:"text-sm font-medium text-gray-200",children:e.displayName||"Unbekannter Spieler"})]})]},e.id)})})]}),(0,C.jsxs)(E.Es,{className:"flex flex-col sm:flex-row gap-2 mt-6",children:[(0,C.jsx)(v.$,{onClick:q,disabled:0===A.length||G,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white order-2 sm:order-1",children:G?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"F\xfcge hinzu..."]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.A,{className:"mr-2 h-4 w-4"}),A.length," Spieler hinzuf\xfcgen"]})}),(0,C.jsx)(v.$,{type:"button",variant:"destructive",onClick:c,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white order-1 sm:order-2",children:"Abbrechen"})]})]})}):null};var Z=r(8517),U=r(2269),$=r(7655),B=r(5010),W=r(9688),q=r(2009),V=r(8310),Y=r(132),H=r(1163),K=r(415),X=r(8506);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(){ee=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(t,r,n,i){var s,o,c,l,u=Object.create((r&&r.prototype instanceof p?r:p).prototype);return a(u,"_invoke",{value:(s=t,o=n,c=new T(i||[]),l=h,function(t,r){if(l===m)throw Error("Generator is already running");if(l===f){if("throw"===t)throw r;return{value:e,done:!0}}for(c.method=t,c.arg=r;;){var n=c.delegate;if(n){var a=function t(r,n){var a=n.method,i=r.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+a+"' method")),g;var s=d(i,r.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[r.resultName]=o.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,g)}(n,c);if(a){if(a===g)continue;return a}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(l===h)throw l=f,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);l=m;var i=d(s,o,c);if("normal"===i.type){if(l=c.done?f:"suspendedYield",i.arg===g)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(l=f,c.method="throw",c.arg=i.arg)}})}),u}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",m="executing",f="completed",g={};function p(){}function b(){}function y(){}var x={};l(x,s,function(){return this});var v=Object.getPrototypeOf,j=v&&v(v(A([])));j&&j!==r&&n.call(j,s)&&(x=j);var w=y.prototype=p.prototype=Object.create(x);function N(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;a(this,"_invoke",{value:function(a,i){function s(){return new t(function(r,s){!function r(a,i,s,o){var c=d(e[a],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Q(u)&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,s,o)},function(e){r("throw",e,s,o)}):t.resolve(u).then(function(e){l.value=e,s(l)},function(e){return r("throw",e,s,o)})}o(c.arg)}(a,i,r,s)})}return r=r?r.then(s,s):s()}})}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(Q(t)+" is not iterable")}return b.prototype=y,a(w,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=l(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},N(S.prototype),l(S.prototype,o,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var s=new S(u(e,r,n,a),i);return t.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},N(w),l(w,c,"Generator"),l(w,s,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return o.type="throw",o.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach(function(t){en(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function en(e,t,r){var n;return(n=function(e,t){if("object"!==Q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Q(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===Q(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ea(e,t,r,n,a,i,s){try{var o=e[i](s),c=o.value}catch(e){r(e);return}o.done?t(c):Promise.resolve(c).then(n,a)}function ei(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){ea(i,n,a,s,o,"next",e)}function o(e){ea(i,n,a,s,o,"throw",e)}s(void 0)})}}function es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,s,o=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ec={values:{sieg:1e3,berg:0,schneider:0},enabled:{sieg:!0,berg:!1,schneider:!1}},el={schneider:0,kontermatsch:0},eu={values:{misère:0,eicheln:1,rosen:1,schellen:1,schilten:1,obe:1,une:1,dreimal:0,quer:0,slalom:0},cardStyle:"DE"},ed=function(e,t){if(!e||!t)return null;try{var r=e.split("-").map(Number),n=es(r,3),a=n[0],i=n[1],s=n[2],o=t.split(":").map(Number),c=es(o,2),l=c[0],u=c[1],d=new Date(a,i-1,s,l,u);if(isNaN(d.getTime()))return null;return q.Timestamp.fromDate(d)}catch(e){return console.error("Error creating Timestamp from date/time:",e),null}},eh=function(e){if(console.log("[Jassguru Debug] formatTimestampToDateTime - input timestamp:",e),!e)return console.log("[Jassguru Debug] formatTimestampToDateTime - no timestamp, returning empty strings"),{dateStr:"",timeStr:""};try{var t=e.toDate();console.log("[Jassguru Debug] formatTimestampToDateTime - dateObj:",t);var r=t.toISOString().split("T")[0],n=t.toTimeString().split(":").slice(0,2).join(":");return console.log("[Jassguru Debug] formatTimestampToDateTime - output:",{dateStr:r,timeStr:n}),{dateStr:r,timeStr:n}}catch(e){return console.error("[Jassguru Debug] Error formatting Timestamp to date/time:",e),{dateStr:"",timeStr:""}}},em=[{value:"total_points",label:"Gesamtpunktzahl"},{value:"striche",label:"Anzahl Striche"},{value:"wins",label:"Anzahl Siege"},{value:"average_score_per_passe",label:"Durchschnittspunkte pro Passe"}];let ef=function(){var e,t,r,P,L=(0,a.useRouter)(),D=L.query.instanceId,I=(0,p.useAuthStore)(),F=I.user,R=I.status;I.isAuthenticated;var z=(0,y.useUIStore)(),_=z.showNotification,M=z.setPageCta,J=z.resetPageCta,q=(0,b.yu)(),Q=q.currentTournamentInstance,et=q.tournamentParticipants,ea=q.participantsStatus,eo=q.activateTournament,ef=(q.status,q.error),eg=q.fetchTournamentInstanceDetails,ep=q.removeParticipant,eb=q.makeParticipantAdmin,ey=q.removeParticipantAdmin,ex=q.completeTournament,ev=q.loadTournamentParticipants,ej=q.updateTournamentDetails,ew=q.updateTournamentSettings,eN=(0,b.yu)(function(e){return"loading-details"===e.status||"loading-list"===e.status||"updating-settings"===e.status||"managing-participant"===e.status}),eS=es((0,n.useState)(""),2),ek=eS[0],eO=eS[1],eT=es((0,n.useState)(""),2),eA=eT[0],eE=eT[1],eP=es((0,n.useState)(void 0),2),eL=eP[0],eD=eP[1],eC=es((0,n.useState)(!1),2),eI=eC[0],eF=eC[1],eR=es((0,n.useState)(null),2),ez=eR[0],e_=eR[1],eM=es((0,n.useState)(!1),2),eJ=eM[0],eG=eM[1],eZ=es((0,n.useState)(!1),2),eU=eZ[0],e$=eZ[1],eB=es((0,n.useState)(!1),2),eW=eB[0],eq=eB[1],eV=es((0,n.useState)({}),2),eY=eV[0],eH=eV[1],eK=es((0,n.useState)(ec),2),eX=eK[0],eQ=eK[1],e0=es((0,n.useState)(el),2),e1=e0[0],e2=e0[1],e4=es((0,n.useState)({}),2),e5=e4[0],e3=e4[1],e6=es((0,n.useState)({}),2),e7=e6[0],e8=e6[1],e9=es((0,n.useState)(eu),2),te=e9[0],tt=e9[1],tr=es((0,n.useState)({}),2),tn=tr[0],ta=tr[1],ti=es((0,n.useState)(""),2),ts=ti[0],to=ti[1],tc=es((0,n.useState)(""),2),tl=tc[0],tu=tc[1],td=es((0,n.useState)(""),2),th=td[0],tm=td[1],tf=es((0,n.useState)(""),2),tg=tf[0],tp=tf[1],tb=(0,n.useCallback)(function(){var e;return!!(null!=F&&F.uid)&&!!(null!=Q&&null!=(e=Q.adminIds)&&e.includes(F.uid))},[F,Q]);(0,n.useEffect)(function(){D&&"string"==typeof D&&(Q&&Q.id===D||eg(D),Q&&Q.id===D&&"idle"===ea&&ev(D))},[D,eg,Q,ev,ea]),(0,n.useEffect)(function(){if(Q){console.log("[Jassguru Debug] SettingsPage - tournament loaded:",JSON.stringify(Q)),console.log("[Jassguru Debug] SettingsPage - scheduledStartTime from tournament:",null==(e=Q.settings)?void 0:e.scheduledStartTime);var e,t,r,n,a,i,s,o=eh(null==(t=Q.settings)?void 0:t.scheduledStartTime),c=o.dateStr,l=o.timeStr;console.log("[Jassguru Debug] SettingsPage - formatted date/time from formatTimestampToDateTime:",{dateStr:c,timeStr:l}),tm(c),tp(l),console.log("[Jassguru Debug] SettingsPage - tempStartDate set to:",c),console.log("[Jassguru Debug] SettingsPage - tempStartTime set to:",l),eQ((null==(r=Q.settings)?void 0:r.scoreSettings)||ec),e2((null==(n=Q.settings)?void 0:n.strokeSettings)||el),tt((null==(a=Q.settings)?void 0:a.farbeSettings)||eu),to((null==(i=Q.settings)||null==(i=i.minParticipants)?void 0:i.toString())||"4"),tu((null==(s=Q.settings)||null==(s=s.maxParticipants)?void 0:s.toString())||""),e3({}),e8({}),ta({}),eG(!1),eO(Q.name||""),eE(Q.description||"")}else console.log("[Jassguru Debug] SettingsPage - tournament is null/undefined in useEffect [tournament]")},[Q]),(0,n.useEffect)(function(){if(Q){var e,t,r,n,a,i,s,o,c=ek!==(Q.name||""),l=eA!==(Q.description||""),u=eL!==((null==(e=Q.settings)?void 0:e.rankingMode)||void 0),d=JSON.stringify(eX)!==JSON.stringify((null==(t=Q.settings)?void 0:t.scoreSettings)||ec),h=JSON.stringify(e1)!==JSON.stringify((null==(r=Q.settings)?void 0:r.strokeSettings)||el),m=Object.keys(e5).length>0,f=Object.keys(e7).length>0,g=JSON.stringify(te)!==JSON.stringify((null==(n=Q.settings)?void 0:n.farbeSettings)||eu),p=Object.keys(tn).length>0,b=ts!==((null==(a=Q.settings)||null==(a=a.minParticipants)?void 0:a.toString())||"4"),y=tl!==((null==(i=Q.settings)||null==(i=i.maxParticipants)?void 0:i.toString())||""),x=null==(s=Q.settings)?void 0:s.scheduledStartTime,v=ed(th,tg),j=null!=(o=!x&&v||x&&!v||x&&v&&!x.isEqual(v))&&o;eG(!!(c||l||u||d||h||m||f||g||p||b||y||j))}},[ek,eA,eL,Q,eX,e1,e5,e7,te,tn,ts,tl,th,tg]);var ty=(0,n.useCallback)(ei(ee().mark(function e(){var t,r,n,a,i,s,o,c,l,u,d,h,m,f,g,p,b,y,x,v,j,w,N,S,k,O,T,A,E,P,L,D;return ee().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!Q||!tb()||!eJ||eI)){e.next=1;break}return e.abrupt("return");case 1:if(eF(!0),e_(null),o=er({},eX),Object.entries(e5).forEach(function(e){var t=es(e,2),r=t[0],n=t[1];if(null!=n){var a=parseInt(n,10);if(!isNaN(a)){var i=a<0?0:a,s=er({},o.values),c=er({},o.enabled);if("sieg"===r){s.sieg=i;var l=Math.floor(i/2);c.berg&&(s.berg=l),c.schneider&&(s.schneider=l)}else"berg"===r?(s.berg=i,c.schneider&&(s.schneider=Math.min(i,s.schneider))):"schneider"===r&&(s.schneider=i);o=er(er({},o),{},{values:s,enabled:c})}}}),e3({}),c=er({},e1),Object.entries(e7).forEach(function(e){var t=es(e,2),r=t[0],n=t[1];if(null!=n){var a=parseInt(n,10);isNaN(a)||((a=Math.max(0,Math.min(a,2)))>0&&1!==a&&2!==a&&(a=2),c=er(er({},c),{},en({},r,a)))}}),e8({}),l=er({},te),Object.entries(tn).forEach(function(e){var t=es(e,2),r=t[0],n=t[1];if(null!=n){var a=parseInt(n,10);if(!isNaN(a)){var i=Math.max(0,a);l=er(er({},l),{},{values:er(er({},l.values),{},en({},r,i))})}}}),ta({}),u={},d=!1,(h=eL||(null==(t=Q.settings)?void 0:t.rankingMode)||"total_points")!==(null==(r=Q.settings)?void 0:r.rankingMode)&&(u.rankingMode=h,d=!0),JSON.stringify(o)!==JSON.stringify((null==(n=Q.settings)?void 0:n.scoreSettings)||ec)&&(u.scoreSettings=o,d=!0),JSON.stringify(c)!==JSON.stringify((null==(a=Q.settings)?void 0:a.strokeSettings)||el)&&(u.strokeSettings=c,d=!0),JSON.stringify(l)!==JSON.stringify((null==(i=Q.settings)?void 0:i.farbeSettings)||eu)&&(u.farbeSettings=l,d=!0),!(!isNaN(Number(m=""===ts.trim()?null:parseInt(ts,10)))||null===m)){e.next=2;break}(g=null===m?null:m>=0?m:0)!==(null==(f=Q.settings)?void 0:f.minParticipants)&&(u.minParticipants=g,d=!0),e.next=3;break;case 2:return _({message:"Min. Teilnehmer ist keine g\xfcltige Zahl.",type:"error"}),eF(!1),e.abrupt("return");case 3:if(!(!isNaN(Number(p=""===tl.trim()?null:parseInt(tl,10)))||null===p)){e.next=6;break}if(y=null===p?null:p>=0?p:0,x=null==(b=Q.settings)?void 0:b.maxParticipants,y===x){e.next=5;break}if(j=void 0!==u.minParticipants?u.minParticipants:null==(v=Q.settings)?void 0:v.minParticipants,!(null!==y&&null!=j&&y<j)){e.next=4;break}return _({message:"Max. Teilnehmer darf nicht kleiner als Min. Teilnehmer sein.",type:"error"}),eF(!1),e.abrupt("return");case 4:u.maxParticipants=y,d=!0;case 5:e.next=7;break;case 6:return _({message:"Max. Teilnehmer ist keine g\xfcltige Zahl.",type:"error"}),eF(!1),e.abrupt("return");case 7:if(w=ed(th,tg),((N=null==(s=Q.settings)?void 0:s.scheduledStartTime)||!w)&&(!N||w)&&(!N||!w||N.isEqual(w))||(u.scheduledStartTime=w,d=!0),S=ek!==(Q.name||""),k=eA!==(Q.description||""),O=S||k,!(!d&&!O)){e.next=8;break}return _({message:"Keine \xc4nderungen zum Speichern.",type:"info"}),eF(!1),e.abrupt("return");case 8:if(T=!1,A=!1,E=!1,e.prev=9,!O){e.next=11;break}return P={},S&&(P.name=ek),k&&(P.description=eA),console.log("Versuche Turnier-Details (Name/Beschr.) zu aktualisieren:",P),e.next=10,ej(Q.id,P);case 10:e.sent?(console.log("Turnier-Details erfolgreich aktualisiert."),T=!0):(console.error("Fehler beim Aktualisieren der Turnier-Details im Store."),e_(function(e){return e?"".concat(e," Fehler bei Name/Beschreibung."):"Fehler bei Name/Beschreibung."}),E=!0);case 11:if(!d){e.next=14;break}if(!(Object.keys(u).length>0)){e.next=13;break}return console.log("Versuche Turnier-Einstellungen (Regeln etc.) zu aktualisieren:",u),e.next=12,ew(Q.id,u);case 12:e.sent?(console.log("Turnier-Einstellungen erfolgreich aktualisiert."),A=!0):(console.error("Fehler beim Aktualisieren der Turnier-Einstellungen im Store."),e_(function(e){return e?"".concat(e," Fehler bei Turnier-Regeln."):"Fehler bei Turnier-Regeln."}),E=!0),e.next=14;break;case 13:console.log("actualSettingsHaveChanged war true, aber settingsUpdates war leer - wird als Erfolg f\xfcr Settings gewertet."),A=!0;case 14:O&&d?T&&A?_({message:"Alle \xc4nderungen erfolgreich gespeichert.",type:"success"}):T&&!A?_({message:"Name/Beschreibung gespeichert, aber Fehler bei den Turnier-Regeln.",type:"warning"}):!T&&A?_({message:"Turnier-Regeln gespeichert, aber Fehler bei Name/Beschreibung.",type:"warning"}):E||_({message:"Fehler beim Speichern der \xc4nderungen.",type:"error"}):O?T?_({message:"Turnierinformationen (Name/Beschreibung) erfolgreich gespeichert.",type:"success"}):E||_({message:"Fehler beim Speichern von Name/Beschreibung.",type:"error"}):d&&(A?_({message:"Turnier-Regeln erfolgreich gespeichert.",type:"success"}):E||_({message:"Fehler beim Speichern der Turnier-Regeln.",type:"error"})),!E&&(O||d)&&eG(!1),e.next=16;break;case 15:e.prev=15,L=(D=e.catch(9))instanceof Error?D.message:"Ein unbekannter Fehler ist aufgetreten.",console.error("Schwerwiegender Fehler im Speicherprozess der Turnier-Einstellungen:",D),e_(L),_({message:"Systemfehler: ".concat(L),type:"error"});case 16:return e.prev=16,eF(!1),e.finish(16);case 17:case"end":return e.stop()}},e,null,[[9,15,16,17]])})),[Q,tb,eJ,eI,ek,eA,eL,eX,e1,e5,e7,te,tn,ts,tl,th,tg,_,ej,ew]);(0,n.useEffect)(function(){return Q&&tb()?(M({isVisible:!0,text:"Speichern",onClick:ty,loading:eI,disabled:eI||!eJ,variant:"info"}),function(){return J()}):void J()},[Q,tb,eI,eJ,ek,eA,eL,eX,e1,e5,e7,te,tn,M,J,ty,ts,tl,th,tg]);var tx=(e=ei(ee().mark(function e(t,r,n){var a,i,s;return ee().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!Q||!tb()||!r)){e.next=1;break}return _({message:"Aktion nicht m\xf6glich oder User-ID fehlt.",type:"error"}),e.abrupt("return");case 1:eH(function(e){return er(er({},e),{},en({},t,!0))}),a=!1,e.prev=2,e.next="removeParticipant"===(i=n)?3:"makeAdmin"===i?5:"removeAdmin"===i?7:9;break;case 3:return e.next=4,ep(Q.id,r);case 4:case 6:case 8:return a=e.sent,e.abrupt("continue",10);case 5:return e.next=6,eb(Q.id,r);case 7:return e.next=8,ey(Q.id,r);case 9:throw Error("Unbekannte Aktion");case 10:a?(_({message:"Aktion '".concat(n,"' erfolgreich ausgef\xfchrt."),type:"success"}),eg(Q.id)):_({message:b.yu.getState().error||"Aktion '".concat(n,"' fehlgeschlagen."),type:"error"}),e.next=12;break;case 11:e.prev=11,_({message:(s=e.catch(2))instanceof Error?s.message:"Fehler bei Aktion ".concat(n,"."),type:"error"});case 12:eH(function(e){return er(er({},e),{},en({},t,!1))});case 13:case"end":return e.stop()}},e,null,[[2,11]])})),function(t,r,n){return e.apply(this,arguments)}),tv=function(e,t){var r=t.replace(/[^0-9]/g,"");if(e3(function(t){return er(er({},t),{},en({},e,r))}),""!==r){var n=parseInt(r,10);if(!isNaN(n)){var a=eX.enabled;if(eX.values.sieg,"sieg"===e||void 0!==e5.sieg&&""!==e5.sieg&&isNaN(parseInt(e5.sieg,10)),"sieg"===e){var i=Math.floor(n/2);a.berg&&e3(function(e){return er(er({},e),{},{berg:i.toString()})}),a.schneider&&e3(function(e){return er(er({},e),{},{schneider:i.toString()})})}else"berg"===e&&a.schneider&&e3(function(e){return er(er({},e),{},{schneider:Math.min(n,parseInt(e5.schneider||"0",10)||n).toString()})})}}else"sieg"===e?e3(function(e){return er(er({},e),{},{berg:void 0,schneider:void 0})}):"berg"===e&&e3(function(e){return er(er({},e),{},{schneider:void 0})})},tj=function(e){eQ(function(t){var r=er(er({},t.enabled),{},en({},e,!t.enabled[e])),n=er({},t.values);return"berg"===e&&!r.berg&&r.schneider&&(n.schneider=Math.min(n.schneider,Math.floor(n.sieg/2))),"berg"===e&&r.berg&&r.schneider&&(n.schneider=Math.min(n.schneider,n.berg)),er(er({},t),{},{values:n,enabled:r})})},tw=function(e,t){e8(function(r){return er(er({},r),{},en({},e,t.replace(/[^0-9]/g,"")))})},tN=function(e,t){ta(function(r){return er(er({},r),{},en({},e,t.replace(/[^0-9]/g,"")))})},tS=function(e){tt(function(t){return er(er({},t),{},{cardStyle:e})})},tk=es((0,n.useState)(!1),2),tO=tk[0],tT=tk[1],tA=es((0,n.useState)(!1),2),tE=tA[0],tP=tA[1],tL=es((0,n.useState)(!1),2),tD=tL[0],tC=tL[1],tI=es((0,n.useState)(!1),2),tF=(tI[0],tI[1]),tR=es((0,n.useState)(!1),2),tz=tR[0],t_=tR[1],tM=(t=ei(ee().mark(function e(){return ee().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!D||"string"!=typeof D||!Q)){e.next=1;break}return W.oR.error("Turnierdetails nicht gefunden."),e.abrupt("return");case 1:if("active"===Q.status){e.next=2;break}return W.oR.info("Dieses Turnier ist nicht aktiv und kann nicht abgeschlossen werden."),tT(!1),e.abrupt("return");case 2:return tP(!0),e.prev=3,e.next=4,ex(D);case 4:e.sent?W.oR.success("Turnier erfolgreich abgeschlossen!"):W.oR.error(ef||"Fehler beim Abschliessen des Turniers."),e.next=6;break;case 5:e.prev=5,console.error("Fehler beim Abschliessen des Turniers:",e.catch(3)),W.oR.error("Ein unerwarteter Fehler ist aufgetreten.");case 6:return e.prev=6,tP(!1),tT(!1),e.finish(6);case 7:case"end":return e.stop()}},e,null,[[3,5,6,7]])})),function(){return t.apply(this,arguments)}),tJ=(r=ei(ee().mark(function e(){var t,r;return ee().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!D||!Q||"upcoming"!==Q.status||!tb())){e.next=1;break}return W.oR.error("Turnier kann nicht gestartet werden oder du bist kein Admin."),e.abrupt("return");case 1:t=null,r=function(){t&&z.removeNotification&&(z.removeNotification(t),t=null)},t=z.showNotification({message:"M\xf6chtest du das Turnier wirklich starten? Dies kann nicht r\xfcckg\xe4ngig gemacht werden.",type:"success",preventClose:!0,actions:[{label:"Abbrechen",onClick:function(){r()}},{label:"STARTEN",onClick:function(){var e=ei(ee().mark(function e(){return ee().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!tz){e.next=1;break}return e.abrupt("return");case 1:return t_(!0),r(),e.prev=2,e.next=3,eo(D);case 3:e.sent?W.oR.success("Turnier erfolgreich gestartet!"):b.yu.getState().error||W.oR.error("Fehler beim Starten des Turniers."),e.next=5;break;case 4:e.prev=4,console.error("Fehler beim Starten des Turniers:",e.catch(2)),W.oR.error("Ein unerwarteter Fehler ist aufgetreten.");case 5:return e.prev=5,t_(!1),e.finish(5);case 6:case"end":return e.stop()}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}()}]});case 2:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),tG=(P=ei(ee().mark(function e(){return ee().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:tF(!0),console.log("Turnier l\xf6schen geklickt f\xfcr Instanz:",D),W.oR.info("Die Funktion zum L\xf6schen von Turnieren ist noch nicht implementiert."),tF(!1),tC(!1);case 1:case"end":return e.stop()}},e)})),function(){return P.apply(this,arguments)});return"loading"!==R&&D&&(!eN||Q)?Q?(0,C.jsxs)(x.A,{children:[(0,C.jsxs)("div",{className:"container mx-auto px-4 py-8 text-white",children:[(0,C.jsxs)("div",{className:"flex items-center mb-6",children:[(0,C.jsx)(v.$,{variant:"ghost",size:"icon",onClick:function(){return L.push("/view/tournament/".concat(D))},className:"mr-4 hover:bg-gray-700",children:(0,C.jsx)(o.A,{className:"h-5 w-5"})}),(0,C.jsxs)("h1",{className:"text-2xl font-bold flex items-center",children:[(0,C.jsx)(c.A,{className:"mr-2 h-6 w-6 text-purple-400"}),"Turnier-Einstellungen"]})]}),ez&&(0,C.jsx)("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-700 rounded-md text-red-300",children:ez}),(0,C.jsxs)("div",{className:"max-w-2xl mx-auto space-y-8",children:[(0,C.jsxs)(N.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,C.jsxs)(N.aR,{children:[(0,C.jsx)(N.ZB,{className:"text-white",children:"Grundinformationen"}),(0,C.jsx)(N.BT,{className:"text-gray-400",children:"Name und Beschreibung des Turniers."})]}),(0,C.jsxs)(N.Wu,{className:"space-y-4",children:[(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(O.J,{htmlFor:"name",className:"text-gray-200",children:"Turniername"}),(0,C.jsx)(j.p,{id:"name",value:ek,onChange:function(e){return eO(e.target.value)},className:"bg-gray-700 border-gray-600 text-white"})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(O.J,{htmlFor:"description",className:"text-gray-200",children:"Beschreibung (Optional)"}),(0,C.jsx)(w.A,{id:"description",value:eA,onChange:function(e){return eE(e.target.value)},className:"bg-gray-700 border-gray-600 text-white min-h-[80px]"})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(O.J,{htmlFor:"startDate",className:"text-gray-200",children:"Startdatum"}),(0,C.jsx)(j.p,{id:"startDate",type:"date",value:th,onChange:function(e){return tm(e.target.value)},className:"bg-gray-700 border-gray-600 text-white"},"startdate-".concat(th))]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(O.J,{htmlFor:"startTime",className:"text-gray-200",children:"Startzeit"}),(0,C.jsx)(j.p,{id:"startTime",type:"time",value:tg,onChange:function(e){return tp(e.target.value)},className:"bg-gray-700 border-gray-600 text-white"},"starttime-".concat(tg))]})]})]})]}),(0,C.jsxs)(N.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,C.jsxs)(N.aR,{children:[(0,C.jsxs)(N.ZB,{className:"text-white flex items-center gap-2",children:[(0,C.jsx)(l.A,{className:"w-5 h-5"}),"Turnier-Regeln"]}),(0,C.jsx)(N.BT,{className:"text-gray-400",children:"Wie wird die Rangliste berechnet und welche Jass-Regeln gelten?"})]}),(0,C.jsxs)(N.Wu,{children:[(0,C.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,C.jsx)(O.J,{className:"text-gray-200 mb-1 block font-medium",children:"Ranglisten-Modus"}),(0,C.jsxs)(T.l6,{value:eL,onValueChange:function(e){return eD(e)},disabled:eI||eN,children:[(0,C.jsx)(T.bq,{id:"rankingMode",className:"bg-gray-700 border-gray-600 text-white",children:(0,C.jsx)(T.yv,{placeholder:"Ranking-Modus ausw\xe4hlen..."})}),(0,C.jsx)(T.gC,{className:"bg-gray-800 border-gray-700 text-white",children:em.map(function(e){return(0,C.jsx)(T.eb,{value:e.value,className:"hover:bg-gray-700 focus:bg-gray-700",children:e.label},e.value)})})]})]}),(0,C.jsxs)(k.tU,{defaultValue:"punkte",className:"w-full",children:[(0,C.jsxs)(k.j7,{className:"grid w-full grid-cols-3 bg-gray-700/50 p-1 rounded-lg mb-3",children:[(0,C.jsx)(k.Xi,{value:"punkte",className:"data-[state=active]:bg-purple-600/80 data-[state=active]:text-white text-gray-300 hover:bg-gray-600/50 rounded-md py-1.5 text-sm",children:"Punkte"}),(0,C.jsx)(k.Xi,{value:"striche",className:"data-[state=active]:bg-purple-600/80 data-[state=active]:text-white text-gray-300 hover:bg-gray-600/50 rounded-md py-1.5 text-sm",children:"Striche"}),(0,C.jsx)(k.Xi,{value:"farben",className:"data-[state=active]:bg-purple-600/80 data-[state=active]:text-white text-gray-300 hover:bg-gray-600/50 rounded-md py-1.5 text-sm",children:"Farben"})]}),(0,C.jsx)(k.av,{value:"punkte",children:(0,C.jsxs)(N.Zp,{className:"bg-gray-800/50 border-gray-700/50 shadow-inner mt-4",children:[(0,C.jsx)(N.aR,{className:"pb-3 pt-4",children:(0,C.jsx)(N.ZB,{className:"text-base text-gray-200",children:"Punkte-Ziele & Modi"})}),(0,C.jsx)(N.Wu,{className:"space-y-3 pt-0 pb-4",children:V.C3.map(function(e){var t,r;return"sieg"===e.id?(0,C.jsxs)("div",{className:"flex items-center justify-between space-x-2 p-2 rounded-md hover:bg-gray-700/30",children:[(0,C.jsx)(O.J,{htmlFor:"score-".concat(e.id),className:"font-medium text-gray-300",children:e.name}),(0,C.jsx)(j.p,{id:"score-".concat(e.id),type:"number",inputMode:"numeric",pattern:"[0-9]*",className:"w-24 bg-gray-700 border-gray-600 text-white text-right",value:null!=(r=e5[e.id])?r:eX.values[e.id],onChange:function(t){return tv(e.id,t.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]},e.id):(0,C.jsxs)("div",{className:"bg-gray-700/40 rounded-lg overflow-hidden border border-gray-600/40",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-600/40",children:[(0,C.jsxs)(O.J,{htmlFor:"toggle-".concat(e.id),className:"font-medium text-gray-300",children:[e.name," aktiviert"]}),(0,C.jsx)(B.d,{id:"toggle-".concat(e.id),checked:eX.enabled[e.id],onCheckedChange:function(){return tj(e.id)},className:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-600"})]}),eX.enabled[e.id]&&(0,C.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,C.jsxs)(O.J,{htmlFor:"score-".concat(e.id),className:"font-medium text-gray-300",children:[e.name,"-Punkte"]}),(0,C.jsx)(j.p,{id:"score-".concat(e.id),type:"number",inputMode:"numeric",pattern:"[0-9]*",className:"w-24 bg-gray-700 border-gray-600 text-white text-right",value:null!=(t=e5[e.id])?t:eX.values[e.id],onChange:function(t){return tv(e.id,t.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]})]},e.id)})})]})}),(0,C.jsx)(k.av,{value:"striche",children:(0,C.jsxs)(N.Zp,{className:"bg-gray-800/50 border-gray-700/50 shadow-inner mt-4",children:[(0,C.jsx)(N.aR,{className:"pb-3 pt-4",children:(0,C.jsx)(N.ZB,{className:"text-base text-gray-200",children:"Striche Zuweisung"})}),(0,C.jsx)(N.Wu,{className:"space-y-2 pt-0 pb-4",children:Z.wq.map(function(e){var t,r;return(0,C.jsxs)("div",{className:"flex items-center justify-between space-x-4 p-2 rounded-md hover:bg-gray-700/30",children:[(0,C.jsx)(O.J,{htmlFor:"stroke-".concat(e),className:"font-medium capitalize flex-1 text-gray-300",children:e.replace(/([A-Z])/g," $1").trim()}),(0,C.jsx)(j.p,{id:"stroke-".concat(e),type:"number",min:"0",max:"2",className:"w-20 bg-gray-700 border-gray-600 text-white text-right",value:null!=(t=null!=(r=e7[e])?r:e1[e])?t:"",onChange:function(t){return tw(e,t.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]},e)})})]})}),(0,C.jsx)(k.av,{value:"farben",children:(0,C.jsxs)(N.Zp,{className:"bg-gray-800/50 border-gray-700/50 shadow-inner mt-4",children:[(0,C.jsx)(N.aR,{className:"pb-3 pt-4",children:(0,C.jsx)(N.ZB,{className:"text-base text-gray-200",children:"Farben & Kartensatz"})}),(0,C.jsxs)(N.Wu,{className:"space-y-3 pt-0 pb-4",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between space-x-2 p-2 rounded-md hover:bg-gray-700/30 mb-3 border-b border-gray-600/40 pb-3",children:[(0,C.jsx)(O.J,{className:"font-medium text-gray-300",children:"Kartensatz"}),(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)(v.$,{type:"button",variant:"DE"===te.cardStyle?"default":"outline",size:"sm",onClick:function(){return tS("DE")},className:"min-w-[50px] text-center font-semibold ".concat("DE"===te.cardStyle?"bg-purple-600 hover:bg-purple-700 text-white border-purple-600":"bg-gray-700 text-gray-400 border-gray-600 hover:bg-gray-600 hover:text-gray-300"),children:"DE"}),(0,C.jsx)(v.$,{type:"button",variant:"FR"===te.cardStyle?"default":"outline",size:"sm",onClick:function(){return tS("FR")},className:"min-w-[50px] text-center font-semibold ".concat("FR"===te.cardStyle?"bg-purple-600 hover:bg-purple-700 text-white border-purple-600":"bg-gray-700 text-gray-400 border-gray-600 hover:bg-gray-600 hover:text-gray-300"),children:"FR"})]})]}),(0,C.jsxs)("div",{className:"border-t border-gray-600/40 pt-3 space-y-2",children:[(0,C.jsx)("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Multiplikatoren"}),Y.u4.map(function(e){var t,r,n,a,i,s=null!=(t=te.values[e.id])?t:1,o=0===s,c=(0,X.Sn)(e.id),l=null!=(r=null==(n=K.S[c])?void 0:n[te.cardStyle])?r:c;return(0,C.jsxs)("div",{className:"flex items-center justify-between space-x-3 p-2 rounded-md transition-opacity duration-200 ".concat(o?"opacity-60 hover:bg-gray-700/20":"hover:bg-gray-700/30"),children:[(0,C.jsxs)("div",{className:"flex items-center space-x-2 flex-1",children:[(0,C.jsx)(H.h,{farbe:e.name,mode:"svg",cardStyle:te.cardStyle,className:"w-5 h-5 flex-shrink-0"}),(0,C.jsx)(O.J,{htmlFor:"farbe-".concat(e.id),className:"font-medium text-gray-300",children:l})]}),(0,C.jsx)(j.p,{id:"farbe-".concat(e.id),type:"number",min:"0",max:"12",className:"w-20 bg-gray-700 border-gray-600 text-white text-right ".concat(o?"text-gray-400":""),value:null!=(a=null!=(i=tn[e.id])?i:s)?a:"",onChange:function(t){return tN(e.id,t.target.value)},onFocus:function(e){e.target.select(),setTimeout(function(){return e.target.select()},0)}})]},e.id)})]})]})]})})]})]})]}),(0,C.jsxs)(N.Zp,{className:"bg-gray-800 border-gray-700",children:[(0,C.jsxs)(N.aR,{children:[(0,C.jsxs)(N.ZB,{className:"text-white flex items-center gap-2",children:[(0,C.jsx)(u.A,{className:"w-5 h-5"}),"Teilnehmer & Admins"]}),(0,C.jsx)(N.BT,{className:"text-gray-400",children:"Verwalte, wer am Turnier teilnimmt und wer es administrieren darf."})]}),(0,C.jsxs)(N.Wu,{children:[(0,C.jsxs)(v.$,{onClick:function(){return e$(!0)},disabled:!tb()||eN,className:"w-full bg-green-600 hover:bg-green-700 text-white flex items-center justify-center gap-2 mb-3",children:[(0,C.jsx)(d.A,{className:"w-4 h-4 mr-1"})," Teilnehmer per Link einladen"]}),(null==Q?void 0:Q.groupId)&&(0,C.jsxs)(v.$,{onClick:function(){return eq(!0)},disabled:!tb()||eN,className:"w-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center gap-2 mb-6",children:[(0,C.jsx)(u.A,{className:"w-4 h-4 mr-1"})," Aus Gruppe hinzuf\xfcgen..."]}),"loading"!==ea||et.length?0===et.length?(0,C.jsx)("p",{className:"text-center text-gray-500 py-4",children:"Noch keine Teilnehmer im Turnier."}):(0,C.jsx)("ul",{className:"space-y-3",children:et.sort(function(e,t){var r=null==Q?void 0:Q.adminIds.includes(e.userId||""),n=null==Q?void 0:Q.adminIds.includes(t.userId||"");return r&&!n?-1:!r&&n?1:(e.displayName||"").localeCompare(t.displayName||"")}).map(function(e){var t,r=Q.adminIds.includes(e.userId||""),n=(null==F?void 0:F.uid)===e.userId,a=eY[e.id]||!1,s=tb()&&!n,o=r&&1===Q.adminIds.length,c=e.userId===Q.createdBy;return(0,C.jsxs)("li",{className:"flex items-center justify-between space-x-3 p-3 bg-gray-700/50 rounded-lg",children:[(0,C.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,C.jsxs)(U.eu,{className:"h-9 w-9 flex-shrink-0",children:[(0,C.jsx)(U.BK,{src:e.photoURL||void 0,alt:e.displayName||"Avatar"}),(0,C.jsx)(U.q5,{className:"bg-gray-600 text-gray-300",children:(null==(t=e.displayName)?void 0:t.charAt(0).toUpperCase())||"P"})]}),(0,C.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,C.jsxs)("p",{className:"text-sm font-medium text-white truncate",children:[e.displayName||"Unbekannter Spieler",n&&(0,C.jsx)("span",{className:"ml-1.5 text-xs text-blue-400",children:"(Du)"})]}),r&&(0,C.jsxs)($.E,{variant:"outline",className:"mt-1 border-purple-500 text-purple-300 bg-purple-900/30 px-1.5 py-0.5 text-xs",children:[(0,C.jsx)(h.A,{className:"w-3 h-3 mr-1"})," Admin"]})]})]}),tb()&&(0,C.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s&&!r&&(0,C.jsxs)(S.Lt,{children:[(0,C.jsx)(S.tv,{asChild:!0,children:(0,C.jsx)(v.$,{variant:"ghost",size:"icon",className:"text-green-500 hover:text-green-400 hover:bg-green-900/30 w-9 h-9 p-1.5",disabled:a||eN,title:"Zum Admin ernennen",children:a?(0,C.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):(0,C.jsx)(m.A,{className:"w-5 h-5"})})}),(0,C.jsxs)(S.EO,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,C.jsxs)(S.wd,{children:[(0,C.jsx)(S.r7,{children:"Zum Admin ernennen?"}),(0,C.jsxs)(S.$v,{className:"text-gray-400",children:['M\xf6chtest du "',e.displayName,'" zum Turnier-Admin ernennen?']})]}),(0,C.jsxs)(S.ck,{children:[(0,C.jsx)(S.Zr,{className:"border-red-700 bg-red-900/50 hover:bg-red-800 text-white",children:"Abbrechen"}),(0,C.jsx)(S.Rx,{onClick:function(){return tx(e.id,e.userId,"makeAdmin")},className:"bg-green-600 hover:bg-green-700 text-white",children:"Ernennen"})]})]})]}),s&&r&&!o&&!c&&(0,C.jsxs)(S.Lt,{children:[(0,C.jsx)(S.tv,{asChild:!0,children:(0,C.jsx)(v.$,{variant:"ghost",size:"icon",className:"text-yellow-500 hover:text-yellow-400 hover:bg-yellow-900/30 w-9 h-9 p-1.5",disabled:a||eN,title:c?"Gr\xfcnder kann nicht entfernt werden":"Admin-Status entziehen",children:a?(0,C.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):(0,C.jsx)(m.A,{className:"w-5 h-5"})})}),(0,C.jsxs)(S.EO,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,C.jsxs)(S.wd,{children:[(0,C.jsx)(S.r7,{children:"Admin-Status entziehen?"}),(0,C.jsxs)(S.$v,{className:"text-gray-400",children:['M\xf6chtest du "',e.displayName,'" den Admin-Status entziehen?']})]}),(0,C.jsxs)(S.ck,{children:[(0,C.jsx)(S.Zr,{className:"border-red-700 bg-red-900/50 hover:bg-red-800 text-white",children:"Abbrechen"}),(0,C.jsx)(S.Rx,{onClick:function(){return tx(e.id,e.userId,"removeAdmin")},className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:"Entziehen"})]})]})]}),!n&&(0,C.jsxs)(S.Lt,{children:[(0,C.jsx)(S.tv,{asChild:!0,children:(0,C.jsx)(v.$,{variant:"outline",size:"icon",className:"border-red-700 text-red-500 hover:text-red-400 hover:bg-red-900/20 hover:border-red-600 w-9 h-9 p-1.5",disabled:a||eN,title:"Teilnehmer entfernen",children:a?(0,C.jsx)(i.A,{className:"h-5 w-5 animate-spin"}):(0,C.jsx)(f.A,{className:"w-5 h-5"})})}),(0,C.jsxs)(S.EO,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,C.jsxs)(S.wd,{children:[(0,C.jsx)(S.r7,{children:"Teilnehmer entfernen?"}),(0,C.jsxs)(S.$v,{className:"text-gray-400",children:['M\xf6chtest du "',e.displayName,'" wirklich aus dem Turnier entfernen?']})]}),(0,C.jsxs)(S.ck,{children:[(0,C.jsx)(S.Zr,{className:"border-red-700 bg-red-900/50 hover:bg-red-800 text-white",children:"Abbrechen"}),(0,C.jsx)(S.Rx,{onClick:function(){return tx(e.id,e.userId,"removeParticipant")},className:"bg-red-600 hover:bg-red-700 text-white",children:"Entfernen"})]})]})]})]})]},e.id)})}):(0,C.jsxs)("div",{className:"flex justify-center items-center py-6",children:[(0,C.jsx)(i.A,{className:"h-6 w-6 animate-spin text-gray-400"}),(0,C.jsx)("span",{className:"ml-2 text-gray-400",children:"Lade Teilnehmer..."})]})]})]}),tb()&&(0,C.jsxs)(N.Zp,{className:"bg-red-900/20 border-red-900/50",children:[(0,C.jsx)(N.aR,{children:(0,C.jsx)(N.ZB,{className:"text-red-300",children:"Gefahrenzone & Turnierstatus"})}),(0,C.jsxs)(N.Wu,{className:"space-y-4",children:[(0,C.jsxs)("div",{className:"p-3 rounded-md bg-gray-700/50 border border-gray-600/50",children:[(0,C.jsx)("h4",{className:"font-medium text-gray-200",children:"Aktueller Status"}),(0,C.jsxs)("p",{className:"text-lg font-semibold mt-1",children:[(null==Q?void 0:Q.status)==="upcoming"&&(0,C.jsx)("span",{className:"text-yellow-400",children:"Anstehend"}),(null==Q?void 0:Q.status)==="active"&&(0,C.jsx)("span",{className:"text-green-400",children:"Aktiv"}),(null==Q?void 0:Q.status)==="completed"&&(0,C.jsx)("span",{className:"text-blue-400",children:"Abgeschlossen"}),(null==Q?void 0:Q.status)==="archived"&&(0,C.jsx)("span",{className:"text-gray-500",children:"Archiviert"})]}),(null==Q?void 0:Q.status)==="completed"&&Q.completedAt&&"function"==typeof Q.completedAt.toDate&&(0,C.jsxs)("p",{className:"text-xs text-gray-400",children:["Abgeschlossen am ",new Date(Q.completedAt.toDate()).toLocaleDateString("de-CH")]})]}),(null==Q?void 0:Q.status)==="upcoming"&&(0,C.jsxs)("div",{children:[(0,C.jsx)("h4",{className:"font-medium text-gray-200",children:"Turnier starten"}),(0,C.jsx)("p",{className:"text-sm text-gray-400 mt-1 mb-3",children:'Setze den Status dieses Turniers auf "Aktiv". Sobald es aktiv ist, k\xf6nnen Passen gestartet werden.'}),(0,C.jsx)(v.$,{onClick:tJ,disabled:tz||eN,className:"w-full bg-green-600 hover:bg-green-700 text-white",children:tz?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Wird gestartet..."]}):"Turnier jetzt starten"})]}),(null==Q?void 0:Q.status)==="active"&&(0,C.jsxs)("div",{children:[(0,C.jsx)("h4",{className:"font-medium text-gray-200",children:"Turnier abschliessen"}),(0,C.jsx)("p",{className:"text-sm text-gray-400 mt-1 mb-3",children:"Markiere dieses Turnier als abgeschlossen. Dies kann in der Regel nicht r\xfcckg\xe4ngig gemacht werden. Abgeschlossene Turniere bleiben zur Ansicht im Archiv."}),(0,C.jsxs)(E.lG,{open:tO,onOpenChange:tT,children:[(0,C.jsx)(E.zM,{asChild:!0,children:(0,C.jsx)(v.$,{variant:"outline",children:"Turnier abschliessen"})}),(0,C.jsxs)(E.Cf,{children:[(0,C.jsxs)(E.c7,{children:[(0,C.jsx)(E.L3,{children:"Turnier wirklich abschliessen?"}),(0,C.jsx)(E.rr,{children:"Wenn du dieses Turnier abschliesst, wird es als beendet markiert und ist nicht mehr aktiv. M\xf6chtest du fortfahren?"})]}),(0,C.jsxs)(E.Es,{children:[(0,C.jsx)(v.$,{variant:"outline",onClick:function(){return tT(!1)},disabled:tE,className:"border-red-700 bg-red-900/50 hover:bg-red-800 text-white",children:"Abbrechen"}),(0,C.jsx)(v.$,{variant:"destructive",onClick:tM,disabled:tE,children:tE?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Wird abgeschlossen..."]}):"Abschliessen"})]})]})]})]}),(null==Q?void 0:Q.status)==="completed"&&(0,C.jsxs)("div",{className:"p-3 rounded-md bg-green-900/30 border border-green-700/50",children:[(0,C.jsx)("h4",{className:"font-medium text-green-300",children:"Turnier abgeschlossen"}),(0,C.jsxs)("p",{className:"text-sm text-green-400/80 mt-1",children:["Dieses Turnier wurde bereits als abgeschlossen markiert.",Q.completedAt&&"function"==typeof Q.completedAt.toDate?" (am ".concat(new Date(Q.completedAt.toDate()).toLocaleDateString("de-CH"),")"):""]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("h4",{className:"font-medium text-gray-200",children:"Turnier l\xf6schen"}),(0,C.jsx)("p",{className:"text-sm text-gray-400 mt-1 mb-3",children:"Das endg\xfcltige L\xf6schen von Turnieren ist derzeit nicht vorgesehen, um historische Daten zu erhalten."}),(0,C.jsxs)(S.Lt,{open:tD,onOpenChange:tC,children:[(0,C.jsx)(S.tv,{asChild:!0,children:(0,C.jsxs)(v.$,{variant:"destructive",className:"bg-red-700 hover:bg-red-800 border-red-900 text-white",disabled:!0,children:[(0,C.jsx)(g.A,{className:"w-4 h-4 mr-2"})," Turnier l\xf6schen (Deaktiviert)"]})}),(0,C.jsxs)(S.EO,{className:"bg-gray-800 border-gray-700 text-white",children:[(0,C.jsxs)(S.wd,{children:[(0,C.jsx)(S.r7,{children:"Turnier wirklich l\xf6schen?"}),(0,C.jsx)(S.$v,{className:"text-gray-400",children:"Diese Funktion ist aktuell nicht verf\xfcgbar."})]}),(0,C.jsxs)(S.ck,{children:[(0,C.jsx)(S.Zr,{className:"border-red-700 bg-red-900/50 hover:bg-red-800 text-white",children:"Abbrechen"}),(0,C.jsx)(S.Rx,{onClick:tG,className:"bg-red-600 hover:bg-red-700 text-white",disabled:!0,children:"Ja, l\xf6schen"})]})]})]})]})]})]})]})]}),(0,C.jsx)(A.A,{isOpen:eU,onClose:function(){return e$(!1)},tournamentId:null==Q?void 0:Q.id,tournamentName:null==Q?void 0:Q.name}),(null==Q?void 0:Q.groupId)&&(0,C.jsx)(G,{isOpen:eW,onClose:function(){return eq(!1)},tournamentId:null==Q?void 0:Q.id,groupId:null==Q?void 0:Q.groupId})]}):(0,C.jsx)(x.A,{children:(0,C.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-gray-900 text-white",children:[(0,C.jsx)(s.A,{className:"h-8 w-8 text-red-500 mr-3"}),(0,C.jsx)("span",{children:"Turnier nicht gefunden oder Zugriff verweigert."})]})}):(0,C.jsx)(x.A,{children:(0,C.jsxs)("div",{className:"flex min-h-screen items-center justify-center bg-gray-900 text-white",children:[(0,C.jsx)(i.A,{className:"h-8 w-8 animate-spin text-purple-400 mr-3"}),(0,C.jsx)("span",{children:"Lade Turniereinstellungen..."})]})})}},2524:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/tournaments/[instanceId]/settings",function(){return r(1549)}])},4790:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>N,Es:()=>k,HM:()=>j,L3:()=>O,c7:()=>S,lG:()=>y,rr:()=>T,zM:()=>x});var n=r(4232),a=r(6303),i=r(9961),s=r(6722),o=r(7876);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["className"],u=["className","children"],d=["className"],h=["className"],m=["className"],f=["className"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){var n,a,i;n=e,a=t,i=r[t],(a=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var y=a.bL,x=a.l9,v=a.ZL,j=a.bm,w=n.forwardRef(function(e,t){var r=e.className,n=b(e,l);return(0,o.jsx)(a.hJ,p({ref:t,className:(0,s.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},n))});w.displayName=a.hJ.displayName;var N=n.forwardRef(function(e,t){var r=e.className,n=e.children,c=b(e,u);return(0,o.jsxs)(v,{children:[(0,o.jsx)(w,{}),(0,o.jsxs)(a.UC,p(p({ref:t,className:(0,s.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},c),{},{children:[n,(0,o.jsxs)(a.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(i.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});N.displayName=a.UC.displayName;var S=function(e){var t=e.className,r=b(e,d);return(0,o.jsx)("div",p({className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t)},r))};S.displayName="DialogHeader";var k=function(e){var t=e.className,r=b(e,h);return(0,o.jsx)("div",p({className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},r))};k.displayName="DialogFooter";var O=n.forwardRef(function(e,t){var r=e.className,n=b(e,m);return(0,o.jsx)(a.hE,p({ref:t,className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",r)},n))});O.displayName=a.hE.displayName;var T=n.forwardRef(function(e,t){var r=e.className,n=b(e,f);return(0,o.jsx)(a.VY,p({ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r)},n))});T.displayName=a.VY.displayName},5541:(e,t,r)=>{"use strict";r.d(t,{S:()=>h});var n=r(4232),a=r(9470),i=r(7889),s=r(6722),o=r(7876);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["className"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var n,a,i;n=e,a=t,i=r[t],(a=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=n.forwardRef(function(e,t){var r=e.className,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,l);return(0,o.jsx)(a.bL,d(d({ref:t,className:(0,s.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r)},n),{},{children:(0,o.jsx)(a.C1,{className:(0,s.cn)("flex items-center justify-center text-current"),children:(0,o.jsx)(i.A,{className:"h-4 w-4"})})}))});h.displayName=a.bL.displayName},8238:(e,t,r)=>{"use strict";r.d(t,{bq:()=>N,eb:()=>T,gC:()=>O,l6:()=>j,yv:()=>w});var n=r(4232),a=r(1687),i=r(6261),s=r(4623),o=r(7889),c=r(6722),l=r(7876);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=["className","children"],h=["className"],m=["className"],f=["className","children","position"],g=["className"],p=["className","children"],b=["className"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){var n,a,i;n=e,a=t,i=r[t],(a=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var j=a.bL;a.YJ;var w=a.WT,N=n.forwardRef(function(e,t){var r=e.className,n=e.children,s=v(e,d);return(0,l.jsxs)(a.l9,x(x({ref:t,className:(0,c.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},s),{},{children:[n,(0,l.jsx)(a.In,{asChild:!0,children:(0,l.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}))});N.displayName=a.l9.displayName;var S=n.forwardRef(function(e,t){var r=e.className,n=v(e,h);return(0,l.jsx)(a.PP,x(x({ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r)},n),{},{children:(0,l.jsx)(s.A,{className:"h-4 w-4"})}))});S.displayName=a.PP.displayName;var k=n.forwardRef(function(e,t){var r=e.className,n=v(e,m);return(0,l.jsx)(a.wn,x(x({ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r)},n),{},{children:(0,l.jsx)(i.A,{className:"h-4 w-4"})}))});k.displayName=a.wn.displayName;var O=n.forwardRef(function(e,t){var r=e.className,n=e.children,i=e.position,s=void 0===i?"popper":i,o=v(e,f);return(0,l.jsx)(a.ZL,{children:(0,l.jsxs)(a.UC,x(x({ref:t,className:(0,c.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:s},o),{},{children:[(0,l.jsx)(S,{}),(0,l.jsx)(a.LM,{className:(0,c.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,l.jsx)(k,{})]}))})});O.displayName=a.UC.displayName,n.forwardRef(function(e,t){var r=e.className,n=v(e,g);return(0,l.jsx)(a.JU,x({ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",r)},n))}).displayName=a.JU.displayName;var T=n.forwardRef(function(e,t){var r=e.className,n=e.children,i=v(e,p);return(0,l.jsxs)(a.q7,x(x({ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},i),{},{children:[(0,l.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(a.VF,{children:(0,l.jsx)(o.A,{className:"h-4 w-4"})})}),(0,l.jsx)(a.p4,{children:n})]}))});T.displayName=a.q7.displayName,n.forwardRef(function(e,t){var r=e.className,n=v(e,b);return(0,l.jsx)(a.wv,x({ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r)},n))}).displayName=a.wv.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[227,8230,1111,4455,8714,6035,5038,3834,4101,5881,5854,735,6147,636,6593,8792],()=>t(2524)),_N_E=e.O()}]);