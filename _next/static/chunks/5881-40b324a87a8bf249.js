"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5881],{5881:(e,t,r)=>{r.d(t,{A:()=>Q});var n=r(4232),o=r(4e3),a=r(950),i=r(3649),s=r(4536),l=r(9770),c=r(5589),u=r(2348),f=r(2885),d=r(7256),m=r(5294),p=r(8230),h=r.n(p),v=r(9099),y=r(6722),g=r(6602),b=r(2009),x=r(7876);function w(){var e,t=(0,v.useRouter)().pathname,r=(0,a.useAuthStore)(),o=r.isGuest,i=r.user,s=(0,g.yu)(),l=s.userActiveTournamentId,p=s.userTournamentInstances,w=s.loadUserTournamentInstances,j=s.status;(0,n.useEffect)(function(){i&&i.uid&&"idle"===j&&0===p.length&&w(i.uid)},[i,j,w,p.length]);var N=[{name:"Home",href:"/start",icon:c.A,active:"/start"===t,itemTournamentStatus:null},{name:"Profil",href:"/profile",icon:u.A,active:t.startsWith("/profile"),itemTournamentStatus:null},{name:"Regelchat",href:"https://chat.jassguru.ch",icon:f.A,active:!1,external:!0,itemTournamentStatus:null}],O=(0,n.useMemo)(function(){if(p&&p.length>0){var e=new Date;e.setDate(e.getDate()-7);var t=p.filter(function(t){return"active"===t.status||"upcoming"===t.status||"completed"===t.status&&(t.completedAt instanceof b.Timestamp?t.completedAt.toDate():new Date("number"==typeof t.completedAt?t.completedAt:0))>=e}).sort(function(e,t){if("active"===e.status&&"active"!==t.status)return -1;if("active"===t.status&&"active"!==e.status)return 1;if("active"===e.status&&"active"===t.status)return(e.instanceDate instanceof b.Timestamp?e.instanceDate.toMillis():"number"==typeof e.instanceDate?e.instanceDate:1/0)-(t.instanceDate instanceof b.Timestamp?t.instanceDate.toMillis():"number"==typeof t.instanceDate?t.instanceDate:1/0);if("upcoming"===e.status&&"upcoming"!==t.status)return -1;if("upcoming"===t.status&&"upcoming"!==e.status)return 1;if("upcoming"===e.status&&"upcoming"===t.status)return(e.instanceDate instanceof b.Timestamp?e.instanceDate.toMillis():"number"==typeof e.instanceDate?e.instanceDate:1/0)-(t.instanceDate instanceof b.Timestamp?t.instanceDate.toMillis():"number"==typeof t.instanceDate?t.instanceDate:1/0);if("completed"===e.status&&"completed"===t.status){var r=e.completedAt instanceof b.Timestamp?e.completedAt.toMillis():"number"==typeof e.completedAt?e.completedAt:0;return(t.completedAt instanceof b.Timestamp?t.completedAt.toMillis():"number"==typeof t.completedAt?t.completedAt:0)-r}return 0});if(t.length>0)return t[0]}if(l&&(!p||0===p.length)){var r=p.find(function(e){return e.id===l});return r||{id:l,status:"active",name:"Turnier"}}return null},[l,p]);if(O){var S={name:"Turnier",href:"/view/tournament/".concat(O.id),icon:d.A,active:t.startsWith("/view/tournament/".concat(O.id)),itemTournamentStatus:O.status};e=[N[0],S,N[1],N[2]]}else{var k={name:"Jassen",href:"/jass",icon:m.A,active:"/jass"===t,itemTournamentStatus:null};e=[N[0],N[1],N[2],k]}return o||t.startsWith("/jass")||"/"===t||"/join"===t||t.startsWith("/auth/")?null:(0,x.jsx)("nav",{className:"fixed bottom-0 left-1/2 transform -translate-x-1/2 z-50 bg-gray-900 border-t border-gray-800 h-24 max-w-3xl w-full",children:(0,x.jsx)("div",{className:"w-full flex justify-around items-center h-full px-4 pb-safe pb-8",children:e.map(function(e){return e.external?(0,x.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:(0,y.cn)("flex flex-col items-center justify-center w-full h-full space-y-1","text-sm font-medium transition-colors","text-gray-400 hover:text-gray-300"),children:[(0,x.jsx)(e.icon,{size:24,className:(0,y.cn)("active"===e.itemTournamentStatus?"text-green-400":"upcoming"===e.itemTournamentStatus?"text-yellow-500":"completed"===e.itemTournamentStatus?"text-purple-400":"")}),(0,x.jsx)("span",{className:"text-xs",children:e.name})]},e.name):(0,x.jsxs)(h(),{href:e.href,className:(0,y.cn)("flex flex-col items-center justify-center w-full h-full space-y-1","text-sm font-medium transition-colors",e.active&&"active"===e.itemTournamentStatus?"text-green-400":e.active&&"upcoming"===e.itemTournamentStatus?"text-yellow-500":e.active&&"completed"===e.itemTournamentStatus?"text-purple-400":e.active?"text-blue-400":"text-gray-400 hover:text-gray-300"),children:[(0,x.jsx)(e.icon,{size:24,className:(0,y.cn)("Turnier"===e.name&&"active"===e.itemTournamentStatus?"text-green-400":"Turnier"===e.name&&"upcoming"===e.itemTournamentStatus?"text-yellow-500":"Turnier"===e.name&&"completed"===e.itemTournamentStatus?"text-purple-400":e.active&&null===e.itemTournamentStatus?"text-blue-400":"text-gray-400")}),(0,x.jsx)("span",{className:(0,y.cn)("text-xs","Turnier"===e.name&&"active"===e.itemTournamentStatus?"text-green-400":"Turnier"===e.name&&"upcoming"===e.itemTournamentStatus?"text-yellow-500":"Turnier"===e.name&&"completed"===e.itemTournamentStatus?"text-purple-400":e.active&&null===e.itemTournamentStatus||e.active?"text-blue-400":"text-gray-400"),children:e.name})]},e.name)})})})}var j=r(4587),N=r.n(j),O=r(1302),S=r(7154),k=r(9869),T=r(7889),P=r(8835);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=["className","inset","children"],A=["className"],D=["className","sideOffset"],_=["className","inset"],z=["className","children","checked"],C=["className","children"],G=["className","inset"],R=["className"];function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){var n,o,a;n=e,o=t,a=r[t],(o=function(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==L(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===L(t)?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function F(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var M=S.bL,B=S.l9;S.YJ,S.ZL,S.Pb,S.z6,n.forwardRef(function(e,t){var r=e.className,n=e.inset,o=e.children,a=F(e,E);return(0,x.jsxs)(S.ZP,U(U({ref:t,className:(0,y.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",r)},a),{},{children:[o,(0,x.jsx)(k.A,{className:"ml-auto"})]}))}).displayName=S.ZP.displayName,n.forwardRef(function(e,t){var r=e.className,n=F(e,A);return(0,x.jsx)(S.G5,U({ref:t,className:(0,y.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r)},n))}).displayName=S.G5.displayName;var H=n.forwardRef(function(e,t){var r=e.className,n=e.sideOffset,o=F(e,D);return(0,x.jsx)(S.ZL,{children:(0,x.jsx)(S.UC,U({ref:t,sideOffset:void 0===n?4:n,className:(0,y.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r)},o))})});H.displayName=S.UC.displayName;var J=n.forwardRef(function(e,t){var r=e.className,n=e.inset,o=F(e,_);return(0,x.jsx)(S.q7,U({ref:t,className:(0,y.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",r)},o))});J.displayName=S.q7.displayName,n.forwardRef(function(e,t){var r=e.className,n=e.children,o=e.checked,a=F(e,z);return(0,x.jsxs)(S.H_,U(U({ref:t,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:o},a),{},{children:[(0,x.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,x.jsx)(S.VF,{children:(0,x.jsx)(T.A,{className:"h-4 w-4"})})}),n]}))}).displayName=S.H_.displayName,n.forwardRef(function(e,t){var r=e.className,n=e.children,o=F(e,C);return(0,x.jsxs)(S.hN,U(U({ref:t,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},o),{},{children:[(0,x.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,x.jsx)(S.VF,{children:(0,x.jsx)(P.A,{className:"h-2 w-2 fill-current"})})}),n]}))}).displayName=S.hN.displayName;var W=n.forwardRef(function(e,t){var r=e.className,n=e.inset,o=F(e,G);return(0,x.jsx)(S.JU,U({ref:t,className:(0,y.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r)},o))});W.displayName=S.JU.displayName;var Z=n.forwardRef(function(e,t){var r=e.className,n=F(e,R);return(0,x.jsx)(S.wv,U({ref:t,className:(0,y.cn)("-mx-1 my-1 h-px bg-muted",r)},n))});function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){V=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(t,r,n,a){var i,s,l,c,u=Object.create((r&&r.prototype instanceof v?r:v).prototype);return o(u,"_invoke",{value:(i=t,s=n,l=new T(a||[]),c=d,function(t,r){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===t)throw r;return{value:e,done:!0}}for(l.method=t,l.arg=r;;){var n=l.delegate;if(n){var o=function t(r,n){var o=n.method,a=r.iterator[o];if(a===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),h;var i=f(a,r.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var s=i.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,h)}(n,l);if(o){if(o===h)continue;return o}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===d)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var a=f(i,s,l);if("normal"===a.type){if(c=l.done?p:"suspendedYield",a.arg===h)continue;return{value:a.arg,done:l.done}}"throw"===a.type&&(c=p,l.method="throw",l.arg=a.arg)}})}),u}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",p="completed",h={};function v(){}function y(){}function g(){}var b={};c(b,i,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(P([])));w&&w!==r&&n.call(w,i)&&(b=w);var j=g.prototype=v.prototype=Object.create(b);function N(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function O(e,t){var r;o(this,"_invoke",{value:function(o,a){function i(){return new t(function(r,i){!function r(o,a,i,s){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==$(u)&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){r("next",e,i,s)},function(e){r("throw",e,i,s)}):t.resolve(u).then(function(e){c.value=e,i(c)},function(e){return r("throw",e,i,s)})}s(l.arg)}(o,a,r,i)})}return r=r?r.then(i,i):i()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw TypeError($(t)+" is not iterable")}return y.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:y,configurable:!0}),y.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},N(O.prototype),c(O.prototype,s,function(){return this}),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},N(j),c(j,l,"Generator"),c(j,i,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Y(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,o)}Z.displayName=S.wv.displayName;let q=function(){var e,t,r,n,o,s=(0,a.useAuthStore)(),l=s.user,c=s.isGuest,u=s.logout,f=(0,v.useRouter)(),d=(0,i.useUIStore)(function(e){return e.headerConfig}),m=null==d?void 0:d.title,p=null!=(t=null==d?void 0:d.showBackButton)&&t,h=null!=(r=null==d?void 0:d.backButtonAction)?r:function(){"/auth/login"===f.pathname||"/auth/register"===f.pathname||"/auth/reset-password"===f.pathname?l?f.push("/start"):f.push("/"):f.back()},y=null==(n=null==d?void 0:d.showProfileButton)||n,g=m||p||y;return"/"!==f.pathname&&"/join"!==f.pathname&&g?(0,x.jsx)("header",{className:"sticky top-0 z-10 w-full bg-gray-800 shadow-md pt-12 pb-2",children:(0,x.jsxs)("div",{className:"w-full flex items-center justify-between px-4",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[p&&(0,x.jsx)("button",{onClick:h,className:"mr-2 flex h-10 w-10 items-center justify-center rounded-full text-gray-300 hover:bg-gray-700 transition-colors","aria-label":"Zur\xfcck",children:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),m&&(0,x.jsx)("h1",{className:"text-xl font-bold text-white",children:m})]}),y&&!c?(0,x.jsxs)(M,{children:[(0,x.jsx)(B,{asChild:!0,children:(0,x.jsxs)("div",{className:"flex cursor-pointer items-center",children:[(0,x.jsxs)("div",{className:"mr-3 text-right",children:[(0,x.jsx)("span",{className:"block text-sm font-medium text-white",children:(null==l?void 0:l.displayName)||"Profil"}),(0,x.jsx)("span",{className:"block text-xs text-gray-400",children:(null==l?void 0:l.email)||""})]}),(0,x.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full bg-gray-700",children:null!=l&&l.photoURL?(0,x.jsx)(N(),{src:l.photoURL,alt:"Profilbild",width:40,height:40,className:"h-full w-full object-cover"}):(0,x.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-blue-600 text-white",children:null!=l&&l.displayName?(0,x.jsx)("span",{className:"text-base font-semibold",children:null==(o=l.displayName[0])?void 0:o.toUpperCase()}):(0,x.jsx)(O.x$1,{className:"h-5 w-5 text-gray-300"})})})]})}),(0,x.jsxs)(H,{className:"w-56 mr-2 bg-gray-700 border-gray-600 text-white",align:"end",children:[(0,x.jsx)(W,{className:"text-gray-400",children:"Mein Konto"}),(0,x.jsx)(Z,{className:"bg-gray-600"}),(0,x.jsx)(J,{onClick:function(){return f.push("/profile")},className:"cursor-pointer hover:bg-gray-600 focus:bg-gray-600",children:"Profil"}),(0,x.jsx)(J,{onClick:function(){return f.push("/profile/groups")},className:"cursor-pointer hover:bg-gray-600 focus:bg-gray-600",children:"Meine Gruppen"}),(0,x.jsx)(Z,{className:"bg-gray-600"}),(0,x.jsx)(J,{onClick:(e=V().mark(function e(){return V().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\uD83D\uDEAA [Header] Logout-Prozess gestartet..."),e.next=1,u();case 1:console.log("\uD83D\uDEAA [Header] Logout erfolgreich, navigiere zur WelcomeScreen..."),setTimeout(function(){"/"!==f.pathname&&(console.log("\uD83D\uDEAA [Header] Erzwinge Navigation zur WelcomeScreen..."),f.push("/"))},300),e.next=3;break;case 2:e.prev=2,console.error("\uD83D\uDEAA [Header] Logout-Fehler:",e.catch(0)),f.push("/");case 3:case"end":return e.stop()}},e,null,[[0,2]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){Y(a,n,o,i,s,"next",e)}function s(e){Y(a,n,o,i,s,"throw",e)}i(void 0)})}),className:"cursor-pointer text-red-400 hover:bg-red-900/50 focus:bg-red-900/50",children:"Abmelden"})]})]}):y&&c?(0,x.jsxs)("div",{className:"flex cursor-pointer items-center",onClick:function(){c&&f.push("/auth/login")},children:[(0,x.jsxs)("div",{className:"mr-3 text-right",children:[(0,x.jsx)("span",{className:"block text-sm font-medium text-white",children:"Gast"}),(0,x.jsx)("span",{className:"block text-xs text-gray-400",children:"Anmelden"})]}),(0,x.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full bg-gray-700",children:(0,x.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-gray-600 text-white",children:(0,x.jsx)(O.x$1,{className:"h-5 w-5 text-gray-300"})})})]}):(0,x.jsx)("div",{style:{width:"40px"}})]})}):null};var K=r(5063),X=r(9688);let Q=function(e){var t=e.children,r=(0,o.usePathname)(),c=(0,a.useAuthStore)(),u=c.isAuthenticated,f=c.isGuest,d=(0,i.useUIStore)(function(e){return e.pageCta}),m=d.isVisible,p=d.text,h=d.onClick,v=d.loading,y=d.disabled,g=d.variant,b=(0,i.useUIStore)(function(e){return e.setHeaderConfig}),j=(0,s.useJassStore)(function(e){return e.jassSessionId}),N=(0,s.useJassStore)(function(e){return e.subscribeToSession}),O=(0,s.useJassStore)(function(e){return e.sessionUnsubscribe}),S=n.useRef(null);(0,n.useEffect)(function(){return j!==S.current&&(S.current=j,j?N(j):O&&(console.log("[MainLayout EFFECT] jassSessionId is null. Unsubscribing from session listener."),O())),function(){O&&O()}},[j,N,O]),(0,n.useEffect)(function(){"/"!==r&&b({showProfileButton:!0,showBackButton:!1,title:""})},[r,b]);var k=u()&&!f,T=m?"pb-44":k?"pb-24":"pb-0";return(0,x.jsxs)("div",{className:"flex flex-col h-screen bg-gray-900 max-w-3xl mx-auto",children:[(0,x.jsx)(q,{}),(0,x.jsx)("main",{className:"flex-1 relative overflow-y-auto ".concat(T),children:(0,x.jsx)("div",{className:"w-full px-4",children:t})}),m&&(0,x.jsx)("div",{className:"fixed bottom-24 left-1/2 transform -translate-x-1/2 z-40 px-4 pb-4 pt-2 bg-gradient-to-t from-gray-900 via-gray-900/90 to-transparent backdrop-blur-sm max-w-3xl w-full",children:(0,x.jsx)("div",{className:"w-full",children:(0,x.jsx)(l.$,{onClick:null!=h?h:void 0,disabled:y||v,className:"w-full h-14 text-lg font-bold rounded-xl shadow-lg transition-colors ".concat("info"===g?"bg-blue-600 hover:bg-blue-700 border-b-4 border-blue-900 text-white":"warning"===g?"bg-yellow-600 hover:bg-yellow-700 border-b-4 border-yellow-900 text-white":"purple"===g?"bg-purple-600 hover:bg-purple-700 border-b-4 border-purple-900 text-white":"bg-green-600 hover:bg-green-700 border-b-4 border-green-900 text-white"),children:v?"L\xe4dt...":p})})}),k&&(0,x.jsx)(w,{}),(0,x.jsx)(K.A,{}),(0,x.jsx)(X.l$,{position:"bottom-center",richColors:!0})]})}},9770:(e,t,r)=>{r.d(t,{$:()=>d,r:()=>f});var n=r(4232),o=r(2987),a=r(7137),i=r(6722),s=r(7876);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["className","variant","size","asChild"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var f=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef(function(e,t){var r=e.className,n=e.variant,a=e.size,d=e.asChild,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,c),p=void 0!==d&&d?o.DX:"button";return(0,s.jsx)(p,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var n,o,a;n=e,o=t,a=r[t],(o=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({className:(0,i.cn)(f({variant:n,size:a,className:r})),ref:t},m))});d.displayName="Button"}}]);