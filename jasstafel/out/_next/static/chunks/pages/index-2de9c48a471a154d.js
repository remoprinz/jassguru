(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{617:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return eb}});var r=n(7294),o=n(32);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a=function(){var t,e=function(t){if(Array.isArray(t))return t}(t=(0,r.useState)(function(){return window.innerHeight}))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next;!(c=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,2)||function(t,e){if(t){if("string"==typeof t)return i(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=e[0],o=e[1];return(0,r.useEffect)(function(){var t=function(){var t=window.innerHeight;o(t),document.documentElement.style.setProperty("--vh","".concat(t,"px"))};t();var e=setTimeout(t,100);return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),function(){clearTimeout(e),window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),n},s=n(5893),c=function(t){var e=t.className,n=t.outerStrokeWidth,o=void 0===n?2:n,i=t.diagonalStrokeWidth,a=t.position,c=t.onShapeRendered,l=(0,r.useRef)(null);return(0,r.useEffect)(function(){if(l.current&&c){var t=l.current.getBoundingClientRect();c({width:t.width,height:t.height,left:t.left,top:t.top})}},[c]),(0,s.jsx)("svg",{ref:l,className:e,viewBox:"0 0 120 100",preserveAspectRatio:"xMidYMid meet",children:(0,s.jsxs)("g",{transform:"top"===a?"translate(0, 0)":"none",children:[(0,s.jsx)("path",{d:"M0 0 L110 0",stroke:"currentColor",strokeWidth:o,fill:"none"}),(0,s.jsx)("path",{d:"M0 100 L110 0",stroke:"currentColor",strokeWidth:(void 0===i?.75:i)*Math.sqrt(2),fill:"none"}),(0,s.jsx)("path",{d:"M0 100 L110 100",stroke:"currentColor",strokeWidth:o,fill:"none"})]})})},l=function(t){var e=t.onSwipeUp,n=t.onSwipeDown,o=t.onSwipeLeft,i=t.onSwipeRight,a=t.threshold,s=void 0===a?50:a,c=t.element;(0,r.useEffect)(function(){var t=null,r=null,a=function(e){e.target.closest('[data-swipe-area="'.concat(c,'"]'))&&(t=e.touches[0].clientX,r=e.touches[0].clientY)},l=function(a){if(null!==t&&null!==r){var c=a.touches[0].clientX,l=a.touches[0].clientY,u=t-c,f=r-l;Math.abs(u)>Math.abs(f)?Math.abs(u)>s&&(u>0&&o?o():u<0&&i&&i(),t=null,r=null):Math.abs(f)>s&&(f>0&&e?e():f<0&&n&&n(),t=null,r=null)}};return document.addEventListener("touchstart",a),document.addEventListener("touchmove",l),function(){document.removeEventListener("touchstart",a),document.removeEventListener("touchmove",l)}},[e,n,o,i,s,c])},u=n(796);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}(0,u.ZP)("div")({position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start"}),(0,u.ZP)(o.q.div,{shouldForwardProp:function(t){return"isVertical"!==t&&"color"!==t}})(function(t){var e=t.isVertical;return{position:"absolute",backgroundColor:t.color,width:"2px",height:e?"100%":"2px",transformOrigin:"top left"}});var p=(0,u.ZP)("div")(function(t){return{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start",transform:t.isRotated?"rotate(180deg)":"rotate(0)",transformOrigin:"center center"}}),h=function(t){var e=t.stricheCount,n=(t.stricheCounts,t.einheitWert),i=t.strichColor,a=t.animationDuration,c=(t.isActive,t.direction),l=t.edgeOffset,u=t.diagonalStrichHeight,f=t.diagonalStrichWidth,m=(t.diagonalStrichOffset,t.diagonalStrichAngle),h=t.strichSpacing,g=void 0===h?10:h,b=t.einheitSpacing,y=void 0===b?10:b,v=t.isXMode,x=void 0!==v&&v,S=t.xAngle,j=void 0===S?15:S,w=t.xSpacing,O=void 0===w?10:w,C=t.xSize,P=void 0===C?20:C,T=t.position,N=t.isRotated,A=t.topDiagonalStrichOffset,I=t.bottomDiagonalStrichOffset,k=t.topDiagonalStrichAngle,M=t.bottomDiagonalStrichAngle,E=t.diagonalStrichOffset100er,D=t.diagonalStrichOffset20er,R=t.diagonalStrichAngle100er,G=t.diagonalStrichAngle20er,H=t.xOffset100erTop,z=t.xOffset100erBottom,F=Math.floor(e/5),B=e%5,L=e>0;(0,o.q_)({from:{scaleY:0},to:{scaleY:L?1:0},config:d(d({},o.vc.stiff),{},{duration:void 0===a?1e3:a})});var W=(0,r.useCallback)(function(t,e,r){var o=t%5,a=Math.floor(t/5)*(y+4*g),p=o*g;if(4===o){var h,b,v=3*g;100===n&&E?(h=E,b=R||m):20===n&&D?(h=D,b=G||m):(h="top"===T?A:I,b="top"===T?k:M);var x=d(d({position:"absolute",height:u,width:f},"top"===T?{right:"calc(".concat(l+a+v,"px + ").concat(h.horizontal," ").concat(100===n?"- 0px":"",")"),top:"calc(0px + ".concat(h.vertical,")")}:{left:"calc(".concat(l+a,"px + ").concat(h.horizontal,")"),bottom:"calc(0px + ".concat(h.vertical,")")}),{},{transform:"rotate(".concat(b,"deg)"),transformOrigin:"bottom left",backgroundColor:i});return(0,s.jsx)("div",{style:x},"strich-".concat(t))}if(r){if("ltr"===c){var S,j="bottom"===T&&0===n?0:5;S={left:"".concat(l+a+p+j,"px")}}else S={right:"".concat(l+a+p,"px")};var w=d({position:"absolute",height:"100%",width:"2px"},S);return(0,s.jsx)("div",{style:d(d({},w),{},{backgroundColor:i})},"strich-".concat(t))}return null},[i,c,l,u,f,m,g,y,T,A,I,k,M,n,E,D,R,G]),Z=(0,r.useCallback)(function(t){return(0,s.jsxs)(r.Fragment,{children:[[0,1,2,3].map(function(e){return W(5*t+e,!1,!0)}),W(5*t+4,!1,!1)," "]},"einheit-".concat(t))},[W]),U=(0,r.useMemo)(function(){return Array.from({length:F}).map(function(t,e){return Z(e)})},[F,Z]),q=(0,r.useMemo)(function(){return Array.from({length:B}).map(function(t,e){return W(5*F+e,!1,e<4)})},[B,F,W]),J=(0,r.useMemo)(function(){if(L){var t=e-1;return W(t,!0,t%5<4)}return null},[L,e,W]),_=(0,r.useCallback)(function(){return Array.from({length:Math.ceil(e/2)}).map(function(t,e){return"".concat(35*e,"px")})},[e]),V=(0,r.useCallback)(function(){return _().map(function(t,n){var r=2*n+2<=e,o=2*n+1===e,a={position:"absolute",width:"0%",height:"104%",top:"50%",transform:"translateY(-50%)"};return"top"===T?a.right="calc(".concat(t," + 40px)"):a.left="calc(".concat(t," + 20px)"),(0,s.jsxs)("div",{style:a,children:[(0,s.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:i,transform:"rotate(".concat(j,"deg)"),transformOrigin:"center",opacity:r||o?1:0}}),(0,s.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:i,transform:"rotate(-".concat(j,"deg)"),transformOrigin:"center",opacity:r?1:0}})]},"x-".concat(n))})},[_,e,j,i,T]),$=(0,r.useCallback)(function(){var t=Math.floor(e/10);return t>0?(0,s.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:Array.from({length:t}).map(function(t,e){return(0,s.jsxs)("div",{style:d(d({position:"absolute"},"top"===T?{right:"".concat(23+e*(P+15),"px")}:{left:"".concat(23+e*(P+15),"px")}),{},{top:"50%",transform:"translateY(-50%)",width:"".concat(P,"px"),height:"107%"}),children:[(0,s.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:i,transform:"rotate(".concat(j,"deg)"),transformOrigin:"center"}}),(0,s.jsx)("div",{style:{position:"absolute",width:"2px",height:"100%",backgroundColor:i,transform:"rotate(-".concat(j,"deg)"),transformOrigin:"center"}})]},"hundred-x-".concat(e))})}):null},[e,i,P,j,T]),Y=(0,r.useMemo)(function(){if(x)return V();if(100===n){var t=Math.floor(e/10),r=e-10*t,o=t*(P+O),i=null!=H?H:63,a=null!=z?z:40;return(0,s.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[$(),r>0&&(0,s.jsx)("div",{style:d(d({position:"absolute"},"top"===T?{right:t>0?"calc(".concat(o,"px + ").concat(i,"px)"):"calc(".concat(25,"px + 16px)")}:{left:t>0?"calc(".concat(o,"px + ").concat(a,"px)"):"calc(".concat(25,"px - 8px)")}),{},{top:0,bottom:0,width:"".concat(r*g,"px")}),children:Array.from({length:r}).map(function(t,e){return W(e,!1,!0)})})]})}if(20!==n)return(0,s.jsxs)(s.Fragment,{children:[U,q,J]});var c=Math.floor(e/5),l=e%5,u=c*(y+4*g)+l*g;return(0,s.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:(0,s.jsxs)("div",{style:d(d({position:"absolute"},"top"===T?{right:"25px"}:{left:"0px"}),{},{top:0,bottom:0,width:"".concat(u,"px")}),children:[Array.from({length:c}).map(function(t,e){return Z(e)}),Array.from({length:l}).map(function(t,e){return W(5*c+e,!1,e<4)})]})})},[e,n,x,V,$,P,O,T,g,W,U,q,J,y,Z]);return(0,r.useEffect)(function(){},[e]),(0,s.jsx)(p,{isRotated:void 0!==N&&N,children:Y})},g=n(1993),b={bergScore:2500,siegScore:5e3,schneiderScore:2500,schneiderStrafScore:1e3,maxRoundScore:1e3,maxScore:1e4,colors:["Mis\xe8re","Sch\xe4lle","Schilte","Rose","3x3","Obe","Une","Eichle","Quer","Slalom"],colorMultipliers:[1,2,3,4,4,5,6,7,7,7]};function y(t){return Math.max(0,t)}var v=n(9883),x=function(t){var e=Math.floor(200*t),n=function(t){return(0,v.Z)({particleCount:Math.floor(e/5),origin:{x:t,y:-.1},spread:80,ticks:300,gravity:1,decay:.95,startVelocity:40,shapes:["square"],colors:["#FFD700","#FFA500","#FF8C00"],scalar:1.5,drift:0})},r=[.2,.35,.5,.65,.8];r.forEach(function(t,e){setTimeout(function(){n(t)},100*e)}),setTimeout(function(){r.forEach(function(t,e){setTimeout(function(){n(t)},100*e)})},300)},S=function(t,e,n){return(0,v.Z)({particleCount:100,spread:360,startVelocity:25,origin:{x:t,y:e},colors:n.map(function(t){return"rgba".concat(t.substring(4,t.length-1),", 0.8)")}),ticks:200,shapes:["circle"],gravity:.8,decay:.94,scalar:2})},j=function(t){for(var e=Math.floor(5*t),n=["rgba(0, 255, 0, 0.8)","rgba(50, 205, 50, 0.8)","rgba(152, 251, 152, 0.8)"],r=function(t){return new Promise(function(e){var r=.9,o=setInterval(function(){r-=.1,(0,v.Z)({particleCount:3,spread:10,startVelocity:1,origin:{x:t,y:r+.1},colors:["rgba(128, 128, 128, 0.5)"],ticks:20,shapes:["circle"],gravity:.3,decay:.95,scalar:.5}),r<=.3&&(clearInterval(o),S(t,r,n),setTimeout(function(){S(t+.1,r+.1,n)},100),e())},50)})},o=0;o<e;o++)setTimeout(function(){r(.2+.6*Math.random())},300*o)},w=function(t,e){var n=document.createElement("div");return n.innerHTML="\uD83D\uDC80",n.style.position="fixed",n.style.left="".concat(100*t,"%"),n.style.top="".concat(100*e,"%"),n.style.fontSize="3rem",n.style.transform="translate(-50%, -50%)",n.style.transition="all 2s ease-in",n.style.zIndex="9999",document.body.appendChild(n),n},O=function(t,e){return(0,v.Z)({particleCount:150,spread:360,origin:{x:t,y:e},colors:["#FF0000","#FF4500","#FF6B00"],startVelocity:45,gravity:1,shapes:["circle"],scalar:1.5,ticks:150,decay:.95})},C=function(){[.2,.4,.6,.8].forEach(function(t,e){setTimeout(function(){var e=-.1,n=w(t,-.1),r=setInterval(function(){e+=.1,n.style.top="".concat(100*e,"%"),e>=.5&&(clearInterval(r),O(t,e),setTimeout(function(){n.style.opacity="0",setTimeout(function(){return n.remove()},1e3)},100),setTimeout(function(){return O(t,e+.1)},100))},100)},300*e)})},P=function(){var t=document.createElement("canvas");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="9999",t.style.pointerEvents="none",document.body.appendChild(t);var e=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;var n=1,r=function(){e.fillStyle="rgba(255, 255, 255, ".concat(n,")"),e.fillRect(0,0,t.width,t.height),(n-=.1)>0?requestAnimationFrame(r):document.body.removeChild(t)};r()},T=function(t){var e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="9999",e.style.pointerEvents="none",document.body.appendChild(e),e.style.animation="shake 0.1s infinite",P(),e.style.transition="all 0.5s",e.style.filter="saturate(200%) brightness(150%)",[{x:.2,y:.2},{x:.8,y:.2},{x:.2,y:.8},{x:.8,y:.8},{x:.5,y:.5}].forEach(function(t,e){setTimeout(function(){var e,n;return e=t.x,n=t.y,(0,v.Z)({particleCount:500,spread:360,origin:{x:e,y:n},colors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF"],shapes:["star","square"],ticks:300,startVelocity:60,gravity:-.5,scalar:2,drift:2*Math.random()-1})},200*e)}),setTimeout(function(){e.style.animation="",e.style.filter="",e.style.transition="",document.body.removeChild(e)},3e3)},N=function(t,e){if(!(t<.3)){var n=document.querySelector(".matsch-button");if(n)for(var r=n.getBoundingClientRect(),o=(r.left+r.width/2)/window.innerWidth,i=(r.top+r.height/2)/window.innerHeight,a=10+(t-.3)*30,s=function(t,n,r,a){(0,v.Z)({particleCount:r,angle:e?(t+180)%360:t,spread:n,origin:{x:o,y:i},colors:["#FF0000","#FFA500","#FFFF00","#00FF00","#0000FF","#800080"],scalar:a,gravity:e?-1:1,ticks:300})},c=0;c<360;c+=45)s(c,55,Math.floor(.3*a),1.2),s(c,25,Math.floor(.4*a),.8),s(c,10,Math.floor(.3*a),.4)}},A={berg:1,sieg:2,matsch:1,schneider:2,kontermatsch:2},I=function(t){return{vertikal:(t.berg||0)+2*(t.sieg||0)+(t.schneider||0),horizontal:(t.matsch||0)+2*(t.kontermatsch||0)}};function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||E(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){if(t){if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach(function(e){H(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function H(t,e,n){var r;return(r=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==k(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"===k(r)?r:String(r))in t)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var z=function(){return{bergActive:!1,bedankenActive:!1,striche:{berg:0,sieg:0,matsch:0,schneider:0,kontermatsch:0},total:0,isSigned:!1,jassPoints:0,playerStats:{1:{striche:0,points:0},2:{striche:0,points:0},3:{striche:0,points:0},4:{striche:0,points:0}}}},F=function(t){return t},B=function(t,e,n,r){var o=t.teams[e],i=A[n],a=(o.striche[n]||0)+1;return{teams:G(G({},t.teams),{},H({},e,G(G(G({},o),void 0!==r&&H({},"".concat(n,"Active"),r)),{},{striche:G(G({},o.striche),{},H({},n,a)),total:o.total+i})))}},L=function(){return{bergChargeAmount:0,bedankenChargeAmount:0,matschChargeAmount:0,bergPressStartTime:null,bedankenPressStartTime:null,matschPressStartTime:null,bergChargeInterval:null,bedankenChargeInterval:null,matschChargeInterval:null,currentRound:1,isJassCompleted:!1,teams:{top:z(),bottom:z()},games:[],currentGameId:1,currentGameCache:null}},W=(0,g.U)(function(t,e){return G(G({},L()),{},{getState:function(){return e()},setState:function(e){return t(e)},subscribe:function(t){return function(){}},startBergCharge:function(n){var r=e();if(!r.teams["top"===n?"bottom":"top"].bergActive&&!r.bergChargeInterval){var o=setInterval(function(){t(function(t){return{bergChargeAmount:Math.min(t.bergChargeAmount+.1,1)}})},100);t({bergPressStartTime:Date.now(),bergChargeInterval:o})}},stopBergCharge:function(n){var r=e();if(r.bergChargeInterval){clearInterval(r.bergChargeInterval);var o=F(n),i=r.teams[o];i.bergActive?t(function(t){return{teams:G(G({},t.teams),{},H({},o,G(G({},t.teams[o]),{},{bergActive:!1,striche:G(G({},t.teams[o].striche),{},{berg:0}),total:Math.max(0,t.teams[o].total-A.berg)}))),bergChargeInterval:null,bergChargeAmount:0,bergPressStartTime:null}}):i.striche.berg>=1?t({bergChargeInterval:null,bergChargeAmount:0,bergPressStartTime:null}):(t(G(G({},B(r,o,"berg",!0)),{},{bergChargeInterval:null,bergChargeAmount:0,bergPressStartTime:null})),x(r.bergChargeAmount))}},startBedankenCharge:function(n){var r=e();if((r.teams.top.bergActive||r.teams.bottom.bergActive)&&!r.teams["top"===n?"bottom":"top"].bedankenActive&&!r.bedankenChargeInterval){var o=setInterval(function(){t(function(t){return{bedankenChargeAmount:Math.min(t.bedankenChargeAmount+.1,1)}})},100);t({bedankenPressStartTime:Date.now(),bedankenChargeInterval:o})}},stopBedankenCharge:function(n){var r=e(),o=K.getState();if(r.bedankenChargeInterval){clearInterval(r.bedankenChargeInterval);var i=F(n),a=r.teams[i],s=r.teams.top.bergActive||r.teams.bottom.bergActive;if(a.bedankenActive)t(function(t){return{teams:G(G({},t.teams),{},H({},i,G(G({},t.teams[i]),{},{bedankenActive:!1,striche:G(G({},t.teams[i].striche),{},{sieg:0,schneider:0}),total:Math.max(0,t.teams[i].total-A.sieg-(a.striche.schneider?2*A.schneider:0))}))),bedankenChargeInterval:null,bedankenChargeAmount:0,bedankenPressStartTime:null}});else if(s){var c=("top"==("top"===i?"bottom":"top")?o.topScore:o.bottomScore)<2500;t(function(t){return{teams:G(G({},t.teams),{},H({},i,G(G({},t.teams[i]),{},{bedankenActive:!0,striche:G(G({},t.teams[i].striche),{},{sieg:(t.teams[i].striche.sieg||0)+1,schneider:c?2:0}),total:t.teams[i].total+A.sieg+(c?A.schneider:0)}))),bedankenChargeInterval:null,bedankenChargeAmount:0,bedankenPressStartTime:null}}),j(r.bedankenChargeAmount),c&&C()}else t({bedankenChargeInterval:null,bedankenChargeAmount:0,bedankenPressStartTime:null})}},hasBergForTeam:function(t){return e().teams[t].bergActive},hasBedankenForTeam:function(t){return e().teams[t].bedankenActive},addStrich:function(e,n){return t(function(t){var r=F(e);if(!r||!t.teams[r])return console.warn("Ung\xfcltiges Team:",r),t;var o=A[n];return K.getState().updateStricheCounts(r,o,1),B(t,r,n)})},startMatschCharge:function(n){var r=K.getState().currentPlayer;if(console.log("\uD83C\uDFAE Start Matsch Debug:",{clickedPosition:n,currentPlayer:r,activeTeam:r%2==1?"bottom":"top"}),!e().matschChargeInterval){var o=setInterval(function(){t(function(t){return{matschChargeAmount:Math.min(t.matschChargeAmount+.1,1)}})},100);t({matschPressStartTime:Date.now(),matschChargeInterval:o})}},stopMatschCharge:function(n){var r=e();if(r.matschChargeInterval){clearInterval(r.matschChargeInterval);var o=K.getState().currentPlayer,i=n!==(1===o||3===o?"bottom":"top"),a=r.matschChargeAmount;t(G(G({},B(r,F(n),i?"kontermatsch":"matsch")),{},{matschChargeInterval:null,matschChargeAmount:0,matschPressStartTime:null})),i?T(a):N(a,K.getState().isCalculatorFlipped)}},resetJass:function(){t(function(){return L()})},startNewGame:function(){return t(function(t){var e,n=t.games.length>0?t.games[t.games.length-1].id+1:1,r={id:n,timestamp:Date.now(),teams:{top:z(),bottom:z()},milestones:{}};return G(G({},t),{},{currentGameId:n,games:[].concat(function(t){if(Array.isArray(t))return D(t)}(e=t.games)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||E(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[r]),teams:{top:z(),bottom:z()}})})},getGameHistory:function(){return e().games},getCurrentGame:function(){var t=e();return t.games.find(function(e){return e.id===t.currentGameId})},calculateTotalPoints:function(){var t=e(),n=t.games.filter(function(e){return e.id<t.currentGameId}).reduce(function(t,e){return{top:t.top+(e.teams.top.total||0),bottom:t.bottom+(e.teams.bottom.total||0)}},{top:0,bottom:0});if(t.currentGameId===t.games.length){var r=t.teams;return{top:n.top+r.top.total,bottom:n.bottom+r.bottom.total}}var o=t.games.find(function(e){return e.id===t.currentGameId});return{top:n.top+((null==o?void 0:o.teams.top.total)||0),bottom:n.bottom+((null==o?void 0:o.teams.bottom.total)||0)}},calculateTotalJassPoints:function(){var t=e(),n=K.getState(),r=t.games.filter(function(e){return e.id<t.currentGameId}).reduce(function(t,e){return{top:t.top+(e.teams.top.jassPoints||0),bottom:t.bottom+(e.teams.bottom.jassPoints||0)}},{top:0,bottom:0});if(t.currentGameId===t.games.length)return{top:r.top+n.topScore,bottom:r.bottom+n.bottomScore};var o=t.games.find(function(e){return e.id===t.currentGameId});return{top:r.top+((null==o?void 0:o.teams.top.jassPoints)||0),bottom:r.bottom+((null==o?void 0:o.teams.bottom.jassPoints)||0)}},finalizeGame:function(){var n=e(),r=K.getState(),o=n.games.find(function(t){return t.id===n.currentGameId});if(o){var i=G(G({},o),{},{teams:{top:G(G({},n.teams.top),{},{jassPoints:r.topScore}),bottom:G(G({},n.teams.bottom),{},{jassPoints:r.bottomScore})}});K.getState().resetGamePoints(),t(function(t){return{games:t.games.map(function(e){return e.id===t.currentGameId?i:e}),teams:{top:z(),bottom:z()}}})}},navigateToPreviousGame:function(){var n=e(),r=n.games.findIndex(function(t){return t.id===n.currentGameId});if(r<=0)return!1;n.currentGameId===n.games.length&&e().saveCurrentGameToCache();var o=n.games[r-1],i=K.getState();return i.resetGamePoints(),i.setTopScore(o.teams.top.jassPoints),i.setBottomScore(o.teams.bottom.jassPoints),i.synchronizeStricheCounts(o.teams),t({currentGameId:o.id,teams:{top:G(G({},o.teams.top),{},{isSigned:!1}),bottom:G(G({},o.teams.bottom),{},{isSigned:!1})}}),!0},navigateToNextGame:function(){var n=e(),r=n.games.findIndex(function(t){return t.id===n.currentGameId});if(r>=n.games.length-1)return!1;var o=n.games[r+1],i=K.getState();return i.resetGamePoints(),o.id===n.games.length?e().restoreCurrentGameFromCache():(i.setTopScore(o.teams.top.jassPoints),i.setBottomScore(o.teams.bottom.jassPoints),i.synchronizeStricheCounts(o.teams)),t({currentGameId:o.id,teams:{top:G(G({},o.teams.top),{},{isSigned:!1}),bottom:G(G({},o.teams.bottom),{},{isSigned:!1})}}),!0},undoNewGame:function(){return t(function(t){var e=t.games.slice(0,-1),n=e[e.length-1];if(!n)return t;var r=K.getState();return r.resetGamePoints(),r.setTopScore(n.teams.top.jassPoints||0),r.setBottomScore(n.teams.bottom.jassPoints||0),r.synchronizeStricheCounts(n.teams),G(G({},t),{},{games:e,currentGameId:n.id,teams:{top:G(G({},n.teams.top),{},{isSigned:!1}),bottom:G(G({},n.teams.bottom),{},{isSigned:!1})}})})},navigateToGame:function(n){return t(function(t){var r=t.games.find(function(t){return t.id===n});if(!r)return t;var o=K.getState();return t.currentGameId===t.games.length&&e().saveCurrentGameToCache(),n===t.games.length?e().restoreCurrentGameFromCache():(o.resetGamePoints(),o.setTopScore(r.teams.top.jassPoints||0),o.setBottomScore(r.teams.bottom.jassPoints||0),o.synchronizeStricheCounts(r.teams)),G(G({},t),{},{currentGameId:n,teams:{top:G(G({},r.teams.top),{},{isSigned:!1}),bottom:G(G({},r.teams.bottom),{},{isSigned:!1})}})})},canNavigateBack:function(){return e().currentGameId>1},canNavigateForward:function(){var t=e();return t.currentGameId<t.games.length},getVisibleGames:function(){var t=e();return t.games.filter(function(e){return e.id<=t.currentGameId})},isCurrentGameEmpty:function(){var t=K.getState(),n=e();if(n.currentGameId===n.games.length)return 0===t.topScore&&0===t.bottomScore;var r=n.games.find(function(t){return t.id===n.currentGameId});return!r||0===r.teams.top.jassPoints&&0===r.teams.bottom.jassPoints},saveCurrentGameToCache:function(){var n=e(),r=K.getState();n.currentGameId===n.games.length&&t({currentGameCache:{stricheCounts:r.stricheCounts,scores:{top:r.topScore,bottom:r.bottomScore},teams:n.teams}})},restoreCurrentGameFromCache:function(){var n=e(),r=K.getState();n.currentGameCache&&(t({teams:n.currentGameCache.teams}),r.setTopScore(n.currentGameCache.scores.top),r.setBottomScore(n.currentGameCache.scores.bottom),Object.entries(n.currentGameCache.stricheCounts).forEach(function(t){var e=M(t,2),n=e[0];Object.entries(e[1]).forEach(function(t){var e=M(t,2),o=e[0],i=e[1];r.updateStricheCounts(n,parseInt(o),i)})}))}})}),Z=function(t){var e={100:Math.floor(t/100),50:0,20:0},n=t%100;return n>=90?(e["50"]=1,e["20"]=2,n-=90):n>=80?(e["20"]=4,n-=80):n>=70?(e["50"]=1,e["20"]=1,n-=70):n>=60?(e["20"]=3,n-=60):n>=50?(e["50"]=1,n-=50):n>=20&&(e["20"]=Math.floor(n/10),n%=20),{striche:e,restZahl:n}};function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||J(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach(function(e){Y(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Y(t,e,n){var r;return(r=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==U(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"===U(r)?r:String(r))in t)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var X=function(t){var e,n,r,o,i,a,s,c,l,u,f,m;return{topScore:null!==(e=t.topScore)&&void 0!==e?e:0,bottomScore:null!==(n=t.bottomScore)&&void 0!==n?n:0,topRounds:null!==(r=t.topRounds)&&void 0!==r?r:0,bottomRounds:null!==(o=t.bottomRounds)&&void 0!==o?o:0,totalPoints:null!==(i=t.totalPoints)&&void 0!==i?i:{top:0,bottom:0},weisPoints:null!==(a=t.weisPoints)&&void 0!==a?a:{top:0,bottom:0},currentPlayer:null!==(s=t.currentPlayer)&&void 0!==s?s:1,currentRound:null!==(c=t.currentRound)&&void 0!==c?c:1,stricheCounts:null!==(l=t.stricheCounts)&&void 0!==l?l:{top:{},bottom:{}},restZahlen:null!==(u=t.restZahlen)&&void 0!==u?u:{top:0,bottom:0},farbe:t.farbe,weisActions:null!==(f=t.currentRoundWeis)&&void 0!==f?f:[],isRoundCompleted:null!==(m=t.isRoundCompleted)&&void 0!==m&&m}},K=(0,g.U)(function(t,e){return{topScore:0,bottomScore:0,topRounds:0,bottomRounds:0,settings:b,scoreHistory:[],currentHistoryIndex:-1,currentPlayer:1,currentRound:1,isCalculatorFlipped:!1,stricheCounts:{top:{},bottom:{}},restZahlen:{top:0,bottom:0},totalPoints:{top:0,bottom:0},weisPoints:{top:0,bottom:0},farbe:void 0,currentRoundWeis:[],isRoundCompleted:!1,isGameStarted:!1,isGameCompleted:!1,isJassCompleted:!1,gameStartTime:null,roundStartTime:null,teamTimings:{top:{totalTime:0,lastStartTime:null},bottom:{totalTime:0,lastStartTime:null}},isPaused:!1,pauseStartTime:null,currentMultiplier:7,historyWarning:{isVisible:!1,message:"",pendingAction:null},lastDoubleClickPosition:null,isGameInfoOpen:!1,setTopScore:function(e){return t({topScore:e})},setBottomScore:function(e){return t({bottomScore:e})},incrementTopRound:function(){return t(function(t){return{topRounds:t.topRounds+1}})},incrementBottomRound:function(){return t(function(t){return{bottomRounds:t.bottomRounds+1}})},updateSettings:function(e){return t(function(t){var n=$($({},t.settings),e);return void 0!==n.siegScore&&(n.siegScore<=0||n.siegScore>1e4)||void 0!==n.bergScore&&void 0!==n.siegScore&&(n.bergScore<=0||n.bergScore>=n.siegScore)||void 0!==n.maxRoundScore&&(n.maxRoundScore<=0||n.maxRoundScore>1e3)||void 0!==n.colors&&10!==n.colors.length||void 0!==n.colorMultipliers&&(10!==n.colorMultipliers.length||n.colorMultipliers.some(function(t){return t<1||t>8}))?(console.error("Ung\xfcltige Spieleinstellungen"),t):{settings:n}})},resetGame:function(){return t(function(t){var e=X({topScore:0,bottomScore:0,topRounds:0,bottomRounds:0,currentPlayer:1,currentRound:1,totalPoints:{top:0,bottom:0},weisPoints:{top:0,bottom:0},stricheCounts:{top:{},bottom:{}},restZahlen:{top:0,bottom:0}});return $($({},t),{},{topScore:0,bottomScore:0,topRounds:0,bottomRounds:0,currentHistoryIndex:0,scoreHistory:[e],currentPlayer:1,currentRound:1,stricheCounts:{top:{},bottom:{}},restZahlen:{top:0,bottom:0},totalPoints:{top:0,bottom:0},weisPoints:{top:0,bottom:0},isGameStarted:!1,isGameCompleted:!1,isJassCompleted:!1,gameStartTime:null,roundStartTime:null,teamTimings:{top:{totalTime:0,lastStartTime:null},bottom:{totalTime:0,lastStartTime:null}}})})},updateScore:function(e,n,r){return t(function(t){var o="top"===e?"bottom":"top",i=Y(Y({},e,y(t["".concat(e,"Score")]+n)),o,y(t["".concat(o,"Score")]+r)),a={top:Z(i.top).striche,bottom:Z(i.bottom).striche},s={top:"top"===e?t.totalPoints.top+n:t.totalPoints.top+r,bottom:"bottom"===e?t.totalPoints.bottom+n:t.totalPoints.bottom+r},c={topScore:i.top,bottomScore:i.bottom,currentRound:t.currentRound+1,currentPlayer:t.currentPlayer%4+1,stricheCounts:a,totalPoints:s,restZahlen:{top:i.top%10,bottom:i.bottom%10},roundStartTime:Date.now(),teamTimings:{top:{totalTime:0,lastStartTime:null},bottom:{totalTime:0,lastStartTime:null}}};return $($({},c),{},{scoreHistory:[].concat(q(t.scoreHistory.slice(0,t.currentHistoryIndex+1)),[X($($({},t),c))]),currentHistoryIndex:t.currentHistoryIndex+1})})},addToHistory:function(){return t(function(t){return{scoreHistory:[].concat(q(t.scoreHistory.slice(0,t.currentHistoryIndex+1)),[X(t)]),currentHistoryIndex:t.currentHistoryIndex+1}})},navigateHistory:function(e){return t(function(t){var n="forward"===e?Math.min(t.currentHistoryIndex+1,t.scoreHistory.length-1):Math.max(t.currentHistoryIndex-1,0);return n===t.currentHistoryIndex?t:$($({},t.scoreHistory[n]),{},{currentHistoryIndex:n})})},incrementCurrentPlayer:function(){return t(function(t){return{currentPlayer:t.currentPlayer%4+1}})},incrementCurrentRound:function(){return t(function(t){return{currentRound:t.currentRound+1}})},setCalculatorFlipped:function(e){return t({isCalculatorFlipped:e})},updateScoreByStrich:function(e,n){return t(function(t){var r=t["".concat(e,"Score")]+n,o=Z(r),i=o.striche,a=o.restZahl,s=Y(Y(Y({},"".concat(e,"Score"),r),"stricheCounts",$($({},t.stricheCounts),{},Y({},e,i))),"restZahlen",$($({},t.restZahlen),{},Y({},e,a)));return $($({},s),{},{scoreHistory:[].concat(q(t.scoreHistory.slice(0,t.currentHistoryIndex+1)),[X($($({},t),s))]),currentHistoryIndex:t.currentHistoryIndex+1})})},updateStricheCounts:function(e,n,r){return t(function(t){return{stricheCounts:$($({},t.stricheCounts),{},Y({},e,$($({},t.stricheCounts[e]),{},Y({},n,r))))}})},synchronizeStricheCounts:function(e){var n={top:{},bottom:{}};["top","bottom"].forEach(function(t){var r=e[t];r&&Object.entries(r.striche).forEach(function(e){var r=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next;!(c=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,2)||J(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],i=r[1];if(i>0){var a=A[o];n[t][a]=i}})}),t({stricheCounts:n})},resetStricheCounts:function(e){return t(function(t){return{stricheCounts:$($({},t.stricheCounts),{},Y({},e,{}))}})},resetRestZahl:function(){return t(function(t){return{topScore:20*Math.floor(t.topScore/10),bottomScore:20*Math.floor(t.bottomScore/10),stricheCounts:{top:{},bottom:{}},restZahlen:{top:0,bottom:0}}})},updateRestZahl:function(e,n){return t(function(t){return{restZahlen:$($({},t.restZahlen),{},Y({},e,n))}})},addWeisPoints:function(e,n){return t(function(t){return{currentRoundWeis:[].concat(q(t.currentRoundWeis),[{points:n,position:e}])}})},undoLastWeis:function(){return t(function(t){return{currentRoundWeis:t.currentRoundWeis.slice(0,-1)}})},finalizeRound:function(e){return t(function(t){var n=t.currentRoundWeis.reduce(function(t,e){return $($({},t),{},Y({},e.position,t[e.position]+e.points))},{top:0,bottom:0}),r={topScore:t.topScore+n.top,bottomScore:t.bottomScore+n.bottom,weisPoints:{top:t.weisPoints.top+n.top,bottom:t.weisPoints.bottom+n.bottom},farbe:e,isRoundCompleted:!0,currentRoundWeis:[],roundStartTime:Date.now(),currentRound:t.currentRound+1,currentPlayer:t.currentPlayer%4+1,teamTimings:{top:{totalTime:0,lastStartTime:null},bottom:{totalTime:0,lastStartTime:null}}};return $($({},r),{},{scoreHistory:[].concat(q(t.scoreHistory.slice(0,t.currentHistoryIndex+1)),[X($($({},t),r))]),currentHistoryIndex:t.currentHistoryIndex+1})})},startGame:function(){return t(function(t){return $($({},t),{},{isGameStarted:!0,gameStartTime:Date.now(),roundStartTime:Date.now(),currentRound:1,currentPlayer:1,teamTimings:{top:{totalTime:0,lastStartTime:Date.now()},bottom:{totalTime:0,lastStartTime:null}},scoreHistory:[X(t)],currentHistoryIndex:0})})},finalizeGame:function(){return t(function(t){var e=t.currentPlayer<=2?"top":"bottom",n=t.teamTimings[e].lastStartTime?Date.now()-t.teamTimings[e].lastStartTime:0,r=$($({},t.teamTimings),{},Y({},e,{totalTime:t.teamTimings[e].totalTime+n,lastStartTime:null}));return $($({},t),{},{isGameCompleted:!0,isRoundCompleted:!0,teamTimings:r,scoreHistory:[].concat(q(t.scoreHistory),[X($($({},t),{},{isGameCompleted:!0,isRoundCompleted:!0,teamTimings:r}))]),currentHistoryIndex:t.currentHistoryIndex+1})})},finalizeJass:function(){return t(function(t){return $($({},t),{},{isJassCompleted:!0,scoreHistory:[].concat(q(t.scoreHistory),[X($($({},t),{},{isJassCompleted:!0}))]),currentHistoryIndex:t.currentHistoryIndex+1})})},startTeamTurn:function(e){return t(function(t){var n=1===e||3===e?"bottom":"top",r="top"===n?"bottom":"top";console.log("Team Turn Debug:",{player:e,activeTeam:n,oppositeTeam:r});var o=t.teamTimings[r].lastStartTime?Date.now()-t.teamTimings[r].lastStartTime:0;return{teamTimings:$($({},t.teamTimings),{},Y(Y({},n,$($({},t.teamTimings[n]),{},{lastStartTime:Date.now()})),r,{totalTime:t.teamTimings[r].totalTime+o,lastStartTime:null}))}})},pauseGame:function(){return t(function(t){return $($({},t),{},{isPaused:!0,pauseStartTime:Date.now()})})},resumeGame:function(){return t(function(t){if(!t.pauseStartTime)return t;var e=Date.now()-t.pauseStartTime;return $($({},t),{},{isPaused:!1,pauseStartTime:null,gameStartTime:t.gameStartTime?t.gameStartTime+e:null,roundStartTime:t.roundStartTime?t.roundStartTime+e:null})})},getRemainingPoints:function(t){var n=e(),r=W.getState(),o="top"===t?n.topScore:n.bottomScore;return r.teams["top"===t?"bottom":"top"].bergActive&&o<2500?{title:"Punkte bis Schneider",remaining:2500-o}:o<2500?{title:"Punkte bis Berg",remaining:2500-o}:{title:"Punkte bis Sieg",remaining:5e3-o}},setMultiplier:function(e){t({currentMultiplier:e})},getDividedPoints:function(t){return Math.ceil(t/e().currentMultiplier)},showHistoryWarning:function(e,n){return t({historyWarning:{isVisible:!0,message:e,pendingAction:n}})},hideHistoryWarning:function(){return t({historyWarning:{isVisible:!1,message:"",pendingAction:null}})},executePendingAction:function(){var t=e();t.historyWarning.pendingAction&&t.historyWarning.pendingAction(),e().hideHistoryWarning()},jumpToLatest:function(){return t(function(t){var e=t.scoreHistory.length-1;return $($({},t.scoreHistory[e]),{},{currentHistoryIndex:e})})},setIsGameInfoOpen:function(e){return t({isGameInfoOpen:e})},determineNextStartingPlayer:function(){var t=e(),n=W.getState().teams,r=t.currentPlayer;return n.top.total>n.bottom.total?1===r?2:4:2===r?3:1},startNewGame:function(){return t(function(t){var e=t.determineNextStartingPlayer();return $($({},t),{},{currentRound:t.currentRound+1,currentPlayer:e,isGameStarted:!0,gameStartTime:Date.now(),roundStartTime:Date.now()})})},resetGamePoints:function(){return t(function(t){return{topScore:0,bottomScore:0,topRounds:0,bottomRounds:0,weisPoints:{top:0,bottom:0},currentRound:1,stricheCounts:{top:{},bottom:{}},restZahlen:{top:0,bottom:0},currentRoundWeis:[],scoreHistory:t.scoreHistory,currentHistoryIndex:t.currentHistoryIndex,teamTimings:{top:{totalTime:0,lastStartTime:null},bottom:{totalTime:0,lastStartTime:null}}}})},undoNewGame:function(){return t(function(t){var e=t.scoreHistory[t.scoreHistory.length-1];return e?$($({},t),{},{topScore:e.topScore,bottomScore:e.bottomScore,currentRound:e.currentRound,currentPlayer:e.currentPlayer}):t})},getState:function(){return e()}}});function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tn(t,e,n){var r;return(r=function(t,e){if("object"!==Q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Q(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"===Q(r)?r:String(r))in t)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tr=(0,u.ZP)("div")({position:"absolute",width:"75%",maxWidth:"320px",height:"80%",top:"10%",left:"50%",transform:"translateX(-50%)",pointerEvents:"none"}),to=(0,u.ZP)("div")(function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach(function(e){tn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute",width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0 10px",boxSizing:"border-box",pointerEvents:"auto",cursor:"pointer"},t.customStyle)}),ti=(0,u.ZP)("span")(function(t){var e=t.position;return tn(tn(tn(tn(tn(tn({position:"absolute"},"top"===e?"left":"right","10px"),"top","50%"),"transform","top"===e?"translateY(-50%) rotate(180deg)":"translateY(-50%)"),"color","rgba(255, 255, 255, 0.8)"),"fontSize","16px"),"fontWeight","bold")}),ta=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-43,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0%",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0%",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0%",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"0%";return"bottom"===t?{"100er":{height:"20%",top:"calc(-3.5% + ".concat(r,")"),left:"-4%",width:"105%"},"50er":{height:"20%",top:"70%",left:"9%",width:"95%",transform:"rotate(".concat(e,"deg)"),transformOrigin:"top left"},"20er":{height:"20%",bottom:"calc(-4.5% + ".concat(i,")"),left:"2%",width:"90%"},restzahl:{height:"20%",top:"88%",right:"-2%",width:"20%"}}:{"20er":{height:"20%",top:"calc(-4.5% + ".concat(o,")"),right:"2%",width:"90%"},"50er":{height:"20%",bottom:"14%",left:"22%",width:"95%",transform:"rotate(".concat(e,"deg)"),transformOrigin:"bottom left"},"100er":{height:"20%",bottom:"calc(-3.5% + ".concat(n,")"),right:"-4%",width:"105%"},restzahl:{height:"20%",bottom:"88%",left:"-2%",width:"20%"}}},ts=(0,u.ZP)("div")(function(t){return{position:"absolute",width:"100%",height:"100%",display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-start",transform:t.isRotated?"rotateX(180deg) rotateY(180deg) rotateZ(180deg)":"none",transformOrigin:"center center"}}),tc=function(t){var e=t.position,n=t.onBlendEffect,o=t.top100erOffset,i=t.bottom100erOffset,a=t.top20erOffset,c=t.bottom20erOffset,l=(0,r.useRef)(0),u=(0,r.useRef)(),f=K(),m=f.updateScoreByStrich,d=f.currentHistoryIndex,p=f.scoreHistory,g=f.showHistoryWarning,b=f.restZahlen,y=f.setIsGameInfoOpen,v=(0,r.useRef)(null),x=K().stricheCounts,S=ta(e,-43,void 0===o?"2%":o,void 0===i?"2%":i,void 0===a?"2%":a,void 0===c?"2%":c),j=(0,r.useCallback)(function(t,r){var o=Date.now();if(o-l.current<200){u.current&&clearTimeout(u.current),y(!0),K.setState({lastDoubleClickPosition:e});return}l.current=o,u.current=setTimeout(function(){var t="restzahl"===r?1:parseInt(r);d<p.length-1?g("Willst du wirklich die Vergangenheit \xe4ndern? Dies wird alle nachfolgenden Eintr\xe4ge l\xf6schen!",function(){m(e,t),n(e)}):(m(e,t),n(e))},200)},[m,n,e,d,p.length,g,y]);return(0,r.useEffect)(function(){return function(){u.current&&clearTimeout(u.current)}},[]),(0,s.jsx)(tr,{ref:v,children:(0,s.jsx)(ts,{isRotated:"top"===e,children:Object.entries(S).map(function(t){var n=function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next;!(c=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,2)||function(t,e){if(t){if("string"==typeof t)return tt(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(t,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n[1],i="restzahl"===r?1:parseInt(r),a=1===i?b[e]:x[e][i]||0;return(0,s.jsx)(to,{customStyle:o,"data-strich-box":"true",onClick:function(t){return j(t,r)},children:"restzahl"===r?(0,s.jsx)(ti,{position:e,children:b[e]}):(0,s.jsx)(h,{stricheCount:a,stricheCounts:x[e],einheitWert:i,strichColor:"rgb(255, 255, 255)",animationDuration:100,isActive:!0,direction:"top"===e?"rtl":"ltr",edgeOffset:0,isXMode:50===i,xAngle:18,xAlignment:"top"===e?"right":"left",isDiagonal:!0,diagonalAngle:"top"===e?-43:43,diagonalStrichHeight:"116%",diagonalStrichWidth:"2px",diagonalStrichOffset:{vertical:"0%",horizontal:"0%"},diagonalStrichAngle:"top"===e?-25:25,topDiagonalStrichOffset:{vertical:"0%",horizontal:"0%"},bottomDiagonalStrichOffset:{vertical:"0%",horizontal:"0%"},topDiagonalStrichAngle:30,bottomDiagonalStrichAngle:30,position:e,diagonalStrichOffset100er:{vertical:"top"===e?"-18%":"3%",horizontal:"top"===e?"10%":"-5%"},diagonalStrichOffset20er:{vertical:"top"===e?"-20%":"3.5%",horizontal:"top"===e?"5.5%":"-1.5%"},diagonalStrichAngle100er:35,diagonalStrichAngle20er:35})},r)})})})};function tl(t){return(tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tu(Object(n),!0).forEach(function(e){tm(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tu(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function tm(t,e,n){var r;return(r=function(t,e){if("object"!==tl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tl(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"===tl(r)?r:String(r))in t)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function td(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tp(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var th=(0,r.forwardRef)(function(t,e){var n=t.position,i=t.height,a=t.zShapeConfig,u=t.padding,f=t.onSwipe,m=t.y,d=t.mainOpacity,p=t.getBrightness,h=t.onLongPress,g=t.score,b=(t.isMenuOpen,t.onStrichClick),y=t.triggerBlendEffect,v=t.restZahl,x=t.top100erOffset,S=t.bottom100erOffset,j=t.top20erOffset,w=t.bottom20erOffset,O=td((0,r.useState)(null),2),C=O[0],P=O[1],T=td((0,r.useState)(0),2);T[0],T[1];var N=function(){P(setTimeout(function(){h()},400))},A=function(){C&&clearTimeout(C)};(0,r.useEffect)(function(){return function(){C&&clearTimeout(C)}},[C]),l({onSwipeLeft:function(){console.log("Swipe Left detected"),f("left",n)},onSwipeRight:function(){console.log("Swipe Right detected"),f("right",n)},onSwipeUp:function(){console.log("Swipe Up detected"),f("up",n)},onSwipeDown:function(){console.log("Swipe Down detected"),f("down",n)},element:n});var I=tm(tm(tm(tm(tm(tm({width:"100%",position:"absolute",left:0,right:0,overflow:"visible",height:"".concat(i,"px")},n,0),u,"env(safe-area-inset-top)"),"userSelect","none"),"WebkitUserSelect","none"),"WebkitTouchCallout","none"),"touchAction","none"),k=tm(tm({position:"absolute",width:"110%",left:"-1%"},"top"===n?"bottom":"top","".concat(1.5*a.innerSpacing,"px")),"height","calc(100% - ".concat(1.5*a.edgeSpacing+.8*a.innerSpacing,"px)"));return(0,r.useEffect)(function(){var t=function(t){var e=t.detail;e.direction,e.position,e.isClosing&&f("up","bottom")};return window.addEventListener("closeMenu",t),function(){window.removeEventListener("closeMenu",t)}},[f]),(0,s.jsxs)(o.q.div,{style:tf(tf({},I),{},{transform:m.to(function(t){return 0===t?"none":"translateY(".concat("top"===n?-t:t,"px)")})}),"data-swipe-area":n,onMouseDown:N,onMouseUp:A,onTouchStart:N,onTouchEnd:A,onContextMenu:function(t){return t.preventDefault()},children:[(0,s.jsx)("div",{style:k,children:(0,s.jsx)(c,{className:"w-full h-full text-chalk-red",position:n,isReversed:"top"===n})}),(0,s.jsx)(o.q.div,{style:tf(tf({},{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"white",pointerEvents:"none"}),{},{opacity:m.to(p)})}),(0,s.jsx)(o.q.div,{className:"absolute inset-0 flex items-center justify-center",style:{opacity:d},children:(0,s.jsx)("span",{className:"text-gray-300 text-[9rem] opacity-50 select-none",style:{transform:"top"===n?"rotate(180deg)":"none"},children:g})}),(0,s.jsx)(tc,{position:n,onStrichClick:function(t,e){e===n&&(b(t,n),y(n))},onBlendEffect:y,restZahl:v,top100erOffset:x,bottom100erOffset:S,top20erOffset:j,bottom20erOffset:w})]})});function tg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tb=function(t){var e,n=t.initialPosition,r=t.maxOffset;t.position;var i=function(t){if(Array.isArray(t))return t}(e=(0,o.q_)(function(){return{y:n,mainOpacity:1,oppositeOpacity:1,config:{mass:1,tension:120,friction:26,clamp:!0,duration:250}}}))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next;!(c=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,2)||function(t,e){if(t){if("string"==typeof t)return tg(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tg(t,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],s=i[1];return{y:a.y,mainOpacity:a.mainOpacity,oppositeOpacity:a.oppositeOpacity,animateSwipe:function(t){"boolean"==typeof t?s.start({y:t?r:n,mainOpacity:1,oppositeOpacity:1}):s.start({mainOpacity:0,oppositeOpacity:0,config:{duration:125},onRest:function(){s.start({mainOpacity:1,oppositeOpacity:1,config:{duration:125}})}})},getBrightness:function(t){return"number"!=typeof t||isNaN(t)||"number"!=typeof r||0===r?0:Math.max(0,Math.min(t/r*.45,.45))}}},ty=n(3280);function tv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tx(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tS=function(t){var e=t.isOpen,n=t.onClose,i=t.onSubmit,a=t.initialValue,c=void 0===a?0:a,l=(t.onCancel,t.clickedPosition),u=K(),f=u.isCalculatorFlipped,m=u.setCalculatorFlipped,d=tv((0,r.useState)((null==c?void 0:c.toString())||"0"),2),p=d[0],h=d[1],g=tv((0,r.useState)("0"),2),b=g[0],y=g[1],v=tv((0,r.useState)("0"),2),x=v[0],S=v[1],j=tv((0,r.useState)("0"),2);j[0],j[1];var w=tv((0,r.useState)(1),2),O=w[0],C=w[1],P=tv((0,r.useState)(null),2),T=P[0],A=P[1],I=K(function(t){return t.settings}),k=tv((0,r.useState)(new Set),2),M=k[0],E=k[1],D=tv((0,r.useState)(!1),2),R=D[0];D[1];var G=tv((0,r.useState)(null),2),H=G[0],z=G[1],F=tv((0,r.useState)(!1),2),B=F[0],L=F[1],Z=tv((0,r.useState)(!1),2),U=Z[0],q=Z[1],J=tv((0,r.useState)(0),2),_=J[0],V=J[1],$=tv((0,r.useState)(null),2),Y=$[0],X=$[1];(0,r.useRef)("0");var Q=tv((0,r.useState)(0),2),tt=Q[0],te=Q[1];K().updateScore;var tn=(0,o.q_)({opacity:e?1:0,transform:"scale(".concat(e?1:.95,") rotate(").concat(f?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}});(0,r.useEffect)(function(){e&&m(!1)},[e]);var tr=function(t,e){if("0"===t)y("0"),S("0");else if("257"===t)y("0"),S((257*e).toString());else{var n=parseInt(t,10);y((Math.max(157-n,0)*e).toString()),S((n*e).toString())}};(0,r.useEffect)(function(){tr(p,O)},[p,O]);var to=function(t){if(!B){var e=Date.now();e-tt<100||(te(e),h(function(e){return ts("0"===e?t.toString():e+t.toString())}),E(function(e){return new Set(e).add(t)}),setTimeout(function(){E(function(e){var n=new Set(e);return n.delete(t),n})},100))}},ti=function(t,e){A(t),C(e),z(null),tr(p,e)},ta=function(){h("0"),y("0"),C(1),A(null),L(!1)},ts=function(t){var e=parseInt(t,10);return isNaN(e)?"0":Math.min(e,157).toString()},tc=function(t){null==t||t.stopPropagation(),W.getState().startMatschCharge(l),W.getState().stopMatschCharge(l),h("257"),y("0"),S((257*O).toString()),L(!0),N(_,f)},tl=function(){return!isNaN(parseInt(p,10))&&null!==T};return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300 prevent-interactions ".concat(e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:n,onContextMenu:function(t){return t.preventDefault()},children:(0,s.jsxs)(o.q.div,{style:tn,className:"relative w-11/12 max-w-md",children:[(0,s.jsx)("button",{onClick:function(t){t.stopPropagation(),m(!f)},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n            text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center\n            rounded-full\n            ".concat(f?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,s.jsx)(ty.bxQ,{className:"w-8 h-8"})}),(0,s.jsx)("button",{onClick:function(t){t.stopPropagation(),n()},className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white transition-colors z-10",children:(0,s.jsx)(ty.q5L,{size:24})}),(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg transition-all duration-700 flex flex-col items-center ".concat(R?"opacity-0 scale-95":"opacity-100 scale-100"),onClick:function(t){return t.stopPropagation()},children:[(0,s.jsx)("h2",{className:"text-white text-xl mb-4 text-center select-none","aria-label":"Runde schreiben",children:"Runde schreiben"}),(0,s.jsxs)("div",{className:"flex flex-col w-full space-y-4",children:[(0,s.jsx)("input",{type:"text",value:p,readOnly:!0,className:"w-full bg-gray-700 text-white text-6xl p-4 rounded select-none text-center","aria-label":"Aktueller Wert"}),(0,s.jsxs)("div",{className:"flex justify-between items-stretch w-full space-x-2 h-10",children:[(0,s.jsxs)("div",{className:"w-1/3 bg-gray-700 text-white p-1 rounded select-none flex items-center justify-end relative",children:[(0,s.jsx)("div",{className:"text-xs absolute top-0 left-1",children:"Gegner:"}),(0,s.jsx)("div",{className:"text-xl pr-1",children:b})]}),(0,s.jsx)("button",{onClick:tc,onMouseDown:function(){q(!0),V(0),X(setInterval(function(){V(function(t){return Math.min(t+1,20)})},100))},onMouseUp:function(){q(!1),Y&&clearInterval(Y),tc()},onMouseLeave:function(){q(!1),Y&&clearInterval(Y)},onTouchStart:function(){q(!0),V(0),X(setInterval(function(){V(function(t){return Math.min(t+1,20)})},100))},onTouchEnd:function(){q(!1),Y&&clearInterval(Y),tc()},className:"w-1/3 p-1 rounded select-none transition-all duration-100 text-lg flex items-center justify-center matsch-button ".concat(B?"bg-orange-500 text-white":U?"bg-gray-600 text-white scale-95 opacity-80":"bg-gray-700 text-white hover:bg-orange-500 scale-100 opacity-100"),disabled:B,children:"Matsch"}),(0,s.jsxs)("div",{className:"w-1/3 bg-gray-700 text-white p-1 rounded select-none flex items-center justify-end relative",children:[(0,s.jsx)("div",{className:"text-xs absolute top-0 left-1",children:"Total:"}),(0,s.jsx)("div",{className:"text-xl pr-1",children:x})]})]})]}),(0,s.jsx)("div",{className:"mt-4"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2 mb-4 w-full",children:I.colors.map(function(t,e){return(0,s.jsx)("button",{onMouseDown:function(){return z(t)},onMouseUp:function(){return ti(t,I.colorMultipliers[e])},onMouseLeave:function(){return z(null)},onTouchStart:function(){return z(t)},onTouchEnd:function(){return ti(t,I.colorMultipliers[e])},className:"p-1 rounded transition-all duration-100 ".concat(T===t?"bg-orange-500":H===t?"bg-gray-500 scale-95":"bg-gray-600 scale-100"," text-white select-none text-xs h-12 flex items-center justify-center"),"aria-label":"".concat(t),children:t},t)})}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 w-full",children:[[1,2,3,4,5,6,7,8,9].map(function(t){return(0,s.jsx)("button",{onClick:function(){return to(t)},onTouchEnd:function(e){e.preventDefault(),to(t)},className:"bg-gray-600 text-white p-4 rounded select-none text-2xl transition-all duration-100 ".concat(M.has(t)?"bg-gray-500 scale-95 opacity-80":"scale-100 opacity-100"),children:t},t)}),(0,s.jsx)("button",{onClick:ta,onMouseDown:function(){return E(function(t){return new Set(t).add("C")})},onMouseUp:function(){return E(function(t){var e=new Set(t);return e.delete("C"),e})},onMouseLeave:function(){return E(function(t){var e=new Set(t);return e.delete("C"),e})},onTouchStart:function(){return E(function(t){return new Set(t).add("C")})},onTouchEnd:function(){E(function(t){var e=new Set(t);return e.delete("C"),e}),ta()},className:"bg-red-600 text-white p-4 rounded select-none text-2xl transition-all duration-100 ".concat(M.has("C")?"bg-red-500 scale-95 opacity-80":"scale-100 opacity-100"),children:"C"}),(0,s.jsx)("button",{onClick:function(){return to(0)},onMouseDown:function(){return E(function(t){return new Set(t).add(0)})},onMouseUp:function(){return E(function(t){var e=new Set(t);return e.delete(0),e})},onMouseLeave:function(){return E(function(t){var e=new Set(t);return e.delete(0),e})},className:"bg-gray-600 text-white p-4 rounded select-none text-2xl transition-all duration-100 ".concat(M.has(0)?"bg-gray-500 scale-95 opacity-80":"scale-100 opacity-100"),children:"0"}),(0,s.jsx)("button",{onClick:function(){var t=parseInt(p)*O,e=parseInt(b);T&&(B&&W.getState().addStrich(l,"matsch"),null==i||i(t,e),K.getState().finalizeRound(T)),n()},disabled:!tl()||!T,onMouseDown:function(){return E(function(t){return new Set(t).add("OK")})},onMouseUp:function(){E(function(t){var e=new Set(t);return e.delete("OK"),e}),tl()&&T&&i(parseInt(x),parseInt(b))},onMouseLeave:function(){return E(function(t){var e=new Set(t);return e.delete("OK"),e})},className:"bg-green-600 text-white p-4 rounded select-none text-2xl transition-all duration-100 \n                ".concat(M.has("OK")?"bg-green-500 scale-95 opacity-80":"scale-100 opacity-100","\n                ").concat(tl()&&T?"":"opacity-50 cursor-not-allowed"),children:"OK"})]})]})]})})},tj=n(1773),tw=n(9679),tO=function(t){var e=t.onDismiss,n=t.showTitle,r=t.message;return t.show?(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-4 animate-fade-in pointer-events-auto",children:(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-xs w-full relative text-white",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4",children:[(0,s.jsx)(tj.DAO,{className:"w-12 h-12 text-yellow-600 mb-2"}),(void 0===n||n)&&(0,s.jsx)("h2",{className:"text-xl font-bold text-center",children:r})]}),(0,s.jsxs)("ul",{className:"list-disc pl-5 mb-6 space-y-2",children:[(0,s.jsx)("li",{children:"Swipe nach unten/oben, um das Men\xfc zu \xf6ffnen/schliessen"}),(0,s.jsx)("li",{children:"Halte lange gedr\xfcckt, um den Punktez\xe4hler zu \xf6ffnen. Klicke ausserhalb, um ihn zu schliessen"}),(0,s.jsx)("li",{children:"Gez\xe4hlt wird auf der Seite, auf die gedr\xfcckt wurde. Die Punkte der Gegner werden automatisch mitgeschrieben"}),(0,s.jsx)("li",{children:"Schreibe Weise durch Klicken auf die Z-Linien"}),(0,s.jsx)("li",{children:"Swipe links/rechts, um die Punkte-Historie anzusehen. Eintippen von Resultaten nach alten Runden, \xfcberschreibt neue Runden"})]}),(0,s.jsx)("button",{onClick:e,className:"bg-yellow-600 text-white px-6 py-2 rounded-full hover:bg-yellow-700 transition-colors w-full text-lg font-semibold",children:"Verstanden"})]})}):null},tC=n(3114);function tP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tT=function(t){var e,n=function(t){if(Array.isArray(t))return t}(e=(0,r.useState)(!1))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next;!(c=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,2)||function(t,e){if(t){if("string"==typeof t)return tP(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tP(t,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],i=n[1],a=function(t){null==t||t.preventDefault(),i(!0)},s=function(e){null==e||e.preventDefault(),i(!1),t()};return{isPressedDown:o,handlers:{onMouseDown:a,onMouseUp:s,onMouseLeave:function(){return i(!1)},onTouchStart:a,onTouchEnd:s},buttonClasses:"\n      transition-all duration-100\n      ".concat(o?"scale-95 opacity-80":"scale-100 opacity-100","\n    ")}};function tN(t){return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tA(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!==tN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tN(e)?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var tk=function(t){var e=t.show,n=t.onConfirm,r=t.onDismiss,o=tT(r),i=tT(n);return(0,s.jsx)(tC.M,{children:e&&(0,s.jsxs)(tw.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 animate-fade-in pointer-events-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:r}),(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-xs w-full relative text-white z-10",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4",children:[(0,s.jsx)(tj.gJy,{className:"w-12 h-12 text-yellow-600 mb-2"}),(0,s.jsx)("p",{className:"text-center mb-6",children:"M\xf6chtest du wirklich den aktuellen Jass beenden? Alle Striche und Punkte werden gel\xf6scht."})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("button",tI(tI({},o.handlers),{},{className:"\n                  flex-1 bg-gray-600 text-white px-6 py-2 rounded-xl font-semibold\n                  hover:bg-gray-700 border-gray-900\n                  ".concat(o.buttonClasses,"\n                "),children:"Zur\xfcck"})),(0,s.jsx)("button",tI(tI({},i.handlers),{},{className:"\n                  flex-1 bg-yellow-600 text-white px-6 py-2 rounded-xl font-semibold\n                  hover:bg-yellow-700 border-yellow-900\n                  ".concat(i.buttonClasses,"\n                "),children:"Beenden"}))]})]})]})})};function tM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tE(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tD=function(t){var e=t.isOpen,n=t.onClose,o=t.setIsResultatOpen,i=K(),a=i.resetGame,c=i.topScore,l=(i.bottomScore,i.settings),u=tM((0,r.useState)(null),2),f=u[0],m=u[1],d=tM((0,r.useState)(!1),2),p=d[0],h=d[1],g=tM((0,r.useState)(!1),2),b=g[0],y=g[1],v="w-12 h-12 p-2 rounded-xl shadow-md transition-transform hover:scale-110",x={hidden:{opacity:0,y:0},visible:{opacity:1,y:0}},S=function(t){m(t),setTimeout(function(){return m(null)},150)};return c>=l.siegScore||l.siegScore,(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(tw.E.div,{className:"absolute inset-x-0 top-1/2 transform -translate-y-1/2 flex justify-center items-center h-16 z-10 ".concat(e?"opacity-100":"opacity-0 pointer-events-none"," transition-opacity duration-300"),variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.05}}},initial:"hidden",animate:e?"visible":"hidden",children:[(0,s.jsxs)("div",{className:"flex justify-center space-x-10",children:[(0,s.jsx)(tw.E.button,{onClick:function(){S("trash"),y(!0)},className:"".concat(v," bg-red-500 text-white"),variants:x,onMouseDown:function(){return S("trash")},onTouchStart:function(){return S("trash")},children:(0,s.jsx)(tj.AMf,{className:"w-full h-full ".concat("trash"===f?"opacity-70":"")})}),(0,s.jsx)(tw.E.button,{onClick:function(){return h(!0)},className:"".concat(v," bg-blue-500 text-white"),variants:x,onMouseDown:function(){return S("info")},onTouchStart:function(){return S("info")},children:(0,s.jsx)(tj.DAO,{className:"w-full h-full ".concat("info"===f?"opacity-70":"")})}),(0,s.jsx)(tw.E.button,{className:"".concat(v," bg-yellow-500 text-white"),variants:x,onMouseDown:function(){return S("save")},onTouchStart:function(){return S("save")},children:(0,s.jsx)(tj.TvB,{className:"w-full h-full ".concat("save"===f?"opacity-70":"")})}),(0,s.jsx)(tw.E.button,{onClick:function(){return o(!0)},className:"".concat(v," bg-green-500 text-white"),variants:x,onMouseDown:function(){return S("resultat")},onTouchStart:function(){return S("resultat")},children:(0,s.jsx)(tj.pwr,{className:"w-full h-full ".concat("resultat"===f?"opacity-70":"")})})]}),p&&(0,s.jsx)(tO,{onDismiss:function(){return h(!1)},showTitle:!1,show:!0,message:"Willkommen zu Jassguru"})]}),(0,s.jsx)(tk,{show:b,onConfirm:function(){y(!1),n(),a();var t=W.getState();t.resetJass(),t.startNewGame()},onDismiss:function(){return y(!1)}})]})},tR=n(5603);function tG(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return tH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tH(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tH(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tz=function(){var t=tG((0,r.useState)(!1),2),e=t[0],n=t[1],o=tG((0,r.useState)(""),2),i=o[0],a=o[1],s=tG((0,r.useState)(!1),2),c=s[0],l=s[1];return(0,r.useEffect)(function(){if(!(0,tR.Ee)()){n(!1);return}"true"===localStorage.getItem("hasShownIntro")?l(!0):(a("Willkommen zu Jassguru"),n(!0))},[]),{showMessage:e,message:i,dismissMessage:function(){n(!1),l(!0),localStorage.setItem("hasShownIntro","true")},hasShownIntro:c}},tF=function(){var t=K().startGame;return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-90 z-50",children:(0,s.jsx)(tw.E.button,{initial:{scale:.9},animate:{scale:1},whileTap:{scale:.95},onClick:function(){var e=new CustomEvent("closeMenu",{detail:{direction:"up",position:"bottom",isClosing:!0}});window.dispatchEvent(e),setTimeout(function(){t()},300)},className:"bg-green-600 text-white text-2xl font-bold py-6 px-12 rounded-xl shadow-lg hover:bg-green-500 transition-colors",children:"START"})})};function tB(t){return(tB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tW(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tL(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!==tB(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tB(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tB(e)?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var tZ=function(t){var e=t.currentPlayer,n=t.currentRound,r=t.opacity,i=t.isOpen,a=t.isGameStarted,c=(0,o.q_)({from:{opacity:0},to:{opacity:i?0:r},config:{duration:150},delay:i?0:750,immediate:i});if(i)return null;var l=function(t,e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:"Spiel: "}),(0,s.jsx)("span",{className:"text-gray-300 text-sm font-semibold",children:t}),(0,s.jsx)("span",{className:"text-gray-500 text-xs ml-2",children:" Runde: "}),(0,s.jsx)("span",{className:"text-gray-300 text-sm font-semibold",children:t}),(0,s.jsx)("span",{className:"text-gray-500 text-xs ml-2",children:" Spieler: "}),(0,s.jsx)("span",{className:"text-gray-300 text-sm font-semibold",children:e})]})};return(0,s.jsxs)(o.q.div,{className:"absolute inset-x-0 flex flex-col items-center justify-center pointer-events-none",style:tW(tW({},c),{},{top:"calc(50% - 4rem)",height:"3.5rem"}),children:[(0,s.jsx)("div",{className:"transform scale-y-[-1] scale-x-[-1] absolute right-[8%] top-[4.5rem]",children:a?l(n,e):"START"}),(0,s.jsx)("div",{className:"absolute left-[8%] bottom-0",children:a?l(n,e):"START"})]})},tU=function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=Math.floor(t/1e3),r=Math.floor(n/60),o=Math.floor(r/60),i=r%60,a=n%60;return o>0?e?"".concat(o,":").concat(i.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"".concat(o,":").concat(i.toString().padStart(2,"0")):e?"".concat(r.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")):"0:".concat(r.toString().padStart(2,"0"))};function tq(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tJ=[2,3,4,5,6,7],t_=function(t){var e,n=t.mainTitle,o=t.subTitle,i=t.points,a=t.className,c=t.numberSize,l=void 0===c?"text-xl":c,u=K(),f=u.currentMultiplier,m=u.setMultiplier,d=u.getDividedPoints,p=function(t){if(Array.isArray(t))return t}(e=(0,r.useState)(!1))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next;!(c=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,2)||function(t,e){if(t){if("string"==typeof t)return tq(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tq(t,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=p[0],g=p[1];return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:n}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-0 ".concat(void 0===a?"":a),children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:o}),(0,s.jsx)("div",{className:"".concat(l," font-bold mt-0"),children:i})]}),(0,s.jsxs)("button",{onClick:function(){var t=tJ.indexOf(f),e=0===t?tJ.length-1:t-1;m(tJ[e])},onMouseDown:function(){return g(!0)},onMouseUp:function(){return g(!1)},onMouseLeave:function(){return g(!1)},onTouchStart:function(){return g(!0)},onTouchEnd:function(){return g(!1)},className:"bg-orange-500 hover:bg-orange-600 text-white rounded-lg px-2 py-3 self-center mx-auto h-12 w-14 mt-4 transition-all duration-100 ".concat(h?"bg-orange-700 scale-95 opacity-80":"scale-100 opacity-100"),children:[f,"x"]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("span",{className:"text-gray-400 text-xs",children:[f,"-fach"]}),(0,s.jsx)("div",{className:"".concat(l," font-bold mt-0"),children:d(i)})]})]})]})};function tV(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var t$=function(t){var e,n=t.type,o=t.onStart,i=t.onStop,a=(t.chargeAmount,t.condition,t.team),s=function(t){if(Array.isArray(t))return t}(e=(0,r.useState)(!1))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next;!(c=(r=i.call(n)).done)&&(s.push(r.value),2!==s.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,2)||function(t,e){if(t){if("string"==typeof t)return tV(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tV(t,2)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=s[0],l=s[1],u=W(function(t){return!!a&&("berg"===n?t.teams[a].bergActive:(t.teams.top.bergActive||t.teams.bottom.bergActive)&&t.teams[a].bedankenActive)}),f=function(t){null==t||t.preventDefault(),l(!0),o()},m=function(t){null==t||t.preventDefault(),l(!1),i()};return{isPressed:c,isButtonActive:u,handlers:{onMouseDown:f,onMouseUp:m,onMouseLeave:m,onTouchStart:f,onTouchEnd:m,onTouchCancel:m}}};function tY(t){return(tY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tX(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function tK(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tX(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!==tY(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tY(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tY(e)?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tX(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var tQ=function(t){var e=t.handlers,n=t.isButtonActive,r=t.isPressed,o=t.showDepth,i=t.color,a=t.disabled,c=void 0!==a&&a,l=t.children;return(0,s.jsx)("button",tK(tK({},e),{},{disabled:!!c,className:"\n      py-4 text-white rounded-xl font-bold\n      transition-all duration-150\n      ".concat(n?"bg-".concat(i,"-600"):r?"bg-gray-700":"bg-gray-600","\n      ").concat(o?"border-b-4 border-t border-l border-r":"","\n      ").concat(o?c?"border-gray-500":"border-".concat(i,"-900"):"","\n      ").concat(r?"translate-y-1 shadow-inner opacity-80":c?"shadow-gray-500":"shadow-lg","\n    "),children:l}))};function t0(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return t1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t1(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t1(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var t2=function(t){var e,n,i=t.isOpen,a=t.onClose,c=K(),l=c.currentRound,u=c.currentPlayer,f=c.gameStartTime,m=c.roundStartTime,d=c.isCalculatorFlipped,p=c.setCalculatorFlipped,h=c.isPaused,g=c.pauseGame,b=c.resumeGame,y=c.getRemainingPoints,v=c.currentMultiplier,x=c.getDividedPoints,S=c.lastDoubleClickPosition,j=t0((0,r.useState)(Date.now()),2);j[0],j[1];var w=t0((0,r.useState)(!1),2),O=w[0],C=w[1],P=t0((0,r.useState)(!1),2),T=P[0],N=P[1],A=t0((0,r.useState)(""),2),I=A[0],k=A[1],M=t0((0,r.useState)(""),2),E=M[0],D=M[1],R=W(),G=R.startBergCharge,H=R.stopBergCharge,z=R.startBedankenCharge,F=R.stopBedankenCharge,B=R.bergChargeAmount,L=R.bedankenChargeAmount,Z=R.hasBergForTeam,U=R.hasBedankenForTeam,q=t$({type:"berg",onStart:function(){return G(S)},onStop:function(){return H(S)},chargeAmount:B,team:S}),J=t$({type:"bedanken",onStart:function(){return z(S)},onStop:function(){F(S),g()},chargeAmount:L,condition:!!S&&Z(S),team:S}),_=function(){h&&b(),a()},V=function(){g()},$=function(){b()};(0,r.useEffect)(function(){var t=function(){k(tU(Date.now()-(null!=f?f:0),!1)),D(tU(Date.now()-(null!=m?m:0),!0))};if(t(),i&&!h){var e=setInterval(t,1e3);return function(){return clearInterval(e)}}},[i,h,f,m]);var Y=(0,o.q_)({opacity:i?1:0,transform:"scale(".concat(i?1:.95,") rotate(").concat(d?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}});return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 ".concat(i?"":"pointer-events-none"),onClick:function(t){h||t.target.closest('[data-strich-box="true"]')||t.target!==t.currentTarget||_()},children:(0,s.jsxs)(o.q.div,{style:Y,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-6 shadow-lg select-none",onClick:function(t){return t.stopPropagation()},children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white text-center mb-6",children:"Spielstand"}),(0,s.jsx)("button",{onClick:function(t){t.stopPropagation(),p(!d)},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n            text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center\n            rounded-full\n            ".concat(d?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,s.jsx)(ty.bxQ,{className:"w-8 h-8"})}),(0,s.jsx)("button",{onClick:_,className:"absolute right-2 top-2 p-2 transition-colors\n            ".concat(h?"text-gray-600 cursor-not-allowed":"text-gray-400 hover:text-white"),disabled:h,children:(0,s.jsx)(ty.q5L,{size:24})}),(0,s.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-white",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"Spiel"}),(0,s.jsx)("div",{className:"text-xl font-bold",children:l})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"Runde"}),(0,s.jsx)("div",{className:"text-xl font-bold",children:l})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"Spieldauer"}),(0,s.jsx)("div",{className:"text-xl font-bold",children:I})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:"Jassdauer"}),(0,s.jsx)("div",{className:"text-xl font-bold",children:I})]})]}),(0,s.jsxs)("div",{className:"text-center text-white mt-1",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Spieler"}),(0,s.jsx)("div",{className:"text-3xl font-bold p-2 bg-gray-700 bg-opacity-50 rounded-xl mt-1",children:u})]}),(0,s.jsxs)("div",{className:"text-center text-white mt-1",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Zeit Runde"}),(0,s.jsx)("div",{className:"text-3xl font-bold p-2 bg-gray-700 bg-opacity-50 rounded-xl mt-1",children:E})]}),(0,s.jsx)("div",{className:"text-center text-white mt-3",children:(0,s.jsx)(t_,{mainTitle:"Punkte bis",subTitle:null!==(e=y(d?"top":"bottom").title.split(" ").pop())&&void 0!==e?e:"",points:y(d?"top":"bottom").remaining,numberSize:"text-3xl"})}),(0,s.jsx)("div",{className:"text-center text-white mt-1",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Gegner"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 -mt-10",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-gray-400 text-xs",children:null!==(n=y(d?"bottom":"top").title.split(" ").pop())&&void 0!==n?n:""}),(0,s.jsx)("div",{className:"text-xl font-bold mt-0",children:y(d?"bottom":"top").remaining})]}),(0,s.jsx)("div",{className:"invisible"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("span",{className:"text-gray-400 text-xs",children:[v,"-fach"]}),(0,s.jsx)("div",{className:"text-xl font-bold mt-0",children:x(y(d?"bottom":"top").remaining)})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-4 max-w-md mx-auto mt-10",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(tQ,{handlers:q.handlers,isButtonActive:q.isButtonActive,isPressed:q.isPressed,showDepth:T,color:"yellow",disabled:h||U("top")||U("bottom"),children:"BERG"}),(0,s.jsx)(tQ,{handlers:J.handlers,isButtonActive:J.isButtonActive,isPressed:J.isPressed,showDepth:T,color:"green",disabled:h||!(Z("top")||Z("bottom")),children:"BEDANKEN"})]}),(0,s.jsx)("button",{onMouseDown:function(){return C(!0)},onMouseUp:function(){C(!1),h?($(),N(!1)):(V(),N(!0))},onMouseLeave:function(){return C(!1)},onTouchStart:function(){return C(!0)},onTouchEnd:function(t){t.preventDefault(),C(!1),h?($(),N(!1)):(V(),N(!0))},className:"\n              w-full py-2 text-white rounded-xl font-bold\n              transition-all duration-150\n              ".concat(T?"border-b-4 border-t border-l border-r":"","\n              ").concat(h?"bg-green-600 hover:bg-green-700 border-green-900":"bg-red-600 hover:bg-red-700 border-red-900","\n              ").concat(O?"translate-y-1 shadow-inner opacity-80":T?"translate-y-1 shadow-inner":"shadow-lg","\n            "),children:h?"WEITER":"PAUSE"})]})]})})},t5=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=(0,r.useRef)(0),o=(0,r.useRef)();return(0,r.useCallback)(function(r){if(r.preventDefault(),n.current+=1,o.current&&clearTimeout(o.current),2===n.current){t(r),n.current=0;return}o.current=setTimeout(function(){n.current=0},e)},[t,e])},t4=function(t){var e=t.message,n=t.onConfirm,o=t.onDismiss,i=t.show,a=K().jumpToLatest,c=(0,r.useCallback)(function(){a(),o()},[a,o]),l=(0,r.useCallback)(function(){n(),o()},[n,o]);return i?(0,s.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-[9999] p-4 animate-fade-in pointer-events-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:c}),(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-xs w-full relative text-white z-10",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center mb-4",children:[(0,s.jsx)(tj.gJy,{className:"w-12 h-12 text-yellow-600 mb-2"}),(0,s.jsx)("p",{className:"text-center mb-6",children:e})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,s.jsx)("button",{onClick:l,className:"flex-1 bg-yellow-600 text-white px-6 py-2 rounded-full hover:bg-yellow-700 transition-colors text-lg font-semibold",children:"Ja"}),(0,s.jsx)("button",{onClick:c,className:"flex-1 bg-gray-600 text-white px-6 py-2 rounded-full hover:bg-gray-700 transition-colors text-lg font-semibold",children:"Abbrechen"})]})]})]}):null},t3=n(5480);function t8(t){return(t8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function t6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function t9(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?t6(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!==t8(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==t8(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===t8(e)?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t6(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var t7={baseStrich:{length:35,width:3,color:"#FFFFFF",opacity:1},diagonalStrich:{length:52,width:45,angle:50,offset:{x:-2,y:0}},container:{spacing:9,groupSpacing:2,scale:2}},et=(0,t3.ZP)("div")(function(t){var e=t.type;return t9({position:"relative",width:"30%",minHeight:"horizontal"===e?"20px":"32px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"horizontal"===e?"center":"flex-start",transform:"horizontal"===e?"rotate(90deg) rotate(180deg)":"none",transformOrigin:"center left",marginBottom:"8px"},"horizontal"===e&&{marginTop:"12px",marginLeft:"20px"})}),ee=function(t){var e=t.count,n=t.style,r=(t.position,t.type),i=t9(t9({},t7),void 0===n?t7:n);return(0,s.jsx)(et,{type:r,children:Array.from({length:e}).map(function(t,e){var n=(e+1)%5==0,r=e*i.container.spacing+Math.floor(e/5)*(i.container.groupSpacing||0),a=(0,o.q_)({from:{scale:0,opacity:0},to:{scale:1,opacity:i.baseStrich.opacity},delay:50*e});return(0,s.jsx)(o.q.div,{style:{position:"absolute",left:"".concat(r+(n?i.diagonalStrich.offset.x:0),"px"),top:n?"".concat(i.diagonalStrich.offset.y,"px"):0,width:i.baseStrich.width,height:n?i.diagonalStrich.length:i.baseStrich.length,backgroundColor:i.baseStrich.color,opacity:a.opacity,transform:n?"rotate(".concat(i.diagonalStrich.angle,"deg)"):"none",transformOrigin:n?"top left":"center",transition:"height 0.2s ease-in-out, transform 0.2s ease-in-out"}},"strich-".concat(e))})})},en=function(t){var e=t.spielNummer,n=t.topTeam,r=t.bottomTeam,o=t.showJassPoints;return(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-4 items-center py-2 border-b border-gray-700",children:[(0,s.jsx)("div",{className:"text-center relative",children:e}),(0,s.jsx)("div",{className:"flex flex-col items-center col-span-2",children:o?(0,s.jsx)("div",{className:"text-xl",children:n.jassPoints||0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee,{type:"horizontal",count:n.striche.horizontal,position:"top"}),(0,s.jsx)(ee,{type:"vertikal",count:n.striche.vertikal,position:"top"})]})}),(0,s.jsx)("div",{className:"flex flex-col items-center col-span-2",children:o?(0,s.jsx)("div",{className:"text-xl",children:r.jassPoints||0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee,{type:"horizontal",count:r.striche.horizontal,position:"bottom"}),(0,s.jsx)(ee,{type:"vertikal",count:r.striche.vertikal,position:"bottom"})]})})]})},er=n(8407),eo=function(t){var e=t.teams,n=t.games,r=t.currentGameId;t.onSwipe;var o=n.filter(function(t){return t.id<=r});return(0,s.jsx)("div",{className:"flex flex-col w-full",children:o.map(function(t,n){return(0,s.jsx)(en,{spielNummer:n+1,topTeam:{striche:I(t.id===r?e.bottom.striche:t.teams.bottom.striche),jassPoints:0},bottomTeam:{striche:I(t.id===r?e.top.striche:t.teams.top.striche),jassPoints:0},showJassPoints:!1},"striche-".concat(r,"-").concat(t.id,"-").concat(n))})})},ei=function(t){var e=t.teams,n=t.games,r=t.currentGameId,o=K(),i=o.topScore,a=o.bottomScore;return(0,s.jsx)("div",{className:"flex flex-col w-full",children:n.map(function(t,n){return(0,s.jsx)(en,{spielNummer:n+1,topTeam:{striche:I(t.id===r?e.bottom.striche:t.teams.bottom.striche),jassPoints:t.id===r?a:t.teams.bottom.jassPoints},bottomTeam:{striche:I(t.id===r?e.top.striche:t.teams.top.striche),jassPoints:t.id===r?i:t.teams.top.jassPoints},showJassPoints:!0},t.id)})})};console.log("STATISTIC_MODULES wird geladen");var ea=[{id:"striche",title:"Strichergebnis",component:eo,calculateData:function(t){return{top:t.teams.top.total,bottom:t.teams.bottom.total}}},{id:"jasspunkte",title:"Punkte",component:ei,calculateData:function(t){return{top:t.teams.top.jassPoints,bottom:t.teams.bottom.jassPoints}}}];function es(t){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ec(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function el(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ec(Object(n),!0).forEach(function(e){var r,o;r=e,o=n[e],(r=function(t){var e=function(t,e){if("object"!==es(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==es(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===es(e)?e:String(e)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function eu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ef(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ef(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ef(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}console.log("STATISTIC_MODULES:",ea);var em=function(t){var e,n=t.isOpen,i=t.onClose,a=eu((0,r.useState)(!1),2),c=a[0],l=a[1],u=eu((0,r.useState)("striche"),2),f=u[0],m=u[1],d=eu((0,r.useState)({top:0,bottom:0}),2),p=d[0],h=d[1],g=eu((0,r.useState)(null),2),b=g[0],y=g[1],v=eu((0,r.useState)(null),2),x=v[0],S=v[1],j=(0,r.useRef)(null),w=(0,r.useRef)(W.getState()),O=(0,r.useRef)(K.getState()),C=(0,r.useCallback)(function(){var t;return{games:(t=w.current).games,currentGameId:t.currentGameId,teams:t.teams,calculateTotalPoints:t.calculateTotalPoints,calculateTotalJassPoints:t.calculateTotalJassPoints}},[]);(0,r.useCallback)(function(){var t;return{topScore:(t=O.current).topScore,bottomScore:t.bottomScore}},[]);var P=(0,r.useMemo)(function(){return C().games.filter(function(t){return t.id<=C().currentGameId})},[C().games,C().currentGameId]),T=(0,r.useMemo)(function(){return C().currentGameId>1},[C().currentGameId]),N=(0,r.useMemo)(function(){return C().currentGameId<C().games.length},[C().currentGameId,C().games.length]),A="jasspunkte"===f,k=(0,o.q_)({opacity:n?1:0,transform:"scale(".concat(n?1:.95,") rotate(").concat(c?"180deg":"0deg",")"),config:{mass:1,tension:300,friction:20}}),M=tb({initialPosition:0,maxOffset:100,position:"bottom"});(0,r.useEffect)(function(){0===C().games.length&&W.getState().startNewGame()},[]);var E=(0,r.useMemo)(function(){var t=C();return A?t.calculateTotalJassPoints():t.calculateTotalPoints()},[A,C]);(0,r.useEffect)(function(){h(E)},[E]),(0,r.useEffect)(function(){return n?(document.body.style.overflow="hidden",window.scrollTo({top:0,behavior:"smooth"})):document.body.style.overflow="",function(){document.body.style.overflow=""}},[n]),(0,r.useEffect)(function(){if(j.current){var t=j.current,e=t.scrollHeight;t.style.height=e+"px",setTimeout(function(){t.style.height="auto"},300)}},[A]),(0,r.useEffect)(function(){var t=W.subscribe(function(t){w.current=t}),e=K.subscribe(function(t){O.current=t});return function(){t(),e()}},[]);var D=(0,r.useCallback)(function(){T&&W.getState().navigateToPreviousGame()},[T]),R=(0,r.useCallback)(function(){var t=W.getState(),e=K.getState();if(!(e.topScore>0||e.bottomScore>0)){console.warn("Keine Punkte vorhanden");return}t.canNavigateForward()?t.navigateToNextGame():(t.finalizeGame(),e.resetGamePoints(),e.startNewGame(),t.startNewGame()),h(A?t.calculateTotalJassPoints():t.calculateTotalPoints())},[A]),G=tT(D),H=tT(R),z=function(t){ea.find(function(t){return t.id===f});var e=ea.findIndex(function(t){return t.id===f}),n="left"===t?(e+1)%ea.length:(e-1+ea.length)%ea.length,r=ea[n];m(r.id),M.animateSwipe(t),h(r.calculateData(W.getState()))};if(!n)return null;var F=(0,er.ZP)(new Date,"d.M.yyyy");return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",onClick:function(t){t.target===t.currentTarget&&i()},children:(0,s.jsxs)(o.q.div,{style:k,className:"relative w-11/12 max-w-md bg-gray-800 bg-opacity-95 rounded-xl p-6 shadow-lg select-none",onClick:function(t){return t.stopPropagation()},onTouchStart:function(t){y(t.targetTouches[0].clientX)},onTouchMove:function(t){S(t.targetTouches[0].clientX)},onTouchEnd:function(){if(b&&x){var t=b-x,e=t>50;(e||t<-50)&&z(e?"left":"right"),y(null),S(null)}},children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)(o.q.div,{style:{opacity:M.mainOpacity,transform:M.y.to(function(t){return"translateX(".concat(t,"px)")})},children:(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:(null===(e=ea.find(function(t){return t.id===f}))||void 0===e?void 0:e.title)||"Jassergebnis"})}),(0,s.jsx)("p",{className:"text-gray-400",children:F})]}),(0,s.jsx)("button",{onClick:function(){return l(!c)},className:"absolute bottom-full mb-[-10px] left-1/2 transform -translate-x-1/2 \n            text-white hover:text-gray-300 transition-all duration-1000\n            w-24 h-24 flex items-center justify-center\n            rounded-full\n            ".concat(c?"rotate-180":"rotate-0"),"aria-label":"Umdrehen",children:(0,s.jsx)(ty.bxQ,{className:"w-8 h-8"})}),(0,s.jsx)("button",{onClick:i,className:"absolute right-2 top-2 p-2 text-gray-400 hover:text-white",children:(0,s.jsx)(ty.q5L,{size:24})}),(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-2",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"text-center text-white col-span-2",children:"Team 1 "}),(0,s.jsx)("div",{className:"text-center text-white col-span-2",children:"Team 2 "})]}),(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-4",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{className:"text-center text-gray-400",children:"Spieler 1"}),(0,s.jsx)("div",{className:"text-center text-gray-400",children:"Spieler 2"}),(0,s.jsx)("div",{className:"text-center text-gray-400",children:"Spieler 3"}),(0,s.jsx)("div",{className:"text-center text-gray-400",children:"Spieler 4"})]}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto mb-4 border-t border-b border-gray-700",children:(0,s.jsx)("div",{className:"transition-[height] duration-300 ease-in-out",children:(0,s.jsx)(o.q.div,{style:{opacity:M.mainOpacity,transform:M.y.to(function(t){return"translateX(".concat(t,"px)")})},className:"text-white",children:C().games.length>0?(0,s.jsx)("div",{children:"striche"===f?(0,s.jsx)(eo,{teams:C().teams,games:P,currentGameId:C().currentGameId,onSwipe:z}):(0,s.jsx)(ei,{teams:C().teams,games:P,currentGameId:C().currentGameId,onSwipe:z})},"stats-container-".concat(f)):(0,s.jsx)(en,{spielNummer:1,topTeam:{striche:I(C().teams.top.striche),jassPoints:0},bottomTeam:{striche:I(C().teams.bottom.striche),jassPoints:0},showJassPoints:"jasspunkte"===f},"initial-resultat")})})}),(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-2",children:[(0,s.jsx)("div",{className:"text-gray-400 text-center",children:"Total:"}),(0,s.jsxs)(o.q.div,{className:"col-span-4 grid grid-cols-2 gap-4",style:{opacity:M.mainOpacity,transform:M.y.to(function(t){return"translateX(".concat(t,"px)")})},children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-white text-center",children:p.bottom}),(0,s.jsx)("div",{className:"text-2xl font-bold text-white text-center",children:p.top})]})]}),(0,s.jsx)("div",{className:"flex justify-center my-6",children:(0,s.jsxs)("div",{className:"flex justify-center items-center space-x-2 bg-gray-700/50 px-1.5 py-1 rounded-full",children:[(0,s.jsx)("div",{className:"striche"===f?"w-2 h-2 rounded-full bg-white/80 shadow-sm transition-all duration-200":"w-2 h-2 rounded-full bg-gray-500/50 transition-all duration-200"}),(0,s.jsx)("div",{className:"jasspunkte"===f?"w-2 h-2 rounded-full bg-white/80 shadow-sm transition-all duration-200":"w-2 h-2 rounded-full bg-gray-500/50 transition-all duration-200"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("button",el(el({},G.handlers),{},{disabled:!T,className:"\n              py-2 px-4 text-white rounded-xl font-bold\n              transition-all duration-150\n              ".concat(T?"bg-gray-600 hover:bg-gray-700 border-gray-900":"bg-gray-500 cursor-not-allowed opacity-50","\n              border-b-4 border-t border-l border-r\n              ").concat(G.buttonClasses,"\n            "),children:"Zur\xfcck"})),(0,s.jsx)("button",el(el({},H.handlers),{},{className:"\n              py-2 px-4 text-white rounded-xl font-bold\n              transition-all duration-150\n              bg-green-600 hover:bg-green-700 border-green-900\n              border-b-4 border-t border-l border-r\n              ".concat(H.buttonClasses,"\n            "),children:N?"N\xe4chstes Spiel":"Neues Spiel"}))]})]})})};function ed(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ep(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ep(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var eh=function(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://")},eg=function(t){var e=t.middleLineThickness,n=void 0===e?60:e,i=t.zShapeConfig,c=a(),l=ed((0,r.useState)(!1),2),u=l[0],f=l[1],m=ed((0,r.useState)(!1),2),d=m[0],p=m[1],h=ed((0,r.useState)(!1),2),g=h[0],b=h[1],y=ed((0,r.useState)(null),2),v=y[0],x=y[1],S=ed((0,r.useState)(!1),2),j=S[0],w=S[1],O=ed((0,r.useState)(!1),2),C=O[0],P=O[1],T=K(),N=T.topScore,A=T.bottomScore,I=T.navigateHistory,k=T.currentHistoryIndex,M=T.updateScore,E=T.currentPlayer,D=T.currentRound,R=T.restZahlen,G=(T.updateRestZahl,T.resetGame),H=T.isGameStarted,z=T.gameStartTime,F=T.roundStartTime,B=T.historyWarning,L=T.hideHistoryWarning,W=T.executePendingAction;(0,r.useEffect)(function(){f(!0),G()},[G]),(0,r.useEffect)(function(){b(!1)},[]);var Z=(0,r.useMemo)(function(){if(!u)return{topContainerHeight:0,bottomContainerHeight:0,middleLinePosition:0};var t=eh()?parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--safe-area-top")||"0"):0,e=c-t-(eh()?parseInt(window.getComputedStyle(document.documentElement).getPropertyValue("--safe-area-bottom")||"0"):0),n=Math.floor(e/2);return{topContainerHeight:n,bottomContainerHeight:n,middleLinePosition:Math.floor(e/2)+t}},[c,n,u]),U=Z.topContainerHeight,q=Z.bottomContainerHeight,J=Z.middleLinePosition,_=tb({initialPosition:0,maxOffset:.07*c,position:"top"}),V=_.y,$=_.mainOpacity,Y=_.oppositeOpacity,X=_.animateSwipe,Q=_.getBrightness,tt=tb({initialPosition:0,maxOffset:.07*c,position:"bottom"}),te=tt.y,tn=tt.mainOpacity,tr=tt.oppositeOpacity,to=tt.animateSwipe,ti=tt.getBrightness,ta=(0,r.useRef)(null),ts=(0,r.useRef)(null),tc=(0,r.useCallback)(function(t,e){if("left"===t||"right"===t){var n;n="top"===e?"left"===t?"forward":"backward":"left"===t?"backward":"forward",console.log("Navigiere in der Historie: ".concat(n)),I(n)}else"top"===e&&"up"===t||"bottom"===e&&"down"===t?(p(!0),X(!0),to(!0)):("top"===e&&"down"===t||"bottom"===e&&"up"===t)&&(p(!1),X(!1),to(!1))},[I,X,to]),tl=(0,r.useCallback)(function(t){d||(b(!0),x(t))},[d]),tu=(0,r.useCallback)(function(){b(!1),x(null)},[]);(0,r.useCallback)(function(t,e){I("left"===t?"forward":"backward"),"top"===e?X(t):to(t)},[I,X,to]);var tf=tz(),tm=tf.showMessage,td=tf.message,tp=tf.dismissMessage,tg=tf.hasShownIntro,ty=(0,tR.oQ)(tg),tv=ty.browserMessage,tx=ty.dismissMessage,tj=(0,r.useCallback)(function(t,e){M(e,t,0)},[M]),tw=(0,r.useCallback)(function(t){"top"===t?X("left"):to("left")},[X,to]),tC=t5((0,r.useCallback)(function(t){var e=t.clientY<window.innerHeight/2?"top":"bottom";w(!0),K.setState({lastDoubleClickPosition:e})},[]));return(0,r.useEffect)(function(){if(u){var t=setTimeout(function(){var t=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))},0),e=setTimeout(function(){var t=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))},100);return function(){clearTimeout(t),clearTimeout(e)}}},[u]),(0,r.useEffect)(function(){var t=function(){C&&window.scrollTo(0,0)};return window.addEventListener("scroll",t,{passive:!1}),function(){window.removeEventListener("scroll",t)}},[C]),(0,s.jsxs)("div",{className:"relative w-full h-full overflow-hidden bg-chalk-black prevent-interactions",onClick:tC,onContextMenu:function(t){return t.preventDefault()},children:[!H&&!d&&!tv.show&&!tm&&(0,s.jsx)(tF,{}),tm&&(0,s.jsx)(tO,{show:tm,message:td,onDismiss:tp}),!tm&&tv.show&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4 animate-fade-in",children:(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg max-w-xs w-full relative text-white",children:[(0,s.jsx)("p",{className:"text-lg mb-8 text-center",children:tv.message}),(0,s.jsx)("button",{onClick:tx,className:"bg-yellow-600 text-white px-6 py-2 rounded-full hover:bg-yellow-700 transition-colors w-full text-lg font-semibold",children:"Verstanden"})]})}),!tm&&!tv.show&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(th,{ref:ta,position:"top",height:U,zShapeConfig:i,padding:"paddingTop",onSwipe:tc,isOpen:d,y:V,mainOpacity:$,oppositeOpacity:Y,getBrightness:Q,onLongPress:function(){return tl("top")},score:N,isMenuOpen:d,onStrichClick:tj,triggerBlendEffect:tw,restZahl:R.top},"top-".concat(k)),(0,s.jsx)(o.q.div,{style:{position:"absolute",left:"5%",width:"90%",top:J-n/2,height:"".concat(n/2,"px"),transform:V.to(function(t){return"translateY(".concat(-t,"px)")})},className:"bg-chalk-red"}),(0,s.jsx)(o.q.div,{style:{position:"absolute",left:"5%",width:"90%",top:J,height:"".concat(n/2,"px"),transform:te.to(function(t){return"translateY(".concat(t,"px)")})},className:"bg-chalk-red"}),(0,s.jsx)(tZ,{currentPlayer:E,currentRound:D,opacity:$.get(),isOpen:d,isGameStarted:H,gameStartTime:z,roundStartTime:F}),(0,s.jsx)(th,{ref:ts,position:"bottom",height:q,zShapeConfig:i,padding:"paddingBottom",onSwipe:tc,isOpen:d,y:te,mainOpacity:tn,oppositeOpacity:tr,getBrightness:ti,onLongPress:function(){return tl("bottom")},score:A,isMenuOpen:d,onStrichClick:tj,triggerBlendEffect:tw,restZahl:R.bottom},"bottom-".concat(k)),g&&(0,s.jsx)(tS,{isOpen:g,onClose:tu,onSubmit:function(t,e){M(v,t,e),b(!1),x(null)},onCancel:tu,initialValue:0,clickedPosition:v}),(0,s.jsx)(t2,{isOpen:j,onClose:function(){return w(!1)}}),(0,s.jsx)(tD,{isOpen:d,onClose:function(){return p(!1)},setIsResultatOpen:P}),(0,s.jsx)(t4,{show:B.isVisible,message:B.message,onConfirm:W,onDismiss:L}),C&&(0,s.jsx)(em,{isOpen:C,onClose:function(){return P(!1)}})]})]})},eb=function(){return(0,s.jsx)("div",{className:"w-screen h-screen relative z-10",children:(0,s.jsx)(eg,{middleLineThickness:3,zShapeConfig:{innerSpacing:50,sideSpacing:0,edgeSpacing:70}})})}},8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(617)}])}},function(t){t.O(0,[130,740,888,774,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);